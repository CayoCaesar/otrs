!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t,e,n;return function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(t,e,n){function o(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=o},{}],2:[function(t,e,n){function o(t,e,n,o,r){var a=i.apply(this,arguments);return t.addEventListener(n,a,r),{destroy:function(){t.removeEventListener(n,a,r)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}var r=t("./closest");e.exports=o},{"./closest":1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},{}],4:[function(t,e,n){function o(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.fn(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return i(t,e,n);if(c.nodeList(t))return r(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var c=t("./is"),l=t("delegate");e.exports=o},{"./is":3,delegate:2}],5:[function(t,e,n){function o(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(t),o.removeAllRanges(),o.addRange(i),e=o.toString()}return e}e.exports=o},{}],6:[function(t,e,n){function o(){}o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function o(){i.off(t,o),e.apply(n,arguments)}var i=this;return o._=e,this.on(t,o,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;for(o;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,a=o.length;r<a;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}},e.exports=o},{}],7:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","select"],r);else if(void 0!==o)r(n,e("select"));else{var a={exports:{}};r(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return a(t,[{key:"resolveOptions",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function t(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function t(){var e=this,n="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[n?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function t(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function t(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function t(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function t(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function t(){this.removeFake()}},{key:"action",set:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function t(){return this._action}},{key:"target",set:function t(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function t(){return this._target}}]),t}();t.exports=c})},{select:5}],8:[function(e,n,o){!function(i,r){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if(void 0!==o)r(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};r(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var s=i(e),u=i(n),f=i(o),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t){function e(t,n){r(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.resolveOptions(n),o.listenClick(t),o}return c(e,t),h(e,[{key:"resolveOptions",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===d(e.container)?e.container:document.body}},{key:"listenClick",value:function t(e){var n=this;this.listener=(0,f.default)(e,"click",function(t){return n.onClick(t)})}},{key:"onClick",value:function t(e){var n=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(n),target:this.target(n),text:this.text(n),container:this.container,trigger:n,emitter:this})}},{key:"defaultAction",value:function t(e){return l("action",e)}},{key:"defaultTarget",value:function t(e){var n=l("target",e);if(n)return document.querySelector(n)}},{key:"defaultText",value:function t(e){return l("text",e)}},{key:"destroy",value:function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],n="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return n.forEach(function(t){o=o&&!!document.queryCommandSupported(t)}),o}}]),e}(u.default);t.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)});

"use strict";var Core=Core||{};Core.SystemConfiguration=(function(TargetNS){var ValueTypes=new Array();function SerializeData(Data){var QueryString='';$.each(Data,function(Key,Value){QueryString+=';'+encodeURIComponent(Key)+'='+encodeURIComponent(Value);});return QueryString;}
TargetNS.Init=function(){var Index,Type;$("button.RemoveButton").on("click",function(){$(this).blur();TargetNS.RemoveItem($(this));});$("button.AddArrayItem").on("click",function(){$(this).blur();TargetNS.AddArrayItem($(this));});$("button.AddHashKey").on("click",function(){$(this).blur();TargetNS.AddHashKeyClick($(this));});$("a.ResetSetting").on("click",function(){Core.Agent.Admin.SystemConfiguration.InitDialogReset($(this));return false;});$("a.RevertToHistoricalValue").on("click",function(){TargetNS.RevertToHistoricalValue($(this));return false;});$("input:checkbox").on("click",function(){TargetNS.CheckboxValueSet($(this));});$('.WidgetSimple.Setting').on('keydown','input, select, checkbox',function(Event){var $WidgetObj=$(this).closest('.WidgetSimple.Setting');if(!Event){return false;}
if($WidgetObj.hasClass('IsLockedByMe')){if(Event.keyCode&&Event.keyCode===13){if($(this).hasClass('Key')){$(this).closest('.HashItem').find('button.AddKey').trigger('click');}
else{$WidgetObj.find('button.Update').trigger('click');}
return false;}
else if(Event.keyCode&&Event.keyCode===27){$WidgetObj.find('button.Cancel').trigger('click');}}});TargetNS.InitButtonVisibility();for(Index in window["Core"]["SystemConfiguration"]){Type=typeof window["Core"]["SystemConfiguration"][Index];if(Type!="function"){ValueTypes.push(Index);}}
Core.App.Subscribe('SystemConfiguration.SettingListUpdate',function(){if(!$('.WidgetSimple.Setting:visible').length){$('#EditAll, #SaveAll, #CancelAll').prop('disabled',true).addClass('Disabled');}
else{$('#EditAll, #SaveAll, #CancelAll').prop('disabled',false).removeClass('Disabled');}
if(!$('.WidgetSimple.Setting.IsLockedByMe:visible').length){$('#SaveAll, #CancelAll').prop('disabled',true).addClass('Disabled');}
else{$('#SaveAll, #CancelAll').prop('disabled',false).removeClass('Disabled');}});Core.UI.Table.InitTableFilter($("#FilterUsers"),$("#Users"));};TargetNS.InitConfigurationTree=function(RedirectAction,Category,UserModificationActive){var Data={Action:'AdminSystemConfiguration',Subaction:'AJAXNavigationTree',Category:Category||$('#Category').val(),UserModificationActive:UserModificationActive};if(Core.Config.Get('Action')=='AgentPreferences'){Data.Action='AgentPreferences';}
if($('#Category option').length<=2){$('.SystemConfigurationCategories').hide();$('.SystemConfigurationCategories').next('.CallForAction').hide();$('#Category').val('All').trigger('change');Data["Category"]='All';}
$('#ConfigTree').on('click','.OpenNodeInNewWindow',function(Event){window.open(Core.Config.Get('CGIHandle')+'?Action=AdminSystemConfigurationGroup;RootNavigation='+$(this).data('node'),'_blank');Event.preventDefault;return false;});if(Core.Config.Get('Action')=='AgentPreferences'){Data["IsValid"]=1;}
if(!$('#ConfigTree').length){return false;}
Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){var Group,SelectedNode=$('#SelectedNode').val(),Data={'Action':RedirectAction};if($('#ConfigTree').hasClass('jstree')){$('#ConfigTree').jstree('destroy');$('#ConfigTree').empty();}
$('#ConfigTree').html(HTML);$('#ConfigTree')
.jstree({core:{multiple:false,animation:70,themes:{name:'InputField',variant:'Tree',icons:false,dots:false,url:false}},search:{show_only_matches:true,show_only_matches_children:true},plugins:['search','wholerow']})
.on('after_open.jstree',function(Node,Selected,Event){Core.UI.InitStickyElement();})
.on('after_close.jstree',function(Node,Selected,Event){Core.UI.InitStickyElement();})
.on('hover_node.jstree',function(Node,Selected,Event){$('#ConfigTree #'+Core.App.EscapeSelector(Selected.node.id)).children('a').append('<span class="OpenNodeInNewWindow" title="'+Core.Language.Translate('Open this node in a new window')+'" data-node="'+Selected.node.id+'"><i class="fa fa-external-link"></i></span>').find('.OpenNodeInNewWindow').fadeIn();})
.on('dehover_node.jstree',function(Node,Selected,Event){$('#ConfigTree #'+Core.App.EscapeSelector(Selected.node.id)).find('.OpenNodeInNewWindow').remove();});if(SelectedNode){$('#ConfigTree').jstree('select_node',SelectedNode);}
$('#ConfigTree')
.on('select_node.jstree',function(Node,Selected,Event){$('.ContentColumn').html(Core.Template.Render("Agent/WidgetLoading"));Data["RootNavigation"]=Selected.node.id;Group=$("input#Group").val();if(Group!=""){Data["Subaction"]="Group";Data["Group"]=Group;}
Data.Category=$('#Category').val();if($('#CurrentUserID').val()){Data.EditUserID=parseInt($('#CurrentUserID').val(),10);}
SettingList(Selected.selected[0]);return false;});$("#ConfigTreeSearch").on('keyup keydown',function(){$('#ConfigTree').jstree('search',$(this).val());});},'html');};TargetNS.Update=function($Object,ToggleValid,ToggleUserModification){var
URL,Data={},Action,Key,Value,$Widget=$Object.closest(".WidgetSimple"),SettingName=$Widget.find("input[name='SettingName']").val(),ValidationError,IsValid,UserModificationActive,Item,$InvalidElement;if($Widget.find('button.AddKey:visible').length){alert(Core.Language.Translate('Please add values for all keys before saving the setting.'));return;}
CheckIDs($Widget);$Widget
.find('form')
.find('input:not(:checkbox):not(:file):not([name=SettingName]):not(.Key):not(.InputField_Search),'+
' textarea, select, div.Array, div.Hash, .AddArrayItem, .AddHashKey, div.WorkingHoursItem input')
.filter(':not([disabled=disabled])')
.each(function(){var FullName=$(this).attr('id'),Value,$Container,ValueType;if($(this).hasClass("hasDatepicker")){return;}
if($(this).is('div')){return;}
if(!Core.Form.Validate.ValidateElement($(this))){ValidationError=1;Core.Form.Validate.HighlightError(this,"Error");$(this).on("change",function(){Core.Form.Validate.UnHighlightError(this);});return;}
for(Item in ValueTypes){if($(this).hasClass(ValueTypes[Item])){ValueType=ValueTypes[Item];break;}}
if($(this).hasClass("AddArrayItem")){$Container=$(this).closest(".Array");if($Container.find("> .ArrayItem").length==0){if($Container.hasClass("VacationDaysArray")||$Container.hasClass("VacationDaysOneTimeArray")){Value={};}
else{Value=[];}
FullName=SettingName+$(this).attr("data-suffix");FullName=FullName.substr(0,FullName.lastIndexOf("_Array"));}
else{return;}}
else if($(this).hasClass("AddHashKey")){if($(this).closest(".Hash").find("> .HashItem > .SettingContent").length==0){Value={};FullName=SettingName+$(this).attr("data-suffix");FullName=FullName.substr(0,FullName.lastIndexOf("_Hash"));}
else{return;}}
else if(ValueType!=null){Value=window["Core"]["SystemConfiguration"][ValueType]["ValueGet"]($(this));if(Value==null){return;}}
else if($(this).is('select')){Value=$(this).find('option:selected').val();}
else if(Value===undefined){Value=$(this).val();}
if($(this).parent().parent().hasClass("HashItem")){Key=$(this).parent().parent().find(".Key").val();Key=Core.App.EscapeHTML(Key);FullName=FullName.substr(0,FullName.lastIndexOf("###"));FullName+="###"+Key;}
Data[SettingName]=ValueSet(Data[SettingName],FullName,Value);});if(ValidationError){$InvalidElement=$Widget.find('.Error:first');$('html, body').animate({scrollTop:$InvalidElement.offset().top-100},'slow');$InvalidElement.focus();return;}
Value={EffectiveValue:Core.JSON.Stringify(Data[SettingName])};Core.UI.WidgetOverlayShow($Widget,'Loading');if(Core.Config.Get('Action')=='AgentPreferences'){Action='AgentPreferences';}
else{Action='AdminSystemConfigurationGroup';}
URL=Core.Config.Get('Baselink')+
'Action='+Action+
';Subaction=SettingUpdate;'+
'SettingName='+encodeURIComponent(SettingName)+
';ChallengeToken='+Core.Config.Get('ChallengeToken');if(ToggleValid){IsValid=0;if($Widget.find(".SettingDisabled:visible").length||$Widget.find(".SettingEnable:visible").length){IsValid=1;}
URL+=';IsValid='+IsValid;}
if(ToggleUserModification){UserModificationActive=0;if($Widget.find(".UserModificationNotActive:visible").length){UserModificationActive=1;}
URL+=';UserModificationActive='+UserModificationActive;}
Core.AJAX.FunctionCall(URL,Value,function(Response){TargetNS.CleanWidgetClasses($Widget);TargetNS.SettingRender(Response,$Widget);if(Response.Data.SettingData.IsDirty){Core.UI.ShowNotification(Core.Language.Translate('You have undeployed settings, would you like to deploy them?'),'Notice','Action=AdminSystemConfigurationDeployment;Subaction=Deployment',function(){Core.UI.InitStickyElement();});}
else if(Response.Data.DeploymentNeeded==0){Core.UI.HideNotification(Core.Language.Translate('You have undeployed settings, would you like to deploy them?'),'Notice',function(){Core.UI.InitStickyElement();});}
Core.UI.WidgetOverlayHide($Widget,Response.Data.Error===undefined);});}
function ValueSet(Data,Name,Value){var Result=Data,StructureArray=Name.split(/_(?=Array|Hash)/),HashKey,SettingName=StructureArray.shift(),Structure,ArrayIndex,SubName,RemoveIndexes=[],Item;if(StructureArray.length){Structure=StructureArray.shift();if(Structure.match(/Array\d+/)){ArrayIndex=Structure.match(/\d+/)[0];ArrayIndex--;if(Result===undefined){Result=[];}
while(Result.length<ArrayIndex){RemoveIndexes.push(Result.length);Result.push("");}
if(StructureArray.length==0){Result.push(Value);}
else{SubName=StructureArray.join("_");if(SubName!=""){SubName="_"+SubName;}
SubName=SettingName+SubName;if(Result.length<ArrayIndex){Result.push(ValueSet(undefined,SubName,Value));}
else{Result[ArrayIndex]=ValueSet(Result[ArrayIndex],SubName,Value);}}
if(RemoveIndexes.length){RemoveIndexes.reverse();for(ArrayIndex in RemoveIndexes){Result.splice(RemoveIndexes[ArrayIndex],1);}}}
else if(Structure.match(/Hash/)){HashKey=Structure.match(/###(.*?)$/)[1];if(Result===undefined){Result={};}
if(StructureArray.length==0){Result[HashKey]=Value;}
else{SubName=StructureArray.join("_");if(SubName!=""){SubName="_"+SubName;}
SubName=SettingName+SubName;if(Result[HashKey]===undefined){Result[HashKey]=ValueSet(undefined,SubName,Value);}
else{Result[HashKey]=ValueSet(Result[HashKey],SubName,Value);}}}
else{Result=Value;}}
else{if($.isArray(Value)){if(Result===undefined){Result=[];}
for(Item in Value){Result.push(ValueSet(Result[Item],"",Value[Item]));}}
else if(typeof Value=="object"){if(Result===undefined){Result={};}
for(Item in Value){Result[Item]=ValueSet(Result[Item],"",Value[Item]);}}
else{Result=Value;}}
return Result;}
TargetNS.RemoveItem=function($Object){var $Div=$Object.closest(".Array, .Hash");$Object.closest("div")
.remove();CheckMinItems($Div);CheckMaxItems($Div);}
TargetNS.AddArrayItem=function($Object){var
Data='Action=AdminSystemConfigurationGroup;Subaction=AddArrayItem;',$Widget=$Object.closest(".WidgetSimple"),$SettingName=$Widget.find("input[name='SettingName']"),IDSuffix=$Object.attr("data-suffix"),Structure=StructureGet($Object);if($Widget.find(".AJAXLoader:visible").length>0){return;}
Data+='SettingName='+encodeURIComponent($SettingName.val())+';';Data+='IDSuffix='+encodeURIComponent(IDSuffix)+';';Data+='Structure='+encodeURIComponent(Structure)+';';Core.UI.WidgetOverlayShow($Widget,'Loading');Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){var Suffix=$Object.attr("data-suffix"),SuffixID=Suffix.match(/\d+$/)[0],$Array=$Object.parent(),RemoveButton,Key="",ElementSuffix;if(Response.Error){alert(Response.Error);$Widget.find(".AJAXLoader").hide();return;}
if(Response.Item){$Object.before(Core.Template.Render("SysConfig/AddArrayItem"));$Array.find(".ArrayItem:last").append(Response.Item);RemoveButton=Core.Template.Render("SysConfig/RemoveButton");$Array.find("> .ArrayItem:last, > .ArrayItem:last .ArrayItem")
.append(RemoveButton);$Array.find("> .ArrayItem:last .RemoveButton")
.show()
.on("click",function(){TargetNS.RemoveItem($(this).closest("div"));});$Array.find("> .ArrayItem:last .Array,> .ArrayItem:last .Hash").each(function(){var Count=0,Suffix=[],$Element=$(this),$HashItem=$(this).closest(".HashItem");if($HashItem.length){Key=$HashItem.find(".Key").val();}
while(!$Array.is($Element)){Count=$Element.find("> .Array > .ArrayItem, > .Hash > .HashItem, > .ArrayItem, > .HashItem").length;Count++;if($Element.hasClass("Array")){Suffix.push("_Array"+Count);}
else{Suffix.push("_Hash###"+Key);}
$Element=$Element.parent().closest(".Hash, .Array");}
Suffix.shift();ElementSuffix=IDSuffix+Suffix.join("");$(this).find("> .ArrayItem:last").after(Core.Template.Render("SysConfig/AddButton",{Suffix:ElementSuffix+"_Array"+Count,Class:'AddArrayItem'}));$(this).find("> .HashItem:last").after(Core.Template.Render("SysConfig/AddButton",{Suffix:ElementSuffix+"_Hash###",Class:'AddHashKey'}));$(this).find("> button.AddArrayItem")
.show()
.off("click")
.on("click",function(){TargetNS.AddArrayItem($(this));});$(this).find("button.AddKey")
.show()
.off("click")
.on("click",function(){AddHashKey($(this));});$(this).find("> button.AddHashKey")
.show()
.off("click")
.on("click",function(){TargetNS.AddHashKeyClick($(this));});});Core.UI.InputFields.InitSelect($Array.find("> .ArrayItem:last .Modernize"));$Array.find("> .ArrayItem:last input:checkbox").on("change",function(){TargetNS.CheckboxValueSet($(this));});}
CheckMinItems($Object);CheckMaxItems($Object);SuffixID++;Suffix=Suffix.replace(/\d+$/,SuffixID);$Object.attr("data-suffix",Suffix);Core.UI.WidgetOverlayHide($Widget);});}
TargetNS.AddHashKeyClick=function($Object){var $Widget=$Object.closest(".WidgetSimple"),RemoveButton=Core.Template.Render("SysConfig/RemoveButton");if($Widget.find(".AJAXLoader:visible").length>0){return;}
Core.UI.WidgetOverlayShow($Widget,'Loading');$Object.before(Core.Template.Render("SysConfig/AddHashKey",{'IDSuffix':$Object.attr("data-suffix")}));$Object
.closest("div")
.find("button.AddKey:last")
.off("click")
.on("click",function(){AddHashKey($(this));})
.after(RemoveButton);$Object
.closest("div")
.find("button.RemoveButton:last").on("click",function(){TargetNS.RemoveItem($(this).closest("div"));});CheckMinItems($Object);CheckMaxItems($Object);Core.UI.WidgetOverlayHide($Widget);}
function AddHashKey($Object){var
$Widget=$Object.closest(".WidgetSimple"),$HashItem=$Object.parent(),$KeyElement=$HashItem.find(".Key"),Key=$KeyElement.val(),Name=$Widget.find("input[name='SettingName']").val(),Data='Action=AdminSystemConfigurationGroup;Subaction=AddHashKey;',IDSuffix=$KeyElement.attr("data-suffix")+Key,Structure=StructureGet($Object);if($Widget.find(".AJAXLoader:visible").length>0){return;}
if(!$KeyElement.val()){alert(Core.Language.Translate('The key must not be empty.'));return;}
if($HashItem.closest(".Hash").find("> .HashItem >.Key").filter(function(){return $(this).val()===Key;}).length>1){alert(Core.Language.Translate("A key with this name ('%s') already exists.",Key));return;}
Data+='Key='+encodeURIComponent(Key)+';';Data+='SettingName='+encodeURIComponent($Widget.find("input[name='SettingName']").val());Data+=';IDSuffix='+encodeURIComponent(IDSuffix)+';';Data+='Structure='+encodeURIComponent(Structure)+';';Core.UI.WidgetOverlayShow($Widget,'Loading');Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){var $Hash=$Object.closest(".Hash"),RemoveButton,Key="";if(Response.Error){alert(Response.Error);$Widget.find(".AJAXLoader").hide();return;}
if(Response.Item){$HashItem.find("input").attr("name",Name+"Key[]");$HashItem.find("button.AddKey").remove();$HashItem.append(Response.Item);RemoveButton=Core.Template.Render("SysConfig/RemoveButton");$HashItem.append(RemoveButton);$HashItem.find(".ArrayItem")
.append(RemoveButton);$HashItem.find(".RemoveButton")
.show()
.on("click",function(){TargetNS.RemoveItem($(this).closest("div"));});$HashItem.find(".Array, .Hash").each(function(){var Count=0,Suffix=[],$Element=$(this),$ClosestHashItem=$(this).closest(".HashItem"),ElementSuffix;if($ClosestHashItem.length){Key=$ClosestHashItem.find(".Key").val();}
while(!$Hash.is($Element)){Count=$Element.find("> .Array > .ArrayItem, > .Hash > .HashItem, > .ArrayItem, > .HashItem").length;Count++;if($Element.hasClass("Array")){Suffix.push("_Array"+Count);}
else{Suffix.push("_Hash###"+Key);}
$Element=$Element.parent().closest(".Hash, .Array");}
Suffix.shift();ElementSuffix=IDSuffix+Suffix.join("");$(this).find("> .ArrayItem").after(Core.Template.Render("SysConfig/AddButton",{Suffix:ElementSuffix+"_Array"+Count,Class:'AddArrayItem'}));$(this).find("> .HashItem").after(Core.Template.Render("SysConfig/AddButton",{Suffix:ElementSuffix+"_Hash###",Class:'AddHashKey'}));$HashItem.find("button.AddArrayItem")
.show()
.off("click")
.on("click",function(){TargetNS.AddArrayItem($(this));});$Hash.find("button.AddKey")
.show()
.off("click")
.on("click",function(){AddHashKey($(this));});$HashItem.find("button.AddHashKey")
.show()
.off("click")
.on("click",function(){TargetNS.AddHashKeyClick($(this));});});$Hash.find("input:checkbox").on("change",function(){TargetNS.CheckboxValueSet($(this));});Core.UI.InputFields.InitSelect($Hash.find(".Modernize"));$KeyElement.attr("readonly","readonly");}
Core.UI.WidgetOverlayHide($Widget);});}
TargetNS.SettingReset=function($Object,ResetOptions){var $Widget=$Object.closest(".WidgetSimple"),$SettingName=$Widget.find("input[name='SettingName']"),Data='Action=AdminSystemConfigurationGroup;Subaction=SettingReset;';Data+='SettingName='+encodeURIComponent($SettingName.val())+';';Data+='ResetOptions='+encodeURIComponent(ResetOptions)+';';Core.UI.WidgetOverlayShow($Widget,'Loading');Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){TargetNS.SettingRender(Response,$Widget);TargetNS.CleanWidgetClasses($Widget);if(Response.Data.SettingData.IsDirty){$Widget.addClass('IsDirty');}
if(Response.Error===undefined){Core.UI.WidgetOverlayHide($Widget,true);if(Response.DeploymentNeeded==0){Core.UI.HideNotification(Core.Language.Translate('You have undeployed settings, would you like to deploy them?'),'Notice',function(){Core.UI.InitStickyElement();});}
else{Core.UI.ShowNotification(Core.Language.Translate('You have undeployed settings, would you like to deploy them?'),'Notice','Action=AdminSystemConfigurationDeployment;Subaction=Deployment',function(){Core.UI.InitStickyElement();});}}
Core.App.Publish('SystemConfiguration.SettingListUpdate');});}
TargetNS.RevertToHistoricalValue=function($Object){var $SettingName=$("#SettingName"),URL=Core.Config.Get('Baselink')+'Action=AdminSystemConfigurationSettingHistory;Subaction=RevertToHistoricalValue;';URL+='SettingName='+encodeURIComponent($SettingName.attr('value'))+';';URL+='ModifiedVersionID='+encodeURIComponent($Object.attr('value'));URL+=SerializeData(Core.App.GetSessionInformation());if(window.confirm(Core.Language.Translate("Do you really want to revert this setting to its historical value?"))){window.location=URL;}
return false;}
TargetNS.CheckboxValueSet=function($Object){$Object
.next()
.val($Object.is(":checked")?1:0);}
TargetNS.CleanWidgetClasses=function($Widget){$Widget.removeClass('IsLockedByMe IsDirty IsModified IsLockedByAnotherUser');}
TargetNS.SettingRender=function(Response,$Widget){var $EditLink=$Widget.find(".SettingEdit");$Widget.find("fieldset").html(Response.Data.HTMLStrg);$EditLink.find("i").removeClass();$EditLink.removeClass();if(Response.Data.SettingData.ExclusiveLockGUID=="0"){$EditLink.find("i").addClass("fa fa-pencil-square-o");$EditLink.addClass("SettingEdit Unlocked");$EditLink.attr("title",Core.Language.Translate("Edit this setting"));}
else{$EditLink.find("i").addClass("fa fa-unlock");$EditLink.addClass("SettingEdit Locked");$EditLink.attr("title",Core.Language.Translate("Unlock setting."));$Widget.find("fieldset .Update").on("click",function(){TargetNS.Update($(this),0,0);});$Widget.find("fieldset .Cancel").off("click").on("click",function(){Core.Agent.Admin.SystemConfiguration.Cancel($(this));return false;});TargetNS.InitButtonVisibility($Widget);$Widget.find("button.AddArrayItem").on("click",function(){$(this).blur();TargetNS.AddArrayItem($(this));});$Widget.find("button.AddHashKey").on("click",function(){$(this).blur();TargetNS.AddHashKeyClick($(this));});$Widget.find(".RemoveButton").on("click",function(){TargetNS.RemoveItem($(this).closest("div"));});}
if(Response.Data.SettingData.IsValid=='1'){$Widget.find(".Header .Icon i")
.addClass("Hidden");$Widget.find(".SettingDisabled").addClass("Hidden");$Widget.find(".SettingEnabled").removeClass("Hidden");$Widget.removeClass("IsDisabled");}
else{$Widget.find(".Header .Icon i")
.removeClass("Hidden");$Widget.find(".SettingDisabled").removeClass("Hidden");$Widget.find(".SettingEnabled").addClass("Hidden");$Widget.addClass("IsDisabled");}
if(Response.Data.SettingData.UserModificationActive=='1'){$Widget.find(".UserModificationNotActive").addClass("Hidden");$Widget.find(".UserModificationActive").removeClass("Hidden");}
else{$Widget.find(".UserModificationNotActive").removeClass("Hidden");$Widget.find(".UserModificationActive").addClass("Hidden");}
if(Response.Data.Error!=null){alert(Response.Data.Error);}
if(Response.Data.HTMLStrg.indexOf("<select")>-1){Core.UI.InputFields.Activate($Widget.find("fieldset"));}
if(Response.Data.SettingData.IsModified){$Widget.addClass('IsModified');$Widget.find("button.ResetSetting").show();$Widget.find(".ResetUserSetting").removeClass("Hidden");}
else{$Widget.removeClass('IsModified');$Widget.find(".ResetUserSetting").addClass("Hidden");}
if(Response.Data.SettingData.IsDirty){$Widget.addClass('IsDirty');}
if($Widget.hasClass('MenuExpanded')){$Widget.find('.WidgetMessage.Bottom').show();}
$Widget.find("a.ResetSetting")
.off("click")
.on("click",function(){Core.Agent.Admin.SystemConfiguration.InitDialogReset($(this));return false;});if(Response.Data.SettingData.IsLockedByMe=="1"){$Widget.addClass('IsLockedByMe');}
if(Response.Data.SettingData.Invalid!="1"){$Widget.find(".Icon .fa-check-circle-o").removeClass("Hidden");}
$Widget.find("input:checkbox")
.off("change")
.on("change",function(){TargetNS.CheckboxValueSet($(this));});}
function CheckMinItems($Object){var $Structure=$Object,MinItems;if(!$Structure.hasClass("Array")&&!$Structure.hasClass("Hash")){$Structure=$Object.closest(".Array, .Hash");}
MinItems=$Structure.attr("data-min-items");if(MinItems!==undefined){if($Structure.find("> .ArrayItem, > .HashItem").length<=MinItems){$Structure.find("> .ArrayItem .RemoveButton, > .HashItem .RemoveButton").hide();}
else{$Structure.find("> .ArrayItem .RemoveButton, > .HashItem .RemoveButton").show();}}
else{$Structure.find("> .ArrayItem .RemoveButton, > .HashItem .RemoveButton").show();}}
function CheckMaxItems($Object){var $Structure=$Object,MaxItems;if(!$Structure.hasClass("Array")&&!$Structure.hasClass("Hash")){$Structure=$Object.closest(".Array, .Hash");}
MaxItems=$Structure.attr("data-max-items");if(MaxItems!==undefined){if($Structure.find("> .ArrayItem, > .HashItem").length>=MaxItems){$Structure.find("> .AddArrayItem, > .AddHashKey").hide();}
else{$Structure.find("> .AddArrayItem:not(.Hidden), > .AddHashKey:not(.Hidden)").show();}}
else{$Structure.find("> .AddArrayItem:not(.Hidden), > .AddHashKey:not(.Hidden)").show();}}
function StructureGet($Object,Structure){var Result="",$Item;if(Structure){Result=Structure;}
$Item=$Object.parent().closest(".Array, .Hash, .Setting");if($Item.hasClass("Setting")){return Result;}
else if($Item.hasClass("Array")){if(Result){Result+='.';}
Result+="Array";}
else if($Item.hasClass("Hash")){if(Result){Result+='.';}
Result+="Hash";}
return StructureGet($Item,Result);}
function CheckIDs($Object){$Object.find(".Entry, .AddArrayItem").each(function(){var OldID,ID,Key,SubString,Count=0,$ClosestItem,ValueType,Index;if($(this).hasClass("Entry")){OldID=$(this).attr("id");}
else{OldID=$(this).attr("data-suffix");}
ID=OldID;for(Index in ValueTypes){if($(this).hasClass(ValueTypes[Index])){ValueType=ValueTypes[Index];break;}}
if(ID.indexOf("_Hash###")>0){while(ID.indexOf("_Hash###")>0){SubString=ID.match(/(_Hash###.*?)(_Array|_Hash|Day$|Month$|Year$|Hour$|Minute$|$)/)[1];ID=ID.replace(SubString,"_PLACEHOLDER"+Count);Count++;}
$ClosestItem=$(this).closest(".HashItem");while(Count>0){Count--;Key=$ClosestItem.find(".Key").val();Key=Core.App.EscapeHTML(Key);ID=ID.replace("_PLACEHOLDER"+Count,"_Hash###"+Key);$ClosestItem=$ClosestItem.parent().closest(".HashItem");}
if($(this).hasClass("Entry")){$(this).attr("id",ID);}
else{$(this).attr("data-suffix",ID);}}
if(ID.indexOf("_Array")>=0){$(this).closest('.Array').find(".ArrayItem").each(function(){Count=0;$(this).find(".SettingContent input:visible:not(.InputField_Search), "+
".SettingContent select:visible, .SettingContent select.Modernize, "+
".SettingContent textarea:visible").each(function(){var OldID=$(this).attr('id');ID=OldID;while(ID.indexOf("_Array")>=0){SubString=ID.match(/(_Array\d+)/)[1];ID=ID.replace(SubString,"_PLACEHOLDER"+Count);Count++;}
$ClosestItem=$(this).closest('.ArrayItem');while(Count>0){Count--;Key=$ClosestItem.index()+1;ID=ID.replace("_PLACEHOLDER"+Count,"_Array"+Key);$(this).attr('id',ID);$ClosestItem=$ClosestItem.parent().closest(".ArrayItem");}
if(OldID!=ID&&ValueType){if(window["Core"]["SystemConfiguration"][ValueType]["CheckID"]){window["Core"]["SystemConfiguration"][ValueType]["CheckID"]($(this),OldID);}}});});}});}
TargetNS.InitButtonVisibility=function($Object){if($Object===undefined){$Object=$(document);}
$Object.find(".Hash[data-min-items], .Array[data-min-items]").each(function(){CheckMinItems($(this));});$Object.find(".Hash[data-max-items], .Array[data-max-items]").each(function(){CheckMaxItems($(this));});$Object.find(".Hash:not([data-min-items]), .Array:not([data-min-items])").each(function(){$(this).find("> .ArrayItem > .RemoveButton, > .HashItem > .RemoveButton").show();});$Object.find(".Hash:not([data-max-items]), .Array:not([data-max-items])").each(function(){$(this)
.find("> .AddHashKey:not(.Hidden), > .AddArrayItem:not(.Hidden)").show();});}
function SettingList(Selected){var Data,Action='AdminSystemConfigurationGroup',BreadCrumbItems,ListItem,URL=Core.Config.Get('CGIHandle'),Index;$('.ContentColumn').html(Core.Template.Render("Agent/WidgetLoading"));$('ul.BreadCrumb li:nth-child(2)').nextAll().remove();BreadCrumbItems=Selected.split("::");if(Core.Config.Get('Action')=='AgentPreferences'){URL+="?Action=AgentPreferences;Subaction=Group;Group=Advanced;RootNavigation=";}
else{URL+="?Action=AdminSystemConfigurationGroup;RootNavigation=";}
for(Index in BreadCrumbItems){if(Index!=0){URL+="::";}
URL+=BreadCrumbItems[Index];ListItem=Core.Template.Render("SysConfig/BreadCrumbItem",{Title:BreadCrumbItems[Index],URL:URL});$('ul.BreadCrumb').append(ListItem);}
if(Core.Config.Get('Action')=='AgentPreferences'){Action="AgentPreferences";}
window.history.pushState(null,null,URL);Data={Action:Action,Subaction:'SettingList',Category:$('#Category').val(),RootNavigation:Selected};if(Core.Config.Get('Action')=='AgentPreferences'){Data["IsValid"]=1;Data["Group"]='Advanced';}
if(!$('#ConfigTree').length){return;}
Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){$(".ContentColumn").html(HTML);TargetNS.Init();if(Core.Config.Get('Action')=='AgentPreferences'){Core.Agent.Preferences.InitSysConfig();Core.UI.Table.InitTableFilter($("#FilterSettings"),$(".SettingsList"));}
else{Core.Agent.Admin.SystemConfiguration.InitGroupView(true);}
if($('.WidgetSimple .Setting').length){$('#UserWidgetState_SystemConfiguration_Help, #UserWidgetState_SystemConfiguration_Sticky').removeClass('Hidden');}
else{$('#UserWidgetState_SystemConfiguration_Help, #UserWidgetState_SystemConfiguration_Sticky').addClass('Hidden');}
Core.UI.InitStickyElement();Core.App.Publish('SystemConfiguration.SettingListUpdate');Core.UI.InputFields.InitSelect($(".SettingsList .Modernize"));$('html, body').animate({scrollTop:$('.ContentColumn .WidgetSimple').first().position().top},'fast');},'html');window.setTimeout(function(){Core.Agent.Admin.SystemConfiguration.InitFavourites();},1000);}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration||{}));

"use strict";var Core=Core||{};Core.SystemConfiguration=Core.SystemConfiguration||{};Core.SystemConfiguration.Date=(function(TargetNS){TargetNS.ValueGet=function($Object){var Value;if($Object.attr("name").endsWith("Day")){Value=DateValueGet($Object);}
return Value;};TargetNS.CheckID=function($Object,OldID){var ID,OldSubID,SubID,Class,ErrorDivID;if($Object.hasClass("Entry")){ID=$Object.attr("id");}
else{ID=$Object.attr("data-suffix");}
if(!OldID.endsWith("Day")){return;}
SubID=ID.substr(0,ID.length-3);OldSubID=OldID.substr(0,OldID.length-3);Class=$Object.attr("class");Class=Class.replace("Validate_DateYear_"+OldSubID+"Year","Validate_DateYear_"+SubID+"Year");Class=Class.replace("Validate_DateMonth_"+OldSubID+"Month","Validate_DateMonth_"+SubID+"Month");$Object.attr("class",Class);OldSubID=Core.App.EscapeSelector(OldSubID);ErrorDivID=$('div#'+OldSubID+"YearError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"YearError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"MonthError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"MonthError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"DayError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"DayError").attr('id',ErrorDivID);};function DateValueGet($Object){var
Day,Month,Year,Prefix,Result;Prefix=$Object.attr("id");Prefix=Prefix.substr(0,Prefix.length-3);Prefix=Core.App.EscapeSelector(Prefix);if($Object.is('select')){Day=$Object.find("option:selected").val();if(Day<10){Day="0"+Day;}
Month=$("#"+Prefix+"Month").find("option:selected").val();if(Month<10){Month="0"+Month;}
Year=$("#"+Prefix+"Year").find("option:selected").val();}
else{Day=$Object.val();Month=$("#"+Prefix+"Month").val();Year=$("#"+Prefix+"Year").val();}
Result=Year+"-"+Month+"-"+Day;return Result;}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration.Date||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Admin=Core.Agent.Admin||{};Core.Agent.Admin.SystemConfiguration=(function(TargetNS){TargetNS.OpenSearchDialog=function(){var Data={Action:'AdminSystemConfiguration',Subaction:'SearchDialog',Term:$('#SystemConfigurationEditSearch').data('term'),Category:$('#SystemConfigurationEditSearch').data('category')};Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'10px','Center',true);Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowContentDialog(HTML,Core.Language.Translate('Search the System Configuration'),'10px','Center',true);$('.AdminSystemConfigurationSearchForm').off('keypress.FilterInput').on('keypress.FilterInput',function(Event){if((Event.charCode||Event.keyCode)===13){$('#SearchFormSubmit').trigger('click');return false;}});$('#SearchFormSubmit').off('click.StartSearch').on('click.StartSearch',function(){if(!$('.AdminSystemConfigurationSearchForm input[name=Search]').val()){alert(Core.Language.Translate('Please enter at least one search word to find anything.'));return false;}
$('.AdminSystemConfigurationSearchForm').submit();Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'10px','Center',true);});},'html');};TargetNS.InitDialogDeployment=function(){function DeploymentLock(){var $DialogObj=$('#DialogDeployment'),$DialogFooterObj=$DialogObj.closest('.Dialog').find('.ContentFooter');$DialogFooterObj.children('div').hide();$DialogObj.find('.Overlay.Preparing i.Error').hide();$DialogObj.find('.Overlay.Preparing i.Active').fadeIn();$DialogObj.find('.Overlay.Preparing em').text(Core.Language.Translate("Preparing to deploy, please wait..."));Core.AJAX.FunctionCall(Core.Config.Get('Baselink')+'Action=AdminSystemConfigurationDeployment;Subaction=AJAXDeploymentIsLocked',{},function(Response){var $DialogObj=$('#DialogDeployment'),$DialogFooterObj=$DialogObj.closest('.Dialog').find('.ContentFooter');if(Response&&parseInt(Response,10)===-1){$DialogObj.find('.Overlay.Preparing').fadeOut();$DialogObj.find('#DeploymentComment').fadeIn();$DialogFooterObj.find('.ButtonsRegular').fadeIn();}
else{$DialogObj.find('.Overlay.Preparing i.Active').hide();$DialogObj.find('.Overlay.Preparing i.Error').fadeIn();$DialogObj.find('.Overlay.Preparing em').text(Core.Language.Translate("Unfortunately deploying is currently not possible, maybe because another agent is already deploying. Please try again later."));$DialogFooterObj.find('.ButtonsTryAgain').fadeIn();$DialogFooterObj.find('.ButtonsTryAgain button').off('click.TryAgain').on('click.TryAgain',function(){DeploymentLock();});}});}
$('#DeploymentStart').off('click.OpenDeploymentDialog').on('click.OpenDeploymentDialog',function(){var DialogTemplate=Core.Template.Render('SysConfig/DialogDeployment'),$DialogObj=$(DialogTemplate);DeploymentLock();Core.UI.Dialog.ShowContentDialog($DialogObj,Core.Language.Translate('Deploy'),'100px','Center',true);Core.UI.InitWidgetActionToggle();$('.CloseDialog').off('click.CloseDeploymentDialog').on('click.CloseDeploymentDialog',function(){Core.UI.Dialog.CloseDialog($('.Dialog:visible'));});$('#Deploy').off('click.Deploy').on('click.Deploy',function(){var URL=Core.Config.Get('Baselink')+'Action=AdminSystemConfigurationDeployment;Subaction=AJAXDeployment',Data={Comments:$('#DeploymentComment').val(),SelectedSettings:$('#SelectedSettings').val(),AdvancedMode:$('#AdvancedMode').val()},$DialogContentObj=$(this).closest('.Dialog').find('.InnerContent'),$DialogFooterObj=$(this).closest('.Dialog').find('.ContentFooter');if($DialogContentObj.hasClass('Deploying')){alert(Core.Language.Translate('The deployment is already running.'));return false;}
$DialogContentObj.addClass('Deploying').find('.Overlay').fadeIn();$DialogContentObj.find('.Overlay i.Active').fadeIn();Core.AJAX.FunctionCall(URL,Data,function(Response){$DialogContentObj.removeClass('Deploying');$DialogFooterObj.find('.ButtonsRegular').hide();if(Response&&Response.Result&&Response.Result.Success==1){$DialogContentObj.find('.Overlay i.Active').hide();$DialogContentObj.find('.Overlay i.Success').fadeIn();$DialogContentObj.find('em').text(Core.Language.Translate("Deployment successful. You're being redirected..."));window.setTimeout(function(){if(!Response.RedirectURL){Core.App.InternalRedirect({'Action':'AdminSystemConfiguration'});}
else{window.location.href=Core.Config.Get('Baselink')+Response.RedirectURL;}},1000);}
else{$DialogFooterObj.find('.ButtonsFinish').show();$DialogContentObj.find('.Overlay i.Active').hide();$DialogContentObj.find('.Overlay i.Error').fadeIn();$DialogContentObj.find('em').text(Core.Language.Translate('There was an error. Please save all settings you are editing and check the logs for more information.'));}
if(Response&&Response.Result&&Response.Result.Error!==undefined){$DialogContentObj.find('em').after(Response.Result.Error);}});return false;});return false;});};TargetNS.InitDialogReset=function($Object){var DialogTemplate,$DialogObj,URL,Data,Name,ModificationAllowed=$Object.attr("data-user-modification"),OTRSBusinessIsInstalled=parseInt(Core.Config.Get('OTRSBusinessIsInstalled'),10);Name=$Object.closest(".WidgetSimple").find(".Header h2").text();DialogTemplate=Core.Template.Render('SysConfig/DialogReset',{Name:Name,ModificationAllowed:ModificationAllowed,OTRSBusinessIsInstalled:OTRSBusinessIsInstalled});$DialogObj=$(DialogTemplate);Core.UI.Dialog.ShowContentDialog($DialogObj,Core.Language.Translate('Reset setting'),'150px','Center',true);if($Object.attr("data-user-modification")=="1"&&OTRSBusinessIsInstalled=="1"){URL=Core.Config.Get('Baselink')+'Action=AdminSystemConfiguration;Subaction=UserModificationsCount';Data={Name:Name,},Core.AJAX.FunctionCall(URL,Data,function(Response){if(Response==""){Response=0;}
$(".UserModificationCount")
.html(Response)
.parent()
.removeClass("Hidden")
.parent()
.find("i")
.addClass("Hidden");});}
$("button#ResetConfirm").off("click").on("click",function(){var ResetOptions=$("#ResetOptions").val();if(ResetOptions==""){alert(Core.Language.Translate("Reset option is required!"));return;}
Core.UI.Dialog.CloseDialog($(".Dialog"));Core.SystemConfiguration.SettingReset($Object,ResetOptions);});$("button.CloseDialog").off("click").on("click",function(){Core.UI.Dialog.CloseDialog($(".Dialog"));});}
TargetNS.Cancel=function($Object){var $Link=$Object.closest(".WidgetSimple").find("a.SettingEdit");Unlock($Link);}
TargetNS.InitSettingListCompare=function(){function ToggleCheckbox($CheckBoxObj,DirectClick){var SettingsList=[];$CheckBoxObj.closest('.SettingContainer').toggleClass('Selected');if(!DirectClick){$CheckBoxObj.prop("checked",!$CheckBoxObj.prop("checked"));}
if($('.SettingsList.Compare.Deployment h2 input[type=checkbox]:checked').length){$('button#DeploymentStart').removeClass('Disabled').prop('disabled',false);}
else{$('button#DeploymentStart').addClass('Disabled').prop('disabled',true);}
$('.SettingsList.Compare.Deployment h2 input[type=checkbox]:checked').each(function(){SettingsList.push($(this).val());});$('#SelectedSettings').val(Core.JSON.Stringify(SettingsList));}
$('.SettingsList.Compare.Deployment .Header').on('click',function(Event){if(Event.originalEvent.target.nodeName.toLowerCase()==='input'){return false;}
ToggleCheckbox($(this).find('input[type=checkbox]'));});$('.SettingsList.Compare.Deployment h2 input[type=checkbox]').on('click',function(Event){ToggleCheckbox($(this),true);Event.stopPropagation();});$('.SettingsList.Compare.Deployment h2 a').on('click',function(Event){Event.stopPropagation();});$('.WidgetAction.CompareAll a').on('click',function(){if($(this).hasClass('Active')){$('.WidgetAction.Compare a.Active').trigger('click');$(this).removeClass('Active');}
else{$(this).addClass('Active');$('.WidgetAction.Compare a:not(.Active)').trigger('click');}
return false;});$('.WidgetAction.Compare a').on('click',function(){if($(this).hasClass('Active')){$(this).removeClass('Active');$(this).closest('.SettingContainer').removeClass('Comparing');$(this).closest('li').find('.SettingOld h2 .Label, .SettingNew h2 .Label').fadeOut();$(this).closest('li').find('.SettingOld').animate({'width':'0px'},function(){$(this).css('height','0px');});$(this).closest('li').find('.SettingNew').animate({'width':'100%'});$(this).closest('li').find('.WidgetMessage').slideUp();}
else{$(this).addClass('Active');$(this).closest('.SettingContainer').addClass('Comparing');$(this).closest('li').find('.SettingNew').animate({'width':'50%'});$(this).closest('li').find('.SettingOld').css('height','auto').animate({'width':'50%'},function(){$(this).closest('li').find('.SettingOld h2 .Label, .SettingNew h2 .Label').fadeIn();});$(this).closest('li').find('.WidgetMessage').slideDown(function(){$(this).closest('.SettingNew').find('.WidgetMessage p').each(function(){var Class=$(this).attr('class'),ValueNew=$(this).find('strong').text(),ValueOld=$(this).closest('.SettingContainer').find('.SettingOld .WidgetMessage p.'+Class).find('strong').text();if(ValueNew!=ValueOld){$(this).find('strong').addClass('Different');}});});}
return false;});};TargetNS.InitGroupView=function(IsAjax){Core.UI.Table.InitTableFilter($("#FilterSettings"),$(".SettingsList"));$('.WidgetSimple.Setting .Header').on('click',function(Event){if(Event.originalEvent.target.nodeName.toLowerCase()==='a'){return true;}
$(this).find('.WidgetAction.Expand').trigger('click');Event.stopPropagation();Event.preventDefault();});$('.WidgetAction.Expand').on('click CloseWidgetMenu',function(){var $WidgetObj=$(this).closest('.WidgetSimple'),$DefaultObj=$WidgetObj.find('.WidgetMessage.Bottom'),OriginalPadding=parseInt($WidgetObj.find('.Content').css('padding-bottom'),10);if($WidgetObj.hasClass('MenuExpanded')){$WidgetObj.find('.WidgetMenu').slideUp('fast')
$WidgetObj.removeClass('MenuExpanded');if($DefaultObj.length){$WidgetObj.find('.Content').animate({'padding-bottom':parseInt($WidgetObj.data('original-padding'),10)},'fast');$DefaultObj.slideUp('fast');}}
else{$WidgetObj.find('.WidgetMenu').slideDown('fast');$WidgetObj.addClass('MenuExpanded');if($DefaultObj.length){$WidgetObj.data('original-padding',OriginalPadding);$WidgetObj.find('.Content').animate({'padding-bottom':OriginalPadding+25},'fast');$DefaultObj.slideDown('fast');}}
return false;});$("a.SettingEdit").on("click",function(){Edit($(this));return false;});$("a.EditAlias").on("click",function(){$(this).closest('.WidgetSimple').find('a.SettingEdit').trigger('click');return false;});$("a.CancelAlias").on("click",function(){$(this).closest('.WidgetSimple').find('.SettingUpdateBox button.Cancel').trigger('click');return false;});$("a.SaveAlias").on("click",function(){$(this).closest('.WidgetSimple').find('.SettingUpdateBox button.Update').trigger('click');return false;});$(".SettingUpdateBox .Update").on("click",function(){Core.SystemConfiguration.Update($(this),0,0);return false;});$(".SettingUpdateBox .Cancel").on("click",function(){TargetNS.Cancel($(this));return false;});$(".Validate_DateMonth:disabled").each(function(){$(this).parent().find(".DatepickerIcon").hide();});$('#SaveAll').on('click',function(){$('.Setting.IsLockedByMe:visible').find('button.Update').trigger('click');return false;});$('#EditAll').on('click',function(){$('.Setting:not(.IsDisabled):not(.IsLockedByAnotherUser):not(.IsLockedByMe):visible').find('a.SettingEdit').trigger('click');return false;});$('#CancelAll').on('click',function(){$('.Setting.IsLockedByMe:visible').find('button.Cancel').trigger('click');return false;});if(IsAjax===undefined||!IsAjax){setInterval(function(){CheckSettings();},10000);}
$(".SettingDisabled, .SettingEnabled, .SettingEnable").on('click',function(){EnableModification($(this));Core.SystemConfiguration.Update($(this),1,0);return false;});if(parseInt(Core.Config.Get('OTRSBusinessIsInstalled'),10)=="1"){$(".UserModificationActive, .UserModificationNotActive").on('click',function(){EnableModification($(this));Core.SystemConfiguration.Update($(this),0,1);return false;});}};TargetNS.InitClipboard=function(){var SysconfigClipboard=new Clipboard('.Button.CopyToClipboard');SysconfigClipboard.on('success',function(Event){$(Event.trigger).find('i.fa-link').fadeOut(function(){$(this).after('<i class="fa fa-check" style="display: none;"></i>').next('i').fadeIn(function(){$(this).delay(1000).fadeOut(function(){$(this).prev('i').fadeIn();$(this).remove();})});});Event.clearSelection();});};TargetNS.InitFavourites=function(){if($('.WidgetSimple .Setting').length){$('#UserWidgetState_SystemConfiguration_Help, #UserWidgetState_SystemConfiguration_Sticky').removeClass('Hidden');}
$('.Setting').off('click.RemoveFromFavourites').on('click.RemoveFromFavourites','.Button.RemoveFromFavourites',function(){var $TriggerObj=$(this),SettingName=$TriggerObj.data('setting-name'),Data={Action:'AgentPreferences',Subaction:'UserSystemConfigurationFavourites'},Index;Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){if(Response.length===0||!SettingName){return false;}
Index=Response.indexOf(SettingName);if(Response.length>0&&Index>-1){Response.splice(Index,1);}
Core.Agent.PreferencesUpdate('UserSystemConfigurationFavourites',JSON.stringify(Response),function(){if(Core.Config.Get('Subaction')==='Favourites'){$TriggerObj.closest('.Setting').fadeOut(function(){$(this).remove();});}
else{$TriggerObj.removeClass('RemoveFromFavourites').addClass('AddToFavourites').find('span').animate({'opacity':'0'},function(){$(this).text(Core.Language.Translate('Add to favourites'));$TriggerObj.find('span').animate({'opacity':'1'});});$TriggerObj.find('i.fa-star').fadeOut(function(){$(this).after('<i class="fa fa-check" style="display: none;"></i>').next('i').fadeIn(function(){$(this).delay(1000).fadeOut(function(){$(this).prev('i').removeClass('fa-star').addClass('fa-star-o').fadeIn();$(this).remove();})});});}});return false;},'json');});$('.Setting').off('click.AddToFavourites').on('click.AddToFavourites','.Button.AddToFavourites',function(){var $TriggerObj=$(this),SettingName=$TriggerObj.data('setting-name'),Data={Action:'AgentPreferences',Subaction:'UserSystemConfigurationFavourites'};Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){if(!Response||!SettingName||Response.indexOf(SettingName)>-1){return false;}
Response.push(SettingName);Core.Agent.PreferencesUpdate('UserSystemConfigurationFavourites',JSON.stringify(Response),function(){$TriggerObj.removeClass('AddToFavourites').addClass('RemoveFromFavourites').find('span').animate({'opacity':'0'},function(){$(this).text(Core.Language.Translate('Remove from favourites'));$TriggerObj.find('span').animate({'opacity':'1'});});$TriggerObj.find('i.fa-star-o').fadeOut(function(){$(this).after('<i class="fa fa-check" style="display: none;"></i>').next('i').fadeIn(function(){$(this).delay(1000).fadeOut(function(){$(this).prev('i').removeClass('fa-star-o').addClass('fa-star').fadeIn();$(this).remove();})});});});return false;},'json');});};TargetNS.InitDeploymentRestore=function(){$('.DeploymentRestore').on('click',function(Event){if(window.confirm(Core.Language.Translate("By restoring this deployment all settings will be reverted to the value they had at the time of the deployment. Do you really want to continue?"))){return true;}
Event.stopPropagation();Event.preventDefault();return false;});};TargetNS.InitAutoComplete=function(){var $Input=$('#SearchBoxAutoComplete input[type=text]');Core.UI.Autocomplete.Init($Input,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AdminSystemConfiguration',Subaction:'AJAXSearch',Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Input.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Input.removeData('AutoCompleteXHR');$.each(Result,function(index,name){ValueData.push({label:name,value:name});});Response(ValueData);}));},function(Event,UI){$Input.val(UI.item.value).next('.AJAXLoader').show();Core.App.InternalRedirect({'Action':'AdminSystemConfiguration','Subaction':'View','Setting':UI.item.value});});};TargetNS.Init=function(){TargetNS.InitDialogDeployment();Core.SystemConfiguration.InitConfigurationTree('AdminSystemConfigurationGroup');TargetNS.InitClipboard();TargetNS.InitFavourites();TargetNS.InitDeploymentRestore();TargetNS.InitAutoComplete();if(Core.Config.Get('Action')==='AdminSystemConfiguration'||Core.Config.Get('Action')==='AdminSystemConfigurationGroup'){$('.WidgetAction.Toggle a').on('click',function(){var $WidgetObj=$(this).closest('.WidgetSimple'),WidgetID=$WidgetObj.attr('id');if(WidgetID){Core.Agent.PreferencesUpdate(WidgetID,($(this).closest('.WidgetSimple').hasClass('Expanded'))?'1':'0');}
Core.UI.InitStickyElement();});Core.UI.InitStickyElement();}
if(Core.Config.Get('Action')==='AdminSystemConfigurationGroup'||(Core.Config.Get('Action')==='AdminSystemConfiguration'&&(Core.Config.Get('Subaction')==='Search'||Core.Config.Get('Subaction')==='SearchLocked'||Core.Config.Get('Subaction')==='View'||Core.Config.Get('Subaction')==='Favourites'||Core.Config.Get('Subaction')==='ViewCustomGroup'||Core.Config.Get('Subaction')==='Invalid')))
{TargetNS.InitGroupView();}
if(Core.Config.Get('Subaction')==='Deployment'||Core.Config.Get('Subaction')==='DeploymentHistoryDetails'||Core.Config.Get('Action')==='AdminSystemConfigurationSettingHistory'){TargetNS.InitSettingListCompare();}
$('#SystemConfigurationEditSearch').on('click',function(){$('#Navigation a.Search').trigger('click');return false;});$('#Category').on('change',function(){var ParagraphHeight=$('#ConfigTree').height(),SelectedCategory=$(this).val();Core.Agent.PreferencesUpdate('UserSystemConfigurationCategory',SelectedCategory);$('#ConfigTree').html('<p class="Center"><i class="fa fa-spinner fa-spin"></i></p>');$('#ConfigTree > p').css('line-height',ParagraphHeight+'px');Core.SystemConfiguration.InitConfigurationTree('AdminSystemConfigurationGroup',SelectedCategory);});$('.SystemConfigurationCategories + a').on('click',function(){var HTML=Core.Template.Render('SysConfig/HelpDialog');Core.UI.Dialog.ShowContentDialog(HTML,Core.Language.Translate('Help'),'200px','Center',true);return false;});$('.GoBackButton').on('click',function(){window.history.back();return false;});$('.SettingsList').on('mouseenter','input.Key[readonly]',function(){$(this).data('original-title',$(this).attr('title'));$(this).attr('title',Core.Language.Translate('Keys with values can\'t be renamed. Please remove this key/value pair instead and re-add it afterwards.'));});$('.SettingsList').on('mouseleave','input.Key[readonly]',function(){var OriginalTitle=$(this).data('original-title');if(OriginalTitle){$(this).attr('title',$(this).data('original-title'));$(this).removeData('original-title');}});$('.ContentColumn').on('click','.WorkingHoursItem',function(){var $CheckboxObj=$(this).find('input[type=checkbox]');if(!$(this).closest('.WidgetSimple.Setting').hasClass('IsLockedByMe')){return false;}
if($CheckboxObj.prop('checked')){$(this).removeClass('Checked');$CheckboxObj.prop('checked',false);}
else{$(this).addClass('Checked');$CheckboxObj.prop('checked',true);}});Core.UI.Table.InitTableFilter($('#FilterDeployments'),$('#Deployments'));};function Edit($Object){if($Object.closest(".WidgetSimple").hasClass("HasOverlay")){return;}
if($Object.hasClass("Locked")){Unlock($Object);}
else{Lock($Object);}}
function Unlock($Object){var $Widget=$Object.closest(".WidgetSimple"),$SettingName=$Widget.find("input[name='SettingName']"),Data="Action=AdminSystemConfigurationGroup;Subaction=Unlock;";Data+='SettingName='+encodeURIComponent($SettingName.val())+';';Core.UI.WidgetOverlayShow($Widget,'Loading');Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){$("#fieldset"+$Object.attr("data-id")).html(Response.Data.HTMLStrg);$Object.find("i").removeClass();$Object.removeClass();$Object.find("i").addClass("fa fa-pencil-square-o");$Object.addClass("SettingEdit Unlocked");$Object.attr("title",Core.Language.Translate("Edit this setting"));if(Response.Data.HTMLStrg.indexOf("<select")>-1){Core.UI.InputFields.Activate($("#fieldset"+$Object.attr("data-id")));}
$Object
.closest(".WidgetSimple")
.find(".Error")
.remove();Core.UI.WidgetOverlayHide($Widget);Core.SystemConfiguration.CleanWidgetClasses($Widget);if(Response.Data.SettingData.IsModified){$Widget.addClass('IsModified');}
if(Response.Data.SettingData.IsDirty){$Widget.addClass('IsDirty');}
if(Response.Data.SettingData.IsLocked){$Widget.addClass('IsLockedByAnotherUser');}
if($Widget.hasClass('MenuExpanded')){$Widget.find('.WidgetMessage.Bottom').show();}
Core.App.Publish('SystemConfiguration.SettingListUpdate');});}
function Lock($Object){var
$Widget=$Object.closest(".WidgetSimple"),$SettingName=$Widget.find("input[name='SettingName']"),Data="Action=AdminSystemConfigurationGroup;Subaction=Lock;";Data+='SettingName='+encodeURIComponent($SettingName.val())+';';Core.UI.WidgetOverlayShow($Widget,'Loading');Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){if(Response.Error!=null){alert(Response.Error);Core.UI.WidgetOverlayHide($Widget);return;}
$("#fieldset"+$Object.attr("data-id")).html(Response.Data.HTMLStrg);if(!Response.Data.SettingData.Error){$Object.find("i").removeClass();$Object.removeClass();$Object.find("i").addClass("fa fa-unlock");$Object.addClass("SettingEdit Locked");$Object.attr("title",Core.Language.Translate("Unlock setting."));$Widget.find(".Update").on("click",function(){Core.SystemConfiguration.Update($(this),0,0);});$Widget.find(".Cancel").on("click",function(){TargetNS.Cancel($(this));return false;});Core.SystemConfiguration.InitButtonVisibility($Widget);}
if(Response.Data.HTMLStrg.indexOf("<select")>-1){Core.UI.InputFields.Activate($("#fieldset"+$Object.attr("data-id")));}
$Widget.find("input:checkbox")
.on("change",function(){Core.SystemConfiguration.CheckboxValueSet($(this));});$Widget
.find(".Error")
.remove();if(Response.Data.SettingData.Error){$Widget
.find(".WidgetMessage")
.after(Response.Data.SettingData.Error);$Object.closest(".WidgetAction").hide();}
$Widget.find("button.RemoveButton").on("click",function(){$(this).blur();Core.SystemConfiguration.RemoveItem($(this));});$Widget.find("button.AddArrayItem").on("click",function(){$(this).blur();Core.SystemConfiguration.AddArrayItem($(this));});$Widget.find("button.AddHashKey").on("click",function(){$(this).blur();Core.SystemConfiguration.AddHashKeyClick($(this));});if(Response.Data.SettingData.IsModified){$Widget.find("a.ResetSetting").show().on("click",function(){TargetNS.InitDialogReset($(this));});}
if($Widget.hasClass('MenuExpanded')){$Widget.find('.WidgetMessage.Bottom').show();}
Core.UI.WidgetOverlayHide($Widget);$Widget.addClass('IsLockedByMe');$Widget.find('input[type=text]:not(.InputField_Search):visible').first().focus();Core.App.Publish('SystemConfiguration.SettingListUpdate');});}
function CheckSettings(){var URL,Data,IsLockedByAnotherUser,Settings=[];$("ul.SettingsList .WidgetSimple:not(.IsLockedByMe) .SettingContainer").each(function(){IsLockedByAnotherUser=0;if($(this).closest(".WidgetSimple").hasClass("IsLockedByAnotherUser")){IsLockedByAnotherUser=1;}
Data={};Data["SettingName"]=$(this).find("> input").val();Data["ChangeTime"]=$(this).find(".Setting").attr("data-change-time");Data["IsLockedByAnotherUser"]=IsLockedByAnotherUser;Settings.push(Data);});URL=Core.Config.Get('Baselink')+
"Action=AdminSystemConfigurationGroup;Subaction=CheckSettings;"+
'ChallengeToken='+Core.Config.Get('ChallengeToken');Core.AJAX.FunctionCall(URL,{Settings:Core.JSON.Stringify(Settings)},function(Response){var ArrayIndex,Setting,$Widget;if(Response.Error){alert(Response.Error);return;}
for(ArrayIndex in Response.Data){Setting=Response.Data[ArrayIndex];$Widget=$("#Setting"+Setting.SettingData.DefaultID+":not(.IsLockedByMe)");if($Widget.length>0){Core.SystemConfiguration.SettingRender({Data:Setting},$Widget);if(Setting.SettingData.IsLockedByAnotherUser){$Widget.addClass("IsLockedByAnotherUser");if($Widget.find("> .Content > .LockedByAnotherUser").length==0){$Widget.find("> .Content").prepend('<div class="LockedByAnotherUser"></div>');}}
else{$Widget.removeClass("IsLockedByAnotherUser");$Widget.find("> .Content > .LockedByAnotherUser").remove();}
if(Setting.SettingData.IsModified){$Widget.addClass("IsModified");}
else{$Widget.removeClass("IsModified");}
if(Setting.SettingData.IsDirty){$Widget.addClass("IsDirty");}
else{$Widget.removeClass("IsDirty");}}}});}
function EnableModification($Object){$Object.closest(".WidgetSimple")
.find("form :disabled")
.each(function(){$(this).removeAttr("disabled");});}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Agent.Admin.SystemConfiguration||{}));

"use strict";var Core=Core||{};Core.SystemConfiguration=Core.SystemConfiguration||{};Core.SystemConfiguration.DateTime=(function(TargetNS){TargetNS.ValueGet=function($Object){var Value;if($Object.attr("name").endsWith("Day")){Value=DateValueGet($Object);}
return Value;};TargetNS.CheckID=function($Object,OldID){var ID,OldSubID,SubID,Class,ErrorDivID;if($Object.hasClass("Entry")){ID=$Object.attr("id");}
else{ID=$Object.attr("data-suffix");}
if(!OldID.endsWith("Day")){return;}
SubID=ID.substr(0,ID.length-3);OldSubID=OldID.substr(0,OldID.length-3);Class=$Object.attr("class");Class=Class.replace("Validate_DateYear_"+OldSubID+"Year","Validate_DateYear_"+SubID+"Year");Class=Class.replace("Validate_DateMonth_"+OldSubID+"Month","Validate_DateMonth_"+SubID+"Month");Class=Class.replace("Validate_DateHour_"+OldSubID+"Hour","Validate_DateHour_"+SubID+"Hour");Class=Class.replace("Validate_DateMinute_"+OldSubID+"Minute","Validate_DateMinute_"+SubID+"Minute");$Object.attr("class",Class);ErrorDivID=$('div#'+OldSubID+"YearError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"YearError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"MonthError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"MonthError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"DayError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"DayError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"HourError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"HourError").attr('id',ErrorDivID);ErrorDivID=$('div#'+OldSubID+"MinuteError").attr('id');ErrorDivID.replace(OldSubID,SubID);$('div#'+OldSubID+"MinuteError").attr('id',ErrorDivID);};function DateValueGet($Object){var
Day,Month,Year,Hour,Minute,Prefix,Result;Prefix=$Object.attr("id");Prefix=Prefix.substr(0,Prefix.length-3);Prefix=Core.App.EscapeSelector(Prefix);if($Object.is('select')){Day=$Object.find("option:selected").val();if(Day<10){Day="0"+Day;}
Month=$("#"+Prefix+"Month").find("option:selected").val();if(Month<10){Month="0"+Month;}
Year=$("#"+Prefix+"Year").find("option:selected").val();Hour=$("#"+Prefix+"Hour").find("option:selected").val();if(Hour!==undefined&&Hour<10){Hour="0"+Hour;}
Minute=$("#"+Prefix+"Minute").find("option:selected").val();if(Minute!==undefined&&Minute<10){Minute="0"+Minute;}}
else{Day=$Object.val();Month=$("#"+Prefix+"Month").val();Year=$("#"+Prefix+"Year").val();Hour=$("#"+Prefix+"Hour").val();Minute=$("#"+Prefix+"Minute").val();}
Result=Year+"-"+Month+"-"+Day;if(Hour!==undefined){Result+=" "+Hour+":"+Minute+":00";}
return Result;}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration.DateTime||{}));

"use strict";var Core=Core||{};Core.SystemConfiguration=Core.SystemConfiguration||{};Core.SystemConfiguration.VacationDays=(function(TargetNS){TargetNS.ValueGet=function($Object){var Value;if($Object.attr("id").endsWith("Day")){Value=VacationDaysValueGet($Object);}
return Value;};function VacationDaysValueGet($Object){var Prefix,Result,Month,Day,Description;Prefix=$Object.attr("id");Prefix=Prefix.substr(0,Prefix.length-3);Prefix=Core.App.EscapeSelector(Prefix);Month=parseInt($Object.parent().find("#"+Prefix+"Month").val(),10);Day=parseInt($Object.val(),10);Description=$Object.parent().find("#"+Prefix+"Description").val();Result={};Result[Month]={};Result[Month][Day]=Description;return Result;}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration.VacationDays||{}));

"use strict";var Core=Core||{};Core.SystemConfiguration=Core.SystemConfiguration||{};Core.SystemConfiguration.VacationDaysOneTime=(function(TargetNS){TargetNS.ValueGet=function($Object){var Value;if($Object.attr("id").endsWith("Day")){Value=VacationDaysValueGet($Object);}
return Value;};function VacationDaysValueGet($Object){var Prefix,Result,Year,Month,Day,Description;Prefix=$Object.attr("id");Prefix=Prefix.substr(0,Prefix.length-3);Prefix=Core.App.EscapeSelector(Prefix);Year=$Object.parent().find("#"+Prefix+"Year").val();Month=parseInt($Object.parent().find("#"+Prefix+"Month").val(),10);Day=parseInt($Object.val(),10);Description=$Object.parent().find("#"+Prefix+"Description").val();Result={};Result[Year]={};Result[Year][Month]={};Result[Year][Month][Day]=Description;return Result;}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration.VacationDaysOneTime||{}));

"use strict";var Core=Core||{};Core.SystemConfiguration=Core.SystemConfiguration||{};Core.SystemConfiguration.WorkingHours=(function(TargetNS){TargetNS.ValueGet=function($Object){var Value,Day;Day=$Object.attr("data-day");Value={};if($Object.is(":checked")){Value[Day]=[$Object.val()];}
return Value;};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.SystemConfiguration.WorkingHours||{}));

"use strict";var Core=Core||{};Core.Form=(function(TargetNS){var FormModified=false;if(!Core.Debug.CheckDependency('Core.Form','Core.Data','Core.Data')){return false;}
$('input[type="checkbox"][name="rw"]').each(function(){if($(this).attr('checked')==='checked'){$(this).parent().siblings().children().prop('checked',true).prop('disabled',true);$(this).addClass('Disabled');}});if($('input[type="checkbox"][name="rw"]').length!==0&&$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').filter(':checked').length===$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').length){$('table th input:not([name="rw"]:visible)').prop('disabled',true);$('#SelectAllrw').addClass('Disabled');}
TargetNS.Init=function(){$("form input, select, textarea").on('change',FormModifiedSet);}
TargetNS.IsFormModified=function(){return FormModified;}
TargetNS.DisableForm=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
if(!$Form.hasClass('AlreadyDisabled')){$.each($Form.find("input:not([type='hidden']), textarea, select, button"),function(){var ReadonlyValue=$(this).attr('readonly'),TagnameValue=$(this).prop('tagName'),DisabledValue=$(this).attr('disabled');if(TagnameValue==='BUTTON'){Core.Data.Set($(this),'OldDisabledStatus',DisabledValue);}
else{Core.Data.Set($(this),'OldReadonlyStatus',ReadonlyValue);}});$Form
.find("input:not([type='hidden']), textarea, select")
.attr('readonly','readonly')
.end()
.find('button')
.attr('disabled','disabled');$Form.addClass('AlreadyDisabled');Core.App.Publish('Event.Form.DisableForm',[$Form]);}};TargetNS.EnableForm=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
$Form
.find("input:not([type=hidden]), textarea, select")
.removeAttr('readonly')
.end()
.find('button')
.removeAttr('disabled');$.each($Form.find("input:not([type='hidden']), textarea, select, button"),function(){var TagnameValue=$(this).prop('tagName'),ReadonlyValue=Core.Data.Get($(this),'OldReadonlyStatus'),DisabledValue=Core.Data.Get($(this),'OldDisabledStatus');if(TagnameValue==='BUTTON'){if(DisabledValue==='disabled'){$(this).attr('disabled','disabled');}}
else{if(ReadonlyValue==='readonly'){$(this).attr('readonly','readonly');}}});$Form.removeClass('AlreadyDisabled');Core.App.Publish('Event.Form.EnableForm',[$Form]);};TargetNS.SelectAllCheckboxes=function($ClickedBox,$SelectAllCheckbox){var ElementName,SelectAllID,$Elements,Status,CountCheckboxes,CountSelectedCheckboxes,RWMasterSwitch,RowInputs,HeadElements,CheckAll;if(isJQueryObject($ClickedBox,$SelectAllCheckbox)){ElementName=$ClickedBox.attr('name');SelectAllID=$SelectAllCheckbox.attr('id');$Elements=$('input[type="checkbox"][name="'+Core.App.EscapeSelector(ElementName)+'"]').filter('[id!="'+Core.App.EscapeSelector(SelectAllID)+'"]:visible');Status=$ClickedBox.prop('checked');RWMasterSwitch=$('#SelectAllrw');HeadElements=$('table th input:not([name="rw"]:visible)');CheckAll=$('input[type="checkbox"]:visible');if(ElementName==='rw'){if($ClickedBox.attr('id')==='SelectAllrw'){if(RWMasterSwitch.hasClass('Disabled')){CheckAll.prop('disabled',false);RWMasterSwitch.removeClass('Disabled');$Elements.prop('checked',false).removeClass('Disabled');return;}else{CheckAll.prop('checked',true);$('input[type="checkbox"]:visible:not([name="rw"])').not(RWMasterSwitch).prop('disabled',true);$Elements.addClass('Disabled');RWMasterSwitch.addClass('Disabled');return;}}else{RWMasterSwitch.removeClass('Disabled');HeadElements.prop('disabled',false);if($ClickedBox.hasClass('Disabled')){$ClickedBox.parent().siblings().children().prop('disabled',false);$ClickedBox.removeClass('Disabled');}else{RowInputs=$ClickedBox.parent().siblings().children('input');RowInputs.each(function(){if(!$(this)[0].checked){$(this).trigger('click');}
$(this).prop('checked',true).prop('disabled',true);})
$ClickedBox.addClass('Disabled');}}}
if($ClickedBox.attr('id')&&$ClickedBox.attr('id')===SelectAllID){if(!$Elements.filter(':enabled').length){$ClickedBox.prop('checked',true);return;}
$Elements.not(":disabled").prop('checked',Status).triggerHandler('click');}
else{CountCheckboxes=$Elements.length;CountSelectedCheckboxes=$Elements.filter(':checked').length;if(CountCheckboxes===CountSelectedCheckboxes){$SelectAllCheckbox.prop('checked',true);if(ElementName==='rw'){CheckAll.prop('checked',true).not(RWMasterSwitch);RWMasterSwitch.addClass('Disabled');HeadElements.prop('disabled',true);}}
else{$SelectAllCheckbox.prop('checked',false);}}}};TargetNS.InitSelectAllCheckboxes=function($Checkboxes,$SelectAllCheckbox){if(isJQueryObject($Checkboxes,$SelectAllCheckbox)){if($Checkboxes.filter(':checked').length&&($Checkboxes.filter('[id!="'+Core.App.EscapeSelector($SelectAllCheckbox.attr('id'))+'"]').length===$Checkboxes.filter(':checked').length)){$SelectAllCheckbox.prop('checked',true);}
Core.App.Subscribe('Event.UI.Table.InitTableFilter.Change',function($FilterInput,$Container){var CountCheckboxesVisible=$Checkboxes.filter('[id!="'+Core.App.EscapeSelector($SelectAllCheckbox.attr('id'))+'"]:visible');if(!$.contains($Container[0],$SelectAllCheckbox[0])){return;}
if(CountCheckboxesVisible.length&&(CountCheckboxesVisible.filter(':checked').length===CountCheckboxesVisible.length)){$SelectAllCheckbox.prop('checked',true);}
else{$SelectAllCheckbox.prop('checked',false);}});}};function FormModifiedSet(){FormModified=true;$("form input, select, textarea").off('change',FormModified);}
$('body').on('keydown','textarea',function(Event){if((Event.ctrlKey||Event.metaKey)&&Event.keyCode==13){$(this.form).find(':submit').first().click();}});Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Form||{}));

