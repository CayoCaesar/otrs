!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});

jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)[\/]([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};if(!jQuery.browser){matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
jQuery.browser=browser;}

(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){for(var e=t.css("visibility");"inherit"===e;)t=t.parent(),e=t.css("visibility");return"hidden"!==e}function i(t){for(var e,i;t.length&&t[0]!==document;){if(e=t.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(i=parseInt(t.css("zIndex"),10),!isNaN(i)&&0!==i))return i;t=t.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},t.extend(this._defaults,this.regional[""]),this.regional.en=t.extend(!0,{},this.regional[""]),this.regional["en-US"]=t.extend(!0,{},this.regional.en),this.dpDiv=n(t("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(e){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",i,function(){t(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){t.datepicker._isDisabledDatepicker(u.inline?u.dpDiv.parent()[0]:u.input[0])||(t(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),t(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&t(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&t(this).addClass("ui-datepicker-next-hover"))}function a(e,i){t.extend(e,i);for(var s in i)null==i[s]&&(e[s]=i[s]);return e}t.ui=t.ui||{},t.ui.version="1.12.1";var r=0,l=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,n,o;for(o=0;null!=(n=i[o]);o++)try{s=t._data(n,"events"),s&&s.remove&&t(n).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var n,o,a,r={},l=e.split(".")[0];e=e.split(".")[1];var h=l+"-"+e;return s||(s=i,i=t.Widget),t.isArray(s)&&(s=t.extend.apply(null,[{}].concat(s))),t.expr[":"][h.toLowerCase()]=function(e){return!!t.data(e,h)},t[l]=t[l]||{},n=t[l][e],o=t[l][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(s,function(e,s){return t.isFunction(s)?(r[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function n(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=n,e=s.apply(this,arguments),this._super=i,this._superApply=o,e}}(),void 0):(r[e]=s,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:n?a.widgetEventPrefix||e:e},r,{constructor:o,namespace:l,widgetName:e,widgetFullName:h}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o),o},t.widget.extend=function(e){for(var i,s,n=l.call(arguments,1),o=0,a=n.length;a>o;o++)for(i in n[o])s=n[o][i],n[o].hasOwnProperty(i)&&void 0!==s&&(e[i]=t.isPlainObject(s)?t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var o="string"==typeof n,a=l.call(arguments,1),r=this;return o?this.length||"instance"!==n?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(r=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,a),i!==o&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+n+"'")}):r=void 0:(a.length&&(n=t.widget.extend.apply(null,[n].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),r}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,n,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(n=a[e]=t.widget.extend({},this.options[e]),o=0;s.length-1>o;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(e=s.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,s,n;for(i in e)n=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&n&&n.length&&(s=t(n.get()),this._removeClass(n,i),s.addClass(this._classes({element:s,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){function i(i,o){var a,r;for(r=0;i.length>r;r++)a=n.classesElementLookup[i[r]]||t(),a=e.add?t(t.unique(a.get().concat(e.element.get()))):t(a.not(e.element).get()),n.classesElementLookup[i[r]]=a,s.push(i[r]),o&&e.classes[i[r]]&&s.push(e.classes[i[r]])}var s=[],n=this;return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&i(e.keys.match(/\S+/g)||[],!0),e.extra&&i(e.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(s,n){-1!==t.inArray(e.target,n)&&(i.classesElementLookup[s]=t(n.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(e,i,s){var n,o=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+o.eventNamespace,c=l[2];c?n.on(h,c,r):i.on(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}}),t.widget,function(){function e(t,e,i){return[parseFloat(t[0])*(u.test(t[0])?e/100:1),parseFloat(t[1])*(u.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var n,o=Math.max,a=Math.abs,r=/left|center|right/,l=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/,d=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==n)return n;var e,i,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),e=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=s[0].clientWidth),s.remove(),n=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType,o=!s&&!n;return{element:i,isWindow:s,isDocument:n,offset:o?t(e).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(n){if(!n||!n.of)return d.apply(this,arguments);n=t.extend({},n);var u,p,f,g,m,_,v=t(n.of),b=t.position.getWithinInfo(n.within),y=t.position.getScrollInfo(b),w=(n.collision||"flip").split(" "),k={};return _=s(v),v[0].preventDefault&&(n.at="left top"),p=_.width,f=_.height,g=_.offset,m=t.extend({},g),t.each(["my","at"],function(){var t,e,i=(n[this]||"").split(" ");1===i.length&&(i=r.test(i[0])?i.concat(["center"]):l.test(i[0])?["center"].concat(i):["center","center"]),i[0]=r.test(i[0])?i[0]:"center",i[1]=l.test(i[1])?i[1]:"center",t=h.exec(i[0]),e=h.exec(i[1]),k[this]=[t?t[0]:0,e?e[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===n.at[0]?m.left+=p:"center"===n.at[0]&&(m.left+=p/2),"bottom"===n.at[1]?m.top+=f:"center"===n.at[1]&&(m.top+=f/2),u=e(k.at,p,f),m.left+=u[0],m.top+=u[1],this.each(function(){var s,r,l=t(this),h=l.outerWidth(),c=l.outerHeight(),d=i(this,"marginLeft"),_=i(this,"marginTop"),x=h+d+i(this,"marginRight")+y.width,C=c+_+i(this,"marginBottom")+y.height,D=t.extend({},m),T=e(k.my,l.outerWidth(),l.outerHeight());"right"===n.my[0]?D.left-=h:"center"===n.my[0]&&(D.left-=h/2),"bottom"===n.my[1]?D.top-=c:"center"===n.my[1]&&(D.top-=c/2),D.left+=T[0],D.top+=T[1],s={marginLeft:d,marginTop:_},t.each(["left","top"],function(e,i){t.ui.position[w[e]]&&t.ui.position[w[e]][i](D,{targetWidth:p,targetHeight:f,elemWidth:h,elemHeight:c,collisionPosition:s,collisionWidth:x,collisionHeight:C,offset:[u[0]+T[0],u[1]+T[1]],my:n.my,at:n.at,within:b,elem:l})}),n.using&&(r=function(t){var e=g.left-D.left,i=e+p-h,s=g.top-D.top,r=s+f-c,u={target:{element:v,left:g.left,top:g.top,width:p,height:f},element:{element:l,left:D.left,top:D.top,width:h,height:c},horizontal:0>i?"left":e>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>p&&p>a(e+i)&&(u.horizontal="center"),c>f&&f>a(s+r)&&(u.vertical="middle"),u.important=o(a(e),a(i))>o(a(s),a(r))?"horizontal":"vertical",n.using.call(this,t,u)}),l.offset(t.extend(D,{using:r}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-a-n;e.collisionWidth>a?l>0&&0>=h?(i=t.left+l+e.collisionWidth-a-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+a-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-a-n;e.collisionHeight>a?l>0&&0>=h?(i=t.top+l+e.collisionHeight-a-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+a-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,o=n.offset.left+n.scrollLeft,r=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-r-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-r-o,(0>i||a(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-l,(s>0||u>a(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,o=n.offset.top+n.scrollTop,r=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-r-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-r-o,(0>s||a(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,(i>0||u>a(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position,t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])}}),t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),t.ui.focusable=function(i,s){var n,o,a,r,l,h=i.nodeName.toLowerCase();return"area"===h?(n=i.parentNode,o=n.name,i.href&&o&&"map"===n.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']"),a.length>0&&a.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(h)?(r=!i.disabled,r&&(l=t(i).closest("fieldset")[0],l&&(r=!l.disabled))):r="a"===h?i.href||s:s,r&&t(i).is(":visible")&&e(t(i)))},t.extend(t.expr[":"],{focusable:function(e){return t.ui.focusable(e,null!=t.attr(e,"tabindex"))}}),t.ui.focusable,t.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},t.fn.scrollParent=function(e){var i=this.css("position"),s="absolute"===i,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return s&&"static"===e.css("position")?!1:n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},t.extend(t.expr[":"],{tabbable:function(e){var i=t.attr(e,"tabindex"),s=null!=i;return(!s||i>=0)&&t.ui.focusable(e,s)}}),t.fn.extend({uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var h=!1;t(document).on("mouseup",function(){h=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!h){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,n="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),h=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,h=!1,e.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),t.ui.plugin={add:function(e,i,s){var n,o=t.ui[e].prototype;for(n in s)o.plugins[n]=o.plugins[n]||[],o.plugins[n].push([i,s[n]])},call:function(t,e,i,s){var n,o=t.plugins[e];if(o&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(n=0;o.length>n;n++)t.options[o[n][0]]&&o[n][1].apply(t.element,i)}},t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")},t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]),s=t(e.target);s.closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),n=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options,o=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,n,o,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-a.grid[1]:n+a.grid[1]:n,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var n=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,n))})},stop:function(e,i,s){var n=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,n))})},drag:function(e,i,s){t.each(s.sortables,function(){var n=!1,o=this;o.positionAbs=s.positionAbs,o.helperProportions=s.helperProportions,o.offset.click=s.offset.click,o._intersectsWith(o.containerCache)&&(n=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(n=!1),n})),n?(o.isOver||(o.isOver=1,s._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=s.offset.click.top,o.offset.click.left=s.offset.click.left,o.offset.parent.left-=s.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=s.offset.parent.top-o.offset.parent.top,s._trigger("toSortable",e),s.dropped=o.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,o.fromOutside=s),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var n=t("body"),o=s.options;n.css("cursor")&&(o._cursor=n.css("cursor")),n.css("cursor",o.cursor)},stop:function(e,i,s){var n=s.options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(e,i,s){var n=s.options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var n=s.options,o=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<n.scrollSensitivity?a.scrollTop=o=a.scrollTop+n.scrollSpeed:e.pageY-s.overflowOffset.top<n.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<n.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+n.scrollSpeed:e.pageX-s.overflowOffset.left<n.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(r).scrollTop()<n.scrollSensitivity?o=t(r).scrollTop(t(r).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<n.scrollSensitivity&&(o=t(r).scrollTop(t(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(r).scrollLeft()<n.scrollSensitivity?o=t(r).scrollLeft(t(r).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<n.scrollSensitivity&&(o=t(r).scrollLeft(t(r).scrollLeft()+n.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var n=s.options;s.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var n,o,a,r,l,h,c,u,d,p,f=s.options,g=f.snapTolerance,m=i.offset.left,_=m+s.helperProportions.width,v=i.offset.top,b=v+s.helperProportions.height;for(d=s.snapElements.length-1;d>=0;d--)l=s.snapElements[d].left-s.margins.left,h=l+s.snapElements[d].width,c=s.snapElements[d].top-s.margins.top,u=c+s.snapElements[d].height,l-g>_||m>h+g||c-g>b||v>u+g||!t.contains(s.snapElements[d].item.ownerDocument,s.snapElements[d].item)?(s.snapElements[d].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=g>=Math.abs(c-b),o=g>=Math.abs(u-v),a=g>=Math.abs(l-_),r=g>=Math.abs(h-m),n&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=n||o||a||r,"outer"!==f.snapMode&&(n=g>=Math.abs(c-v),o=g>=Math.abs(u-b),a=g>=Math.abs(l-m),r=g>=Math.abs(h-_),n&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[d].snapping&&(n||o||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[d].item})),s.snapElements[d].snapping=n||o||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var n,o=s.options,a=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(n=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",n+e)}),this.css("zIndex",n+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var n=t(i.helper),o=s.options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(e,i,s){var n=s.options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],void 0):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var s=t.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=t(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&c(s,t.extend(i,{offset:i.element.offset()}),i.options.tolerance,e)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var c=t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,s,n){if(!i.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,l=a+e.helperProportions.height,h=i.offset.left,c=i.offset.top,u=h+i.proportions().width,d=c+i.proportions().height;switch(s){case"fit":return o>=h&&u>=r&&a>=c&&d>=l;case"intersect":return o+e.helperProportions.width/2>h&&u>r-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&d>l-e.helperProportions.height/2;case"pointer":return t(n.pageY,c,i.proportions().height)&&t(n.pageX,h,i.proportions().width);case"touch":return(a>=c&&d>=a||l>=c&&d>=l||c>a&&l>d)&&(o>=h&&u>=o||r>=h&&u>=r||h>o&&r>u);default:return!1}}}();t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;o.length>s;s++)if(!(o[s].options.disabled||e&&!o[s].accept.call(o[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===o[s].element[0]){o[s].proportions().height=0;continue t}o[s].visible="none"!==o[s].element.css("display"),o[s].visible&&("mousedown"===a&&o[s]._activate.call(o[s],i),o[s].offset=o[s].element.offset(),o[s].proportions({width:o[s].element[0].offsetWidth,height:o[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&c(e,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").on("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,o,a=c(e,this,this.options.tolerance,i),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===n}),o.length&&(s=t(o[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.uiBackCompat!==!1&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable,t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0?!0:(e[s]=1,n=e[s]>0,e[s]=0,n)},_create:function(){var e,i=this.options,s=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(s._removeClass("ui-resizable-autohide"),s._handles.show())}).on("mouseleave",function(){i.disabled||s.resizing||(s._addClass("ui-resizable-autohide"),s._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var e,i,s,n,o,a=this.options,r=this;if(this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),s=this.handles.split(","),this.handles={},i=0;s.length>i;i++)e=t.trim(s[i]),n="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+n),o.css({zIndex:a.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,s,n,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var i,s,n,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,s+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,n=this.originalMousePosition,o=this.axis,a=e.pageX-n.left||0,r=e.pageY-n.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,o,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=s?0:c.sizeDiff.width,a={width:c.helper.width()-o,height:c.helper.height()-n},r=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,n,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,s=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),s>o.minHeight&&(o.minHeight=s),o.maxWidth>i&&(o.maxWidth=i),o.maxHeight>n&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),n&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],n=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];4>e;e++)i[e]=parseFloat(s[e])||0,i[e]+=parseFloat(n[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;this._proportionallyResizeElements.length>e;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),a=o&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=o?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,n,o,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,u=h.containment,d=u instanceof t?u.get(0):/parent/.test(u)?c.parent().get(0):u;d&&(l.containerElement=t(d),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(d),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,n=l.containerSize.height,o=l.containerSize.width,a=l._hasScroll(d,"left")?d.scrollWidth:o,r=l._hasScroll(d)?d.scrollHeight:n,l.parentData={element:d,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,n,o,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,u={top:0,left:0},d=a.containerElement,p=!0;d[0]!==document&&/static/.test(d.css("position"))&&(u=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),n=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),n&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-u.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-u.top:a.offset.top-l.top)),i+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,n=e.containerPosition,o=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var s=t(this).resizable("instance"),n=s.options,o=s.originalSize,a=s.originalPosition,r={height:s.size.height-o.height||0,width:s.size.width-o.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(n.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),n={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),t.uiBackCompat!==!1&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,n=i.size,o=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,u=Math.round((n.width-o.width)/h)*h,d=Math.round((n.height-o.height)/c)*c,p=o.width+u,f=o.height+d,g=s.maxWidth&&p>s.maxWidth,m=s.maxHeight&&f>s.maxHeight,_=s.minWidth&&s.minWidth>p,v=s.minHeight&&s.minHeight>f;s.grid=l,_&&(p+=h),v&&(f+=c),g&&(p-=h),m&&(f-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=a.top-d):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=a.left-u):((0>=f-c||0>=p-h)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=a.top-d):(f=c-e.height,i.size.height=f,i.position.top=a.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=a.left-u):(p=h-e.width,i.size.width=p,i.position.left=a.left+o.width-p))}}),t.ui.resizable,t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&e+i>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+h>r&&l>s+h,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&l>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var e,i,s="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=s&&n;return o?(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1)):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&e||"up"===s&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],l=[],h=this._connectWith();if(h&&e)for(s=h.length-1;s>=0;s--)for(o=t(h[s],this.document[0]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,l,h,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i],this.document[0]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,h=r.length;h>s;s++)l=t(r[s]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]);return e._addClass(n,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(n,"ui-sortable-helper"),"tbody"===s?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(n)):"tr"===s?e._createTrPlaceholder(e.currentItem,n):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var s=this;e.children().each(function(){t("<td>&#160;</td>",s.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,s,n,o,a,r,l,h,c,u,d=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,o=null,c=d.floating||this._isFloating(this.currentItem),a=c?"left":"top",r=c?"width":"height",u=c?"pageX":"pageY",s=this.items.length-1;s>=0;s--)t.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(l=this.items[s].item.offset()[a],h=!1,e[u]-l>this.items[s][r]/2&&(h=!0),n>Math.abs(e[u]-l)&&(n=Math.abs(e[u]-l),o=this.items[s],this.direction=h?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[p].element,!0),this._trigger("change",e,this._uiHash()),this.containers[p]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",e,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(t){t.preventDefault()},"click .ui-menu-item":function(e){var i=t(e.target),s=t(t.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&s.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var i=t(e.target).closest(".ui-menu-item"),s=t(e.currentTarget);i[0]===s[0]&&(this._removeClass(s.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(e,s))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.find(this.options.items).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){var i=!t.contains(this.element[0],t.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){this._closeOnDocumentClick(t)&&this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){var e=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=e.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),i.children().each(function(){var e=t(this);e.data("ui-menu-submenu-caret")&&e.remove()})},_keydown:function(e){var i,s,n,o,a=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:a=!1,s=this.previousFilter||"",o=!1,n=e.keyCode>=96&&105>=e.keyCode?""+(e.keyCode-96):String.fromCharCode(e.keyCode),clearTimeout(this.filterTimer),n===s?o=!0:n=s+n,i=this._filterMenuItems(n),i=o&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(e.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(e,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}a&&e.preventDefault()},_activate:function(t){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i,s,n,o,a=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),s=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev(),s=t("<span>").data("ui-menu-submenu-caret",!0);a._addClass(s,"ui-menu-icon","ui-icon "+r),i.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",i.attr("id"))}),this._addClass(s,"ui-menu","ui-widget ui-widget-content ui-front"),e=l.add(this.element),i=e.find(this.options.items),i.not(".ui-menu-item").each(function(){var e=t(this);a._isDivider(e)&&a._addClass(e,"ui-menu-divider","ui-widget-content")}),n=i.not(".ui-menu-item, .ui-menu-divider"),o=n.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(n,"ui-menu-item")._addClass(o,"ui-menu-item-wrapper"),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){if("icons"===t){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,e.submenu)}this._super(t,e)},_setOptionDisabled:function(t){this._super(t),this.element.attr("aria-disabled",t+""),this._toggleClass(null,"ui-state-disabled",!!t)},focus:function(t,e){var i,s,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(".ui-menu-item-wrapper"),this._addClass(s,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),n=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(n,null,"ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,o,a,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,o=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=e.outerHeight(),0>n?this.activeMenu.scrollTop(o+n):n+r>a&&this.activeMenu.scrollTop(o+n-a+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",t,{item:this.active}),this.active=null)},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this._removeClass(s.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(e){return!t(e.target).closest(".ui-menu").length},_isDivider:function(t){return!/[^\-\u2014\u2013\s]/.test(t.text())},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.find(this.options.items).first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)},_filterMenuItems:function(e){var i=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(t.trim(t(this).children(".ui-menu-item-wrapper").text()))})}}),t.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,s,n=this.element[0].nodeName.toLowerCase(),o="textarea"===n,a="input"===n;this.isMultiLine=o||!a&&this._isContentEditable(this.element),this.valueMethod=this.element[o||a?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,i=!0,void 0;e=!1,s=!1,i=!1;var o=t.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",n);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case o.UP:e=!0,this._keyEvent("previous",n);break;case o.DOWN:e=!0,this._keyEvent("next",n);break;case o.ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case o.TAB:this.menu.active&&this.menu.select(n);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){return s?(s=!1,t.preventDefault(),void 0):(this._searchTimeout(t),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(t),this._change(t),void 0)}}),this._initSource(),this.menu=t("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==t.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(e,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:n})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&t.trim(s).length&&(this.liveRegion.children().hide(),t("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,i){var s=i.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==t.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=s})),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=t("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(e){var i=this.menu.element[0];return e.target===this.element[0]||e.target===i||t.contains(i,e.target)},_closeOnClickOutside:function(t){this._isEventTargetInWidget(t)||this.close()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front, dialog")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),i=this.menu.element.is(":visible"),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;(!e||e&&!i&&!s)&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)!==!1?this._search(t):void 0},_search:function(t){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<div>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[t](e),void 0):(this.search(null,e),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())},_isContentEditable:function(t){if(!t.length)return!1;var e=t.prop("contentEditable");return"inherit"===e?this._isContentEditable(t.parent()):"true"===e}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),t("<div>").text(i).appendTo(this.liveRegion))}}),t.ui.autocomplete,t.extend(t.ui,{datepicker:{version:"1.12.1"}});var u;t.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return a(this._defaults,t||{}),this},_attachDatepicker:function(e,i){var s,n,o;s=e.nodeName.toLowerCase(),n="div"===s||"span"===s,e.id||(this.uuid+=1,e.id="dp"+this.uuid),o=this._newInst(t(e),n),o.settings=t.extend({},i||{}),"input"===s?this._connectDatepicker(e,o):n&&this._inlineDatepicker(e,o)},_newInst:function(e,i){var s=e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(t("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,i){var s=t(e);i.append=t([]),i.trigger=t([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),t.data(e,"datepicker",i),i.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,i){var s,n,o,a=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),a&&(i.append=t("<span class='"+this._appendClass+"'>"+a+"</span>"),e[r?"before":"after"](i.append)),e.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&e.on("focus",this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),o=this._get(i,"buttonImage"),i.trigger=t(this._get(i,"buttonImageOnly")?t("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):t("<button type='button'></button>").addClass(this._triggerClass).html(o?t("<img/>").attr({src:o,alt:n,title:n}):n)),e[r?"before":"after"](i.trigger),i.trigger.on("click",function(){return t.datepicker._datepickerShowing&&t.datepicker._lastInput===e[0]?t.datepicker._hideDatepicker():t.datepicker._datepickerShowing&&t.datepicker._lastInput!==e[0]?(t.datepicker._hideDatepicker(),t.datepicker._showDatepicker(e[0])):t.datepicker._showDatepicker(e[0]),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,i,s,n,o=new Date(2009,11,20),a=this._get(t,"dateFormat");a.match(/[DM]/)&&(e=function(t){for(i=0,s=0,n=0;t.length>n;n++)t[n].length>i&&(i=t[n].length,s=n);return s},o.setMonth(e(this._get(t,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(e(this._get(t,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),t.input.attr("size",this._formatDate(t,o).length)}},_inlineDatepicker:function(e,i){var s=t(e);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),t.data(e,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(e),i.dpDiv.css("display","block"))},_dialogDatepicker:function(e,i,s,n,o){var r,l,h,c,u,d=this._dialogInst;return d||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=t("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),t("body").append(this._dialogInput),d=this._dialogInst=this._newInst(this._dialogInput,!1),d.settings={},t.data(this._dialogInput[0],"datepicker",d)),a(d.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(d,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+c,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),t.blockUI&&t.blockUI(this.dpDiv),t.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var i,s=t(e),n=t.data(e,"datepicker");s.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),t.removeData(e,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),u===n&&(u=null))},_enableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var i,s,n=t(e),o=t.data(e,"datepicker");n.hasClass(this.markerClassName)&&(i=e.nodeName.toLowerCase(),"input"===i?(e.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=t.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;this._disabledInputs.length>e;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(e){try{return t.data(e,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,i,s){var n,o,r,l,h=this._getInst(e);return 2===arguments.length&&"string"==typeof i?"defaults"===i?t.extend({},t.datepicker._defaults):h?"all"===i?t.extend({},h.settings):this._get(h,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(e,!0),r=this._getMinMaxDate(h,"min"),l=this._getMinMaxDate(h,"max"),a(h.settings,n),null!==r&&void 0!==n.dateFormat&&void 0===n.minDate&&(h.settings.minDate=this._formatDate(h,r)),null!==l&&void 0!==n.dateFormat&&void 0===n.maxDate&&(h.settings.maxDate=this._formatDate(h,l)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(t(e),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h)),void 0)},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(e){var i,s,n,o=t.datepicker._getInst(e.target),a=!0,r=o.dpDiv.is(".ui-datepicker-rtl");if(o._keyEvent=!0,t.datepicker._datepickerShowing)switch(e.keyCode){case 9:t.datepicker._hideDatepicker(),a=!1;break;case 13:return n=t("td."+t.datepicker._dayOverClass+":not(."+t.datepicker._currentClass+")",o.dpDiv),n[0]&&t.datepicker._selectDay(e.target,o.selectedMonth,o.selectedYear,n[0]),i=t.datepicker._get(o,"onSelect"),i?(s=t.datepicker._formatDate(o),i.apply(o.input?o.input[0]:null,[s,o])):t.datepicker._hideDatepicker(),!1;case 27:t.datepicker._hideDatepicker();break;case 33:t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 34:t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&t.datepicker._clearDate(e.target),a=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&t.datepicker._gotoToday(e.target),a=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?1:-1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?-t.datepicker._get(o,"stepBigMonths"):-t.datepicker._get(o,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,-7,"D"),a=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,r?-1:1,"D"),a=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&t.datepicker._adjustDate(e.target,e.ctrlKey?+t.datepicker._get(o,"stepBigMonths"):+t.datepicker._get(o,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&t.datepicker._adjustDate(e.target,7,"D"),a=e.ctrlKey||e.metaKey;break;default:a=!1}else 36===e.keyCode&&e.ctrlKey?t.datepicker._showDatepicker(this):a=!1;a&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var i,s,n=t.datepicker._getInst(e.target);return t.datepicker._get(n,"constrainInput")?(i=t.datepicker._possibleChars(t.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(e){var i,s=t.datepicker._getInst(e.target);if(s.input.val()!==s.lastVal)try{i=t.datepicker.parseDate(t.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,t.datepicker._getFormatConfig(s)),i&&(t.datepicker._setDateFromField(s),t.datepicker._updateAlternate(s),t.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!==e.nodeName.toLowerCase()&&(e=t("input",e.parentNode)[0]),!t.datepicker._isDisabledDatepicker(e)&&t.datepicker._lastInput!==e){var s,n,o,r,l,h,c;s=t.datepicker._getInst(e),t.datepicker._curInst&&t.datepicker._curInst!==s&&(t.datepicker._curInst.dpDiv.stop(!0,!0),s&&t.datepicker._datepickerShowing&&t.datepicker._hideDatepicker(t.datepicker._curInst.input[0])),n=t.datepicker._get(s,"beforeShow"),o=n?n.apply(e,[e,s]):{},o!==!1&&(a(s.settings,o),s.lastVal=null,t.datepicker._lastInput=e,t.datepicker._setDateFromField(s),t.datepicker._inDialog&&(e.value=""),t.datepicker._pos||(t.datepicker._pos=t.datepicker._findPos(e),t.datepicker._pos[1]+=e.offsetHeight),r=!1,t(e).parents().each(function(){return r|="fixed"===t(this).css("position"),!r}),l={left:t.datepicker._pos[0],top:t.datepicker._pos[1]},t.datepicker._pos=null,s.dpDiv.empty(),s.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),t.datepicker._updateDatepicker(s),l=t.datepicker._checkOffset(s,l,r),s.dpDiv.css({position:t.datepicker._inDialog&&t.blockUI?"static":r?"fixed":"absolute",display:"none",left:l.left+"px",top:l.top+"px"}),s.inline||(h=t.datepicker._get(s,"showAnim"),c=t.datepicker._get(s,"duration"),s.dpDiv.css("z-index",i(t(e))+1),t.datepicker._datepickerShowing=!0,t.effects&&t.effects.effect[h]?s.dpDiv.show(h,t.datepicker._get(s,"showOptions"),c):s.dpDiv[h||"show"](h?c:null),t.datepicker._shouldFocusInput(s)&&s.input.trigger("focus"),t.datepicker._curInst=s))}},_updateDatepicker:function(e){this.maxRows=4,u=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i,s=this._getNumberOfMonths(e),n=s[1],a=17,r=e.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),e.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===t.datepicker._curInst&&t.datepicker._datepickerShowing&&t.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(i=e.yearshtml,setTimeout(function(){i===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),i=e.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(e,i,s){var n=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:t(document).scrollLeft()),h=document.documentElement.clientHeight+(s?0:t(document).scrollTop());return i.left-=this._get(e,"isRTL")?n-a:0,i.left-=s&&i.left===e.input.offset().left?t(document).scrollLeft():0,i.top-=s&&i.top===e.input.offset().top+r?t(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+o>h&&h>o?Math.abs(o+r):0),i},_findPos:function(e){for(var i,s=this._getInst(e),n=this._get(s,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||t.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return i=t(e).offset(),[i.left,i.top]},_hideDatepicker:function(e){var i,s,n,o,a=this._curInst;!a||e&&a!==t.data(e,"datepicker")||this._datepickerShowing&&(i=this._get(a,"showAnim"),s=this._get(a,"duration"),n=function(){t.datepicker._tidyDialog(a)},t.effects&&(t.effects.effect[i]||t.effects[i])?a.dpDiv.hide(i,t.datepicker._get(a,"showOptions"),s,n):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,o=this._get(a,"onClose"),o&&o.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),t.blockUI&&(t.unblockUI(),t("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(t.datepicker._curInst){var i=t(e.target),s=t.datepicker._getInst(i[0]);(i[0].id!==t.datepicker._mainDivId&&0===i.parents("#"+t.datepicker._mainDivId).length&&!i.hasClass(t.datepicker.markerClassName)&&!i.closest("."+t.datepicker._triggerClass).length&&t.datepicker._datepickerShowing&&(!t.datepicker._inDialog||!t.blockUI)||i.hasClass(t.datepicker.markerClassName)&&t.datepicker._curInst!==s)&&t.datepicker._hideDatepicker()}},_adjustDate:function(e,i,s){var n=t(e),o=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(o,i+("M"===s?this._get(o,"showCurrentAtPos"):0),s),this._updateDatepicker(o))},_gotoToday:function(e){var i,s=t(e),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(e,i,s){var n=t(e),o=this._getInst(n[0]);o["selected"+("M"===s?"Month":"Year")]=o["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(n)},_selectDay:function(e,i,s,n){var o,a=t(e);t(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(o=this._getInst(a[0]),o.selectedDay=o.currentDay=t("a",n).html(),o.selectedMonth=o.currentMonth=i,o.selectedYear=o.currentYear=s,this._selectDate(e,this._formatDate(o,o.currentDay,o.currentMonth,o.currentYear)))},_clearDate:function(e){var i=t(e);this._selectDate(i,"")},_selectDate:function(e,i){var s,n=t(e),o=this._getInst(n[0]);i=null!=i?i:this._formatDate(o),o.input&&o.input.val(i),this._updateAlternate(o),s=this._get(o,"onSelect"),s?s.apply(o.input?o.input[0]:null,[i,o]):o.input&&o.input.trigger("change"),o.inline?this._updateDatepicker(o):(this._hideDatepicker(),this._lastInput=o.input[0],"object"!=typeof o.input[0]&&o.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var i,s,n,o=this._get(e,"altField");o&&(i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),n=this.formatDate(i,s,this._getFormatConfig(e)),t(o).val(n))},noWeekends:function(t){var e=t.getDay();return[e>0&&6>e,""]},iso8601Week:function(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1},parseDate:function(e,i,s){if(null==e||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,o,a,r,l=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,d=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,m=-1,_=-1,v=-1,b=!1,y=function(t){var i=e.length>n+1&&e.charAt(n+1)===t;return i&&n++,i},w=function(t){var e=y(t),s="@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2,n="y"===t?s:1,o=RegExp("^\\d{"+n+","+s+"}"),a=i.substring(l).match(o);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(e,s,n){var o=-1,a=t.map(y(e)?n:s,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(t.each(a,function(t,e){var s=e[1];return i.substr(l,s.length).toLowerCase()===s.toLowerCase()?(o=e[0],l+=s.length,!1):void 0}),-1!==o)return o+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==e.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;e.length>n;n++)if(b)"'"!==e.charAt(n)||y("'")?x():b=!1;else switch(e.charAt(n)){case"d":_=w("d");break;case"D":k("D",u,d);break;case"o":v=w("o");break;case"m":m=w("m");break;case"M":m=k("M",p,f);break;case"y":g=w("y");break;case"@":r=new Date(w("@")),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),g=r.getFullYear(),m=r.getMonth()+1,_=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(i.length>l&&(a=i.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c>=g?0:-100)),v>-1)for(m=1,_=v;;){if(o=this._getDaysInMonth(g,m-1),o>=_)break;m++,_-=o}if(r=this._daylightSavingAdjust(new Date(g,m-1,_)),r.getFullYear()!==g||r.getMonth()+1!==m||r.getDate()!==_)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(t,e,i){if(!e)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,o=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(e){var i=t.length>s+1&&t.charAt(s+1)===e;return i&&s++,i},h=function(t,e,i){var s=""+e;if(l(t))for(;i>s.length;)s="0"+s;return s},c=function(t,e,i,s){return l(t)?s[e]:i[e]},u="",d=!1;if(e)for(s=0;t.length>s;s++)if(d)"'"!==t.charAt(s)||l("'")?u+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":u+=h("d",e.getDate(),2);break;case"D":u+=c("D",e.getDay(),n,o);break;case"o":u+=h("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=h("m",e.getMonth()+1,2);break;case"M":u+=c("M",e.getMonth(),a,r);break;case"y":u+=l("y")?e.getFullYear():(10>e.getFullYear()%100?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":d=!0;break;default:u+=t.charAt(s)}return u},_possibleChars:function(t){var e,i="",s=!1,n=function(i){var s=t.length>e+1&&t.charAt(e+1)===i;return s&&e++,s};for(e=0;t.length>e;e++)if(s)"'"!==t.charAt(e)||n("'")?i+=t.charAt(e):s=!1;else switch(t.charAt(e)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=t.charAt(e)}return i},_get:function(t,e){return void 0!==t.settings[e]?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var i=this._get(t,"dateFormat"),s=t.lastVal=t.input?t.input.val():null,n=this._getDefaultDate(t),o=n,a=this._getFormatConfig(t);try{o=this.parseDate(i,s,a)||n}catch(r){s=e?"":s}t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),t.currentDay=s?o.getDate():0,t.currentMonth=s?o.getMonth():0,t.currentYear=s?o.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(e,i,s){var n=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},o=function(i){try{return t.datepicker.parseDate(t.datepicker._get(e,"dateFormat"),i,t.datepicker._getFormatConfig(e))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?t.datepicker._getDate(e):null)||new Date,o=n.getFullYear(),a=n.getMonth(),r=n.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=l.exec(i);h;){switch(h[2]||"d"){case"d":case"D":r+=parseInt(h[1],10);break;case"w":case"W":r+=7*parseInt(h[1],10);break;case"m":case"M":a+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a));break;case"y":case"Y":o+=parseInt(h[1],10),r=Math.min(r,t.datepicker._getDaysInMonth(o,a))}h=l.exec(i)}return new Date(o,a,r)},a=null==i||""===i?s:"string"==typeof i?o(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return a=a&&"Invalid Date"==""+a?s:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,o=t.selectedYear,a=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=a.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=a.getMonth(),t.drawYear=t.selectedYear=t.currentYear=a.getFullYear(),n===t.selectedMonth&&o===t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){var e=!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return e},_attachHandlers:function(e){var i=this._get(e,"stepMonths"),s="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){t.datepicker._adjustDate(s,-i,"M")},next:function(){t.datepicker._adjustDate(s,+i,"M")},hide:function(){t.datepicker._hideDatepicker()},today:function(){t.datepicker._gotoToday(s)},selectDay:function(){return t.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return t.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return t.datepicker._selectMonthYear(s,this,"Y"),!1}};t(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,i,s,n,o,a,r,l,h,c,u,d,p,f,g,m,_,v,b,y,w,k,x,C,D,T,I,M,P,S,N,H,z,A,O,E,W,F,L,R=new Date,Y=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),B=this._get(t,"isRTL"),j=this._get(t,"showButtonPanel"),q=this._get(t,"hideIfNoPrevNext"),K=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),V=this._get(t,"showCurrentAtPos"),X=this._get(t,"stepMonths"),$=1!==U[0]||1!==U[1],G=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),Z=t.drawMonth-V,te=t.drawYear;if(0>Z&&(Z+=12,te--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=J&&J>e?J:e;this._daylightSavingAdjust(new Date(te,Z,1))>e;)Z--,0>Z&&(Z=11,te--);for(t.drawMonth=Z,t.drawYear=te,i=this._get(t,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(te,Z-X,1)),this._getFormatConfig(t)):i,s=this._canAdjustMonth(t,-1,te,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+i+"</span></a>",n=this._get(t,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(te,Z+X,1)),this._getFormatConfig(t)):n,o=this._canAdjustMonth(t,1,te,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",a=this._get(t,"currentText"),r=this._get(t,"gotoCurrent")&&t.currentDay?G:Y,a=K?this.formatDate(a,r,this._getFormatConfig(t)):a,l=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",h=j?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(t,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(B?"":l)+"</div>":"",c=parseInt(this._get(t,"firstDay"),10),c=isNaN(c)?0:c,u=this._get(t,"showWeek"),d=this._get(t,"dayNames"),p=this._get(t,"dayNamesMin"),f=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),m=this._get(t,"beforeShowDay"),_=this._get(t,"showOtherMonths"),v=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),y="",k=0;U[0]>k;k++){for(x="",this.maxRows=4,C=0;U[1]>C;C++){if(D=this._daylightSavingAdjust(new Date(te,Z,t.selectedDay)),T=" ui-corner-all",I="",$){if(I+="<div class='ui-datepicker-group",U[1]>1)switch(C){case 0:I+=" ui-datepicker-group-first",T=" ui-corner-"+(B?"right":"left");break;case U[1]-1:I+=" ui-datepicker-group-last",T=" ui-corner-"+(B?"left":"right");break;default:I+=" ui-datepicker-group-middle",T=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+T+"'>"+(/all|left/.test(T)&&0===k?B?o:s:"")+(/all|right/.test(T)&&0===k?B?s:o:"")+this._generateMonthYearHeader(t,Z,te,J,Q,k>0||C>0,f,g)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=u?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",w=0;7>w;w++)P=(w+c)%7,M+="<th scope='col'"+((w+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[P]+"'>"+p[P]+"</span></th>";for(I+=M+"</tr></thead><tbody>",S=this._getDaysInMonth(te,Z),te===t.selectedYear&&Z===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,S)),N=(this._getFirstDayOfMonth(te,Z)-c+7)%7,H=Math.ceil((N+S)/7),z=$?this.maxRows>H?this.maxRows:H:H,this.maxRows=z,A=this._daylightSavingAdjust(new Date(te,Z,1-N)),O=0;z>O;O++){for(I+="<tr>",E=u?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(A)+"</td>":"",w=0;7>w;w++)W=m?m.apply(t.input?t.input[0]:null,[A]):[!0,""],F=A.getMonth()!==Z,L=F&&!v||!W[0]||J&&J>A||Q&&A>Q,E+="<td class='"+((w+c+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(A.getTime()===D.getTime()&&Z===t.selectedMonth&&t._keyEvent||b.getTime()===A.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!_?"":" "+W[1]+(A.getTime()===G.getTime()?" "+this._currentClass:"")+(A.getTime()===Y.getTime()?" ui-datepicker-today":""))+"'"+(F&&!_||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(F&&!_?"&#xa0;":L?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===Y.getTime()?" ui-state-highlight":"")+(A.getTime()===G.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);I+=E+"</tr>"}Z++,Z>11&&(Z=0,te++),I+="</tbody></table>"+($?"</div>"+(U[0]>0&&C===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=I}y+=x}return y+=h,t._keyEvent=!1,y},_generateMonthYearHeader:function(t,e,i,s,n,o,a,r){var l,h,c,u,d,p,f,g,m=this._get(t,"changeMonth"),_=this._get(t,"changeYear"),v=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(o||!m)y+="<span class='ui-datepicker-month'>"+a[e]+"</span>";else{for(l=s&&s.getFullYear()===i,h=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;12>c;c++)(!l||c>=s.getMonth())&&(!h||n.getMonth()>=c)&&(y+="<option value='"+c+"'"+(c===e?" selected='selected'":"")+">"+r[c]+"</option>");y+="</select>"}if(v||(b+=y+(!o&&m&&_?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",o||!_)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(u=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(t){var e=t.match(/c[+\-].*/)?i+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e},f=p(u[0]),g=Math.max(f,p(u[1]||"")),f=s?Math.max(f,s.getFullYear()):f,g=n?Math.min(g,n.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";g>=f;f++)t.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),v&&(b+=(!o&&m&&_?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(t,e,i){var s=t.selectedYear+("Y"===i?e:0),n=t.selectedMonth+("M"===i?e:0),o=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"===i?e:0),a=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,o)));t.selectedDay=a.getDate(),t.drawMonth=t.selectedMonth=a.getMonth(),t.drawYear=t.selectedYear=a.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&i>e?i:e;return s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),o=this._daylightSavingAdjust(new Date(i,s+(0>e?e:n[0]*n[1]),1));return 0>e&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(t,o)},_isInRange:function(t,e){var i,s,n=this._getMinMaxDate(t,"min"),o=this._getMinMaxDate(t,"max"),a=null,r=null,l=this._get(t,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),a=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(a+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||e.getTime()>=n.getTime())&&(!o||e.getTime()<=o.getTime())&&(!a||e.getFullYear()>=a)&&(!r||r>=e.getFullYear())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),t.fn.datepicker=function(e){if(!this.length)return this;t.datepicker.initialized||(t(document).on("mousedown",t.datepicker._checkExternalClick),t.datepicker.initialized=!0),0===t("#"+t.datepicker._mainDivId).length&&t("body").append(t.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this].concat(i)):t.datepicker._attachDatepicker(this,e)}):t.datepicker["_"+e+"Datepicker"].apply(t.datepicker,[this[0]].concat(i))},t.datepicker=new s,t.datepicker.initialized=!1,t.datepicker.uuid=(new Date).getTime(),t.datepicker.version="1.12.1",t.datepicker});

!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"));}else{factory(jQuery);}}(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.");}
return;}
var validator=$.data(this[0],"validator");if(validator){return validator;}
this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.on("click.validate",":submit",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target;}
if($(this).hasClass("cancel")){validator.cancelSubmit=true;}
if($(this).attr("formnovalidate")!==undefined){validator.cancelSubmit=true;}});this.on("submit.validate",function(event){if(validator.settings.debug){event.preventDefault();}
function handle(){var hidden,result;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>")
.attr("name",validator.submitButton.name)
.val($(validator.submitButton).val())
.appendTo(validator.currentForm);}
result=validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove();}
if(result!==undefined){return result;}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){var valid,validator,errorList;if($(this[0]).is("form")){valid=this.validate().form();}else{errorList=[];valid=true;validator=$(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid;if(!valid){errorList=errorList.concat(validator.errorList);}});validator.errorList=errorList;}
return valid;},rules:function(command,argument){var element=this[0],settings,staticRules,existingRules,data,param,filtered;if(element==null||element.form==null){return;}
if(command){settings=$.data(element.form,"validator").settings;staticRules=settings.rules;existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}
break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];if(method==="required"){$(element).removeAttr("aria-required");}});return filtered;}}
data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){param=data.required;delete data.required;data=$.extend({required:param},data);$(element).attr("aria-required","true");}
if(data.remote){param=data.remote;delete data.remote;data=$.extend(data,{remote:param});}
return data;}});$.extend($.expr.pseudos||$.expr[":"],{blank:function(a){return!$.trim(""+$(a).val());},filled:function(a){var val=$(a).val();return val!==null&&!!$.trim(""+val);},unchecked:function(a){return!$(a).prop("checked");}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}
if(params===undefined){return source;}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!==Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n;});});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:false,focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}
this.hideThese(this.errorsFor(element));}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){var excludedKeys=[16,17,18,20,35,36,37,38,39,40,45,144,225];if(event.which===9&&this.elementValue(element)===""||$.inArray(event.keyCode,excludedKeys)!==-1){return;}else if(element.name in this.submitted||element.name in this.invalid){this.element(element);}},onclick:function(element){if(element.name in this.submitted){this.element(element);}else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}."),step:$.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={}),rules;$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/);}
$.each(value,function(index,name){groups[name]=key;});});rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){if(!this.form&&this.hasAttribute("contenteditable")){this.form=$(this).closest("form")[0];}
var validator=$.data(this.form,"validator"),eventType="on"+event.type.replace(/^validate/,""),settings=validator.settings;if(settings[eventType]&&!$(this).is(settings.ignore)){settings[eventType].call(validator,this,event);}}
$(this.currentForm)
.on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], "+
"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], "+
"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], "+
"[type='radio'], [type='checkbox'], [contenteditable], [type='button']",delegate)
.on("click.validate","select, option, [type='radio'], [type='checkbox']",delegate);if(this.settings.invalidHandler){$(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler);}
$(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true");},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}
this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){var cleanElement=this.clean(element),checkElement=this.validationTargetFor(cleanElement),v=this,result=true,rs,group;if(checkElement===undefined){delete this.invalid[cleanElement.name];}else{this.prepareElement(checkElement);this.currentElements=$(checkElement);group=this.groups[checkElement.name];if(group){$.each(this.groups,function(name,testgroup){if(testgroup===group&&name!==checkElement.name){cleanElement=v.validationTargetFor(v.clean(v.findByName(name)));if(cleanElement&&cleanElement.name in v.invalid){v.currentElements.push(cleanElement);result=v.check(cleanElement)&&result;}}});}
rs=this.check(checkElement)!==false;result=result&&rs;if(rs){this.invalid[checkElement.name]=false;}else{this.invalid[checkElement.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();$(element).attr("aria-invalid",!rs);}
return result;},showErrors:function(errors){if(errors){var validator=this;$.extend(this.errorMap,errors);this.errorList=$.map(this.errorMap,function(message,name){return{message:message,element:validator.findByName(name)[0]};});this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}
this.invalid={};this.submitted={};this.prepareForm();this.hideErrors();var elements=this.elements()
.removeData("previousValue")
.removeAttr("aria-invalid");this.resetElements(elements);},resetElements:function(elements){var i;if(this.settings.unhighlight){for(i=0;elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,"");this.findByName(elements[i].name).removeClass(this.settings.validClass);}}else{elements
.removeClass(this.settings.errorClass)
.removeClass(this.settings.validClass);}},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0,i;for(i in obj){if(obj[i]){count++;}}
return count;},hideErrors:function(){this.hideThese(this.toHide);},hideThese:function(errors){errors.not(this.containers).text("");this.addWrapper(errors).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[])
.filter(":visible")
.focus()
.trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm)
.find("input, select, textarea, [contenteditable]")
.not(":submit, :reset, :image, :disabled")
.not(this.settings.ignore)
.filter(function(){var name=this.name||$(this).attr("name");if(!name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}
if(this.hasAttribute("contenteditable")){this.form=$(this).closest("form")[0];}
if(name in rulesCache||!validator.objectLength($(this).rules())){return false;}
rulesCache[name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.split(" ").join(".");return $(this.settings.errorElement+"."+errorClass,this.errorContext);},resetInternals:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);},reset:function(){this.resetInternals();this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var $element=$(element),type=element.type,val,idx;if(type==="radio"||type==="checkbox"){return this.findByName(element.name).filter(":checked").val();}else if(type==="number"&&typeof element.validity!=="undefined"){return element.validity.badInput?"NaN":$element.val();}
if(element.hasAttribute("contenteditable")){val=$element.text();}else{val=$element.val();}
if(type==="file"){if(val.substr(0,12)==="C:\\fakepath\\"){return val.substr(12);}
idx=val.lastIndexOf("/");if(idx>=0){return val.substr(idx+1);}
idx=val.lastIndexOf("\\");if(idx>=0){return val.substr(idx+1);}
return val;}
if(typeof val==="string"){return val.replace(/\r/g,"");}
return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules(),rulesCount=$.map(rules,function(n,i){return i;}).length,dependencyMismatch=false,val=this.elementValue(element),result,method,rule;if(typeof rules.normalizer==="function"){val=rules.normalizer.call(element,val);if(typeof val!=="string"){throw new TypeError("The normalizer should return a string value.");}
delete rules.normalizer;}
for(method in rules){rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"&&rulesCount===1){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e);}
if(e instanceof TypeError){e.message+=".  Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.";}
throw e;}}
if(dependencyMismatch){return;}
if(this.objectLength(rules)){this.successList.push(element);}
return true;},customDataMessage:function(element,method){return $(element).data("msg"+method.charAt(0).toUpperCase()+
method.substring(1).toLowerCase())||$(element).data("msg");},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}
return undefined;},defaultMessage:function(element,rule){if(typeof rule==="string"){rule={method:rule};}
var message=this.findDefined(this.customMessage(element.name,rule.method),this.customDataMessage(element,rule.method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[rule.method],"<strong>Warning: No message defined for "+element.name+"</strong>"),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);}
return message;},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule);this.errorList.push({message:message,element:element,method:rule.method});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}
return toToggle;},defaultShowErrors:function(){var i,elements,error;for(i=0;this.errorList[i];i++){error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}
this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var place,group,errorID,v,error=this.errorsFor(element),elementID=this.idOrName(element),describedBy=$(element).attr("aria-describedby");if(error.length){error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);error.html(message);}else{error=$("<"+this.settings.errorElement+">")
.attr("id",elementID+"-error")
.addClass(this.settings.errorClass)
.html(message||"");place=error;if(this.settings.wrapper){place=error.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(this.labelContainer.length){this.labelContainer.append(place);}else if(this.settings.errorPlacement){this.settings.errorPlacement.call(this,place,$(element));}else{place.insertAfter(element);}
if(error.is("label")){error.attr("for",elementID);}else if(error.parents("label[for='"+this.escapeCssMeta(elementID)+"']").length===0){errorID=error.attr("id");if(!describedBy){describedBy=errorID;}else if(!describedBy.match(new RegExp("\\b"+this.escapeCssMeta(errorID)+"\\b"))){describedBy+=" "+errorID;}
$(element).attr("aria-describedby",describedBy);group=this.groups[element.name];if(group){v=this;$.each(v.groups,function(name,testgroup){if(testgroup===group){$("[name='"+v.escapeCssMeta(name)+"']",v.currentForm)
.attr("aria-describedby",error.attr("id"));}});}}}
if(!message&&this.settings.success){error.text("");if(typeof this.settings.success==="string"){error.addClass(this.settings.success);}else{this.settings.success(error,element);}}
this.toShow=this.toShow.add(error);},errorsFor:function(element){var name=this.escapeCssMeta(this.idOrName(element)),describer=$(element).attr("aria-describedby"),selector="label[for='"+name+"'], label[for='"+name+"'] *";if(describer){selector=selector+", #"+this.escapeCssMeta(describer)
.replace(/\s+/g,", #");}
return this
.errors()
.filter(selector);},escapeCssMeta:function(string){return string.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1");},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name);}
return $(element).not(this.settings.ignore)[0];},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){return $(this.currentForm).find("[name='"+this.escapeCssMeta(name)+"']");},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;$(element).addClass(this.settings.pendingClass);this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}
delete this.pending[element.name];$(element).removeClass(this.settings.pendingClass);if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element,method){method=typeof method==="string"&&method||"remote";return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,{method:method})});},destroy:function(){this.resetForm();$(this.currentForm)
.off(".validate")
.removeData("validator")
.find(".validate-equalTo-blur")
.off(".validate-equalTo")
.removeClass("validate-equalTo-blur");}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={},classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}
return rules;},normalizeAttributeRule:function(rules,type,method,value){if(/min|max|step/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value);if(isNaN(value)){value=undefined;}}
if(value||value===0){rules[method]=value;}else if(type===method&&type!=="range"){rules[method]=true;}},attributeRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){if(method==="required"){value=element.getAttribute(method);if(value===""){value=true;}
value=!!value;}else{value=$element.attr(method);}
this.normalizeAttributeRule(rules,type,method,value);}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},dataRules:function(element){var rules={},$element=$(element),type=element.getAttribute("type"),method,value;for(method in $.validator.methods){value=$element.data("rule"+method.charAt(0).toUpperCase()+method.substring(1).toLowerCase());this.normalizeAttributeRule(rules,type,method,value);}
return rules;},staticRules:function(element){var rules={},validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{$.data(element.form,"validator").resetElements($(element));delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)&&rule!=="normalizer"?parameter(element):parameter;});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}else if(typeof rules[this]==="string"){parts=rules[this].replace(/[\[\]]/g,"").split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])];}}});if($.validator.autoCreateRanges){if(rules.min!=null&&rules.max!=null){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength!=null&&rules.maxlength!=null){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}
if(this.checkable(element)){return this.getLength(value,element)>0;}
return value.length>0;},email:function(value,element){return this.optional(element)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value);},url:function(value,element){return this.optional(element)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString());},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);},number:function(value,element){return this.optional(element)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},step:function(value,element,param){var type=$(element).attr("type"),errorMessage="Step attribute on input type "+type+" is not supported.",supportedTypes=["text","number","range"],re=new RegExp("\\b"+type+"\\b"),notSupported=type&&!re.test(supportedTypes.join()),decimalPlaces=function(num){var match=(""+num).match(/(?:\.(\d+))?$/);if(!match){return 0;}
return match[1]?match[1].length:0;},toInt=function(num){return Math.round(num*Math.pow(10,decimals));},valid=true,decimals;if(notSupported){throw new Error(errorMessage);}
decimals=decimalPlaces(param);if(decimalPlaces(value)>decimals||toInt(value)%toInt(param)!==0){valid=false;}
return this.optional(element)||valid;},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout&&target.not(".validate-equalTo-blur").length){target.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){$(element).valid();});}
return value===target.val();},remote:function(value,element,param,method){if(this.optional(element)){return"dependency-mismatch";}
method=typeof method==="string"&&method||"remote";var previous=this.previousValue(element,method),validator,data,optionDataString;if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}
previous.originalMessage=previous.originalMessage||this.settings.messages[element.name][method];this.settings.messages[element.name][method]=previous.message;param=typeof param==="string"&&{url:param}||param;optionDataString=$.param($.extend({data:value},param.data));if(previous.old===optionDataString){return previous.valid;}
previous.old=optionDataString;validator=this;this.startRequest(element);data={};data[element.name]=value;$.ajax($.extend(true,{mode:"abort",port:"validate"+element.name,dataType:"json",data:data,context:validator.currentForm,success:function(response){var valid=response===true||response==="true",errors,message,submitted;validator.settings.messages[element.name][method]=previous.originalMessage;if(valid){submitted=validator.formSubmitted;validator.resetInternals();validator.toHide=validator.errorsFor(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.invalid[element.name]=false;validator.showErrors();}else{errors={};message=response||validator.defaultMessage(element,{method:method,parameters:value});errors[element.name]=previous.message=message;validator.invalid[element.name]=true;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}}});var pendingRequests={},ajax;if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port];}
return ajax.apply(this,arguments);};}
return $;}));
;(function(d){var cache={};d.publish=function(topic,args){cache[topic]&&d.each(cache[topic],function(){this.apply(d,args||[]);});};d.subscribe=function(topic,callback){if(!cache[topic]){cache[topic]=[];}
cache[topic].push(callback);return[topic,callback];};d.unsubscribe=function(handle){var t=handle[0];cache[t]&&d.each(cache[t],function(idx){if(this==handle[1]){cache[t].splice(idx,1);}});};})(jQuery);

(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}
else if(typeof module!=='undefined'&&module.exports){module.exports=factory(require('jquery'));}
else{factory(jQuery);}}(function($,undefined){"use strict";if($.jstree){return;}
var instance_counter=0,ccp_node=false,ccp_mode=false,ccp_inst=false,themes_loaded=[],src=$('script:last').attr('src'),document=window.document;$.jstree={version:'3.3.4',defaults:{plugins:[]},plugins:{},path:src&&src.indexOf('/')!==-1?src.replace(/\/[^\/]+$/,''):'',idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:'#'};$.jstree.create=function(el,options){var tmp=new $.jstree.core(++instance_counter),opt=options;options=$.extend(true,{},$.jstree.defaults,options);if(opt&&opt.plugins){options.plugins=opt.plugins;}
$.each(options.plugins,function(i,k){if(i!=='core'){tmp=tmp.plugin(k,options[k]);}});$(el).data('jstree',tmp);tmp.init(el,options);return tmp;};$.jstree.destroy=function(){$('.jstree:jstree').jstree('destroy');$(document).off('.jstree');};$.jstree.core=function(id){this._id=id;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:false,dots:false,icons:false,ellipsis:false},selected:[],last_error:{},working:false,worker_queue:[],focused:null}};};$.jstree.reference=function(needle){var tmp=null,obj=null;if(needle&&needle.id&&(!needle.tagName||!needle.nodeType)){needle=needle.id;}
if(!obj||!obj.length){try{obj=$(needle);}catch(ignore){}}
if(!obj||!obj.length){try{obj=$('#'+needle.replace($.jstree.idregex,'\\$&'));}catch(ignore){}}
if(obj&&obj.length&&(obj=obj.closest('.jstree')).length&&(obj=obj.data('jstree'))){tmp=obj;}
else{$('.jstree').each(function(){var inst=$(this).data('jstree');if(inst&&inst._model.data[needle]){tmp=inst;return false;}});}
return tmp;};$.fn.jstree=function(arg){var is_method=(typeof arg==='string'),args=Array.prototype.slice.call(arguments,1),result=null;if(arg===true&&!this.length){return false;}
this.each(function(){var instance=$.jstree.reference(this),method=is_method&&instance?instance[arg]:null;result=is_method&&method?method.apply(instance,args):null;if(!instance&&!is_method&&(arg===undefined||$.isPlainObject(arg))){$.jstree.create(this,arg);}
if((instance&&!is_method)||arg===true){result=instance||false;}
if(result!==null&&result!==undefined){return false;}});return result!==null&&result!==undefined?result:this;};$.expr.pseudos.jstree=$.expr.createPseudo(function(search){return function(a){return $(a).hasClass('jstree')&&$(a).data('jstree')!==undefined;};});$.jstree.defaults.core={data:false,strings:false,check_callback:false,error:$.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,ellipsis:false,stripes:false,variant:false,responsive:false},expand_selected_onload:true,worker:true,force_text:false,dblclick_toggle:true};$.jstree.core.prototype={plugin:function(deco,opts){var Child=$.jstree.plugins[deco];if(Child){this._data[deco]={};Child.prototype=this;return new Child(opts,this);}
return this;},init:function(el,options){this._model={data:{},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this.element=$(el).addClass('jstree jstree-'+this._id);this.settings=options;this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=(this.element.css("direction")==="rtl");this.element[this._data.core.rtl?'addClass':'removeClass']("jstree-rtl");this.element.attr('role','tree');if(this.settings.core.multiple){this.element.attr('aria-multiselectable',true);}
if(!this.element.attr('tabindex')){this.element.attr('tabindex','0');}
this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html
.find("li").addBack()
.contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue));})
.remove();this.element.html("<"+"ul class='jstree-container-ul jstree-children' role='group'><"+"li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr('aria-activedescendant','j'+this._id+'_loading');this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24;this._data.core.node=this._create_prototype_node();this.trigger("loading");this.load_node($.jstree.root);},destroy:function(keep_html){this.trigger("destroy");if(this._wrk){try{window.URL.revokeObjectURL(this._wrk);this._wrk=null;}
catch(ignore){}}
if(!keep_html){this.element.empty();}
this.teardown();},_create_prototype_node:function(){var _node=document.createElement('LI'),_temp1,_temp2;_node.setAttribute('role','treeitem');_temp1=document.createElement('I');_temp1.className='jstree-icon jstree-ocl';_temp1.setAttribute('role','presentation');_node.appendChild(_temp1);_temp1=document.createElement('A');_temp1.className='jstree-anchor';_temp1.setAttribute('href','#');_temp1.setAttribute('tabindex','-1');_temp2=document.createElement('I');_temp2.className='jstree-icon jstree-themeicon';_temp2.setAttribute('role','presentation');_temp1.appendChild(_temp2);_node.appendChild(_temp1);_temp1=_temp2=null;return _node;},teardown:function(){this.unbind();this.element
.removeClass('jstree')
.removeData('jstree')
.find("[class^='jstree']")
.addBack()
.attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,'');});this.element=null;},bind:function(){var word='',tout=null,was_click=0;this.element
.on("dblclick.jstree",function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true;}
if(document.selection&&document.selection.empty){document.selection.empty();}
else{if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges();sel.collapse();}catch(ignore){}}}})
.on("mousedown.jstree",$.proxy(function(e){if(e.target===this.element[0]){e.preventDefault();was_click=+(new Date());}},this))
.on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault();})
.on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target);},this))
.on("dblclick.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true;}
if(this.settings.core.dblclick_toggle){this.toggle_node(e.target);}},this))
.on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault();if(e.currentTarget!==document.activeElement){$(e.currentTarget).focus();}
this.activate_node(e.currentTarget,e);},this))
.on('keydown.jstree','.jstree-anchor',$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true;}
if(e.which!==32&&e.which!==13&&(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)){return true;}
var o=null;if(this._data.core.rtl){if(e.which===37){e.which=39;}
else if(e.which===39){e.which=37;}}
switch(e.which){case 32:if(e.ctrlKey){e.type="click";$(e.currentTarget).trigger(e);}
break;case 13:e.type="click";$(e.currentTarget).trigger(e);break;case 37:e.preventDefault();if(this.is_open(e.currentTarget)){this.close_node(e.currentTarget);}
else{o=this.get_parent(e.currentTarget);if(o&&o.id!==$.jstree.root){this.get_node(o,true).children('.jstree-anchor').focus();}}
break;case 38:e.preventDefault();o=this.get_prev_dom(e.currentTarget);if(o&&o.length){o.children('.jstree-anchor').focus();}
break;case 39:e.preventDefault();if(this.is_closed(e.currentTarget)){this.open_node(e.currentTarget,function(o){this.get_node(o,true).children('.jstree-anchor').focus();});}
else if(this.is_open(e.currentTarget)){o=this.get_node(e.currentTarget,true).children('.jstree-children')[0];if(o){$(this._firstChild(o)).children('.jstree-anchor').focus();}}
break;case 40:e.preventDefault();o=this.get_next_dom(e.currentTarget);if(o&&o.length){o.children('.jstree-anchor').focus();}
break;case 106:this.open_all();break;case 36:e.preventDefault();o=this._firstChild(this.get_container_ul()[0]);if(o){$(o).children('.jstree-anchor').filter(':visible').focus();}
break;case 35:e.preventDefault();this.element.find('.jstree-anchor').filter(':visible').last().focus();break;case 113:e.preventDefault();this.edit(e.currentTarget);break;default:break;}},this))
.on("load_node.jstree",$.proxy(function(e,data){if(data.status){if(data.node.id===$.jstree.root&&!this._data.core.loaded){this._data.core.loaded=true;if(this._firstChild(this.get_container_ul()[0])){this.element.attr('aria-activedescendant',this._firstChild(this.get_container_ul()[0]).id);}
this.trigger("loaded");}
if(!this._data.core.ready){setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find('.jstree-loading').length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var tmp=[],i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){tmp=tmp.concat(this._model.data[this._data.core.selected[i]].parents);}
tmp=$.vakata.array_unique(tmp);for(i=0,j=tmp.length;i<j;i++){this.open_node(tmp[i],false,0);}}
this.trigger('changed',{'action':'ready','selected':this._data.core.selected});}
this.trigger("ready");}},this),0);}}},this))
.on('keypress.jstree',$.proxy(function(e){if(e.target.tagName&&e.target.tagName.toLowerCase()==="input"){return true;}
if(tout){clearTimeout(tout);}
tout=setTimeout(function(){word='';},500);var chr=String.fromCharCode(e.which).toLowerCase(),col=this.element.find('.jstree-anchor').filter(':visible'),ind=col.index(document.activeElement)||0,end=false;word+=chr;if(word.length>1){col.slice(ind).each($.proxy(function(i,v){if($(v).text().toLowerCase().indexOf(word)===0){$(v).focus();end=true;return false;}},this));if(end){return;}
col.slice(0,ind).each($.proxy(function(i,v){if($(v).text().toLowerCase().indexOf(word)===0){$(v).focus();end=true;return false;}},this));if(end){return;}}
if(new RegExp('^'+chr.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')+'+$').test(word)){col.slice(ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr){$(v).focus();end=true;return false;}},this));if(end){return;}
col.slice(0,ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr){$(v).focus();end=true;return false;}},this));if(end){return;}}},this))
.on("init.jstree",$.proxy(function(){var s=this.settings.core.themes;this._data.core.themes.dots=s.dots;this._data.core.themes.stripes=s.stripes;this._data.core.themes.icons=s.icons;this._data.core.themes.ellipsis=s.ellipsis;this.set_theme(s.name||"default",s.url);this.set_theme_variant(s.variant);},this))
.on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]();this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]();},this))
.on('blur.jstree','.jstree-anchor',$.proxy(function(e){this._data.core.focused=null;$(e.currentTarget).filter('.jstree-hovered').mouseleave();this.element.attr('tabindex','0');},this))
.on('focus.jstree','.jstree-anchor',$.proxy(function(e){var tmp=this.get_node(e.currentTarget);if(tmp&&tmp.id){this._data.core.focused=tmp.id;}
this.element.find('.jstree-hovered').not(e.currentTarget).mouseleave();$(e.currentTarget).mouseenter();this.element.attr('tabindex','-1');},this))
.on('focus.jstree',$.proxy(function(){if(+(new Date())-was_click>500&&!this._data.core.focused){was_click=0;var act=this.get_node(this.element.attr('aria-activedescendant'),true);if(act){act.find('> .jstree-anchor').focus();}}},this))
.on('mouseenter.jstree','.jstree-anchor',$.proxy(function(e){this.hover_node(e.currentTarget);},this))
.on('mouseleave.jstree','.jstree-anchor',$.proxy(function(e){this.dehover_node(e.currentTarget);},this));},unbind:function(){this.element.off('.jstree');$(document).off('.jstree-'+this._id);},trigger:function(ev,data){if(!data){data={};}
data.instance=this;this.element.triggerHandler(ev.replace('.jstree','')+'.jstree',data);},get_container:function(){return this.element;},get_container_ul:function(){return this.element.children(".jstree-children").first();},get_string:function(key){var a=this.settings.core.strings;if($.isFunction(a)){return a.call(this,key);}
if(a&&a[key]){return a[key];}
return key;},_firstChild:function(dom){dom=dom?dom.firstChild:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling;}
return dom;},_nextSibling:function(dom){dom=dom?dom.nextSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.nextSibling;}
return dom;},_previousSibling:function(dom){dom=dom?dom.previousSibling:null;while(dom!==null&&dom.nodeType!==1){dom=dom.previousSibling;}
return dom;},get_node:function(obj,as_dom){if(obj&&obj.id){obj=obj.id;}
var dom;try{if(this._model.data[obj]){obj=this._model.data[obj];}
else if(typeof obj==="string"&&this._model.data[obj.replace(/^#/,'')]){obj=this._model.data[obj.replace(/^#/,'')];}
else if(typeof obj==="string"&&(dom=$('#'+obj.replace($.jstree.idregex,'\\$&'),this.element)).length&&this._model.data[dom.closest('.jstree-node').attr('id')]){obj=this._model.data[dom.closest('.jstree-node').attr('id')];}
else if((dom=$(obj,this.element)).length&&this._model.data[dom.closest('.jstree-node').attr('id')]){obj=this._model.data[dom.closest('.jstree-node').attr('id')];}
else if((dom=$(obj,this.element)).length&&dom.hasClass('jstree')){obj=this._model.data[$.jstree.root];}
else{return false;}
if(as_dom){obj=obj.id===$.jstree.root?this.element:$('#'+obj.id.replace($.jstree.idregex,'\\$&'),this.element);}
return obj;}catch(ex){return false;}},get_path:function(obj,glue,ids){obj=obj.parents?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root||!obj.parents){return false;}
var i,j,p=[];p.push(ids?obj.id:obj.text);for(i=0,j=obj.parents.length;i<j;i++){p.push(ids?obj.parents[i]:this.get_text(obj.parents[i]));}
p=p.reverse().slice(1);return glue?p.join(glue):p;},get_next_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this._firstChild(this.get_container_ul()[0]);while(tmp&&tmp.offsetHeight===0){tmp=this._nextSibling(tmp);}
return tmp?$(tmp):false;}
if(!obj||!obj.length){return false;}
if(strict){tmp=obj[0];do{tmp=this._nextSibling(tmp);}while(tmp&&tmp.offsetHeight===0);return tmp?$(tmp):false;}
if(obj.hasClass("jstree-open")){tmp=this._firstChild(obj.children('.jstree-children')[0]);while(tmp&&tmp.offsetHeight===0){tmp=this._nextSibling(tmp);}
if(tmp!==null){return $(tmp);}}
tmp=obj[0];do{tmp=this._nextSibling(tmp);}while(tmp&&tmp.offsetHeight===0);if(tmp!==null){return $(tmp);}
return obj.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first();},get_prev_dom:function(obj,strict){var tmp;obj=this.get_node(obj,true);if(obj[0]===this.element[0]){tmp=this.get_container_ul()[0].lastChild;while(tmp&&tmp.offsetHeight===0){tmp=this._previousSibling(tmp);}
return tmp?$(tmp):false;}
if(!obj||!obj.length){return false;}
if(strict){tmp=obj[0];do{tmp=this._previousSibling(tmp);}while(tmp&&tmp.offsetHeight===0);return tmp?$(tmp):false;}
tmp=obj[0];do{tmp=this._previousSibling(tmp);}while(tmp&&tmp.offsetHeight===0);if(tmp!==null){obj=$(tmp);while(obj.hasClass("jstree-open")){obj=obj.children(".jstree-children").first().children(".jstree-node:visible:last");}
return obj;}
tmp=obj[0].parentNode.parentNode;return tmp&&tmp.className&&tmp.className.indexOf('jstree-node')!==-1?$(tmp):false;},get_parent:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
return obj.parent;},get_children_dom:function(obj){obj=this.get_node(obj,true);if(obj[0]===this.element[0]){return this.get_container_ul().children(".jstree-node");}
if(!obj||!obj.length){return false;}
return obj.children(".jstree-children").children(".jstree-node");},is_parent:function(obj){obj=this.get_node(obj);return obj&&(obj.state.loaded===false||obj.children.length>0);},is_loaded:function(obj){obj=this.get_node(obj);return obj&&obj.state.loaded;},is_loading:function(obj){obj=this.get_node(obj);return obj&&obj.state&&obj.state.loading;},is_open:function(obj){obj=this.get_node(obj);return obj&&obj.state.opened;},is_closed:function(obj){obj=this.get_node(obj);return obj&&this.is_parent(obj)&&!obj.state.opened;},is_leaf:function(obj){return!this.is_parent(obj);},load_node:function(obj,callback){var k,l,i,j,c;if($.isArray(obj)){this._load_nodes(obj.slice(),callback);return true;}
obj=this.get_node(obj);if(!obj){if(callback){callback.call(this,obj,false);}
return false;}
if(obj.state.loaded){obj.state.loaded=false;for(i=0,j=obj.parents.length;i<j;i++){this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return $.inArray(v,obj.children_d)===-1;});}
for(k=0,l=obj.children_d.length;k<l;k++){if(this._model.data[obj.children_d[k]].state.selected){c=true;}
delete this._model.data[obj.children_d[k]];}
if(c){this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return $.inArray(v,obj.children_d)===-1;});}
obj.children=[];obj.children_d=[];if(c){this.trigger('changed',{'action':'load_node','node':obj,'selected':this._data.core.selected});}}
obj.state.failed=false;obj.state.loading=true;this.get_node(obj,true).addClass("jstree-loading").attr('aria-busy',true);this._load_node(obj,$.proxy(function(status){obj=this._model.data[obj.id];obj.state.loading=false;obj.state.loaded=status;obj.state.failed=!obj.state.loaded;var dom=this.get_node(obj,true),i=0,j=0,m=this._model.data,has_children=false;for(i=0,j=obj.children.length;i<j;i++){if(m[obj.children[i]]&&!m[obj.children[i]].state.hidden){has_children=true;break;}}
if(obj.state.loaded&&dom&&dom.length){dom.removeClass('jstree-closed jstree-open jstree-leaf');if(!has_children){dom.addClass('jstree-leaf');}
else{if(obj.id!=='#'){dom.addClass(obj.state.opened?'jstree-open':'jstree-closed');}}}
dom.removeClass("jstree-loading").attr('aria-busy',false);this.trigger('load_node',{"node":obj,"status":status});if(callback){callback.call(this,obj,status);}},this));return true;},_load_nodes:function(nodes,callback,is_callback,force_reload){var r=true,c=function(){this._load_nodes(nodes,callback,true);},m=this._model.data,i,j,tmp=[];for(i=0,j=nodes.length;i<j;i++){if(m[nodes[i]]&&((!m[nodes[i]].state.loaded&&!m[nodes[i]].state.failed)||(!is_callback&&force_reload))){if(!this.is_loading(nodes[i])){this.load_node(nodes[i],c);}
r=false;}}
if(r){for(i=0,j=nodes.length;i<j;i++){if(m[nodes[i]]&&m[nodes[i]].state.loaded){tmp.push(nodes[i]);}}
if(callback&&!callback.done){callback.call(this,tmp);callback.done=true;}}},load_all:function(obj,callback){if(!obj){obj=$.jstree.root;}
obj=this.get_node(obj);if(!obj){return false;}
var to_load=[],m=this._model.data,c=m[obj.id].children_d,i,j;if(obj.state&&!obj.state.loaded){to_load.push(obj.id);}
for(i=0,j=c.length;i<j;i++){if(m[c[i]]&&m[c[i]].state&&!m[c[i]].state.loaded){to_load.push(c[i]);}}
if(to_load.length){this._load_nodes(to_load,function(){this.load_all(obj,callback);});}
else{if(callback){callback.call(this,obj);}
this.trigger('load_all',{"node":obj});}},_load_node:function(obj,callback){var s=this.settings.core.data,t;var notTextOrCommentNode=function notTextOrCommentNode(){return this.nodeType!==3&&this.nodeType!==8;};if(!s){if(obj.id===$.jstree.root){return this._append_html_data(obj,this._data.core.original_container_html.clone(true),function(status){callback.call(this,status);});}
else{return callback.call(this,false);}
}
if($.isFunction(s)){return s.call(this,obj,$.proxy(function(d){if(d===false){callback.call(this,false);}
else{this[typeof d==='string'?'_append_html_data':'_append_json_data'](obj,typeof d==='string'?$($.parseHTML(d)).filter(notTextOrCommentNode):d,function(status){callback.call(this,status);});}
},this));}
if(typeof s==='object'){if(s.url){s=$.extend(true,{},s);if($.isFunction(s.url)){s.url=s.url.call(this,obj);}
if($.isFunction(s.data)){s.data=s.data.call(this,obj);}
return $.ajax(s)
.done($.proxy(function(d,t,x){var type=x.getResponseHeader('Content-Type');if((type&&type.indexOf('json')!==-1)||typeof d==="object"){return this._append_json_data(obj,d,function(status){callback.call(this,status);});}
if((type&&type.indexOf('html')!==-1)||typeof d==="string"){return this._append_html_data(obj,$($.parseHTML(d)).filter(notTextOrCommentNode),function(status){callback.call(this,status);});}
this._data.core.last_error={'error':'ajax','plugin':'core','id':'core_04','reason':'Could not load node','data':JSON.stringify({'id':obj.id,'xhr':x})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false);},this))
.fail($.proxy(function(f){this._data.core.last_error={'error':'ajax','plugin':'core','id':'core_04','reason':'Could not load node','data':JSON.stringify({'id':obj.id,'xhr':f})};callback.call(this,false);this.settings.core.error.call(this,this._data.core.last_error);},this));}
if($.isArray(s)){t=$.extend(true,[],s);}else if($.isPlainObject(s)){t=$.extend(true,{},s);}else{t=s;}
if(obj.id===$.jstree.root){return this._append_json_data(obj,t,function(status){callback.call(this,status);});}
else{this._data.core.last_error={'error':'nodata','plugin':'core','id':'core_05','reason':'Could not load node','data':JSON.stringify({'id':obj.id})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false);}
}
if(typeof s==='string'){if(obj.id===$.jstree.root){return this._append_html_data(obj,$($.parseHTML(s)).filter(notTextOrCommentNode),function(status){callback.call(this,status);});}
else{this._data.core.last_error={'error':'nodata','plugin':'core','id':'core_06','reason':'Could not load node','data':JSON.stringify({'id':obj.id})};this.settings.core.error.call(this,this._data.core.last_error);return callback.call(this,false);}
}
return callback.call(this,false);},_node_changed:function(obj){obj=this.get_node(obj);if(obj){this._model.changed.push(obj.id);}},_append_html_data:function(dom,data,cb){dom=this.get_node(dom);dom.children=[];dom.children_d=[];var dat=data.is('ul')?data.children():data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length,tmp,i,j;dat.each($.proxy(function(i,v){tmp=this._parse_model_from_html($(v),par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d);}}},this));p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);}
this.trigger('model',{"nodes":dpc,'parent':par});if(par!==$.jstree.root){this._node_changed(par);this.redraw();}
else{this.get_container_ul().children('.jstree-initial-node').remove();this.redraw(true);}
if(this._data.core.selected.length!==s){this.trigger('changed',{'action':'model','selected':this._data.core.selected});}
cb.call(this,true);},_append_json_data:function(dom,data,cb,force_processing){if(this.element===null){return;}
dom=this.get_node(dom);dom.children=[];dom.children_d=[];if(data.d){data=data.d;if(typeof data==="string"){data=JSON.parse(data);}}
if(!$.isArray(data)){data=[data];}
var w=null,args={'df':this._model.default_state,'dat':data,'par':dom.id,'m':this._model.data,'t_id':this._id,'t_cnt':this._cnt,'sel':this._data.core.selected},func=function(data,undefined){if(data.data){data=data.data;}
var dat=data.dat,par=data.par,chd=[],dpc=[],add=[],df=data.df,t_id=data.t_id,t_cnt=data.t_cnt,m=data.m,p=m[par],sel=data.sel,tmp,i,j,rslt,parse_flat=function(d,p,ps){if(!ps){ps=[];}
else{ps=ps.concat();}
if(p){ps.unshift(p);}
var tid=d.id.toString(),i,j,c,e,tmp={id:tid,text:d.text||'',icon:d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:false},a_attr:{href:'#'},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i];}}
if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon;}
if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true;}
if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i];}}}}
if(d&&typeof d.state==='object'){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i];}}}
if(d&&typeof d.li_attr==='object'){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i];}}}
if(!tmp.li_attr.id){tmp.li_attr.id=tid;}
if(d&&typeof d.a_attr==='object'){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i];}}}
if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[];}
m[tmp.id]=tmp;for(i=0,j=tmp.children.length;i<j;i++){c=parse_flat(m[tmp.children[i]],tmp.id,ps);e=m[c];tmp.children_d.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d);}}
delete d.data;delete d.children;m[tmp.id].original=d;if(tmp.state.selected){add.push(tmp.id);}
return tmp.id;},parse_nest=function(d,p,ps){if(!ps){ps=[];}
else{ps=ps.concat();}
if(p){ps.unshift(p);}
var tid=false,i,j,c,e,tmp;do{tid='j'+t_id+'_'+(++t_cnt);}while(m[tid]);tmp={id:false,text:typeof d==='string'?d:'',icon:typeof d==='object'&&d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:'#'},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i];}}
if(d&&d.id){tmp.id=d.id.toString();}
if(d&&d.text){tmp.text=d.text;}
if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon;}
if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true;}
if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i];}}}}
if(d&&typeof d.state==='object'){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i];}}}
if(d&&typeof d.li_attr==='object'){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i];}}}
if(tmp.li_attr.id&&!tmp.id){tmp.id=tmp.li_attr.id.toString();}
if(!tmp.id){tmp.id=tid;}
if(!tmp.li_attr.id){tmp.li_attr.id=tmp.id;}
if(d&&typeof d.a_attr==='object'){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i];}}}
if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++){c=parse_nest(d.children[i],tmp.id,ps);e=m[c];tmp.children.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d);}}
tmp.children_d=tmp.children_d.concat(tmp.children);}
if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[];}
delete d.data;delete d.children;tmp.original=d;m[tmp.id]=tmp;if(tmp.state.selected){add.push(tmp.id);}
return tmp.id;};if(dat.length&&dat[0].id!==undefined&&dat[0].parent!==undefined){for(i=0,j=dat.length;i<j;i++){if(!dat[i].children){dat[i].children=[];}
m[dat[i].id.toString()]=dat[i];}
for(i=0,j=dat.length;i<j;i++){m[dat[i].parent.toString()].children.push(dat[i].id.toString());p.children_d.push(dat[i].id.toString());}
for(i=0,j=p.children.length;i<j;i++){tmp=parse_flat(m[p.children[i]],par,p.parents.concat());dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d);}}
for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);}
rslt={'cnt':t_cnt,'mod':m,'sel':sel,'par':par,'dpc':dpc,'add':add};}
else{for(i=0,j=dat.length;i<j;i++){tmp=parse_nest(dat[i],par,p.parents.concat());if(tmp){chd.push(tmp);dpc.push(tmp);if(m[tmp].children_d.length){dpc=dpc.concat(m[tmp].children_d);}}}
p.children=chd;p.children_d=dpc;for(i=0,j=p.parents.length;i<j;i++){m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);}
rslt={'cnt':t_cnt,'mod':m,'sel':sel,'par':par,'dpc':dpc,'add':add};}
if(typeof window==='undefined'||typeof window.document==='undefined'){postMessage(rslt);}
else{return rslt;}},rslt=function(rslt,worker){if(this.element===null){return;}
this._cnt=rslt.cnt;var i,m=this._model.data;for(i in m){if(m.hasOwnProperty(i)&&m[i].state&&m[i].state.loading&&rslt.mod[i]){rslt.mod[i].state.loading=true;}}
this._model.data=rslt.mod;if(worker){var j,a=rslt.add,r=rslt.sel,s=this._data.core.selected.slice();m=this._model.data;if(r.length!==s.length||$.vakata.array_unique(r.concat(s)).length!==r.length){for(i=0,j=r.length;i<j;i++){if($.inArray(r[i],a)===-1&&$.inArray(r[i],s)===-1){m[r[i]].state.selected=false;}}
for(i=0,j=s.length;i<j;i++){if($.inArray(s[i],r)===-1){m[s[i]].state.selected=true;}}}}
if(rslt.add.length){this._data.core.selected=this._data.core.selected.concat(rslt.add);}
this.trigger('model',{"nodes":rslt.dpc,'parent':rslt.par});if(rslt.par!==$.jstree.root){this._node_changed(rslt.par);this.redraw();}
else{this.redraw(true);}
if(rslt.add.length){this.trigger('changed',{'action':'model','selected':this._data.core.selected});}
cb.call(this,true);};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{if(this._wrk===null){this._wrk=window.URL.createObjectURL(new window.Blob(['self.onmessage = '+func.toString()],{type:"text/javascript"}));}
if(!this._data.core.working||force_processing){this._data.core.working=true;w=new window.Worker(this._wrk);w.onmessage=$.proxy(function(e){rslt.call(this,e.data,true);try{w.terminate();w=null;}catch(ignore){}
if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift());}
else{this._data.core.working=false;}},this);if(!args.par){if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift());}
else{this._data.core.working=false;}}
else{w.postMessage(args);}}
else{this._data.core.worker_queue.push([dom,data,cb,true]);}}
catch(e){rslt.call(this,func(args),false);if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift());}
else{this._data.core.working=false;}}}
else{rslt.call(this,func(args),false);}},_parse_model_from_html:function(d,p,ps){if(!ps){ps=[];}
else{ps=[].concat(ps);}
if(p){ps.unshift(p);}
var c,e,m=this._model.data,data={id:false,text:false,icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:'#'},original:false},i,tmp,tid;for(i in this._model.default_state){if(this._model.default_state.hasOwnProperty(i)){data.state[i]=this._model.default_state[i];}}
tmp=$.vakata.attributes(d,true);$.each(tmp,function(i,v){v=$.trim(v);if(!v.length){return true;}
data.li_attr[i]=v;if(i==='id'){data.id=v.toString();}});tmp=d.children('a').first();if(tmp.length){tmp=$.vakata.attributes(tmp,true);$.each(tmp,function(i,v){v=$.trim(v);if(v.length){data.a_attr[i]=v;}});}
tmp=d.children("a").first().length?d.children("a").first().clone():d.clone();tmp.children("ins, i, ul").remove();tmp=tmp.html();tmp=$('<div />').html(tmp);data.text=this.settings.core.force_text?tmp.text():tmp.html();tmp=d.data();data.data=tmp?$.extend(true,{},tmp):null;data.state.opened=d.hasClass('jstree-open');data.state.selected=d.children('a').hasClass('jstree-clicked');data.state.disabled=d.children('a').hasClass('jstree-disabled');if(data.data&&data.data.jstree){for(i in data.data.jstree){if(data.data.jstree.hasOwnProperty(i)){data.state[i]=data.data.jstree[i];}}}
tmp=d.children("a").children(".jstree-themeicon");if(tmp.length){data.icon=tmp.hasClass('jstree-themeicon-hidden')?false:tmp.attr('rel');}
if(data.state.icon!==undefined){data.icon=data.state.icon;}
if(data.icon===undefined||data.icon===null||data.icon===""){data.icon=true;}
tmp=d.children("ul").children("li");do{tid='j'+this._id+'_'+(++this._cnt);}while(m[tid]);data.id=data.li_attr.id?data.li_attr.id.toString():tid;if(tmp.length){tmp.each($.proxy(function(i,v){c=this._parse_model_from_html($(v),data.id,ps);e=this._model.data[c];data.children.push(c);if(e.children_d.length){data.children_d=data.children_d.concat(e.children_d);}},this));data.children_d=data.children_d.concat(data.children);}
else{if(d.hasClass('jstree-closed')){data.state.loaded=false;}}
if(data.li_attr['class']){data.li_attr['class']=data.li_attr['class'].replace('jstree-closed','').replace('jstree-open','');}
if(data.a_attr['class']){data.a_attr['class']=data.a_attr['class'].replace('jstree-clicked','').replace('jstree-disabled','');}
m[data.id]=data;if(data.state.selected){this._data.core.selected.push(data.id);}
return data.id;},_parse_model_from_flat_json:function(d,p,ps){if(!ps){ps=[];}
else{ps=ps.concat();}
if(p){ps.unshift(p);}
var tid=d.id.toString(),m=this._model.data,df=this._model.default_state,i,j,c,e,tmp={id:tid,text:d.text||'',icon:d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:false},a_attr:{href:'#'},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i];}}
if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon;}
if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true;}
if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i];}}}}
if(d&&typeof d.state==='object'){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i];}}}
if(d&&typeof d.li_attr==='object'){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i];}}}
if(!tmp.li_attr.id){tmp.li_attr.id=tid;}
if(d&&typeof d.a_attr==='object'){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i];}}}
if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[];}
m[tmp.id]=tmp;for(i=0,j=tmp.children.length;i<j;i++){c=this._parse_model_from_flat_json(m[tmp.children[i]],tmp.id,ps);e=m[c];tmp.children_d.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d);}}
delete d.data;delete d.children;m[tmp.id].original=d;if(tmp.state.selected){this._data.core.selected.push(tmp.id);}
return tmp.id;},_parse_model_from_json:function(d,p,ps){if(!ps){ps=[];}
else{ps=ps.concat();}
if(p){ps.unshift(p);}
var tid=false,i,j,c,e,m=this._model.data,df=this._model.default_state,tmp;do{tid='j'+this._id+'_'+(++this._cnt);}while(m[tid]);tmp={id:false,text:typeof d==='string'?d:'',icon:typeof d==='object'&&d.icon!==undefined?d.icon:true,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:'#'},original:false};for(i in df){if(df.hasOwnProperty(i)){tmp.state[i]=df[i];}}
if(d&&d.id){tmp.id=d.id.toString();}
if(d&&d.text){tmp.text=d.text;}
if(d&&d.data&&d.data.jstree&&d.data.jstree.icon){tmp.icon=d.data.jstree.icon;}
if(tmp.icon===undefined||tmp.icon===null||tmp.icon===""){tmp.icon=true;}
if(d&&d.data){tmp.data=d.data;if(d.data.jstree){for(i in d.data.jstree){if(d.data.jstree.hasOwnProperty(i)){tmp.state[i]=d.data.jstree[i];}}}}
if(d&&typeof d.state==='object'){for(i in d.state){if(d.state.hasOwnProperty(i)){tmp.state[i]=d.state[i];}}}
if(d&&typeof d.li_attr==='object'){for(i in d.li_attr){if(d.li_attr.hasOwnProperty(i)){tmp.li_attr[i]=d.li_attr[i];}}}
if(tmp.li_attr.id&&!tmp.id){tmp.id=tmp.li_attr.id.toString();}
if(!tmp.id){tmp.id=tid;}
if(!tmp.li_attr.id){tmp.li_attr.id=tmp.id;}
if(d&&typeof d.a_attr==='object'){for(i in d.a_attr){if(d.a_attr.hasOwnProperty(i)){tmp.a_attr[i]=d.a_attr[i];}}}
if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++){c=this._parse_model_from_json(d.children[i],tmp.id,ps);e=m[c];tmp.children.push(c);if(e.children_d.length){tmp.children_d=tmp.children_d.concat(e.children_d);}}
tmp.children_d=tmp.children_d.concat(tmp.children);}
if(d&&d.children&&d.children===true){tmp.state.loaded=false;tmp.children=[];tmp.children_d=[];}
delete d.data;delete d.children;tmp.original=d;m[tmp.id]=tmp;if(tmp.state.selected){this._data.core.selected.push(tmp.id);}
return tmp.id;},_redraw:function(){var nodes=this._model.force_full_redraw?this._model.data[$.jstree.root].children.concat([]):this._model.changed.concat([]),f=document.createElement('UL'),tmp,i,j,fe=this._data.core.focused;for(i=0,j=nodes.length;i<j;i++){tmp=this.redraw_node(nodes[i],true,this._model.force_full_redraw);if(tmp&&this._model.force_full_redraw){f.appendChild(tmp);}}
if(this._model.force_full_redraw){f.className=this.get_container_ul()[0].className;f.setAttribute('role','group');this.element.empty().append(f);}
if(fe!==null){tmp=this.get_node(fe,true);if(tmp&&tmp.length&&tmp.children('.jstree-anchor')[0]!==document.activeElement){tmp.children('.jstree-anchor').focus();}
else{this._data.core.focused=null;}}
this._model.force_full_redraw=false;this._model.changed=[];this.trigger('redraw',{"nodes":nodes});},redraw:function(full){if(full){this._model.force_full_redraw=true;}
this._redraw();},draw_children:function(node){var obj=this.get_node(node),i=false,j=false,k=false,d=document;if(!obj){return false;}
if(obj.id===$.jstree.root){return this.redraw(true);}
node=this.get_node(node,true);if(!node||!node.length){return false;}
node.children('.jstree-children').remove();node=node[0];if(obj.children.length&&obj.state.loaded){k=d.createElement('UL');k.setAttribute('role','group');k.className='jstree-children';for(i=0,j=obj.children.length;i<j;i++){k.appendChild(this.redraw_node(obj.children[i],true,true));}
node.appendChild(k);}},redraw_node:function(node,deep,is_callback,force_render){var obj=this.get_node(node),par=false,ind=false,old=false,i=false,j=false,k=false,c='',d=document,m=this._model.data,f=false,s=false,tmp=null,t=0,l=0,has_children=false,last_sibling=false;if(!obj){return false;}
if(obj.id===$.jstree.root){return this.redraw(true);}
deep=deep||obj.children.length===0;node=!document.querySelector?document.getElementById(obj.id):this.element[0].querySelector('#'+("0123456789".indexOf(obj.id[0])!==-1?'\\3'+obj.id[0]+' '+obj.id.substr(1).replace($.jstree.idregex,'\\$&'):obj.id.replace($.jstree.idregex,'\\$&')));if(!node){deep=true;if(!is_callback){par=obj.parent!==$.jstree.root?$('#'+obj.parent.replace($.jstree.idregex,'\\$&'),this.element)[0]:null;if(par!==null&&(!par||!m[obj.parent].state.opened)){return false;}
ind=$.inArray(obj.id,par===null?m[$.jstree.root].children:m[obj.parent].children);}}
else{node=$(node);if(!is_callback){par=node.parent().parent()[0];if(par===this.element[0]){par=null;}
ind=node.index();}
if(!deep&&obj.children.length&&!node.children('.jstree-children').length){deep=true;}
if(!deep){old=node.children('.jstree-children')[0];}
f=node.children('.jstree-anchor')[0]===document.activeElement;node.remove();}
node=this._data.core.node.cloneNode(true);c='jstree-node ';for(i in obj.li_attr){if(obj.li_attr.hasOwnProperty(i)){if(i==='id'){continue;}
if(i!=='class'){node.setAttribute(i,obj.li_attr[i]);}
else{c+=obj.li_attr[i];}}}
if(!obj.a_attr.id){obj.a_attr.id=obj.id+'_anchor';}
node.setAttribute('aria-selected',!!obj.state.selected);node.setAttribute('aria-level',obj.parents.length);node.setAttribute('aria-labelledby',obj.a_attr.id);if(obj.state.disabled){node.setAttribute('aria-disabled',true);}
for(i=0,j=obj.children.length;i<j;i++){if(!m[obj.children[i]].state.hidden){has_children=true;break;}}
if(obj.parent!==null&&m[obj.parent]&&!obj.state.hidden){i=$.inArray(obj.id,m[obj.parent].children);last_sibling=obj.id;if(i!==-1){i++;for(j=m[obj.parent].children.length;i<j;i++){if(!m[m[obj.parent].children[i]].state.hidden){last_sibling=m[obj.parent].children[i];}
if(last_sibling!==obj.id){break;}}}}
if(obj.state.hidden){c+=' jstree-hidden';}
if(obj.state.loaded&&!has_children){c+=' jstree-leaf';}
else{c+=obj.state.opened&&obj.state.loaded?' jstree-open':' jstree-closed';node.setAttribute('aria-expanded',(obj.state.opened&&obj.state.loaded));}
if(last_sibling===obj.id){c+=' jstree-last';}
node.id=obj.id;node.className=c;c=(obj.state.selected?' jstree-clicked':'')+(obj.state.disabled?' jstree-disabled':'');for(j in obj.a_attr){if(obj.a_attr.hasOwnProperty(j)){if(j==='href'&&obj.a_attr[j]==='#'){continue;}
if(j!=='class'){node.childNodes[1].setAttribute(j,obj.a_attr[j]);}
else{c+=' '+obj.a_attr[j];}}}
if(c.length){node.childNodes[1].className='jstree-anchor '+c;}
if((obj.icon&&obj.icon!==true)||obj.icon===false){if(obj.icon===false){node.childNodes[1].childNodes[0].className+=' jstree-themeicon-hidden';}
else if(obj.icon.indexOf('/')===-1&&obj.icon.indexOf('.')===-1){node.childNodes[1].childNodes[0].className+=' '+obj.icon+' jstree-themeicon-custom';}
else{node.childNodes[1].childNodes[0].style.backgroundImage='url("'+obj.icon+'")';node.childNodes[1].childNodes[0].style.backgroundPosition='center center';node.childNodes[1].childNodes[0].style.backgroundSize='auto';node.childNodes[1].childNodes[0].className+=' jstree-themeicon-custom';}}
if(this.settings.core.force_text){node.childNodes[1].appendChild(d.createTextNode(obj.text));}
else{node.childNodes[1].innerHTML+=obj.text;}
if(deep&&obj.children.length&&(obj.state.opened||force_render)&&obj.state.loaded){k=d.createElement('UL');k.setAttribute('role','group');k.className='jstree-children';for(i=0,j=obj.children.length;i<j;i++){k.appendChild(this.redraw_node(obj.children[i],deep,true));}
node.appendChild(k);}
if(old){node.appendChild(old);}
if(!is_callback){if(!par){par=this.element[0];}
for(i=0,j=par.childNodes.length;i<j;i++){if(par.childNodes[i]&&par.childNodes[i].className&&par.childNodes[i].className.indexOf('jstree-children')!==-1){tmp=par.childNodes[i];break;}}
if(!tmp){tmp=d.createElement('UL');tmp.setAttribute('role','group');tmp.className='jstree-children';par.appendChild(tmp);}
par=tmp;if(ind<par.childNodes.length){par.insertBefore(node,par.childNodes[ind]);}
else{par.appendChild(node);}
if(f){t=this.element[0].scrollTop;l=this.element[0].scrollLeft;node.childNodes[1].focus();this.element[0].scrollTop=t;this.element[0].scrollLeft=l;}}
if(obj.state.opened&&!obj.state.loaded){obj.state.opened=false;setTimeout($.proxy(function(){this.open_node(obj.id,false,0);},this),0);}
return node;},open_node:function(obj,callback,animation){var t1,t2,d,t;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.open_node(obj[t1],callback,animation);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
animation=animation===undefined?this.settings.core.animation:animation;if(!this.is_closed(obj)){if(callback){callback.call(this,obj,false);}
return false;}
if(!this.is_loaded(obj)){if(this.is_loading(obj)){return setTimeout($.proxy(function(){this.open_node(obj,callback,animation);},this),500);}
this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):(callback?callback.call(this,o,false):false);});}
else{d=this.get_node(obj,true);t=this;if(d.length){if(animation&&d.children(".jstree-children").length){d.children(".jstree-children").stop(true,true);}
if(obj.children.length&&!this._firstChild(d.children('.jstree-children')[0])){this.draw_children(obj);}
if(!animation){this.trigger('before_open',{"node":obj});d[0].className=d[0].className.replace('jstree-closed','jstree-open');d[0].setAttribute("aria-expanded",true);}
else{this.trigger('before_open',{"node":obj});d
.children(".jstree-children").css("display","none").end()
.removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true)
.children(".jstree-children").stop(true,true)
.slideDown(animation,function(){this.style.display="";if(t.element){t.trigger("after_open",{"node":obj});}});}}
obj.state.opened=true;if(callback){callback.call(this,obj,true);}
if(!d.length){this.trigger('before_open',{"node":obj});}
this.trigger('open_node',{"node":obj});if(!animation||!d.length){this.trigger("after_open",{"node":obj});}
return true;}},_open_to:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
var i,j,p=obj.parents;for(i=0,j=p.length;i<j;i+=1){if(i!==$.jstree.root){this.open_node(p[i],false,0);}}
return $('#'+obj.id.replace($.jstree.idregex,'\\$&'),this.element);},close_node:function(obj,animation){var t1,t2,t,d;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.close_node(obj[t1],animation);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
if(this.is_closed(obj)){return false;}
animation=animation===undefined?this.settings.core.animation:animation;t=this;d=this.get_node(obj,true);obj.state.opened=false;this.trigger('close_node',{"node":obj});if(!d.length){this.trigger("after_close",{"node":obj});}
else{if(!animation){d[0].className=d[0].className.replace('jstree-open','jstree-closed');d.attr("aria-expanded",false).children('.jstree-children').remove();this.trigger("after_close",{"node":obj});}
else{d
.children(".jstree-children").attr("style","display:block !important").end()
.removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false)
.children(".jstree-children").stop(true,true).slideUp(animation,function(){this.style.display="";d.children('.jstree-children').remove();if(t.element){t.trigger("after_close",{"node":obj});}});}}},toggle_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.toggle_node(obj[t1]);}
return true;}
if(this.is_closed(obj)){return this.open_node(obj);}
if(this.is_open(obj)){return this.close_node(obj);}},open_all:function(obj,animation,original_obj){if(!obj){obj=$.jstree.root;}
obj=this.get_node(obj);if(!obj){return false;}
var dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,true),i,j,_this;if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++){if(this.is_closed(this._model.data[obj.children_d[i]])){this._model.data[obj.children_d[i]].state.opened=true;}}
return this.trigger('open_all',{"node":obj});}
original_obj=original_obj||dom;_this=this;dom=this.is_closed(obj)?dom.find('.jstree-closed').addBack():dom.find('.jstree-closed');dom.each(function(){_this.open_node(this,function(node,status){if(status&&this.is_parent(node)){this.open_all(node,animation,original_obj);}},animation||0);});if(original_obj.find('.jstree-closed').length===0){this.trigger('open_all',{"node":this.get_node(original_obj)});}},close_all:function(obj,animation){if(!obj){obj=$.jstree.root;}
obj=this.get_node(obj);if(!obj){return false;}
var dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,true),_this=this,i,j;if(dom.length){dom=this.is_open(obj)?dom.find('.jstree-open').addBack():dom.find('.jstree-open');$(dom.get().reverse()).each(function(){_this.close_node(this,animation||0);});}
for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].state.opened=false;}
this.trigger('close_all',{"node":obj});},is_disabled:function(obj){obj=this.get_node(obj);return obj&&obj.state&&obj.state.disabled;},enable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.enable_node(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
obj.state.disabled=false;this.get_node(obj,true).children('.jstree-anchor').removeClass('jstree-disabled').attr('aria-disabled',false);this.trigger('enable_node',{'node':obj});},disable_node:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.disable_node(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
obj.state.disabled=true;this.get_node(obj,true).children('.jstree-anchor').addClass('jstree-disabled').attr('aria-disabled',true);this.trigger('disable_node',{'node':obj});},is_hidden:function(obj){obj=this.get_node(obj);return obj.state.hidden===true;},hide_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.hide_node(obj[t1],true);}
if(!skip_redraw){this.redraw();}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
if(!obj.state.hidden){obj.state.hidden=true;this._node_changed(obj.parent);if(!skip_redraw){this.redraw();}
this.trigger('hide_node',{'node':obj});}},show_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.show_node(obj[t1],true);}
if(!skip_redraw){this.redraw();}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
if(obj.state.hidden){obj.state.hidden=false;this._node_changed(obj.parent);if(!skip_redraw){this.redraw();}
this.trigger('show_node',{'node':obj});}},hide_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m){if(m.hasOwnProperty(i)&&i!==$.jstree.root&&!m[i].state.hidden){m[i].state.hidden=true;ids.push(i);}}
this._model.force_full_redraw=true;if(!skip_redraw){this.redraw();}
this.trigger('hide_all',{'nodes':ids});return ids;},show_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m){if(m.hasOwnProperty(i)&&i!==$.jstree.root&&m[i].state.hidden){m[i].state.hidden=false;ids.push(i);}}
this._model.force_full_redraw=true;if(!skip_redraw){this.redraw();}
this.trigger('show_all',{'nodes':ids});return ids;},activate_node:function(obj,e){if(this.is_disabled(obj)){return false;}
if(!e||typeof e!=='object'){e={};}
this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null;if(this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected){this._data.core.last_clicked=null;}
if(!this._data.core.last_clicked&&this._data.core.selected.length){this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1]);}
if(!this.settings.core.multiple||(!e.metaKey&&!e.ctrlKey&&!e.shiftKey)||(e.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(obj)||this.get_parent(obj)!==this._data.core.last_clicked.parent))){if(!this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&this.is_selected(obj)){this.deselect_node(obj,false,e);}
else{this.deselect_all(true);this.select_node(obj,false,false,e);this._data.core.last_clicked=this.get_node(obj);}}
else{if(e.shiftKey){var o=this.get_node(obj).id,l=this._data.core.last_clicked.id,p=this.get_node(this._data.core.last_clicked.parent).children,c=false,i,j;for(i=0,j=p.length;i<j;i+=1){if(p[i]===o){c=!c;}
if(p[i]===l){c=!c;}
if(!this.is_disabled(p[i])&&(c||p[i]===o||p[i]===l)){if(!this.is_hidden(p[i])){this.select_node(p[i],true,false,e);}}
else{this.deselect_node(p[i],true,e);}}
this.trigger('changed',{'action':'select_node','node':this.get_node(obj),'selected':this._data.core.selected,'event':e});}
else{if(!this.is_selected(obj)){this.select_node(obj,false,false,e);}
else{this.deselect_node(obj,false,e);}}}
this.trigger('activate_node',{'node':this.get_node(obj),'event':e});},hover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||obj.children('.jstree-hovered').length){return false;}
var o=this.element.find('.jstree-hovered'),t=this.element;if(o&&o.length){this.dehover_node(o);}
obj.children('.jstree-anchor').addClass('jstree-hovered');this.trigger('hover_node',{'node':this.get_node(obj)});setTimeout(function(){t.attr('aria-activedescendant',obj[0].id);},0);},dehover_node:function(obj){obj=this.get_node(obj,true);if(!obj||!obj.length||!obj.children('.jstree-hovered').length){return false;}
obj.children('.jstree-anchor').removeClass('jstree-hovered');this.trigger('dehover_node',{'node':this.get_node(obj)});},select_node:function(obj,supress_event,prevent_open,e){var dom,t1,t2,th;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.select_node(obj[t1],supress_event,prevent_open,e);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(!obj.state.selected){obj.state.selected=true;this._data.core.selected.push(obj.id);if(!prevent_open){dom=this._open_to(obj);}
if(dom&&dom.length){dom.attr('aria-selected',true).children('.jstree-anchor').addClass('jstree-clicked');}
this.trigger('select_node',{'node':obj,'selected':this._data.core.selected,'event':e});if(!supress_event){this.trigger('changed',{'action':'select_node','node':obj,'selected':this._data.core.selected,'event':e});}}},deselect_node:function(obj,supress_event,e){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.deselect_node(obj[t1],supress_event,e);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(obj.state.selected){obj.state.selected=false;this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.id);if(dom.length){dom.attr('aria-selected',false).children('.jstree-anchor').removeClass('jstree-clicked');}
this.trigger('deselect_node',{'node':obj,'selected':this._data.core.selected,'event':e});if(!supress_event){this.trigger('changed',{'action':'deselect_node','node':obj,'selected':this._data.core.selected,'event':e});}}},select_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;this._data.core.selected=this._model.data[$.jstree.root].children_d.concat();for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=true;}}
this.redraw(true);this.trigger('select_all',{'selected':this._data.core.selected});if(!supress_event){this.trigger('changed',{'action':'select_all','selected':this._data.core.selected,'old_selection':tmp});}},deselect_all:function(supress_event){var tmp=this._data.core.selected.concat([]),i,j;for(i=0,j=this._data.core.selected.length;i<j;i++){if(this._model.data[this._data.core.selected[i]]){this._model.data[this._data.core.selected[i]].state.selected=false;}}
this._data.core.selected=[];this.element.find('.jstree-clicked').removeClass('jstree-clicked').parent().attr('aria-selected',false);this.trigger('deselect_all',{'selected':this._data.core.selected,'node':tmp});if(!supress_event){this.trigger('changed',{'action':'deselect_all','selected':this._data.core.selected,'old_selection':tmp});}},is_selected:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
return obj.state.selected;},get_selected:function(full){return full?$.map(this._data.core.selected,$.proxy(function(i){return this.get_node(i);},this)):this._data.core.selected.slice();},get_top_selected:function(full){var tmp=this.get_selected(true),obj={},i,j,k,l;for(i=0,j=tmp.length;i<j;i++){obj[tmp[i].id]=tmp[i];}
for(i=0,j=tmp.length;i<j;i++){for(k=0,l=tmp[i].children_d.length;k<l;k++){if(obj[tmp[i].children_d[k]]){delete obj[tmp[i].children_d[k]];}}}
tmp=[];for(i in obj){if(obj.hasOwnProperty(i)){tmp.push(i);}}
return full?$.map(tmp,$.proxy(function(i){return this.get_node(i);},this)):tmp;},get_bottom_selected:function(full){var tmp=this.get_selected(true),obj=[],i,j;for(i=0,j=tmp.length;i<j;i++){if(!tmp[i].children.length){obj.push(tmp[i].id);}}
return full?$.map(obj,$.proxy(function(i){return this.get_node(i);},this)):obj;},get_state:function(){var state={'core':{'open':[],'scroll':{'left':this.element.scrollLeft(),'top':this.element.scrollTop()},'selected':[]}},i;for(i in this._model.data){if(this._model.data.hasOwnProperty(i)){if(i!==$.jstree.root){if(this._model.data[i].state.opened){state.core.open.push(i);}
if(this._model.data[i].state.selected){state.core.selected.push(i);}}}}
return state;},set_state:function(state,callback){if(state){if(state.core&&state.core.selected&&state.core.initial_selection===undefined){state.core.initial_selection=this._data.core.selected.concat([]).sort().join(',');}
if(state.core){var res,n,t,_this,i;if(state.core.open){if(!$.isArray(state.core.open)||!state.core.open.length){delete state.core.open;this.set_state(state,callback);}
else{this._load_nodes(state.core.open,function(nodes){this.open_node(nodes,false,0);delete state.core.open;this.set_state(state,callback);});}
return false;}
if(state.core.scroll){if(state.core.scroll&&state.core.scroll.left!==undefined){this.element.scrollLeft(state.core.scroll.left);}
if(state.core.scroll&&state.core.scroll.top!==undefined){this.element.scrollTop(state.core.scroll.top);}
delete state.core.scroll;this.set_state(state,callback);return false;}
if(state.core.selected){_this=this;if(state.core.initial_selection===undefined||state.core.initial_selection===this._data.core.selected.concat([]).sort().join(',')){this.deselect_all();$.each(state.core.selected,function(i,v){_this.select_node(v,false,true);});}
delete state.core.initial_selection;delete state.core.selected;this.set_state(state,callback);return false;}
for(i in state){if(state.hasOwnProperty(i)&&i!=="core"&&$.inArray(i,this.settings.plugins)===-1){delete state[i];}}
if($.isEmptyObject(state.core)){delete state.core;this.set_state(state,callback);return false;}}
if($.isEmptyObject(state)){state=null;if(callback){callback.call(this);}
this.trigger('set_state');return false;}
return true;}
return false;},refresh:function(skip_loading,forget_state){this._data.core.state=forget_state===true?{}:this.get_state();if(forget_state&&$.isFunction(forget_state)){this._data.core.state=forget_state.call(this,this._data.core.state);}
this._cnt=0;this._model.data={};this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this._data.core.selected=[];this._data.core.last_clicked=null;this._data.core.focused=null;var c=this.get_container_ul()[0].className;if(!skip_loading){this.element.html("<"+"ul class='"+c+"' role='group'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr('aria-activedescendant','j'+this._id+'_loading');}
this.load_node($.jstree.root,function(o,s){if(s){this.get_container_ul()[0].className=c;if(this._firstChild(this.get_container_ul()[0])){this.element.attr('aria-activedescendant',this._firstChild(this.get_container_ul()[0]).id);}
this.set_state($.extend(true,{},this._data.core.state),function(){this.trigger('refresh');});}
this._data.core.state=null;});},refresh_node:function(obj){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
var opened=[],to_load=[],s=this._data.core.selected.concat([]);to_load.push(obj.id);if(obj.state.opened===true){opened.push(obj.id);}
this.get_node(obj,true).find('.jstree-open').each(function(){to_load.push(this.id);opened.push(this.id);});this._load_nodes(to_load,$.proxy(function(nodes){this.open_node(opened,false,0);this.select_node(s);this.trigger('refresh_node',{'node':obj,'nodes':nodes});},this),false,true);},set_id:function(obj,id){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
var i,j,m=this._model.data,old=obj.id;id=id.toString();m[obj.parent].children[$.inArray(obj.id,m[obj.parent].children)]=id;for(i=0,j=obj.parents.length;i<j;i++){m[obj.parents[i]].children_d[$.inArray(obj.id,m[obj.parents[i]].children_d)]=id;}
for(i=0,j=obj.children.length;i<j;i++){m[obj.children[i]].parent=id;}
for(i=0,j=obj.children_d.length;i<j;i++){m[obj.children_d[i]].parents[$.inArray(obj.id,m[obj.children_d[i]].parents)]=id;}
i=$.inArray(obj.id,this._data.core.selected);if(i!==-1){this._data.core.selected[i]=id;}
i=this.get_node(obj.id,true);if(i){i.attr('id',id);if(this.element.attr('aria-activedescendant')===obj.id){this.element.attr('aria-activedescendant',id);}}
delete m[obj.id];obj.id=id;obj.li_attr.id=id;m[id]=obj;this.trigger('set_id',{"node":obj,"new":obj.id,"old":old});return true;},get_text:function(obj){obj=this.get_node(obj);return(!obj||obj.id===$.jstree.root)?false:obj.text;},set_text:function(obj,val){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_text(obj[t1],val);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
obj.text=val;if(this.get_node(obj,true).length){this.redraw_node(obj.id);}
this.trigger('set_text',{"obj":obj,"text":val});return true;},get_json:function(obj,options,flat){obj=this.get_node(obj||$.jstree.root);if(!obj){return false;}
if(options&&options.flat&&!flat){flat=[];}
var tmp={'id':obj.id,'text':obj.text,'icon':this.get_icon(obj),'li_attr':$.extend(true,{},obj.li_attr),'a_attr':$.extend(true,{},obj.a_attr),'state':{},'data':options&&options.no_data?false:$.extend(true,$.isArray(obj.data)?[]:{},obj.data)
},i,j;if(options&&options.flat){tmp.parent=obj.parent;}
else{tmp.children=[];}
if(!options||!options.no_state){for(i in obj.state){if(obj.state.hasOwnProperty(i)){tmp.state[i]=obj.state[i];}}}else{delete tmp.state;}
if(options&&options.no_li_attr){delete tmp.li_attr;}
if(options&&options.no_a_attr){delete tmp.a_attr;}
if(options&&options.no_id){delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id;}
if(tmp.a_attr&&tmp.a_attr.id){delete tmp.a_attr.id;}}
if(options&&options.flat&&obj.id!==$.jstree.root){flat.push(tmp);}
if(!options||!options.no_children){for(i=0,j=obj.children.length;i<j;i++){if(options&&options.flat){this.get_json(obj.children[i],options,flat);}
else{tmp.children.push(this.get_json(obj.children[i],options));}}}
return options&&options.flat?flat:(obj.id===$.jstree.root?tmp.children:tmp);},create_node:function(par,node,pos,callback,is_loaded){if(par===null){par=$.jstree.root;}
par=this.get_node(par);if(!par){return false;}
pos=pos===undefined?"last":pos;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.create_node(par,node,pos,callback,true);});}
if(!node){node={"text":this.get_string('New node')};}
if(typeof node==="string"){node={"text":node};}else{node=$.extend(true,{},node);}
if(node.text===undefined){node.text=this.get_string('New node');}
var tmp,dpc,i,j;if(par.id===$.jstree.root){if(pos==="before"){pos="first";}
if(pos==="after"){pos="last";}}
switch(pos){case"before":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children);par=tmp;break;case"after":tmp=this.get_node(par.parent);pos=$.inArray(par.id,tmp.children)+1;par=tmp;break;case"inside":case"first":pos=0;break;case"last":pos=par.children.length;break;default:if(!pos){pos=0;}
break;}
if(pos>par.children.length){pos=par.children.length;}
if(!node.id){node.id=true;}
if(!this.check("create_node",node,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false;}
if(node.id===true){delete node.id;}
node=this._parse_model_from_json(node,par.id,par.parents.concat());if(!node){return false;}
tmp=this.get_node(node);dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger('model',{"nodes":dpc,"parent":par.id});par.children_d=par.children_d.concat(dpc);for(i=0,j=par.parents.length;i<j;i++){this._model.data[par.parents[i]].children_d=this._model.data[par.parents[i]].children_d.concat(dpc);}
node=tmp;tmp=[];for(i=0,j=par.children.length;i<j;i++){tmp[i>=pos?i+1:i]=par.children[i];}
tmp[pos]=node.id;par.children=tmp;this.redraw_node(par,true);this.trigger('create_node',{"node":this.get_node(node),"parent":par.id,"position":pos});if(callback){callback.call(this,this.get_node(node));}
return node.id;},rename_node:function(obj,val){var t1,t2,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.rename_node(obj[t1],val);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
old=obj.text;if(!this.check("rename_node",obj,this.get_parent(obj),val)){this.settings.core.error.call(this,this._data.core.last_error);return false;}
this.set_text(obj,val);this.trigger('rename_node',{"node":obj,"text":val,"old":old});return true;},delete_node:function(obj){var t1,t2,par,pos,tmp,i,j,k,l,c,top,lft;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.delete_node(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
par=this.get_node(obj.parent);pos=$.inArray(obj.id,par.children);c=false;if(!this.check("delete_node",obj,par,pos)){this.settings.core.error.call(this,this._data.core.last_error);return false;}
if(pos!==-1){par.children=$.vakata.array_remove(par.children,pos);}
tmp=obj.children_d.concat([]);tmp.push(obj.id);for(i=0,j=obj.parents.length;i<j;i++){this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return $.inArray(v,tmp)===-1;});}
for(k=0,l=tmp.length;k<l;k++){if(this._model.data[tmp[k]].state.selected){c=true;break;}}
if(c){this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return $.inArray(v,tmp)===-1;});}
this.trigger('delete_node',{"node":obj,"parent":par.id});if(c){this.trigger('changed',{'action':'delete_node','node':obj,'selected':this._data.core.selected,'parent':par.id});}
for(k=0,l=tmp.length;k<l;k++){delete this._model.data[tmp[k]];}
if($.inArray(this._data.core.focused,tmp)!==-1){this._data.core.focused=null;top=this.element[0].scrollTop;lft=this.element[0].scrollLeft;if(par.id===$.jstree.root){if(this._model.data[$.jstree.root].children[0]){this.get_node(this._model.data[$.jstree.root].children[0],true).children('.jstree-anchor').focus();}}
else{this.get_node(par,true).children('.jstree-anchor').focus();}
this.element[0].scrollTop=top;this.element[0].scrollLeft=lft;}
this.redraw_node(par,true);return true;},check:function(chk,obj,par,pos,more){obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj,chc=this.settings.core.check_callback;if(chk==="move_node"||chk==="copy_node"){if((!more||!more.is_multi)&&(obj.id===par.id||(chk==="move_node"&&$.inArray(obj.id,par.children)===pos)||$.inArray(par.id,obj.children_d)!==-1)){this._data.core.last_error={'error':'check','plugin':'core','id':'core_01','reason':'Moving parent inside child','data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};return false;}}
if(tmp&&tmp.data){tmp=tmp.data;}
if(tmp&&tmp.functions&&(tmp.functions[chk]===false||tmp.functions[chk]===true)){if(tmp.functions[chk]===false){this._data.core.last_error={'error':'check','plugin':'core','id':'core_02','reason':'Node data prevents function: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};}
return tmp.functions[chk];}
if(chc===false||($.isFunction(chc)&&chc.call(this,chk,obj,par,pos,more)===false)||(chc&&chc[chk]===false)){this._data.core.last_error={'error':'check','plugin':'core','id':'core_03','reason':'User config for core.check_callback prevents function: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};return false;}
return true;},last_error:function(){return this._data.core.last_error;},move_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,old_par,old_pos,new_par,old_ins,is_multi,dpc,tmp,i,j,k,l,p;par=this.get_node(par);pos=pos===undefined?0:pos;if(!par){return false;}
if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.move_node(obj,par,pos,callback,true,false,origin);});}
if($.isArray(obj)){if(obj.length===1){obj=obj[0];}
else{for(t1=0,t2=obj.length;t1<t2;t1++){if((tmp=this.move_node(obj[t1],par,pos,callback,is_loaded,false,origin))){par=tmp;pos="after";}}
this.redraw();return true;}}
obj=obj&&obj.id?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
old_par=(obj.parent||$.jstree.root).toString();new_par=(!pos.toString().match(/^(before|after)$/)||par.id===$.jstree.root)?par:this.get_node(par.parent);old_ins=origin?origin:(this._model.data[obj.id]?this:$.jstree.reference(obj.id));is_multi=!old_ins||!old_ins._id||(this._id!==old_ins._id);old_pos=old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1;if(old_ins&&old_ins._id){obj=old_ins._model.data[obj.id];}
if(is_multi){if((tmp=this.copy_node(obj,par,pos,callback,is_loaded,false,origin))){if(old_ins){old_ins.delete_node(obj);}
return tmp;}
return false;}
if(par.id===$.jstree.root){if(pos==="before"){pos="first";}
if(pos==="after"){pos="last";}}
switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0;}
break;}
if(pos>new_par.children.length){pos=new_par.children.length;}
if(!this.check("move_node",obj,new_par,pos,{'core':true,'origin':origin,'is_multi':(old_ins&&old_ins._id&&old_ins._id!==this._id),'is_foreign':(!old_ins||!old_ins._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false;}
if(obj.parent===new_par.id){dpc=new_par.children.concat();tmp=$.inArray(obj.id,dpc);if(tmp!==-1){dpc=$.vakata.array_remove(dpc,tmp);if(pos>tmp){pos--;}}
tmp=[];for(i=0,j=dpc.length;i<j;i++){tmp[i>=pos?i+1:i]=dpc[i];}
tmp[pos]=obj.id;new_par.children=tmp;this._node_changed(new_par.id);this.redraw(new_par.id===$.jstree.root);}
else{tmp=obj.children_d.concat();tmp.push(obj.id);for(i=0,j=obj.parents.length;i<j;i++){dpc=[];p=old_ins._model.data[obj.parents[i]].children_d;for(k=0,l=p.length;k<l;k++){if($.inArray(p[k],tmp)===-1){dpc.push(p[k]);}}
old_ins._model.data[obj.parents[i]].children_d=dpc;}
old_ins._model.data[old_par].children=$.vakata.array_remove_item(old_ins._model.data[old_par].children,obj.id);for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(tmp);}
dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i];}
dpc[pos]=obj.id;new_par.children=dpc;new_par.children_d.push(obj.id);new_par.children_d=new_par.children_d.concat(obj.children_d);obj.parent=new_par.id;tmp=new_par.parents.concat();tmp.unshift(new_par.id);p=obj.parents.length;obj.parents=tmp;tmp=tmp.concat();for(i=0,j=obj.children_d.length;i<j;i++){this._model.data[obj.children_d[i]].parents=this._model.data[obj.children_d[i]].parents.slice(0,p*-1);Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents,tmp);}
if(old_par===$.jstree.root||new_par.id===$.jstree.root){this._model.force_full_redraw=true;}
if(!this._model.force_full_redraw){this._node_changed(old_par);this._node_changed(new_par.id);}
if(!skip_redraw){this.redraw();}}
if(callback){callback.call(this,obj,new_par,pos);}
this.trigger('move_node',{"node":obj,"parent":new_par.id,"position":pos,"old_parent":old_par,"old_position":old_pos,'is_multi':(old_ins&&old_ins._id&&old_ins._id!==this._id),'is_foreign':(!old_ins||!old_ins._id),'old_instance':old_ins,'new_instance':this});return obj.id;},copy_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,dpc,tmp,i,j,node,old_par,new_par,old_ins,is_multi;par=this.get_node(par);pos=pos===undefined?0:pos;if(!par){return false;}
if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,true,false,origin);});}
if($.isArray(obj)){if(obj.length===1){obj=obj[0];}
else{for(t1=0,t2=obj.length;t1<t2;t1++){if((tmp=this.copy_node(obj[t1],par,pos,callback,is_loaded,true,origin))){par=tmp;pos="after";}}
this.redraw();return true;}}
obj=obj&&obj.id?obj:this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
old_par=(obj.parent||$.jstree.root).toString();new_par=(!pos.toString().match(/^(before|after)$/)||par.id===$.jstree.root)?par:this.get_node(par.parent);old_ins=origin?origin:(this._model.data[obj.id]?this:$.jstree.reference(obj.id));is_multi=!old_ins||!old_ins._id||(this._id!==old_ins._id);if(old_ins&&old_ins._id){obj=old_ins._model.data[obj.id];}
if(par.id===$.jstree.root){if(pos==="before"){pos="first";}
if(pos==="after"){pos="last";}}
switch(pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:if(!pos){pos=0;}
break;}
if(pos>new_par.children.length){pos=new_par.children.length;}
if(!this.check("copy_node",obj,new_par,pos,{'core':true,'origin':origin,'is_multi':(old_ins&&old_ins._id&&old_ins._id!==this._id),'is_foreign':(!old_ins||!old_ins._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false;}
node=old_ins?old_ins.get_json(obj,{no_id:true,no_data:true,no_state:true}):obj;if(!node){return false;}
if(node.id===true){delete node.id;}
node=this._parse_model_from_json(node,new_par.id,new_par.parents.concat());if(!node){return false;}
tmp=this.get_node(node);if(obj&&obj.state&&obj.state.loaded===false){tmp.state.loaded=false;}
dpc=[];dpc.push(node);dpc=dpc.concat(tmp.children_d);this.trigger('model',{"nodes":dpc,"parent":new_par.id});for(i=0,j=new_par.parents.length;i<j;i++){this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(dpc);}
dpc=[];for(i=0,j=new_par.children.length;i<j;i++){dpc[i>=pos?i+1:i]=new_par.children[i];}
dpc[pos]=tmp.id;new_par.children=dpc;new_par.children_d.push(tmp.id);new_par.children_d=new_par.children_d.concat(tmp.children_d);if(new_par.id===$.jstree.root){this._model.force_full_redraw=true;}
if(!this._model.force_full_redraw){this._node_changed(new_par.id);}
if(!skip_redraw){this.redraw(new_par.id===$.jstree.root);}
if(callback){callback.call(this,tmp,new_par,pos);}
this.trigger('copy_node',{"node":tmp,"original":obj,"parent":new_par.id,"position":pos,"old_parent":old_par,"old_position":old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,'is_multi':(old_ins&&old_ins._id&&old_ins._id!==this._id),'is_foreign':(!old_ins||!old_ins._id),'old_instance':old_ins,'new_instance':this});return tmp.id;},cut:function(obj){if(!obj){obj=this._data.core.selected.concat();}
if(!$.isArray(obj)){obj=[obj];}
if(!obj.length){return false;}
var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!==$.jstree.root){tmp.push(o);}}
if(!tmp.length){return false;}
ccp_node=tmp;ccp_inst=this;ccp_mode='move_node';this.trigger('cut',{"node":obj});},copy:function(obj){if(!obj){obj=this._data.core.selected.concat();}
if(!$.isArray(obj)){obj=[obj];}
if(!obj.length){return false;}
var tmp=[],o,t1,t2;for(t1=0,t2=obj.length;t1<t2;t1++){o=this.get_node(obj[t1]);if(o&&o.id&&o.id!==$.jstree.root){tmp.push(o);}}
if(!tmp.length){return false;}
ccp_node=tmp;ccp_inst=this;ccp_mode='copy_node';this.trigger('copy',{"node":obj});},get_buffer:function(){return{'mode':ccp_mode,'node':ccp_node,'inst':ccp_inst};},can_paste:function(){return ccp_mode!==false&&ccp_node!==false;},paste:function(obj,pos){obj=this.get_node(obj);if(!obj||!ccp_mode||!ccp_mode.match(/^(copy_node|move_node)$/)||!ccp_node){return false;}
if(this[ccp_mode](ccp_node,obj,pos,false,false,false,ccp_inst)){this.trigger('paste',{"parent":obj.id,"node":ccp_node,"mode":ccp_mode});}
ccp_node=false;ccp_mode=false;ccp_inst=false;},clear_buffer:function(){ccp_node=false;ccp_mode=false;ccp_inst=false;this.trigger('clear_buffer');},edit:function(obj,default_text,callback){var rtl,w,a,s,t,h1,h2,fn,tmp,cancel=false;obj=this.get_node(obj);if(!obj){return false;}
if(!this.check("edit",obj,this.get_parent(obj))){this.settings.core.error.call(this,this._data.core.last_error);return false;}
tmp=obj;default_text=typeof default_text==='string'?default_text:obj.text;this.set_text(obj,"");obj=this._open_to(obj);tmp.text=default_text;rtl=this._data.core.rtl;w=this.element.width();this._data.core.focused=tmp.id;a=obj.children('.jstree-anchor').focus();s=$('<span>');t=default_text;h1=$("<"+"div />",{css:{"position":"absolute","top":"-200px","left":(rtl?"0px":"-1000px"),"visibility":"hidden"}}).appendTo("body");h2=$("<"+"input />",{"value":t,"class":"jstree-rename-input","css":{"padding":"0","border":"1px solid silver","box-sizing":"border-box","display":"inline-block","height":(this._data.core.li_height)+"px","lineHeight":(this._data.core.li_height)+"px","width":"150px"},"blur":$.proxy(function(e){e.stopImmediatePropagation();e.preventDefault();var i=s.children(".jstree-rename-input"),v=i.val(),f=this.settings.core.force_text,nv;if(v===""){v=t;}
h1.remove();s.replaceWith(a);s.remove();t=f?t:$('<div></div>').append($.parseHTML(t)).html();this.set_text(obj,t);nv=!!this.rename_node(obj,f?$('<div></div>').text(v).text():$('<div></div>').append($.parseHTML(v)).html());if(!nv){this.set_text(obj,t);}
this._data.core.focused=tmp.id;setTimeout($.proxy(function(){var node=this.get_node(tmp.id,true);if(node.length){this._data.core.focused=tmp.id;node.children('.jstree-anchor').focus();}},this),0);if(callback){callback.call(this,tmp,nv,cancel);}
h2=null;},this),"keydown":function(e){var key=e.which;if(key===27){cancel=true;this.value=t;}
if(key===27||key===13||key===37||key===38||key===39||key===40||key===32){e.stopImmediatePropagation();}
if(key===27||key===13){e.preventDefault();this.blur();}},"click":function(e){e.stopImmediatePropagation();},"mousedown":function(e){e.stopImmediatePropagation();},"keyup":function(e){h2.width(Math.min(h1.text("pW"+this.value).width(),w));},"keypress":function(e){if(e.which===13){return false;}}});fn={fontFamily:a.css('fontFamily')||'',fontSize:a.css('fontSize')||'',fontWeight:a.css('fontWeight')||'',fontStyle:a.css('fontStyle')||'',fontStretch:a.css('fontStretch')||'',fontVariant:a.css('fontVariant')||'',letterSpacing:a.css('letterSpacing')||'',wordSpacing:a.css('wordSpacing')||''};s.attr('class',a.attr('class')).append(a.contents().clone()).append(h2);a.replaceWith(s);h1.css(fn);h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select();$(document).one('mousedown.jstree touchstart.jstree dnd_start.vakata',function(e){if(h2&&e.target!==h2){$(h2).blur();}});},set_theme:function(theme_name,theme_url){if(!theme_name){return false;}
if(theme_url===true){var dir=this.settings.core.themes.dir;if(!dir){dir=$.jstree.path+'/themes';}
theme_url=dir+'/'+theme_name+'/style.css';}
if(theme_url&&$.inArray(theme_url,themes_loaded)===-1){$('head').append('<'+'link rel="stylesheet" href="'+theme_url+'" type="text/css" />');themes_loaded.push(theme_url);}
if(this._data.core.themes.name){this.element.removeClass('jstree-'+this._data.core.themes.name);}
this._data.core.themes.name=theme_name;this.element.addClass('jstree-'+theme_name);this.element[this.settings.core.themes.responsive?'addClass':'removeClass']('jstree-'+theme_name+'-responsive');this.trigger('set_theme',{'theme':theme_name});},get_theme:function(){return this._data.core.themes.name;},set_theme_variant:function(variant_name){if(this._data.core.themes.variant){this.element.removeClass('jstree-'+this._data.core.themes.name+'-'+this._data.core.themes.variant);}
this._data.core.themes.variant=variant_name;if(variant_name){this.element.addClass('jstree-'+this._data.core.themes.name+'-'+this._data.core.themes.variant);}},get_theme_variant:function(){return this._data.core.themes.variant;},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped");this.trigger('show_stripes');},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped");this.trigger('hide_stripes');},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes();}else{this.show_stripes();}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots");this.trigger('show_dots');},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots");this.trigger('hide_dots');},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots();}else{this.show_dots();}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons");this.trigger('show_icons');},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons");this.trigger('hide_icons');},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons();}else{this.show_icons();}},show_ellipsis:function(){this._data.core.themes.ellipsis=true;this.get_container_ul().addClass("jstree-ellipsis");this.trigger('show_ellipsis');},hide_ellipsis:function(){this._data.core.themes.ellipsis=false;this.get_container_ul().removeClass("jstree-ellipsis");this.trigger('hide_ellipsis');},toggle_ellipsis:function(){if(this._data.core.themes.ellipsis){this.hide_ellipsis();}else{this.show_ellipsis();}},set_icon:function(obj,icon){var t1,t2,dom,old;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_icon(obj[t1],icon);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
old=obj.icon;obj.icon=icon===true||icon===null||icon===undefined||icon===''?true:icon;dom=this.get_node(obj,true).children(".jstree-anchor").children(".jstree-themeicon");if(icon===false){this.hide_icon(obj);}
else if(icon===true||icon===null||icon===undefined||icon===''){dom.removeClass('jstree-themeicon-custom '+old).css("background","").removeAttr("rel");if(old===false){this.show_icon(obj);}}
else if(icon.indexOf("/")===-1&&icon.indexOf(".")===-1){dom.removeClass(old).css("background","");dom.addClass(icon+' jstree-themeicon-custom').attr("rel",icon);if(old===false){this.show_icon(obj);}}
else{dom.removeClass(old).css("background","");dom.addClass('jstree-themeicon-custom').css("background","url('"+icon+"') center center no-repeat").attr("rel",icon);if(old===false){this.show_icon(obj);}}
return true;},get_icon:function(obj){obj=this.get_node(obj);return(!obj||obj.id===$.jstree.root)?false:obj.icon;},hide_icon:function(obj){var t1,t2;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.hide_icon(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj===$.jstree.root){return false;}
obj.icon=false;this.get_node(obj,true).children(".jstree-anchor").children(".jstree-themeicon").addClass('jstree-themeicon-hidden');return true;},show_icon:function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.show_icon(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj===$.jstree.root){return false;}
dom=this.get_node(obj,true);obj.icon=dom.length?dom.children(".jstree-anchor").children(".jstree-themeicon").attr('rel'):true;if(!obj.icon){obj.icon=true;}
dom.children(".jstree-anchor").children(".jstree-themeicon").removeClass('jstree-themeicon-hidden');return true;}};$.vakata={};$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];if(node&&node.attributes){$.each(node.attributes,function(i,v){if($.inArray(v.name.toLowerCase(),['style','contenteditable','hasfocus','tabindex'])!==-1){return;}
if(v.value!==null&&$.trim(v.value)!==''){if(with_values){attr[v.name]=v.value;}
else{attr.push(v.name);}}});}
return attr;};$.vakata.array_unique=function(array){var a=[],i,j,l,o={};for(i=0,l=array.length;i<l;i++){if(o[array[i]]===undefined){a.push(array[i]);o[array[i]]=true;}}
return a;};$.vakata.array_remove=function(array,from){array.splice(from,1);return array;};$.vakata.array_remove_item=function(array,item){var tmp=$.inArray(item,array);return tmp!==-1?$.vakata.array_remove(array,tmp):array;};$.vakata.array_filter=function(c,a,b,d,e){if(c.filter){return c.filter(a,b);}
d=[];for(e in c){if(~~e+''===e+''&&e>=0&&a.call(b,c[e],+e,c)){d.push(c[e]);}}
return d;};$.jstree.plugins.changed=function(options,parent){var last=[];this.trigger=function(ev,data){var i,j;if(!data){data={};}
if(ev.replace('.jstree','')==='changed'){data.changed={selected:[],deselected:[]};var tmp={};for(i=0,j=last.length;i<j;i++){tmp[last[i]]=1;}
for(i=0,j=data.selected.length;i<j;i++){if(!tmp[data.selected[i]]){data.changed.selected.push(data.selected[i]);}
else{tmp[data.selected[i]]=2;}}
for(i=0,j=last.length;i<j;i++){if(tmp[last[i]]===1){data.changed.deselected.push(last[i]);}}
last=data.selected.slice();}
parent.trigger.call(this,ev,data);};this.refresh=function(skip_loading,forget_state){last=[];return parent.refresh.apply(this,arguments);};};var _i=document.createElement('I');_i.className='jstree-icon jstree-checkbox';_i.setAttribute('role','presentation');$.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true,cascade:'',tie_selection:true,cascade_to_disabled:true,cascade_to_hidden:true};$.jstree.plugins.checkbox=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.checkbox.uto=false;this._data.checkbox.selected=[];if(this.settings.checkbox.three_state){this.settings.checkbox.cascade='up+down+undetermined';}
this.element
.on("init.jstree",$.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass('jstree-checkbox-no-clicked');}
if(this.settings.checkbox.tie_selection){this.element.addClass('jstree-checkbox-selection');}},this))
.on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?'show_checkboxes':'hide_checkboxes']();},this));if(this.settings.checkbox.cascade.indexOf('undetermined')!==-1){this.element
.on('changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree',$.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto);}
this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50);},this));}
if(!this.settings.checkbox.tie_selection){this.element
.on('model.jstree',$.proxy(function(e,data){var m=this._model.data,p=m[data.parent],dpc=data.nodes,i,j;for(i=0,j=dpc.length;i<j;i++){m[dpc[i]].state.checked=m[dpc[i]].state.checked||(m[dpc[i]].original&&m[dpc[i]].original.state&&m[dpc[i]].original.state.checked);if(m[dpc[i]].state.checked){this._data.checkbox.selected.push(dpc[i]);}}},this));}
if(this.settings.checkbox.cascade.indexOf('up')!==-1||this.settings.checkbox.cascade.indexOf('down')!==-1){this.element
.on('model.jstree',$.proxy(function(e,data){var m=this._model.data,p=m[data.parent],dpc=data.nodes,chd=[],c,i,j,k,l,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(s.indexOf('down')!==-1){if(p.state[t?'selected':'checked']){for(i=0,j=dpc.length;i<j;i++){m[dpc[i]].state[t?'selected':'checked']=true;}
this._data[t?'core':'checkbox'].selected=this._data[t?'core':'checkbox'].selected.concat(dpc);}
else{for(i=0,j=dpc.length;i<j;i++){if(m[dpc[i]].state[t?'selected':'checked']){for(k=0,l=m[dpc[i]].children_d.length;k<l;k++){m[m[dpc[i]].children_d[k]].state[t?'selected':'checked']=true;}
this._data[t?'core':'checkbox'].selected=this._data[t?'core':'checkbox'].selected.concat(m[dpc[i]].children_d);}}}}
if(s.indexOf('up')!==-1){for(i=0,j=p.children_d.length;i<j;i++){if(!m[p.children_d[i]].children.length){chd.push(m[p.children_d[i]].parent);}}
chd=$.vakata.array_unique(chd);for(k=0,l=chd.length;k<l;k++){p=m[chd[k]];while(p&&p.id!==$.jstree.root){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?'selected':'checked'];}
if(c===j){p.state[t?'selected':'checked']=true;this._data[t?'core':'checkbox'].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}}
else{break;}
p=this.get_node(p.parent);}}}
this._data[t?'core':'checkbox'].selected=$.vakata.array_unique(this._data[t?'core':'checkbox'].selected);},this))
.on(this.settings.checkbox.tie_selection?'select_node.jstree':'check_node.jstree',$.proxy(function(e,data){var self=this,obj=data.node,m=this._model.data,par=this.get_node(obj.parent),i,j,c,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,sel={},cur=this._data[t?'core':'checkbox'].selected;for(i=0,j=cur.length;i<j;i++){sel[cur[i]]=true;}
if(s.indexOf('down')!==-1){var selectedIds=this._cascade_new_checked_state(obj.id,true);obj.children_d.concat(obj.id).forEach(function(id){if(selectedIds.indexOf(id)>-1){sel[id]=true;}
else{delete sel[id];}});}
if(s.indexOf('up')!==-1){while(par&&par.id!==$.jstree.root){c=0;for(i=0,j=par.children.length;i<j;i++){c+=m[par.children[i]].state[t?'selected':'checked'];}
if(c===j){par.state[t?'selected':'checked']=true;sel[par.id]=true;tmp=this.get_node(par,true);if(tmp&&tmp.length){tmp.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}}
else{break;}
par=this.get_node(par.parent);}}
cur=[];for(i in sel){if(sel.hasOwnProperty(i)){cur.push(i);}}
this._data[t?'core':'checkbox'].selected=cur;},this))
.on(this.settings.checkbox.tie_selection?'deselect_all.jstree':'uncheck_all.jstree',$.proxy(function(e,data){var obj=this.get_node($.jstree.root),m=this._model.data,i,j,tmp;for(i=0,j=obj.children_d.length;i<j;i++){tmp=m[obj.children_d[i]];if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false;}}},this))
.on(this.settings.checkbox.tie_selection?'deselect_node.jstree':'uncheck_node.jstree',$.proxy(function(e,data){var self=this,obj=data.node,dom=this.get_node(obj,true),i,j,tmp,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,cur=this._data[t?'core':'checkbox'].selected,sel={},stillSelectedIds=[],allIds=obj.children_d.concat(obj.id);if(s.indexOf('down')!==-1){var selectedIds=this._cascade_new_checked_state(obj.id,false);cur=cur.filter(function(id){return allIds.indexOf(id)===-1||selectedIds.indexOf(id)>-1;});}
if(s.indexOf('up')!==-1&&cur.indexOf(obj.id)===-1){for(i=0,j=obj.parents.length;i<j;i++){tmp=this._model.data[obj.parents[i]];tmp.state[t?'selected':'checked']=false;if(tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined){tmp.original.state.undetermined=false;}
tmp=this.get_node(obj.parents[i],true);if(tmp&&tmp.length){tmp.attr('aria-selected',false).children('.jstree-anchor').removeClass(t?'jstree-clicked':'jstree-checked');}}
cur=cur.filter(function(id){return obj.parents.indexOf(id)===-1;});}
this._data[t?'core':'checkbox'].selected=cur;},this));}
if(this.settings.checkbox.cascade.indexOf('up')!==-1){this.element
.on('delete_node.jstree',$.proxy(function(e,data){var p=this.get_node(data.parent),m=this._model.data,i,j,c,tmp,t=this.settings.checkbox.tie_selection;while(p&&p.id!==$.jstree.root&&!p.state[t?'selected':'checked']){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?'selected':'checked'];}
if(j>0&&c===j){p.state[t?'selected':'checked']=true;this._data[t?'core':'checkbox'].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}}
else{break;}
p=this.get_node(p.parent);}},this))
.on('move_node.jstree',$.proxy(function(e,data){var is_multi=data.is_multi,old_par=data.old_parent,new_par=this.get_node(data.parent),m=this._model.data,p,c,i,j,tmp,t=this.settings.checkbox.tie_selection;if(!is_multi){p=this.get_node(old_par);while(p&&p.id!==$.jstree.root&&!p.state[t?'selected':'checked']){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?'selected':'checked'];}
if(j>0&&c===j){p.state[t?'selected':'checked']=true;this._data[t?'core':'checkbox'].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}}
else{break;}
p=this.get_node(p.parent);}}
p=new_par;while(p&&p.id!==$.jstree.root){c=0;for(i=0,j=p.children.length;i<j;i++){c+=m[p.children[i]].state[t?'selected':'checked'];}
if(c===j){if(!p.state[t?'selected':'checked']){p.state[t?'selected':'checked']=true;this._data[t?'core':'checkbox'].selected.push(p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}}}
else{if(p.state[t?'selected':'checked']){p.state[t?'selected':'checked']=false;this._data[t?'core':'checkbox'].selected=$.vakata.array_remove_item(this._data[t?'core':'checkbox'].selected,p.id);tmp=this.get_node(p,true);if(tmp&&tmp.length){tmp.attr('aria-selected',false).children('.jstree-anchor').removeClass(t?'jstree-clicked':'jstree-checked');}}
else{break;}}
p=this.get_node(p.parent);}},this));}};this._undetermined=function(){if(this.element===null){return;}
var i,j,k,l,o={},m=this._model.data,t=this.settings.checkbox.tie_selection,s=this._data[t?'core':'checkbox'].selected,p=[],tt=this;for(i=0,j=s.length;i<j;i++){if(m[s[i]]&&m[s[i]].parents){for(k=0,l=m[s[i]].parents.length;k<l;k++){if(o[m[s[i]].parents[k]]!==undefined){break;}
if(m[s[i]].parents[k]!==$.jstree.root){o[m[s[i]].parents[k]]=true;p.push(m[s[i]].parents[k]);}}}}
this.element.find('.jstree-closed').not(':has(.jstree-children)')
.each(function(){var tmp=tt.get_node(this),tmp2;if(!tmp){return;}
if(!tmp.state.loaded){if(tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&tmp.original.state.undetermined===true){if(o[tmp.id]===undefined&&tmp.id!==$.jstree.root){o[tmp.id]=true;p.push(tmp.id);}
for(k=0,l=tmp.parents.length;k<l;k++){if(o[tmp.parents[k]]===undefined&&tmp.parents[k]!==$.jstree.root){o[tmp.parents[k]]=true;p.push(tmp.parents[k]);}}}}
else{for(i=0,j=tmp.children_d.length;i<j;i++){tmp2=m[tmp.children_d[i]];if(!tmp2.state.loaded&&tmp2.original&&tmp2.original.state&&tmp2.original.state.undetermined&&tmp2.original.state.undetermined===true){if(o[tmp2.id]===undefined&&tmp2.id!==$.jstree.root){o[tmp2.id]=true;p.push(tmp2.id);}
for(k=0,l=tmp2.parents.length;k<l;k++){if(o[tmp2.parents[k]]===undefined&&tmp2.parents[k]!==$.jstree.root){o[tmp2.parents[k]]=true;p.push(tmp2.parents[k]);}}}}}});this.element.find('.jstree-undetermined').removeClass('jstree-undetermined');for(i=0,j=p.length;i<j;i++){if(!m[p[i]].state[t?'selected':'checked']){s=this.get_node(p[i],true);if(s&&s.length){s.children('.jstree-anchor').children('.jstree-checkbox').addClass('jstree-undetermined');}}}};this.redraw_node=function(obj,deep,is_callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){var i,j,tmp=null,icon=null;for(i=0,j=obj.childNodes.length;i<j;i++){if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break;}}
if(tmp){if(!this.settings.checkbox.tie_selection&&this._model.data[obj.id].state.checked){tmp.className+=' jstree-checked';}
icon=_i.cloneNode(false);if(this._model.data[obj.id].state.checkbox_disabled){icon.className+=' jstree-checkbox-disabled';}
tmp.insertBefore(icon,tmp.childNodes[0]);}}
if(!is_callback&&this.settings.checkbox.cascade.indexOf('undetermined')!==-1){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto);}
this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50);}
return obj;};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.get_container_ul().removeClass("jstree-no-checkboxes");};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.get_container_ul().addClass("jstree-no-checkboxes");};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes();}else{this.show_checkboxes();}};this.is_undetermined=function(obj){obj=this.get_node(obj);var s=this.settings.checkbox.cascade,i,j,t=this.settings.checkbox.tie_selection,d=this._data[t?'core':'checkbox'].selected,m=this._model.data;if(!obj||obj.state[t?'selected':'checked']===true||s.indexOf('undetermined')===-1||(s.indexOf('down')===-1&&s.indexOf('up')===-1)){return false;}
if(!obj.state.loaded&&obj.original.state.undetermined===true){return true;}
for(i=0,j=obj.children_d.length;i<j;i++){if($.inArray(obj.children_d[i],d)!==-1||(!m[obj.children_d[i]].state.loaded&&m[obj.children_d[i]].original.state.undetermined)){return true;}}
return false;};this.disable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.disable_checkbox(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(!obj.state.checkbox_disabled){obj.state.checkbox_disabled=true;if(dom&&dom.length){dom.children('.jstree-anchor').children('.jstree-checkbox').addClass('jstree-checkbox-disabled');}
this.trigger('disable_checkbox',{'node':obj});}};this.enable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.enable_checkbox(obj[t1]);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(obj.state.checkbox_disabled){obj.state.checkbox_disabled=false;if(dom&&dom.length){dom.children('.jstree-anchor').children('.jstree-checkbox').removeClass('jstree-checkbox-disabled');}
this.trigger('enable_checkbox',{'node':obj});}};this.activate_node=function(obj,e){if($(e.target).hasClass('jstree-checkbox-disabled')){return false;}
if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(e.target).hasClass('jstree-checkbox'))){e.ctrlKey=true;}
if(this.settings.checkbox.tie_selection||(!this.settings.checkbox.whole_node&&!$(e.target).hasClass('jstree-checkbox'))){return parent.activate_node.call(this,obj,e);}
if(this.is_disabled(obj)){return false;}
if(this.is_checked(obj)){this.uncheck_node(obj,e);}
else{this.check_node(obj,e);}
this.trigger('activate_node',{'node':this.get_node(obj)});};this._cascade_new_checked_state=function(id,checkedState){var self=this;var t=this.settings.checkbox.tie_selection;var node=this._model.data[id];var selectedNodeIds=[];var selectedChildrenIds=[];if((this.settings.checkbox.cascade_to_disabled||!node.state.disabled)&&(this.settings.checkbox.cascade_to_hidden||!node.state.hidden)){if(node.children){node.children.forEach(function(childId){var selectedChildIds=self._cascade_new_checked_state(childId,checkedState);selectedNodeIds=selectedNodeIds.concat(selectedChildIds);if(selectedChildIds.indexOf(childId)>-1){selectedChildrenIds.push(childId);}});}
var dom=self.get_node(node,true);var undetermined=selectedChildrenIds.length>0&&selectedChildrenIds.length<node.children.length;if(node.original&&node.original.state&&node.original.state.undetermined){node.original.state.undetermined=undetermined;}
if(undetermined){node.state[t?'selected':'checked']=false;dom.attr('aria-selected',false).children('.jstree-anchor').removeClass(t?'jstree-clicked':'jstree-checked');}
else if(checkedState&&selectedChildrenIds.length===node.children.length){node.state[t?'selected':'checked']=checkedState;selectedNodeIds.push(node.id);dom.attr('aria-selected',true).children('.jstree-anchor').addClass(t?'jstree-clicked':'jstree-checked');}
else{node.state[t?'selected':'checked']=false;dom.attr('aria-selected',false).children('.jstree-anchor').removeClass(t?'jstree-clicked':'jstree-checked');}}
else{var selectedChildIds=this.get_checked_descendants(id);if(node.state[t?'selected':'checked']){selectedChildIds.push(node.id);}
selectedNodeIds=selectedNodeIds.concat(selectedChildIds);}
return selectedNodeIds;};this.get_checked_descendants=function(id){var self=this;var t=self.settings.checkbox.tie_selection;var node=self._model.data[id];return node.children_d.filter(function(_id){return self._model.data[_id].state[t?'selected':'checked'];});};this.check_node=function(obj,e){if(this.settings.checkbox.tie_selection){return this.select_node(obj,false,true,e);}
var dom,t1,t2,th;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.check_node(obj[t1],e);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(!obj.state.checked){obj.state.checked=true;this._data.checkbox.selected.push(obj.id);if(dom&&dom.length){dom.children('.jstree-anchor').addClass('jstree-checked');}
this.trigger('check_node',{'node':obj,'selected':this._data.checkbox.selected,'event':e});}};this.uncheck_node=function(obj,e){if(this.settings.checkbox.tie_selection){return this.deselect_node(obj,false,e);}
var t1,t2,dom;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.uncheck_node(obj[t1],e);}
return true;}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
dom=this.get_node(obj,true);if(obj.state.checked){obj.state.checked=false;this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,obj.id);if(dom.length){dom.children('.jstree-anchor').removeClass('jstree-checked');}
this.trigger('uncheck_node',{'node':obj,'selected':this._data.checkbox.selected,'event':e});}};this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all();}
var tmp=this._data.checkbox.selected.concat([]),i,j;this._data.checkbox.selected=this._model.data[$.jstree.root].children_d.concat();for(i=0,j=this._data.checkbox.selected.length;i<j;i++){if(this._model.data[this._data.checkbox.selected[i]]){this._model.data[this._data.checkbox.selected[i]].state.checked=true;}}
this.redraw(true);this.trigger('check_all',{'selected':this._data.checkbox.selected});};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all();}
var tmp=this._data.checkbox.selected.concat([]),i,j;for(i=0,j=this._data.checkbox.selected.length;i<j;i++){if(this._model.data[this._data.checkbox.selected[i]]){this._model.data[this._data.checkbox.selected[i]].state.checked=false;}}
this._data.checkbox.selected=[];this.element.find('.jstree-checked').removeClass('jstree-checked');this.trigger('uncheck_all',{'selected':this._data.checkbox.selected,'node':tmp});};this.is_checked=function(obj){if(this.settings.checkbox.tie_selection){return this.is_selected(obj);}
obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
return obj.state.checked;};this.get_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_selected(full);}
return full?$.map(this._data.checkbox.selected,$.proxy(function(i){return this.get_node(i);},this)):this._data.checkbox.selected;};this.get_top_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_top_selected(full);}
var tmp=this.get_checked(true),obj={},i,j,k,l;for(i=0,j=tmp.length;i<j;i++){obj[tmp[i].id]=tmp[i];}
for(i=0,j=tmp.length;i<j;i++){for(k=0,l=tmp[i].children_d.length;k<l;k++){if(obj[tmp[i].children_d[k]]){delete obj[tmp[i].children_d[k]];}}}
tmp=[];for(i in obj){if(obj.hasOwnProperty(i)){tmp.push(i);}}
return full?$.map(tmp,$.proxy(function(i){return this.get_node(i);},this)):tmp;};this.get_bottom_checked=function(full){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(full);}
var tmp=this.get_checked(true),obj=[],i,j;for(i=0,j=tmp.length;i<j;i++){if(!tmp[i].children.length){obj.push(tmp[i].id);}}
return full?$.map(obj,$.proxy(function(i){return this.get_node(i);},this)):obj;};this.load_node=function(obj,callback){var k,l,i,j,c,tmp;if(!$.isArray(obj)&&!this.settings.checkbox.tie_selection){tmp=this.get_node(obj);if(tmp&&tmp.state.loaded){for(k=0,l=tmp.children_d.length;k<l;k++){if(this._model.data[tmp.children_d[k]].state.checked){c=true;this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,tmp.children_d[k]);}}}}
return parent.load_node.apply(this,arguments);};this.get_state=function(){var state=parent.get_state.apply(this,arguments);if(this.settings.checkbox.tie_selection){return state;}
state.checkbox=this._data.checkbox.selected.slice();return state;};this.set_state=function(state,callback){var res=parent.set_state.apply(this,arguments);if(res&&state.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var _this=this;$.each(state.checkbox,function(i,v){_this.check_node(v);});}
delete state.checkbox;this.set_state(state,callback);return false;}
return res;};this.refresh=function(skip_loading,forget_state){if(!this.settings.checkbox.tie_selection){this._data.checkbox.selected=[];}
return parent.refresh.apply(this,arguments);};};$.jstree.defaults.conditionalselect=function(){return true;};$.jstree.plugins.conditionalselect=function(options,parent){this.activate_node=function(obj,e){if(this.settings.conditionalselect.call(this,this.get_node(obj),e)){parent.activate_node.call(this,obj,e);}};};$.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(o,cb){return{"create":{"separator_before":false,"separator_after":true,"_disabled":false,"label":"Create","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.create_node(obj,{},"last",function(new_node){try{inst.edit(new_node);}catch(ex){setTimeout(function(){inst.edit(new_node);},0);}});}},"rename":{"separator_before":false,"separator_after":false,"_disabled":false,"label":"Rename","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.edit(obj);}},"remove":{"separator_before":false,"icon":false,"separator_after":false,"_disabled":false,"label":"Delete","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.delete_node(inst.get_selected());}
else{inst.delete_node(obj);}}},"ccp":{"separator_before":true,"icon":false,"separator_after":false,"label":"Edit","action":false,"submenu":{"cut":{"separator_before":false,"separator_after":false,"label":"Cut","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.cut(inst.get_top_selected());}
else{inst.cut(obj);}}},"copy":{"separator_before":false,"icon":false,"separator_after":false,"label":"Copy","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);if(inst.is_selected(obj)){inst.copy(inst.get_top_selected());}
else{inst.copy(obj);}}},"paste":{"separator_before":false,"icon":false,"_disabled":function(data){return!$.jstree.reference(data.reference).can_paste();},"separator_after":false,"label":"Paste","action":function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.paste(obj);}}}}};}};$.jstree.plugins.contextmenu=function(options,parent){this.bind=function(){parent.bind.call(this);var last_ts=0,cto=null,ex,ey;this.element
.on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass('jstree-contextmenu');},this))
.on("contextmenu.jstree",".jstree-anchor",$.proxy(function(e,data){if(e.target.tagName.toLowerCase()==='input'){return;}
e.preventDefault();last_ts=e.ctrlKey?+new Date():0;if(data||cto){last_ts=(+new Date())+10000;}
if(cto){clearTimeout(cto);}
if(!this.is_loading(e.currentTarget)){this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e);}},this))
.on("click.jstree",".jstree-anchor",$.proxy(function(e){if(this._data.contextmenu.visible&&(!last_ts||(+new Date())-last_ts>250)){$.vakata.context.hide();}
last_ts=0;},this))
.on("touchstart.jstree",".jstree-anchor",function(e){if(!e.originalEvent||!e.originalEvent.changedTouches||!e.originalEvent.changedTouches[0]){return;}
ex=e.originalEvent.changedTouches[0].clientX;ey=e.originalEvent.changedTouches[0].clientY;cto=setTimeout(function(){$(e.currentTarget).trigger('contextmenu',true);},750);})
.on('touchmove.vakata.jstree',function(e){if(cto&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(ex-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(ey-e.originalEvent.changedTouches[0].clientY)>50)){clearTimeout(cto);}})
.on('touchend.vakata.jstree',function(e){if(cto){clearTimeout(cto);}});$(document).on("context_hide.vakata.jstree",$.proxy(function(e,data){this._data.contextmenu.visible=false;$(data.reference).removeClass('jstree-context');},this));};this.teardown=function(){if(this._data.contextmenu.visible){$.vakata.context.hide();}
parent.teardown.call(this);};this.show_contextmenu=function(obj,x,y,e){obj=this.get_node(obj);if(!obj||obj.id===$.jstree.root){return false;}
var s=this.settings.contextmenu,d=this.get_node(obj,true),a=d.children(".jstree-anchor"),o=false,i=false;if(s.show_at_node||x===undefined||y===undefined){o=a.offset();x=o.left;y=o.top+this._data.core.li_height;}
if(this.settings.contextmenu.select_node&&!this.is_selected(obj)){this.activate_node(obj,e);}
i=s.items;if($.isFunction(i)){i=i.call(this,obj,$.proxy(function(i){this._show_contextmenu(obj,x,y,i);},this));}
if($.isPlainObject(i)){this._show_contextmenu(obj,x,y,i);}};this._show_contextmenu=function(obj,x,y,i){var d=this.get_node(obj,true),a=d.children(".jstree-anchor");$(document).one("context_show.vakata.jstree",$.proxy(function(e,data){var cls='jstree-contextmenu jstree-'+this.get_theme()+'-contextmenu';$(data.element).addClass(cls);a.addClass('jstree-context');},this));this._data.contextmenu.visible=true;$.vakata.context.show(a,{'x':x,'y':y},i);this.trigger('show_contextmenu',{"node":obj,"x":x,"y":y});};};(function($){var right_to_left=false,vakata_context={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};$.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{"reference":vakata_context.reference,"element":vakata_context.element,"position":{"x":vakata_context.position_x,"y":vakata_context.position_y}});},_execute:function(i){i=vakata_context.items[i];return i&&(!i._disabled||($.isFunction(i._disabled)&&!i._disabled({"item":i,"reference":vakata_context.reference,"element":vakata_context.element})))&&i.action?i.action.call(null,{"item":i,"reference":vakata_context.reference,"element":vakata_context.element,"position":{"x":vakata_context.position_x,"y":vakata_context.position_y}}):false;},_parse:function(o,is_callback){if(!o){return false;}
if(!is_callback){vakata_context.html="";vakata_context.items=[];}
var str="",sep=false,tmp;if(is_callback){str+="<"+"ul>";}
$.each(o,function(i,val){if(!val){return true;}
vakata_context.items.push(val);if(!sep&&val.separator_before){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?'':'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>";}
sep=false;str+="<"+"li class='"+(val._class||"")+(val._disabled===true||($.isFunction(val._disabled)&&val._disabled({"item":val,"reference":vakata_context.reference,"element":vakata_context.element}))?" vakata-contextmenu-disabled ":"")+"' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":'')+">";str+="<"+"a href='#' rel='"+(vakata_context.items.length-1)+"' "+(val.title?"title='"+val.title+"'":"")+">";if($.vakata.context.settings.icons){str+="<"+"i ";if(val.icon){if(val.icon.indexOf("/")!==-1||val.icon.indexOf(".")!==-1){str+=" style='background:url(\""+val.icon+"\") center center no-repeat' ";}
else{str+=" class='"+val.icon+"' ";}}
str+="><"+"/i><"+"span class='vakata-contextmenu-sep'>&#160;<"+"/span>";}
str+=($.isFunction(val.label)?val.label({"item":i,"reference":vakata_context.reference,"element":vakata_context.element}):val.label)+(val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+(val.shortcut_label||'')+'</span>':'')+"<"+"/a>";if(val.submenu){tmp=$.vakata.context._parse(val.submenu,true);if(tmp){str+=tmp;}}
str+="<"+"/li>";if(val.separator_after){str+="<"+"li class='vakata-context-separator'><"+"a href='#' "+($.vakata.context.settings.icons?'':'style="margin-left:0px;"')+">&#160;<"+"/a><"+"/li>";sep=true;}});str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(is_callback){str+="</ul>";}
if(!is_callback){vakata_context.html=str;$.vakata.context._trigger("parse");}
return str.length>10?str:false;},_show_submenu:function(o){o=$(o);if(!o.length||!o.children("ul").length){return;}
var e=o.children("ul"),xl=o.offset().left,x=xl+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop();if(right_to_left){o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left");}
else{o[x+w>dw&&xl>dw-x?"addClass":"removeClass"]("vakata-context-right");}
if(y+h+10>dh){e.css("bottom","-1px");}
if(o.hasClass('vakata-context-right')){if(xl<w){e.css("margin-right",xl-w);}}else{if(dw-x<w){e.css("margin-left",dw-x-w);}}
e.show();},show:function(reference,position,data){var o,e,x,y,w,h,dw,dh,cond=true;if(vakata_context.element&&vakata_context.element.length){vakata_context.element.width('');}
switch(cond){case(!position&&!reference):return false;case(!!position&&!!reference):vakata_context.reference=reference;vakata_context.position_x=position.x;vakata_context.position_y=position.y;break;case(!position&&!!reference):vakata_context.reference=reference;o=reference.offset();vakata_context.position_x=o.left+reference.outerHeight();vakata_context.position_y=o.top;break;case(!!position&&!reference):vakata_context.position_x=position.x;vakata_context.position_y=position.y;break;}
if(!!reference&&!data&&$(reference).data('vakata_contextmenu')){data=$(reference).data('vakata_contextmenu');}
if($.vakata.context._parse(data)){vakata_context.element.html(vakata_context.html);}
if(vakata_context.items.length){vakata_context.element.appendTo("body");e=vakata_context.element;x=vakata_context.position_x;y=vakata_context.position_y;w=e.width();h=e.height();dw=$(window).width()+$(window).scrollLeft();dh=$(window).height()+$(window).scrollTop();if(right_to_left){x-=(e.outerWidth()-$(reference).outerWidth());if(x<$(window).scrollLeft()+20){x=$(window).scrollLeft()+20;}}
if(x+w+20>dw){x=dw-(w+20);}
if(y+h+20>dh){y=dh-(h+20);}
vakata_context.element
.css({"left":x,"top":y})
.show()
.find('a').first().focus().parent().addClass("vakata-context-hover");vakata_context.is_visible=true;$.vakata.context._trigger("show");}},hide:function(){if(vakata_context.is_visible){vakata_context.element.hide().find("ul").hide().end().find(':focus').blur().end().detach();vakata_context.is_visible=false;$.vakata.context._trigger("hide");}}};$(function(){right_to_left=$("body").css("direction")==="rtl";var to=false;vakata_context.element=$("<ul class='vakata-context'></ul>");vakata_context.element
.on("mouseenter","li",function(e){e.stopImmediatePropagation();if($.contains(this,e.relatedTarget)){return;}
if(to){clearTimeout(to);}
vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();$(this)
.siblings().find("ul").hide().end().end()
.parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");$.vakata.context._show_submenu(this);})
.on("mouseleave","li",function(e){if($.contains(this,e.relatedTarget)){return;}
$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover");})
.on("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if($.vakata.context.settings.hide_onmouseleave){to=setTimeout((function(t){return function(){$.vakata.context.hide();};}(this)),$.vakata.context.settings.hide_onmouseleave);}})
.on("click","a",function(e){e.preventDefault();if(!$(this).blur().parent().hasClass("vakata-context-disabled")&&$.vakata.context._execute($(this).attr("rel"))!==false){$.vakata.context.hide();}})
.on('keydown','a',function(e){var o=null;switch(e.which){case 13:case 32:e.type="click";e.preventDefault();$(e.currentTarget).trigger(e);break;case 37:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children('a').focus();e.stopImmediatePropagation();e.preventDefault();}
break;case 38:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last();}
o.addClass("vakata-context-hover").children('a').focus();e.stopImmediatePropagation();e.preventDefault();}
break;case 39:if(vakata_context.is_visible){vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children('a').focus();e.stopImmediatePropagation();e.preventDefault();}
break;case 40:if(vakata_context.is_visible){o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!o.length){o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first();}
o.addClass("vakata-context-hover").children('a').focus();e.stopImmediatePropagation();e.preventDefault();}
break;case 27:$.vakata.context.hide();e.preventDefault();break;default:break;}})
.on('keydown',function(e){e.preventDefault();var a=vakata_context.element.find('.vakata-contextmenu-shortcut-'+e.which).parent();if(a.parent().not('.vakata-context-disabled')){a.click();}});$(document)
.on("mousedown.vakata.jstree",function(e){if(vakata_context.is_visible&&vakata_context.element[0]!==e.target&&!$.contains(vakata_context.element[0],e.target)){$.vakata.context.hide();}})
.on("context_show.vakata.jstree",function(e,data){vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(right_to_left){vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl");}
vakata_context.element.find("ul").hide().end();});});}($));$.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true,always_copy:false,inside_pos:0,drag_selection:true,touch:true,large_drop_target:false,large_drag_target:false,use_html5:false};var drg,elm;$.jstree.plugins.dnd=function(options,parent){this.init=function(el,options){parent.init.call(this,el,options);this.settings.dnd.use_html5=this.settings.dnd.use_html5&&('draggable'in document.createElement('span'));};this.bind=function(){parent.bind.call(this);this.element
.on(this.settings.dnd.use_html5?'dragstart.jstree':'mousedown.jstree touchstart.jstree',this.settings.dnd.large_drag_target?'.jstree-node':'.jstree-anchor',$.proxy(function(e){if(this.settings.dnd.large_drag_target&&$(e.target).closest('.jstree-node')[0]!==e.currentTarget){return true;}
if(e.type==="touchstart"&&(!this.settings.dnd.touch||(this.settings.dnd.touch==='selected'&&!$(e.currentTarget).closest('.jstree-node').children('.jstree-anchor').hasClass('jstree-clicked')))){return true;}
var obj=this.get_node(e.target),mlt=this.is_selected(obj)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,txt=(mlt>1?mlt+' '+this.get_string('nodes'):this.get_text(e.currentTarget));if(this.settings.core.force_text){txt=$.vakata.html.escape(txt);}
if(obj&&obj.id&&obj.id!==$.jstree.root&&(e.which===1||e.type==="touchstart"||e.type==="dragstart")&&(this.settings.dnd.is_draggable===true||($.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,(mlt>1?this.get_top_selected(true):[obj]),e)))){drg={'jstree':true,'origin':this,'obj':this.get_node(obj,true),'nodes':mlt>1?this.get_top_selected():[obj.id]};elm=e.currentTarget;if(this.settings.dnd.use_html5){$.vakata.dnd._trigger('start',e,{'helper':$(),'element':elm,'data':drg});}else{this.element.trigger('mousedown.jstree');return $.vakata.dnd.start(e,drg,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+' jstree-'+this.get_theme()+'-'+this.get_theme_variant()+' '+(this.settings.core.themes.responsive?' jstree-dnd-responsive':'')+'"><i class="jstree-icon jstree-er"></i>'+txt+'<ins class="jstree-copy" style="display:none;">+</ins></div>');}}},this));if(this.settings.dnd.use_html5){this.element
.on('dragover.jstree',function(e){e.preventDefault();$.vakata.dnd._trigger('move',e,{'helper':$(),'element':elm,'data':drg});return false;})
.on('drop.jstree',$.proxy(function(e){e.preventDefault();$.vakata.dnd._trigger('stop',e,{'helper':$(),'element':elm,'data':drg});return false;},this));}};this.redraw_node=function(obj,deep,callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj&&this.settings.dnd.use_html5){if(this.settings.dnd.large_drag_target){obj.setAttribute('draggable',true);}else{var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++){if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break;}}
if(tmp){tmp.setAttribute('draggable',true);}}}
return obj;};};$(function(){var lastmv=false,laster=false,lastev=false,opento=false,marker=$('<div id="jstree-marker">&#160;</div>').hide();$(document)
.on('dnd_start.vakata.jstree',function(e,data){lastmv=false;lastev=false;if(!data||!data.data||!data.data.jstree){return;}
marker.appendTo('body');})
.on('dnd_move.vakata.jstree',function(e,data){var isDifferentNode=data.event.target!==lastev.target;if(opento){if(!data.event||data.event.type!=='dragover'||isDifferentNode){clearTimeout(opento);}}
if(!data||!data.data||!data.data.jstree){return;}
if(data.event.target.id&&data.event.target.id==='jstree-marker'){return;}
lastev=data.event;var ins=$.jstree.reference(data.event.target),ref=false,off=false,rel=false,tmp,l,t,h,p,i,o,ok,t1,t2,op,ps,pr,ip,tm,is_copy,pn;if(ins&&ins._data&&ins._data.dnd){marker.attr('class','jstree-'+ins.get_theme()+(ins.settings.core.themes.responsive?' jstree-dnd-responsive':''));is_copy=data.data.origin&&(data.data.origin.settings.dnd.always_copy||(data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)));data.helper
.children().attr('class','jstree-'+ins.get_theme()+' jstree-'+ins.get_theme()+'-'+ins.get_theme_variant()+' '+(ins.settings.core.themes.responsive?' jstree-dnd-responsive':''))
.find('.jstree-copy').first()[is_copy?'show':'hide']();if((data.event.target===ins.element[0]||data.event.target===ins.get_container_ul()[0])&&ins.get_container_ul().children().length===0){ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){ok=ok&&ins.check((data.data.origin&&(data.data.origin.settings.dnd.always_copy||(data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)))?"copy_node":"move_node"),(data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1]),$.jstree.root,'last',{'dnd':true,'ref':ins.get_node($.jstree.root),'pos':'i','origin':data.data.origin,'is_multi':(data.data.origin&&data.data.origin!==ins),'is_foreign':(!data.data.origin)});if(!ok){break;}}
if(ok){lastmv={'ins':ins,'par':$.jstree.root,'pos':'last'};marker.hide();data.helper.find('.jstree-icon').first().removeClass('jstree-er').addClass('jstree-ok');if(data.event.originalEvent&&data.event.originalEvent.dataTransfer){data.event.originalEvent.dataTransfer.dropEffect=is_copy?'copy':'move';}
return;}}
else{ref=ins.settings.dnd.large_drop_target?$(data.event.target).closest('.jstree-node').children('.jstree-anchor'):$(data.event.target).closest('.jstree-anchor');if(ref&&ref.length&&ref.parent().is('.jstree-closed, .jstree-open, .jstree-leaf')){off=ref.offset();rel=(data.event.pageY!==undefined?data.event.pageY:data.event.originalEvent.pageY)-off.top;h=ref.outerHeight();if(rel<h/3){o=['b','i','a'];}
else if(rel>h-h/3){o=['a','i','b'];}
else{o=rel>h/2?['i','a','b']:['i','b','a'];}
$.each(o,function(j,v){switch(v){case'b':l=off.left-6;t=off.top;p=ins.get_parent(ref);i=ref.parent().index();break;case'i':ip=ins.settings.dnd.inside_pos;tm=ins.get_node(ref.parent());l=off.left-2;t=off.top+h/2+1;p=tm.id;i=ip==='first'?0:(ip==='last'?tm.children.length:Math.min(ip,tm.children.length));break;case'a':l=off.left-6;t=off.top+h;p=ins.get_parent(ref);i=ref.parent().index()+1;break;}
ok=true;for(t1=0,t2=data.data.nodes.length;t1<t2;t1++){op=data.data.origin&&(data.data.origin.settings.dnd.always_copy||(data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)))?"copy_node":"move_node";ps=i;if(op==="move_node"&&v==='a'&&(data.data.origin&&data.data.origin===ins)&&p===ins.get_parent(data.data.nodes[t1])){pr=ins.get_node(p);if(ps>$.inArray(data.data.nodes[t1],pr.children)){ps-=1;}}
ok=ok&&((ins&&ins.settings&&ins.settings.dnd&&ins.settings.dnd.check_while_dragging===false)||ins.check(op,(data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1]),p,ps,{'dnd':true,'ref':ins.get_node(ref.parent()),'pos':v,'origin':data.data.origin,'is_multi':(data.data.origin&&data.data.origin!==ins),'is_foreign':(!data.data.origin)}));if(!ok){if(ins&&ins.last_error){laster=ins.last_error();}
break;}}
if(v==='i'&&ref.parent().is('.jstree-closed')&&ins.settings.dnd.open_timeout){if(!data.event||data.event.type!=='dragover'||isDifferentNode){if(opento){clearTimeout(opento);}
opento=setTimeout((function(x,z){return function(){x.open_node(z);};}(ins,ref)),ins.settings.dnd.open_timeout);}}
if(ok){pn=ins.get_node(p,true);if(!pn.hasClass('.jstree-dnd-parent')){$('.jstree-dnd-parent').removeClass('jstree-dnd-parent');pn.addClass('jstree-dnd-parent');}
lastmv={'ins':ins,'par':p,'pos':v==='i'&&ip==='last'&&i===0&&!ins.is_loaded(tm)?'last':i};marker.css({'left':l+'px','top':t+'px'}).show();data.helper.find('.jstree-icon').first().removeClass('jstree-er').addClass('jstree-ok');if(data.event.originalEvent&&data.event.originalEvent.dataTransfer){data.event.originalEvent.dataTransfer.dropEffect=is_copy?'copy':'move';}
laster={};o=true;return false;}});if(o===true){return;}}}}
$('.jstree-dnd-parent').removeClass('jstree-dnd-parent');lastmv=false;data.helper.find('.jstree-icon').removeClass('jstree-ok').addClass('jstree-er');if(data.event.originalEvent&&data.event.originalEvent.dataTransfer){data.event.originalEvent.dataTransfer.dropEffect='none';}
marker.hide();})
.on('dnd_scroll.vakata.jstree',function(e,data){if(!data||!data.data||!data.data.jstree){return;}
marker.hide();lastmv=false;lastev=false;data.helper.find('.jstree-icon').first().removeClass('jstree-ok').addClass('jstree-er');})
.on('dnd_stop.vakata.jstree',function(e,data){$('.jstree-dnd-parent').removeClass('jstree-dnd-parent');if(opento){clearTimeout(opento);}
if(!data||!data.data||!data.data.jstree){return;}
marker.hide().detach();var i,j,nodes=[];if(lastmv){for(i=0,j=data.data.nodes.length;i<j;i++){nodes[i]=data.data.origin?data.data.origin.get_node(data.data.nodes[i]):data.data.nodes[i];}
lastmv.ins[data.data.origin&&(data.data.origin.settings.dnd.always_copy||(data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)))?'copy_node':'move_node'](nodes,lastmv.par,lastmv.pos,false,false,false,data.data.origin);}
else{i=$(data.event.target).closest('.jstree');if(i.length&&laster&&laster.error&&laster.error==='check'){i=i.jstree(true);if(i){i.settings.core.error.call(this,laster);}}}
lastev=false;lastmv=false;})
.on('keyup.jstree keydown.jstree',function(e,data){data=$.vakata.dnd._get();if(data&&data.data&&data.data.jstree){if(e.type==="keyup"&&e.which===27){if(opento){clearTimeout(opento);}
lastmv=false;laster=false;lastev=false;opento=false;marker.hide().detach();$.vakata.dnd._clean();}else{data.helper.find('.jstree-copy').first()[data.data.origin&&(data.data.origin.settings.dnd.always_copy||(data.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey)))?'show':'hide']();if(lastev){lastev.metaKey=e.metaKey;lastev.ctrlKey=e.ctrlKey;$.vakata.dnd._trigger('move',lastev);}}}});});(function($){$.vakata.html={div:$('<div />'),escape:function(str){return $.vakata.html.div.text(str).html();},strip:function(str){return $.vakata.html.div.empty().append($.parseHTML(str)).text();}};var vakata_dnd={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(event_name,e,data){if(data===undefined){data=$.vakata.dnd._get();}
data.event=e;$(document).triggerHandler("dnd_"+event_name+".vakata",data);},_get:function(){return{"data":vakata_dnd.data,"element":vakata_dnd.element,"helper":vakata_dnd.helper};},_clean:function(){if(vakata_dnd.helper){vakata_dnd.helper.remove();}
if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false;}
vakata_dnd={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};$(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag);$(document).off("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop);},_scroll:function(init_only){if(!vakata_dnd.scroll_e||(!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t)){if(vakata_dnd.scroll_i){clearInterval(vakata_dnd.scroll_i);vakata_dnd.scroll_i=false;}
return false;}
if(!vakata_dnd.scroll_i){vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100);return false;}
if(init_only===true){return false;}
var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed);vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed);if(i!==vakata_dnd.scroll_e.scrollTop()||j!==vakata_dnd.scroll_e.scrollLeft()){$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e);}},start:function(e,data,html){if(e.type==="touchstart"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset);}
if(vakata_dnd.is_drag){$.vakata.dnd.stop({});}
try{e.currentTarget.unselectable="on";e.currentTarget.onselectstart=function(){return false;};if(e.currentTarget.style){e.currentTarget.style.touchAction="none";e.currentTarget.style.msTouchAction="none";e.currentTarget.style.MozUserSelect="none";}}catch(ignore){}
vakata_dnd.init_x=e.pageX;vakata_dnd.init_y=e.pageY;vakata_dnd.data=data;vakata_dnd.is_down=true;vakata_dnd.element=e.currentTarget;vakata_dnd.target=e.target;vakata_dnd.is_touch=e.type==="touchstart";if(html!==false){vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({"display":"block","margin":"0","padding":"0","position":"absolute","top":"-2000px","lineHeight":"16px","zIndex":"10000"});}
$(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag);$(document).on("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop);return false;},drag:function(e){if(e.type==="touchmove"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset);}
if(!vakata_dnd.is_down){return;}
if(!vakata_dnd.is_drag){if(Math.abs(e.pageX-vakata_dnd.init_x)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)||Math.abs(e.pageY-vakata_dnd.init_y)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)){if(vakata_dnd.helper){vakata_dnd.helper.appendTo("body");vakata_dnd.helper_w=vakata_dnd.helper.outerWidth();}
vakata_dnd.is_drag=true;$(vakata_dnd.target).one('click.vakata',false);$.vakata.dnd._trigger("start",e);}
else{return;}}
var d=false,w=false,dh=false,wh=false,dw=false,ww=false,dt=false,dl=false,ht=false,hl=false;vakata_dnd.scroll_t=0;vakata_dnd.scroll_l=0;vakata_dnd.scroll_e=false;$($(e.target).parentsUntil("body").addBack().get().reverse())
.filter(function(){return(/^auto|scroll$/).test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth);})
.each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight){if(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1;}
if(e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1;}}
if(this.scrollWidth>this.offsetWidth){if(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1;}
if(e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1;}}
if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=$(this);return false;}});if(!vakata_dnd.scroll_e){d=$(document);w=$(window);dh=d.height();wh=w.height();dw=d.width();ww=w.width();dt=d.scrollTop();dl=d.scrollLeft();if(dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=-1;}
if(dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_t=1;}
if(dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=-1;}
if(dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity){vakata_dnd.scroll_l=1;}
if(vakata_dnd.scroll_t||vakata_dnd.scroll_l){vakata_dnd.scroll_e=d;}}
if(vakata_dnd.scroll_e){$.vakata.dnd._scroll(true);}
if(vakata_dnd.helper){ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10);hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10);if(dh&&ht+25>dh){ht=dh-50;}
if(dw&&hl+vakata_dnd.helper_w>dw){hl=dw-(vakata_dnd.helper_w+2);}
vakata_dnd.helper.css({left:hl+"px",top:ht+"px"});}
$.vakata.dnd._trigger("move",e);return false;},stop:function(e){if(e.type==="touchend"&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset);}
if(vakata_dnd.is_drag){if(e.target!==vakata_dnd.target){$(vakata_dnd.target).off('click.vakata');}
$.vakata.dnd._trigger("stop",e);}
else{if(e.type==="touchend"&&e.target===vakata_dnd.target){var to=setTimeout(function(){$(e.target).click();},100);$(e.target).one('click',function(){if(to){clearTimeout(to);}});}}
$.vakata.dnd._clean();return false;}};}($));$.jstree.defaults.massload=null;$.jstree.plugins.massload=function(options,parent){this.init=function(el,options){this._data.massload={};parent.init.call(this,el,options);};this._load_nodes=function(nodes,callback,is_callback,force_reload){var s=this.settings.massload,nodesString=JSON.stringify(nodes),toLoad=[],m=this._model.data,i,j,dom;if(!is_callback){for(i=0,j=nodes.length;i<j;i++){if(!m[nodes[i]]||((!m[nodes[i]].state.loaded&&!m[nodes[i]].state.failed)||force_reload)){toLoad.push(nodes[i]);dom=this.get_node(nodes[i],true);if(dom&&dom.length){dom.addClass("jstree-loading").attr('aria-busy',true);}}}
this._data.massload={};if(toLoad.length){if($.isFunction(s)){return s.call(this,toLoad,$.proxy(function(data){var i,j;if(data){for(i in data){if(data.hasOwnProperty(i)){this._data.massload[i]=data[i];}}}
for(i=0,j=nodes.length;i<j;i++){dom=this.get_node(nodes[i],true);if(dom&&dom.length){dom.removeClass("jstree-loading").attr('aria-busy',false);}}
parent._load_nodes.call(this,nodes,callback,is_callback,force_reload);},this));}
if(typeof s==='object'&&s&&s.url){s=$.extend(true,{},s);if($.isFunction(s.url)){s.url=s.url.call(this,toLoad);}
if($.isFunction(s.data)){s.data=s.data.call(this,toLoad);}
return $.ajax(s)
.done($.proxy(function(data,t,x){var i,j;if(data){for(i in data){if(data.hasOwnProperty(i)){this._data.massload[i]=data[i];}}}
for(i=0,j=nodes.length;i<j;i++){dom=this.get_node(nodes[i],true);if(dom&&dom.length){dom.removeClass("jstree-loading").attr('aria-busy',false);}}
parent._load_nodes.call(this,nodes,callback,is_callback,force_reload);},this))
.fail($.proxy(function(f){parent._load_nodes.call(this,nodes,callback,is_callback,force_reload);},this));}}}
return parent._load_nodes.call(this,nodes,callback,is_callback,force_reload);};this._load_node=function(obj,callback){var data=this._data.massload[obj.id],rslt=null,dom;if(data){rslt=this[typeof data==='string'?'_append_html_data':'_append_json_data'](obj,typeof data==='string'?$($.parseHTML(data)).filter(function(){return this.nodeType!==3;}):data,function(status){callback.call(this,status);});dom=this.get_node(obj.id,true);if(dom&&dom.length){dom.removeClass("jstree-loading").attr('aria-busy',false);}
delete this._data.massload[obj.id];return rslt;}
return parent._load_node.call(this,obj,callback);};};$.jstree.defaults.search={ajax:false,fuzzy:false,case_sensitive:false,show_only_matches:false,show_only_matches_children:false,close_opened_onclear:true,search_leaves_only:false,search_callback:false};$.jstree.plugins.search=function(options,parent){this.bind=function(){parent.bind.call(this);this._data.search.str="";this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=false;this._data.search.smc=false;this._data.search.hdn=[];this.element
.on("search.jstree",$.proxy(function(e,data){if(this._data.search.som&&data.res.length){var m=this._model.data,i,j,p=[],k,l;for(i=0,j=data.res.length;i<j;i++){if(m[data.res[i]]&&!m[data.res[i]].state.hidden){p.push(data.res[i]);p=p.concat(m[data.res[i]].parents);if(this._data.search.smc){for(k=0,l=m[data.res[i]].children_d.length;k<l;k++){if(m[m[data.res[i]].children_d[k]]&&!m[m[data.res[i]].children_d[k]].state.hidden){p.push(m[data.res[i]].children_d[k]);}}}}}
p=$.vakata.array_remove_item($.vakata.array_unique(p),$.jstree.root);this._data.search.hdn=this.hide_all(true);this.show_node(p,true);this.redraw(true);}},this))
.on("clear_search.jstree",$.proxy(function(e,data){if(this._data.search.som&&data.res.length){this.show_node(this._data.search.hdn,true);this.redraw(true);}},this));};this.search=function(str,skip_async,show_only_matches,inside,append,show_only_matches_children){if(str===false||$.trim(str.toString())===""){return this.clear_search();}
inside=this.get_node(inside);inside=inside&&inside.id?inside.id:null;str=str.toString();var s=this.settings.search,a=s.ajax?s.ajax:false,m=this._model.data,f=null,r=[],p=[],i,j;if(this._data.search.res.length&&!append){this.clear_search();}
if(show_only_matches===undefined){show_only_matches=s.show_only_matches;}
if(show_only_matches_children===undefined){show_only_matches_children=s.show_only_matches_children;}
if(!skip_async&&a!==false){if($.isFunction(a)){return a.call(this,str,$.proxy(function(d){if(d&&d.d){d=d.d;}
this._load_nodes(!$.isArray(d)?[]:$.vakata.array_unique(d),function(){this.search(str,true,show_only_matches,inside,append,show_only_matches_children);});},this),inside);}
else{a=$.extend({},a);if(!a.data){a.data={};}
a.data.str=str;if(inside){a.data.inside=inside;}
if(this._data.search.lastRequest){this._data.search.lastRequest.abort();}
this._data.search.lastRequest=$.ajax(a)
.fail($.proxy(function(){this._data.core.last_error={'error':'ajax','plugin':'search','id':'search_01','reason':'Could not load search parents','data':JSON.stringify(a)};this.settings.core.error.call(this,this._data.core.last_error);},this))
.done($.proxy(function(d){if(d&&d.d){d=d.d;}
this._load_nodes(!$.isArray(d)?[]:$.vakata.array_unique(d),function(){this.search(str,true,show_only_matches,inside,append,show_only_matches_children);});},this));return this._data.search.lastRequest;}}
if(!append){this._data.search.str=str;this._data.search.dom=$();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=show_only_matches;this._data.search.smc=show_only_matches_children;}
f=new $.vakata.search(str,true,{caseSensitive:s.case_sensitive,fuzzy:s.fuzzy});$.each(m[inside?inside:$.jstree.root].children_d,function(ii,i){var v=m[i];if(v.text&&!v.state.hidden&&(!s.search_leaves_only||(v.state.loaded&&v.children.length===0))&&((s.search_callback&&s.search_callback.call(this,str,v))||(!s.search_callback&&f.search(v.text).isMatch))){r.push(i);p=p.concat(v.parents);}});if(r.length){p=$.vakata.array_unique(p);for(i=0,j=p.length;i<j;i++){if(p[i]!==$.jstree.root&&m[p[i]]&&this.open_node(p[i],null,0)===true){this._data.search.opn.push(p[i]);}}
if(!append){this._data.search.dom=$(this.element[0].querySelectorAll('#'+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?'\\3'+v[0]+' '+v.substr(1).replace($.jstree.idregex,'\\$&'):v.replace($.jstree.idregex,'\\$&');}).join(', #')));this._data.search.res=r;}
else{this._data.search.dom=this._data.search.dom.add($(this.element[0].querySelectorAll('#'+$.map(r,function(v){return"0123456789".indexOf(v[0])!==-1?'\\3'+v[0]+' '+v.substr(1).replace($.jstree.idregex,'\\$&'):v.replace($.jstree.idregex,'\\$&');}).join(', #'))));this._data.search.res=$.vakata.array_unique(this._data.search.res.concat(r));}
this._data.search.dom.children(".jstree-anchor").addClass('jstree-search');}
this.trigger('search',{nodes:this._data.search.dom,str:str,res:this._data.search.res,show_only_matches:show_only_matches});};this.clear_search=function(){if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0);}
this.trigger('clear_search',{'nodes':this._data.search.dom,str:this._data.search.str,res:this._data.search.res});if(this._data.search.res.length){this._data.search.dom=$(this.element[0].querySelectorAll('#'+$.map(this._data.search.res,function(v){return"0123456789".indexOf(v[0])!==-1?'\\3'+v[0]+' '+v.substr(1).replace($.jstree.idregex,'\\$&'):v.replace($.jstree.idregex,'\\$&');}).join(', #')));this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search");}
this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=$();};this.redraw_node=function(obj,deep,callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){if($.inArray(obj.id,this._data.search.res)!==-1){var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++){if(obj.childNodes[i]&&obj.childNodes[i].className&&obj.childNodes[i].className.indexOf("jstree-anchor")!==-1){tmp=obj.childNodes[i];break;}}
if(tmp){tmp.className+=' jstree-search';}}}
return obj;};};(function($){$.vakata.search=function(pattern,txt,options){options=options||{};options=$.extend({},$.vakata.search.defaults,options);if(options.fuzzy!==false){options.fuzzy=true;}
pattern=options.caseSensitive?pattern:pattern.toLowerCase();var MATCH_LOCATION=options.location,MATCH_DISTANCE=options.distance,MATCH_THRESHOLD=options.threshold,patternLen=pattern.length,matchmask,pattern_alphabet,match_bitapScore,search;if(patternLen>32){options.fuzzy=false;}
if(options.fuzzy){matchmask=1<<(patternLen-1);pattern_alphabet=(function(){var mask={},i=0;for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]=0;}
for(i=0;i<patternLen;i++){mask[pattern.charAt(i)]|=1<<(patternLen-i-1);}
return mask;}());match_bitapScore=function(e,x){var accuracy=e/patternLen,proximity=Math.abs(MATCH_LOCATION-x);if(!MATCH_DISTANCE){return proximity?1.0:accuracy;}
return accuracy+(proximity/MATCH_DISTANCE);};}
search=function(text){text=options.caseSensitive?text:text.toLowerCase();if(pattern===text||text.indexOf(pattern)!==-1){return{isMatch:true,score:0};}
if(!options.fuzzy){return{isMatch:false,score:1};}
var i,j,textLen=text.length,scoreThreshold=MATCH_THRESHOLD,bestLoc=text.indexOf(pattern,MATCH_LOCATION),binMin,binMid,binMax=patternLen+textLen,lastRd,start,finish,rd,charMatch,score=1,locations=[];if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold);bestLoc=text.lastIndexOf(pattern,MATCH_LOCATION+patternLen);if(bestLoc!==-1){scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold);}}
bestLoc=-1;for(i=0;i<patternLen;i++){binMin=0;binMid=binMax;while(binMin<binMid){if(match_bitapScore(i,MATCH_LOCATION+binMid)<=scoreThreshold){binMin=binMid;}else{binMax=binMid;}
binMid=Math.floor((binMax-binMin)/2+binMin);}
binMax=binMid;start=Math.max(1,MATCH_LOCATION-binMid+1);finish=Math.min(MATCH_LOCATION+binMid,textLen)+patternLen;rd=new Array(finish+2);rd[finish+1]=(1<<i)-1;for(j=finish;j>=start;j--){charMatch=pattern_alphabet[text.charAt(j-1)];if(i===0){rd[j]=((rd[j+1]<<1)|1)&charMatch;}else{rd[j]=((rd[j+1]<<1)|1)&charMatch|(((lastRd[j+1]|lastRd[j])<<1)|1)|lastRd[j+1];}
if(rd[j]&matchmask){score=match_bitapScore(i,j-1);if(score<=scoreThreshold){scoreThreshold=score;bestLoc=j-1;locations.push(bestLoc);if(bestLoc>MATCH_LOCATION){start=Math.max(1,2*MATCH_LOCATION-bestLoc);}else{break;}}}}
if(match_bitapScore(i+1,MATCH_LOCATION)>scoreThreshold){break;}
lastRd=rd;}
return{isMatch:bestLoc>=0,score:score};};return txt===true?{'search':search}:search(txt);};$.vakata.search.defaults={location:0,distance:100,threshold:0.6,fuzzy:false,caseSensitive:false};}($));$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1;};$.jstree.plugins.sort=function(options,parent){this.bind=function(){parent.bind.call(this);this.element
.on("model.jstree",$.proxy(function(e,data){this.sort(data.parent,true);},this))
.on("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this.sort(data.parent||data.node.parent,false);this.redraw_node(data.parent||data.node.parent,true);},this))
.on("move_node.jstree copy_node.jstree",$.proxy(function(e,data){this.sort(data.parent,false);this.redraw_node(data.parent,true);},this));};this.sort=function(obj,deep){var i,j;obj=this.get_node(obj);if(obj&&obj.children&&obj.children.length){obj.children.sort($.proxy(this.settings.sort,this));if(deep){for(i=0,j=obj.children_d.length;i<j;i++){this.sort(obj.children_d[i],false);}}}};};var to=false;$.jstree.defaults.state={key:'jstree',events:'changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree',ttl:false,filter:false};$.jstree.plugins.state=function(options,parent){this.bind=function(){parent.bind.call(this);var bind=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){if(to){clearTimeout(to);}
to=setTimeout($.proxy(function(){this.save_state();},this),100);},this));this.trigger('state_ready');},this);this.element
.on("ready.jstree",$.proxy(function(e,data){this.element.one("restore_state.jstree",bind);if(!this.restore_state()){bind();}},this));};this.save_state=function(){var st={'state':this.get_state(),'ttl':this.settings.state.ttl,'sec':+(new Date())};$.vakata.storage.set(this.settings.state.key,JSON.stringify(st));};this.restore_state=function(){var k=$.vakata.storage.get(this.settings.state.key);if(!!k){try{k=JSON.parse(k);}catch(ex){return false;}}
if(!!k&&k.ttl&&k.sec&&+(new Date())-k.sec>k.ttl){return false;}
if(!!k&&k.state){k=k.state;}
if(!!k&&$.isFunction(this.settings.state.filter)){k=this.settings.state.filter.call(this,k);}
if(!!k){this.element.one("set_state.jstree",function(e,data){data.instance.trigger('restore_state',{'state':$.extend(true,{},k)});});this.set_state(k);return true;}
return false;};this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key);};};(function($,undefined){$.vakata.storage={set:function(key,val){return window.localStorage.setItem(key,val);},get:function(key){return window.localStorage.getItem(key);},del:function(key){return window.localStorage.removeItem(key);}};}($));$.jstree.defaults.types={'default':{}};$.jstree.defaults.types[$.jstree.root]={};$.jstree.plugins.types=function(options,parent){this.init=function(el,options){var i,j;if(options&&options.types&&options.types['default']){for(i in options.types){if(i!=="default"&&i!==$.jstree.root&&options.types.hasOwnProperty(i)){for(j in options.types['default']){if(options.types['default'].hasOwnProperty(j)&&options.types[i][j]===undefined){options.types[i][j]=options.types['default'][j];}}}}}
parent.init.call(this,el,options);this._model.data[$.jstree.root].type=$.jstree.root;};this.refresh=function(skip_loading,forget_state){parent.refresh.call(this,skip_loading,forget_state);this._model.data[$.jstree.root].type=$.jstree.root;};this.bind=function(){this.element
.on('model.jstree',$.proxy(function(e,data){var m=this._model.data,dpc=data.nodes,t=this.settings.types,i,j,c='default',k;for(i=0,j=dpc.length;i<j;i++){c='default';if(m[dpc[i]].original&&m[dpc[i]].original.type&&t[m[dpc[i]].original.type]){c=m[dpc[i]].original.type;}
if(m[dpc[i]].data&&m[dpc[i]].data.jstree&&m[dpc[i]].data.jstree.type&&t[m[dpc[i]].data.jstree.type]){c=m[dpc[i]].data.jstree.type;}
m[dpc[i]].type=c;if(m[dpc[i]].icon===true&&t[c].icon!==undefined){m[dpc[i]].icon=t[c].icon;}
if(t[c].li_attr!==undefined&&typeof t[c].li_attr==='object'){for(k in t[c].li_attr){if(t[c].li_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(m[dpc[i]].li_attr[k]===undefined){m[dpc[i]].li_attr[k]=t[c].li_attr[k];}
else if(k==='class'){m[dpc[i]].li_attr['class']=t[c].li_attr['class']+' '+m[dpc[i]].li_attr['class'];}}}}
if(t[c].a_attr!==undefined&&typeof t[c].a_attr==='object'){for(k in t[c].a_attr){if(t[c].a_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(m[dpc[i]].a_attr[k]===undefined){m[dpc[i]].a_attr[k]=t[c].a_attr[k];}
else if(k==='href'&&m[dpc[i]].a_attr[k]==='#'){m[dpc[i]].a_attr['href']=t[c].a_attr['href'];}
else if(k==='class'){m[dpc[i]].a_attr['class']=t[c].a_attr['class']+' '+m[dpc[i]].a_attr['class'];}}}}}
m[$.jstree.root].type=$.jstree.root;},this));parent.bind.call(this);};this.get_json=function(obj,options,flat){var i,j,m=this._model.data,opt=options?$.extend(true,{},options,{no_id:false}):{},tmp=parent.get_json.call(this,obj,opt,flat);if(tmp===false){return false;}
if($.isArray(tmp)){for(i=0,j=tmp.length;i<j;i++){tmp[i].type=tmp[i].id&&m[tmp[i].id]&&m[tmp[i].id].type?m[tmp[i].id].type:"default";if(options&&options.no_id){delete tmp[i].id;if(tmp[i].li_attr&&tmp[i].li_attr.id){delete tmp[i].li_attr.id;}
if(tmp[i].a_attr&&tmp[i].a_attr.id){delete tmp[i].a_attr.id;}}}}
else{tmp.type=tmp.id&&m[tmp.id]&&m[tmp.id].type?m[tmp.id].type:"default";if(options&&options.no_id){tmp=this._delete_ids(tmp);}}
return tmp;};this._delete_ids=function(tmp){if($.isArray(tmp)){for(var i=0,j=tmp.length;i<j;i++){tmp[i]=this._delete_ids(tmp[i]);}
return tmp;}
delete tmp.id;if(tmp.li_attr&&tmp.li_attr.id){delete tmp.li_attr.id;}
if(tmp.a_attr&&tmp.a_attr.id){delete tmp.a_attr.id;}
if(tmp.children&&$.isArray(tmp.children)){tmp.children=this._delete_ids(tmp.children);}
return tmp;};this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===false){return false;}
obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);var m=obj&&obj.id?(more&&more.origin?more.origin:$.jstree.reference(obj.id)):null,tmp,d,i,j;m=m&&m._model&&m._model.data?m._model.data:null;switch(chk){case"create_node":case"move_node":case"copy_node":if(chk!=='move_node'||$.inArray(obj.id,par.children)===-1){tmp=this.get_rules(par);if(tmp.max_children!==undefined&&tmp.max_children!==-1&&tmp.max_children===par.children.length){this._data.core.last_error={'error':'check','plugin':'types','id':'types_01','reason':'max_children prevents function: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};return false;}
if(tmp.valid_children!==undefined&&tmp.valid_children!==-1&&$.inArray((obj.type||'default'),tmp.valid_children)===-1){this._data.core.last_error={'error':'check','plugin':'types','id':'types_02','reason':'valid_children prevents function: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};return false;}
if(m&&obj.children_d&&obj.parents){d=0;for(i=0,j=obj.children_d.length;i<j;i++){d=Math.max(d,m[obj.children_d[i]].parents.length);}
d=d-obj.parents.length+1;}
if(d<=0||d===undefined){d=1;}
do{if(tmp.max_depth!==undefined&&tmp.max_depth!==-1&&tmp.max_depth<d){this._data.core.last_error={'error':'check','plugin':'types','id':'types_03','reason':'max_depth prevents function: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};return false;}
par=this.get_node(par.parent);tmp=this.get_rules(par);d++;}while(par);}
break;}
return true;};this.get_rules=function(obj){obj=this.get_node(obj);if(!obj){return false;}
var tmp=this.get_type(obj,true);if(tmp.max_depth===undefined){tmp.max_depth=-1;}
if(tmp.max_children===undefined){tmp.max_children=-1;}
if(tmp.valid_children===undefined){tmp.valid_children=-1;}
return tmp;};this.get_type=function(obj,rules){obj=this.get_node(obj);return(!obj)?false:(rules?$.extend({'type':obj.type},this.settings.types[obj.type]):obj.type);};this.set_type=function(obj,type){var m=this._model.data,t,t1,t2,old_type,old_icon,k,d,a;if($.isArray(obj)){obj=obj.slice();for(t1=0,t2=obj.length;t1<t2;t1++){this.set_type(obj[t1],type);}
return true;}
t=this.settings.types;obj=this.get_node(obj);if(!t[type]||!obj){return false;}
d=this.get_node(obj,true);if(d&&d.length){a=d.children('.jstree-anchor');}
old_type=obj.type;old_icon=this.get_icon(obj);obj.type=type;if(old_icon===true||!t[old_type]||(t[old_type].icon!==undefined&&old_icon===t[old_type].icon)){this.set_icon(obj,t[type].icon!==undefined?t[type].icon:true);}
if(t[old_type]&&t[old_type].li_attr!==undefined&&typeof t[old_type].li_attr==='object'){for(k in t[old_type].li_attr){if(t[old_type].li_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(k==='class'){m[obj.id].li_attr['class']=(m[obj.id].li_attr['class']||'').replace(t[old_type].li_attr[k],'');if(d){d.removeClass(t[old_type].li_attr[k]);}}
else if(m[obj.id].li_attr[k]===t[old_type].li_attr[k]){m[obj.id].li_attr[k]=null;if(d){d.removeAttr(k);}}}}}
if(t[old_type]&&t[old_type].a_attr!==undefined&&typeof t[old_type].a_attr==='object'){for(k in t[old_type].a_attr){if(t[old_type].a_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(k==='class'){m[obj.id].a_attr['class']=(m[obj.id].a_attr['class']||'').replace(t[old_type].a_attr[k],'');if(a){a.removeClass(t[old_type].a_attr[k]);}}
else if(m[obj.id].a_attr[k]===t[old_type].a_attr[k]){if(k==='href'){m[obj.id].a_attr[k]='#';if(a){a.attr('href','#');}}
else{delete m[obj.id].a_attr[k];if(a){a.removeAttr(k);}}}}}}
if(t[type].li_attr!==undefined&&typeof t[type].li_attr==='object'){for(k in t[type].li_attr){if(t[type].li_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(m[obj.id].li_attr[k]===undefined){m[obj.id].li_attr[k]=t[type].li_attr[k];if(d){if(k==='class'){d.addClass(t[type].li_attr[k]);}
else{d.attr(k,t[type].li_attr[k]);}}}
else if(k==='class'){m[obj.id].li_attr['class']=t[type].li_attr[k]+' '+m[obj.id].li_attr['class'];if(d){d.addClass(t[type].li_attr[k]);}}}}}
if(t[type].a_attr!==undefined&&typeof t[type].a_attr==='object'){for(k in t[type].a_attr){if(t[type].a_attr.hasOwnProperty(k)){if(k==='id'){continue;}
else if(m[obj.id].a_attr[k]===undefined){m[obj.id].a_attr[k]=t[type].a_attr[k];if(a){if(k==='class'){a.addClass(t[type].a_attr[k]);}
else{a.attr(k,t[type].a_attr[k]);}}}
else if(k==='href'&&m[obj.id].a_attr[k]==='#'){m[obj.id].a_attr['href']=t[type].a_attr['href'];if(a){a.attr('href',t[type].a_attr['href']);}}
else if(k==='class'){m[obj.id].a_attr['class']=t[type].a_attr['class']+' '+m[obj.id].a_attr['class'];if(a){a.addClass(t[type].a_attr[k]);}}}}}
return true;};};$.jstree.defaults.unique={case_sensitive:false,duplicate:function(name,counter){return name+' ('+counter+')';}};$.jstree.plugins.unique=function(options,parent){this.check=function(chk,obj,par,pos,more){if(parent.check.call(this,chk,obj,par,pos,more)===false){return false;}
obj=obj&&obj.id?obj:this.get_node(obj);par=par&&par.id?par:this.get_node(par);if(!par||!par.children){return true;}
var n=chk==="rename_node"?pos:obj.text,c=[],s=this.settings.unique.case_sensitive,m=this._model.data,i,j;for(i=0,j=par.children.length;i<j;i++){c.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase());}
if(!s){n=n.toLowerCase();}
switch(chk){case"delete_node":return true;case"rename_node":i=($.inArray(n,c)===-1||(obj.text&&obj.text[s?'toString':'toLowerCase']()===n));if(!i){this._data.core.last_error={'error':'check','plugin':'unique','id':'unique_01','reason':'Child with name '+n+' already exists. Preventing: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};}
return i;case"create_node":i=($.inArray(n,c)===-1);if(!i){this._data.core.last_error={'error':'check','plugin':'unique','id':'unique_04','reason':'Child with name '+n+' already exists. Preventing: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};}
return i;case"copy_node":i=($.inArray(n,c)===-1);if(!i){this._data.core.last_error={'error':'check','plugin':'unique','id':'unique_02','reason':'Child with name '+n+' already exists. Preventing: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};}
return i;case"move_node":i=((obj.parent===par.id&&(!more||!more.is_multi))||$.inArray(n,c)===-1);if(!i){this._data.core.last_error={'error':'check','plugin':'unique','id':'unique_03','reason':'Child with name '+n+' already exists. Preventing: '+chk,'data':JSON.stringify({'chk':chk,'pos':pos,'obj':obj&&obj.id?obj.id:false,'par':par&&par.id?par.id:false})};}
return i;}
return true;};this.create_node=function(par,node,pos,callback,is_loaded){if(!node||node.text===undefined){if(par===null){par=$.jstree.root;}
par=this.get_node(par);if(!par){return parent.create_node.call(this,par,node,pos,callback,is_loaded);}
pos=pos===undefined?"last":pos;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par)){return parent.create_node.call(this,par,node,pos,callback,is_loaded);}
if(!node){node={};}
var tmp,n,dpc,i,j,m=this._model.data,s=this.settings.unique.case_sensitive,cb=this.settings.unique.duplicate;n=tmp=this.get_string('New node');dpc=[];for(i=0,j=par.children.length;i<j;i++){dpc.push(s?m[par.children[i]].text:m[par.children[i]].text.toLowerCase());}
i=1;while($.inArray(s?n:n.toLowerCase(),dpc)!==-1){n=cb.call(this,tmp,(++i)).toString();}
node.text=n;}
return parent.create_node.call(this,par,node,pos,callback,is_loaded);};};var div=document.createElement('DIV');div.setAttribute('unselectable','on');div.setAttribute('role','presentation');div.className='jstree-wholerow';div.innerHTML='&#160;';$.jstree.plugins.wholerow=function(options,parent){this.bind=function(){parent.bind.call(this);this.element
.on('ready.jstree set_state.jstree',$.proxy(function(){this.hide_dots();},this))
.on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass('jstree-wholerow-ul');},this))
.on("deselect_all.jstree",$.proxy(function(e,data){this.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');},this))
.on("changed.jstree",$.proxy(function(e,data){this.element.find('.jstree-wholerow-clicked').removeClass('jstree-wholerow-clicked');var tmp=false,i,j;for(i=0,j=data.selected.length;i<j;i++){tmp=this.get_node(data.selected[i],true);if(tmp&&tmp.length){tmp.children('.jstree-wholerow').addClass('jstree-wholerow-clicked');}}},this))
.on("open_node.jstree",$.proxy(function(e,data){this.get_node(data.node,true).find('.jstree-clicked').parent().children('.jstree-wholerow').addClass('jstree-wholerow-clicked');},this))
.on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){if(e.type==="hover_node"&&this.is_disabled(data.node)){return;}
this.get_node(data.node,true).children('.jstree-wholerow')[e.type==="hover_node"?"addClass":"removeClass"]('jstree-wholerow-hovered');},this))
.on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var tmp=$.Event('contextmenu',{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp);}},this))
.on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event('click',{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus();})
.on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event('dblclick',{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus();})
.on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var tmp=$.Event('click',{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus();},this))
.on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){e.stopImmediatePropagation();if(!this.is_disabled(e.currentTarget)){this.hover_node(e.currentTarget);}
return false;},this))
.on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget);},this));};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove();}
parent.teardown.call(this);};this.redraw_node=function(obj,deep,callback,force_render){obj=parent.redraw_node.apply(this,arguments);if(obj){var tmp=div.cloneNode(true);if($.inArray(obj.id,this._data.core.selected)!==-1){tmp.className+=' jstree-wholerow-clicked';}
if(this._data.core.focused&&this._data.core.focused===obj.id){tmp.className+=' jstree-wholerow-hovered';}
obj.insertBefore(tmp,obj.childNodes[0]);}
return obj;};};if(document.registerElement&&Object&&Object.create){var proto=Object.create(HTMLElement.prototype);proto.createdCallback=function(){var c={core:{},plugins:[]},i;for(i in $.jstree.plugins){if($.jstree.plugins.hasOwnProperty(i)&&this.attributes[i]){c.plugins.push(i);if(this.getAttribute(i)&&JSON.parse(this.getAttribute(i))){c[i]=JSON.parse(this.getAttribute(i));}}}
for(i in $.jstree.defaults.core){if($.jstree.defaults.core.hasOwnProperty(i)&&this.attributes[i]){c.core[i]=JSON.parse(this.getAttribute(i))||this.getAttribute(i);}}
$(this).jstree(c);};try{document.registerElement("vakata-jstree",{prototype:proto});}catch(ignore){}}}));
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nunjucks=t():e.nunjucks=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1),r=n(2),s=n(16),o=n(15),a=n(3);e.exports={},e.exports.Environment=r.Environment,e.exports.Template=r.Template,e.exports.Loader=s,e.exports.FileSystemLoader=o.FileSystemLoader,e.exports.PrecompiledLoader=o.PrecompiledLoader,e.exports.WebLoader=o.WebLoader,e.exports.compiler=n(7),e.exports.parser=n(8),e.exports.lexer=n(9),e.exports.runtime=n(13),e.exports.lib=i,e.exports.nodes=n(10),e.exports.installJinjaCompat=n(22);var l;e.exports.configure=function(e,t){t=t||{},i.isObject(e)&&(t=e,e=null);var n;return o.FileSystemLoader?n=new o.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):o.WebLoader&&(n=new o.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),l=new r.Environment(n,t),t&&t.express&&l.express(t.express),l},e.exports.compile=function(t,n,i,r){return l||e.exports.configure(),new e.exports.Template(t,n,i,r)},e.exports.render=function(t,n,i){return l||e.exports.configure(),l.render(t,n,i)},e.exports.renderString=function(t,n,i){return l||e.exports.configure(),l.renderString(t,n,i)},a&&(e.exports.precompile=a.precompile,e.exports.precompileString=a.precompileString)},function(e,t){"use strict";var n=Array.prototype,i=Object.prototype,r={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},s=/[&"'<>]/g,o=function(e){return r[e]},t=e.exports={};t.prettifyError=function(e,n,i){if(i.Update||(i=new t.TemplateError(i)),i.Update(e),!n){var r=i;i=new Error(r.message),i.name=r.name}return i},t.TemplateError=function(e,t,n){var i=this;if(e instanceof Error){i=e,e=e.name+": "+e.message;try{i.name=""}catch(e){i=this}}else Error.captureStackTrace&&Error.captureStackTrace(i);return i.name="Template render error",i.message=e,i.lineno=t,i.colno=n,i.firstUpdate=!0,i.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},i},t.TemplateError.prototype=Error.prototype,t.escape=function(e){return e.replace(s,o)},t.isFunction=function(e){return"[object Function]"===i.toString.call(e)},t.isArray=Array.isArray||function(e){return"[object Array]"===i.toString.call(e)},t.isString=function(e){return"[object String]"===i.toString.call(e)},t.isObject=function(e){return"[object Object]"===i.toString.call(e)},t.groupBy=function(e,n){for(var i={},r=t.isFunction(n)?n:function(e){return e[n]},s=0;s<e.length;s++){var o=e[s],a=r(o,s);(i[a]||(i[a]=[])).push(o)}return i},t.toArray=function(e){return Array.prototype.slice.call(e)},t.without=function(e){var n=[];if(!e)return n;for(var i=-1,r=e.length,s=t.toArray(arguments).slice(1);++i<r;)t.indexOf(s,e[i])===-1&&n.push(e[i]);return n},t.extend=function(e,t){for(var n in t)e[n]=t[n];return e},t.repeat=function(e,t){for(var n="",i=0;i<t;i++)n+=e;return n},t.each=function(e,t,i){if(null!=e)if(n.each&&e.each===n.each)e.forEach(t,i);else if(e.length===+e.length)for(var r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},t.map=function(e,t){var i=[];if(null==e)return i;if(n.map&&e.map===n.map)return e.map(t);for(var r=0;r<e.length;r++)i[i.length]=t(e[r],r);return e.length===+e.length&&(i.length=e.length),i},t.asyncIter=function(e,t,n){function i(){r++,r<e.length?t(e[r],r,i,n):n()}var r=-1;i()},t.asyncFor=function(e,n,i){function r(){a++;var t=s[a];a<o?n(t,e[t],a,o,r):i()}var s=t.keys(e),o=s.length,a=-1;r()},t.indexOf=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){var i=this.length>>>0;for(n=+n||0,Math.abs(n)===1/0&&(n=0),n<0&&(n+=i,n<0&&(n=0));n<i;n++)if(e[n]===t)return n;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),t.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},t.inOperator=function(e,n){if(t.isArray(n))return t.indexOf(n,e)!==-1;if(t.isObject(n))return e in n;if(t.isString(n))return n.indexOf(e)!==-1;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}},function(e,t,n){"use strict";function i(e,t,n){o(function(){e(t,n)})}var r,s=n(3),o=n(4),a=n(1),l=n(6),c=n(7),h=n(14),u=n(15),p=n(13),f=n(18),m=n(19),d=p.Frame;u.PrecompiledLoader=n(17);var v=l.extend({init:function(e,t){t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null==t.autoescape||t.autoescape,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=a.isArray(e)?e:[e]:u.FileSystemLoader?this.loaders=[new u.FileSystemLoader("views")]:u.WebLoader&&(this.loaders=[new u.WebLoader("/views")]),window.nunjucksPrecompiled&&this.loaders.unshift(new u.PrecompiledLoader(window.nunjucksPrecompiled)),this.initCache(),this.globals=f(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var n in h)this.addFilter(n,h[n])},initCache:function(){a.each(this.loaders,function(e){e.cache={},"function"==typeof e.on&&e.on("update",function(t){e.cache[t]=null})})},addExtension:function(e,t){return t._name=e,this.extensions[e]=t,this.extensionsList.push(t),this},removeExtension:function(e){var t=this.getExtension(e);t&&(this.extensionsList=a.without(this.extensionsList,t),delete this.extensions[e])},getExtension:function(e){return this.extensions[e]},hasExtension:function(e){return!!this.extensions[e]},addGlobal:function(e,t){return this.globals[e]=t,this},getGlobal:function(e){if("undefined"==typeof this.globals[e])throw new Error("global not found: "+e);return this.globals[e]},addFilter:function(e,t,n){var i=t;return n&&this.asyncFilters.push(e),this.filters[e]=i,this},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},resolveTemplate:function(e,t,n){var i=!(!e.isRelative||!t)&&e.isRelative(n);return i&&e.resolve?e.resolve(t,n):n},getTemplate:function(e,t,n,i,s){var o=this,l=null;if(e&&e.raw&&(e=e.raw),a.isFunction(n)&&(s=n,n=null,t=t||!1),a.isFunction(t)&&(s=t,t=!1),e instanceof r)l=e;else{if("string"!=typeof e)throw new Error("template names must be a string: "+e);for(var c=0;c<this.loaders.length;c++){var h=this.resolveTemplate(this.loaders[c],n,e);if(l=this.loaders[c].cache[h])break}}if(!l){var u,p=this,f=function(n,o){if(o||n||i||(n=new Error("template not found: "+e)),n){if(!s)throw n;s(n)}else{var a;o?(a=new r(o.src,p,o.path,t),o.noCache||(o.loader.cache[e]=a)):a=new r("",p,"",t),s?s(null,a):u=a}};return a.asyncIter(this.loaders,function(t,i,r,s){function a(e,n){e?s(e):n?(n.loader=t,s(null,n)):r()}e=o.resolveTemplate(t,n,e),t.async?t.getSource(e,a):a(null,t.getSource(e))},f),u}return t&&l.compile(),s?void s(null,l):l},express:function(e){function t(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=s.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}var n=this;return t.prototype.render=function(e,t){n.render(this.name,e,t)},e.set("view",t),e.set("nunjucksEnv",this),this},render:function(e,t,n){a.isFunction(t)&&(n=t,t=null);var r=null;return this.getTemplate(e,function(e,s){if(e&&n)i(n,e);else{if(e)throw e;r=s.render(t,n)}}),r},renderString:function(e,t,n,i){a.isFunction(n)&&(i=n,n={}),n=n||{};var s=new r(e,this,n.path);return s.render(t,i)},waterfall:m}),g=l.extend({init:function(e,t,n){this.env=n||new v,this.ctx={};for(var i in e)e.hasOwnProperty(i)&&(this.ctx[i]=e[i]);this.blocks={},this.exported=[];for(var r in t)this.addBlock(r,t[r])},lookup:function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,n,i,r,s){var o=a.indexOf(this.blocks[t]||[],n),l=this.blocks[t][o+1],c=this;if(o===-1||!l)throw new Error('no super block available for "'+t+'"');l(e,c,i,r,s)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}});r=l.extend({init:function(e,t,n,i){if(this.env=t||new v,a.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj}else{if(!a.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}if(this.path=n,i){var r=this;try{r._compile()}catch(e){throw a.prettifyError(this.path,this.env.opts.dev,e)}}else this.compiled=!1},render:function(e,t,n){"function"==typeof e?(n=e,e={}):"function"==typeof t&&(n=t,t=null);var r=!0;t&&(r=!1);var s=this;try{s.compile()}catch(e){var o=a.prettifyError(this.path,this.env.opts.dev,e);if(n)return i(n,o);throw o}var l=new g(e||{},s.blocks,s.env),c=t?t.push(!0):new d;c.topLevel=!0;var h=null;return s.rootRenderFunc(s.env,l,c||new d,p,function(e,t){if(e&&(e=a.prettifyError(s.path,s.env.opts.dev,e)),n)r?i(n,e,t):n(e,t);else{if(e)throw e;h=t}}),h},getExported:function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(e){if(n)return n(e);throw e}var i=t?t.push():new d;i.topLevel=!0;var r=new g(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,r,i,p,function(e){e?n(e,null):n(null,r.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=c.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),n=new Function(t);e=n()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},_getBlocks:function(e){var t={};for(var n in e)"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n]);return t}}),e.exports={Environment:v,Template:r}},function(e,t){},function(e,t,n){"use strict";function i(){if(l.length)throw l.shift()}function r(e){var t;t=a.length?a.pop():new s,t.task=e,o(t)}function s(){this.task=null}var o=n(5),a=[],l=[],c=o.makeRequestCallFromTimer(i);e.exports=r,s.prototype.call=function(){try{this.task.call()}catch(e){r.onerror?r.onerror(e):(l.push(e),c())}finally{this.task=null,a[a.length]=this}}},function(e,t){(function(t){"use strict";function n(e){a.length||(o(),l=!0),a[a.length]=e}function i(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>h){for(var t=0,n=a.length-c;t<n;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,l=!1}function r(e){var t=1,n=new p(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}function s(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}e.exports=n;var o,a=[],l=!1,c=0,h=1024,u="undefined"!=typeof t?t:self,p=u.MutationObserver||u.WebKitMutationObserver;o="function"==typeof p?r(i):s(i),n.requestFlush=o,n.makeRequestCallFromTimer=s}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t,i){var r=function(){};r.prototype=e.prototype;var s=new r,o=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;i=i||{};for(var a in i){var l=i[a],c=s[a];"function"==typeof c&&"function"==typeof l&&o.test(l)?s[a]=function(e,t){return function(){var n=this.parent;this.parent=t;var i=e.apply(this,arguments);return this.parent=n,i}}(l,c):s[a]=l}s.typename=t;var h=function(){s.init&&s.init.apply(this,arguments)};return h.prototype=s,h.prototype.constructor=h,h.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),n(h,e,t)},h}e.exports=n(Object,"Object",{})},function(e,t,n){"use strict";function i(e){return function(t,n){this.compile(t.left,n),this.emit(e),this.compile(t.right,n)}}var r=n(1),s=n(8),o=n(12),a=n(10),l=n(6),c=n(13).Frame,h={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},u=l.extend({init:function(e,t){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this.scopeClosers="",this.inBlock=!1,this.throwOnUndefined=t},fail:function(e,t,n){throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new r.TemplateError(e,t,n)},pushBufferId:function(e){this.bufferStack.push(this.buffer),this.buffer=e,this.emit("var "+this.buffer+' = "";')},popBufferId:function(){this.buffer=this.bufferStack.pop()},emit:function(e){this.codebuf.push(e)},emitLine:function(e){this.emit(e+"\n")},emitLines:function(){r.each(r.toArray(arguments),function(e){this.emitLine(e)},this)},emitFuncBegin:function(e){this.buffer="output",this.scopeClosers="",this.emitLine("function "+e+"(env, context, frame, runtime, cb) {"),this.emitLine("var lineno = null;"),this.emitLine("var colno = null;"),this.emitLine("var "+this.buffer+' = "";'),this.emitLine("try {")},emitFuncEnd:function(e){e||this.emitLine("cb(null, "+this.buffer+");"),this.closeScopeLevels(),this.emitLine("} catch (e) {"),this.emitLine("  cb(runtime.handleError(e, lineno, colno));"),this.emitLine("}"),this.emitLine("}"),this.buffer=null},addScopeLevel:function(){this.scopeClosers+="})"},closeScopeLevels:function(){this.emitLine(this.scopeClosers+";"),this.scopeClosers=""},withScopedSyntax:function(e){var t=this.scopeClosers;this.scopeClosers="",e.call(this),this.closeScopeLevels(),this.scopeClosers=t},makeCallback:function(e){var t=this.tmpid();return"function("+t+(e?","+e:"")+") {\nif("+t+") { cb("+t+"); return; }"},tmpid:function(){return this.lastId++,"t_"+this.lastId},_templateName:function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},_compileChildren:function(e,t){for(var n=e.children,i=0,r=n.length;i<r;i++)this.compile(n[i],t)},_compileAggregate:function(e,t,n,i){n&&this.emit(n);for(var r=0;r<e.children.length;r++)r>0&&this.emit(","),this.compile(e.children[r],t);i&&this.emit(i)},_compileExpression:function(e,t){this.assertType(e,a.Literal,a.Symbol,a.Group,a.Array,a.Dict,a.FunCall,a.Caller,a.Filter,a.LookupVal,a.Compare,a.InlineIf,a.In,a.And,a.Or,a.Not,a.Add,a.Concat,a.Sub,a.Mul,a.Div,a.FloorDiv,a.Mod,a.Pow,a.Neg,a.Pos,a.Compare,a.NodeList),this.compile(e,t)},assertType:function(e){for(var t=r.toArray(arguments).slice(1),n=!1,i=0;i<t.length;i++)e instanceof t[i]&&(n=!0);n||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},compileCallExtension:function(e,t,n){var i=e.args,s=e.contentArgs,o="boolean"!=typeof e.autoescape||e.autoescape;if(n||this.emit(this.buffer+" += runtime.suppressValue("),this.emit('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this.emit("context"),(i||s)&&this.emit(","),i&&(i instanceof a.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),r.each(i.children,function(e,n){this._compileExpression(e,t),(n!==i.children.length-1||s.length)&&this.emit(",")},this)),s.length&&r.each(s,function(e,n){if(n>0&&this.emit(","),e){var i=this.tmpid();this.emitLine("function(cb) {"),this.emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}"),this.pushBufferId(i),this.withScopedSyntax(function(){this.compile(e,t),this.emitLine("cb(null, "+i+");")}),this.popBufferId(),this.emitLine("return "+i+";"),this.emitLine("}")}else this.emit("null")},this),n){var l=this.tmpid();this.emitLine(", "+this.makeCallback(l)),this.emitLine(this.buffer+" += runtime.suppressValue("+l+", "+o+" && env.opts.autoescape);"),this.addScopeLevel()}else this.emit(")"),this.emit(", "+o+" && env.opts.autoescape);\n")},compileCallExtensionAsync:function(e,t){this.compileCallExtension(e,t,!0)},compileNodeList:function(e,t){this._compileChildren(e,t)},compileLiteral:function(e){if("string"==typeof e.value){var t=e.value.replace(/\\/g,"\\\\");t=t.replace(/"/g,'\\"'),t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace(/\t/g,"\\t"),this.emit('"'+t+'"')}else null===e.value?this.emit("null"):this.emit(e.value.toString())},compileSymbol:function(e,t){var n,i=e.value;(n=t.lookup(i))?this.emit(n):this.emit('runtime.contextOrFrameLookup(context, frame, "'+i+'")')},compileGroup:function(e,t){this._compileAggregate(e,t,"(",")")},compileArray:function(e,t){this._compileAggregate(e,t,"[","]")},compileDict:function(e,t){this._compileAggregate(e,t,"{","}")},compilePair:function(e,t){var n=e.key,i=e.value;n instanceof a.Symbol?n=new a.Literal(n.lineno,n.colno,n.value):n instanceof a.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,t),this.emit(": "),this._compileExpression(i,t)},compileInlineIf:function(e,t){this.emit("("),this.compile(e.cond,t),this.emit("?"),this.compile(e.body,t),this.emit(":"),null!==e.else_?this.compile(e.else_,t):this.emit('""'),this.emit(")")},compileIn:function(e,t){this.emit("runtime.inOperator("),this.compile(e.left,t),this.emit(","),this.compile(e.right,t),this.emit(")")},compileOr:i(" || "),compileAnd:i(" && "),compileAdd:i(" + "),compileConcat:i(' + "" + '),compileSub:i(" - "),compileMul:i(" * "),compileDiv:i(" / "),compileMod:i(" % "),compileNot:function(e,t){this.emit("!"),this.compile(e.target,t)},compileFloorDiv:function(e,t){this.emit("Math.floor("),this.compile(e.left,t),this.emit(" / "),this.compile(e.right,t),this.emit(")")},compilePow:function(e,t){this.emit("Math.pow("),this.compile(e.left,t),this.emit(", "),this.compile(e.right,t),this.emit(")")},compileNeg:function(e,t){this.emit("-"),this.compile(e.target,t)},compilePos:function(e,t){this.emit("+"),this.compile(e.target,t)},compileCompare:function(e,t){this.compile(e.expr,t);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];this.emit(" "+h[i.type]+" "),this.compile(i.expr,t)}},compileLookupVal:function(e,t){this.emit("runtime.memberLookup(("),this._compileExpression(e.target,t),this.emit("),"),this._compileExpression(e.val,t),this.emit(")")},_getNodeName:function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this._getNodeName(e.name)+")";case"LookupVal":return this._getNodeName(e.target)+'["'+this._getNodeName(e.val)+'"]';case"Literal":return e.value.toString();default:return"--expression--"}},compileFunCall:function(e,t){this.emit("(lineno = "+e.lineno+", colno = "+e.colno+", "),this.emit("runtime.callWrap("),this._compileExpression(e.name,t),this.emit(', "'+this._getNodeName(e.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(e.args,t,"[","])"),this.emit(")")},compileFilter:function(e,t){var n=e.name;this.assertType(n,a.Symbol),this.emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this.emit(")")},compileFilterAsync:function(e,t){var n=e.name;this.assertType(n,a.Symbol);var i=e.symbol.value;t.set(i,i),this.emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this.emitLine(", "+this.makeCallback(i)),this.addScopeLevel()},compileKeywordArgs:function(e,t){var n=[];r.each(e.children,function(e){n.push(e.key.value)}),this.emit("runtime.makeKeywordArgs("),this.compileDict(e,t),this.emit(")")},compileSet:function(e,t){var n=[];r.each(e.targets,function(e){var i=e.value,r=t.lookup(i);null!==r&&void 0!==r||(r=this.tmpid(),this.emitLine("var "+r+";")),n.push(r)},this),e.value?(this.emit(n.join(" = ")+" = "),this._compileExpression(e.value,t),this.emitLine(";")):(this.emit(n.join(" = ")+" = "),this.compile(e.body,t),this.emitLine(";")),r.each(e.targets,function(e,t){var i=n[t],r=e.value;this.emitLine('frame.set("'+r+'", '+i+", true);"),this.emitLine("if(frame.topLevel) {"),this.emitLine('context.setVariable("'+r+'", '+i+");"),this.emitLine("}"),"_"!==r.charAt(0)&&(this.emitLine("if(frame.topLevel) {"),this.emitLine('context.addExport("'+r+'", '+i+");"),this.emitLine("}"))},this)},compileIf:function(e,t,n){this.emit("if("),this._compileExpression(e.cond,t),this.emitLine(") {"),this.withScopedSyntax(function(){this.compile(e.body,t),n&&this.emit("cb()")}),e.else_?(this.emitLine("}\nelse {"),this.withScopedSyntax(function(){this.compile(e.else_,t),n&&this.emit("cb()")})):n&&(this.emitLine("}\nelse {"),this.emit("cb()")),this.emitLine("}")},compileIfAsync:function(e,t){this.emit("(function(cb) {"),this.compileIf(e,t,!0),this.emit("})("+this.makeCallback()),this.addScopeLevel()},emitLoopBindings:function(e,t,n,i){var r={index:n+" + 1",index0:n,revindex:i+" - "+n,revindex0:i+" - "+n+" - 1",first:n+" === 0",last:n+" === "+i+" - 1",length:i};for(var s in r)this.emitLine('frame.set("loop.'+s+'", '+r[s]+");")},compileFor:function(e,t){var n,i=this.tmpid(),r=this.tmpid(),s=this.tmpid();if(t=t.push(),this.emitLine("frame = frame.push();"),this.emit("var "+s+" = "),this._compileExpression(e.arr,t),this.emitLine(";"),this.emit("if("+s+") {"),e.name instanceof a.Array){this.emitLine("var "+i+";"),this.emitLine("if(runtime.isArray("+s+")) {"),this.emitLine("var "+r+" = "+s+".length;"),this.emitLine("for("+i+"=0; "+i+" < "+s+".length; "+i+"++) {");for(var o=0;o<e.name.children.length;o++){var l=this.tmpid();this.emitLine("var "+l+" = "+s+"["+i+"]["+o+"]"),this.emitLine('frame.set("'+e.name.children[o].value+'", '+s+"["+i+"]["+o+"]);"),t.set(e.name.children[o].value,l)}this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}"),this.emitLine("} else {");var c=e.name.children[0],h=e.name.children[1],u=this.tmpid();n=this.tmpid(),t.set(c.value,u),t.set(h.value,n),this.emitLine(i+" = -1;"),this.emitLine("var "+r+" = runtime.keys("+s+").length;"),this.emitLine("for(var "+u+" in "+s+") {"),this.emitLine(i+"++;"),this.emitLine("var "+n+" = "+s+"["+u+"];"),this.emitLine('frame.set("'+c.value+'", '+u+");"),this.emitLine('frame.set("'+h.value+'", '+n+");"),this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}"),this.emitLine("}")}else n=this.tmpid(),t.set(e.name.value,n),this.emitLine("var "+r+" = "+s+".length;"),this.emitLine("for(var "+i+"=0; "+i+" < "+s+".length; "+i+"++) {"),this.emitLine("var "+n+" = "+s+"["+i+"];"),this.emitLine('frame.set("'+e.name.value+'", '+n+");"),this.emitLoopBindings(e,s,i,r),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("}");this.emitLine("}"),e.else_&&(this.emitLine("if (!"+r+") {"),this.compile(e.else_,t),this.emitLine("}")),this.emitLine("frame = frame.pop();")},_compileAsyncLoop:function(e,t,n){var i=this.tmpid(),s=this.tmpid(),o=this.tmpid(),l=n?"asyncAll":"asyncEach";if(t=t.push(),this.emitLine("frame = frame.push();"),this.emit("var "+o+" = "),this._compileExpression(e.arr,t),this.emitLine(";"),e.name instanceof a.Array)this.emit("runtime."+l+"("+o+", "+e.name.children.length+", function("),r.each(e.name.children,function(e){this.emit(e.value+",")},this),this.emit(i+","+s+",next) {"),r.each(e.name.children,function(e){var n=e.value;t.set(n,n),this.emitLine('frame.set("'+n+'", '+n+");")},this);else{var c=e.name.value;this.emitLine("runtime."+l+"("+o+", 1, function("+c+", "+i+", "+s+",next) {"),this.emitLine('frame.set("'+c+'", '+c+");"),t.set(c,c)}this.emitLoopBindings(e,o,i,s),this.withScopedSyntax(function(){var r;n&&(r=this.tmpid(),this.pushBufferId(r)),this.compile(e.body,t),this.emitLine("next("+i+(r?","+r:"")+");"),n&&this.popBufferId()});var h=this.tmpid();this.emitLine("}, "+this.makeCallback(h)),this.addScopeLevel(),n&&this.emitLine(this.buffer+" += "+h+";"),e.else_&&(this.emitLine("if (!"+o+".length) {"),this.compile(e.else_,t),this.emitLine("}")),this.emitLine("frame = frame.pop();")},compileAsyncEach:function(e,t){this._compileAsyncLoop(e,t)},compileAsyncAll:function(e,t){this._compileAsyncLoop(e,t,!0)},_compileMacro:function(e,t){var n=[],i=null,s="macro_"+this.tmpid(),o=void 0!==t;r.each(e.args.children,function(t,r){r===e.args.children.length-1&&t instanceof a.Dict?i=t:(this.assertType(t,a.Symbol),n.push(t))},this);var l=r.map(n,function(e){return"l_"+e.value});l.push("kwargs");var h=r.map(n,function(e){return'"'+e.value+'"'}),u=r.map(i&&i.children||[],function(e){return'"'+e.key.value+'"'});t=o?t.push(!0):new c,this.emitLines("var "+s+" = runtime.makeMacro(","["+h.join(", ")+"], ","["+u.join(", ")+"], ","function ("+l.join(", ")+") {","var callerFrame = frame;","frame = "+(o?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (kwargs.hasOwnProperty("caller")) {','frame.set("caller", kwargs.caller); }'),r.each(n,function(e){this.emitLine('frame.set("'+e.value+'", l_'+e.value+");"),t.set(e.value,"l_"+e.value)},this),i&&r.each(i.children,function(e){var n=e.key.value;this.emit('frame.set("'+n+'", kwargs.hasOwnProperty("'+n+'") ? kwargs["'+n+'"] : '),this._compileExpression(e.value,t),this.emitLine(");")},this);var p=this.tmpid();return this.pushBufferId(p),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("frame = "+(o?"frame.pop();":"callerFrame;")),this.emitLine("return new runtime.SafeString("+p+");"),this.emitLine("});"),this.popBufferId(),s},compileMacro:function(e,t){var n=this._compileMacro(e),i=e.name.value;t.set(i,n),t.parent?this.emitLine('frame.set("'+i+'", '+n+");"):("_"!==e.name.value.charAt(0)&&this.emitLine('context.addExport("'+i+'");'),this.emitLine('context.setVariable("'+i+'", '+n+");"))},compileCaller:function(e,t){this.emit("(function (){");var n=this._compileMacro(e,t);this.emit("return "+n+";})()")},compileImport:function(e,t){var n=this.tmpid(),i=e.target.value;this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", false, "+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this.makeCallback(n)),this.addScopeLevel(),t.set(i,n),t.parent?this.emitLine('frame.set("'+i+'", '+n+");"):this.emitLine('context.setVariable("'+i+'", '+n+");")},compileFromImport:function(e,t){var n=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", false, "+this.makeCallback(n)),this.addScopeLevel(),this.emitLine(n+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this.makeCallback(n)),this.addScopeLevel(),r.each(e.names.children,function(e){var i,r,s=this.tmpid();e instanceof a.Pair?(i=e.key.value,r=e.value.value):(i=e.value,r=i),this.emitLine("if("+n+'.hasOwnProperty("'+i+'")) {'),this.emitLine("var "+s+" = "+n+"."+i+";"),this.emitLine("} else {"),this.emitLine("cb(new Error(\"cannot import '"+i+"'\")); return;"),this.emitLine("}"),t.set(r,s),t.parent?this.emitLine('frame.set("'+r+'", '+s+");"):this.emitLine('context.setVariable("'+r+'", '+s+");")},this)},compileBlock:function(e){var t=this.tmpid();this.inBlock||this.emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this.emit('context.getBlock("'+e.name.value+'")'),this.inBlock||this.emit(")"),this.emitLine("(env, context, frame, runtime, "+this.makeCallback(t)),this.emitLine(this.buffer+" += "+t+";"),this.addScopeLevel()},compileSuper:function(e,t){var n=e.blockName.value,i=e.symbol.value;this.emitLine('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+this.makeCallback(i)),this.emitLine(i+" = runtime.markSafe("+i+");"),this.addScopeLevel(),t.set(i,i)},compileExtends:function(e,t){var n=this.tmpid();this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", true, "+this._templateName()+", false, "+this.makeCallback("_parentTemplate")),this.emitLine("parentTemplate = _parentTemplate"),this.emitLine("for(var "+n+" in parentTemplate.blocks) {"),this.emitLine("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this.emitLine("}"),this.addScopeLevel()},compileInclude:function(e,t){var n=this.tmpid(),i=this.tmpid();this.emitLine("var tasks = [];"),this.emitLine("tasks.push("),this.emitLine("function(callback) {"),this.emit("env.getTemplate("),this._compileExpression(e.template,t),this.emitLine(", false, "+this._templateName()+", "+e.ignoreMissing+", "+this.makeCallback(n)),this.emitLine("callback(null,"+n+");});"),this.emitLine("});"),this.emitLine("tasks.push("),this.emitLine("function(template, callback){"),this.emitLine("template.render(context.getVariables(), frame, "+this.makeCallback(i)),this.emitLine("callback(null,"+i+");});"),this.emitLine("});"),this.emitLine("tasks.push("),this.emitLine("function(result, callback){"),this.emitLine(this.buffer+" += result;"),this.emitLine("callback(null);"),this.emitLine("});"),this.emitLine("env.waterfall(tasks, function(){"),this.addScopeLevel()},compileTemplateData:function(e,t){this.compileLiteral(e,t)},compileCapture:function(e,t){var n=this.buffer;this.buffer="output",this.emitLine("(function() {"),this.emitLine('var output = "";'),this.withScopedSyntax(function(){this.compile(e.body,t)}),this.emitLine("return output;"),this.emitLine("})()"),this.buffer=n},compileOutput:function(e,t){for(var n=e.children,i=0,r=n.length;i<r;i++)n[i]instanceof a.TemplateData?n[i].value&&(this.emit(this.buffer+" += "),this.compileLiteral(n[i],t),this.emitLine(";")):(this.emit(this.buffer+" += runtime.suppressValue("),this.throwOnUndefined&&this.emit("runtime.ensureDefined("),this.compile(n[i],t),this.throwOnUndefined&&this.emit(","+e.lineno+","+e.colno+")"),this.emit(", env.opts.autoescape);\n"))},compileRoot:function(e,t){t&&this.fail("compileRoot: root node can't have frame"),t=new c,this.emitFuncBegin("root"),this.emitLine("var parentTemplate = null;"),this._compileChildren(e,t),this.emitLine("if(parentTemplate) {"),this.emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this.emitLine("} else {"),this.emitLine("cb(null, "+this.buffer+");"),this.emitLine("}"),this.emitFuncEnd(!0),this.inBlock=!0;var n,i,r,s=[],o=e.findAll(a.Block);for(n=0;n<o.length;n++){if(r=o[n],i=r.name.value,s.indexOf(i)!==-1)throw new Error('Block "'+i+'" defined more than once.');s.push(i),this.emitFuncBegin("b_"+i);var l=new c;this.emitLine("var frame = frame.push(true);"),this.compile(r.body,l),this.emitFuncEnd()}for(this.emitLine("return {"),n=0;n<o.length;n++)r=o[n],i="b_"+r.name.value,this.emitLine(i+": "+i+",");this.emitLine("root: root\n};")},compile:function(e,t){var n=this["compile"+e.typename];n?n.call(this,e,t):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},getCode:function(){return this.codebuf.join("")}});e.exports={compile:function(e,t,n,i,r){var a=new u(i,r.throwOnUndefined);if(n&&n.length)for(var l=0;l<n.length;l++)"preprocess"in n[l]&&(e=n[l].preprocess(e,i));return a.compile(o.transform(s.parse(e,n,r),t,i)),a.getCode()},Compiler:u}},function(e,t,n){"use strict";var i=n(9),r=n(10),s=n(6),o=n(1),a=s.extend({init:function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},nextToken:function(e){var t;if(this.peeked){if(e||this.peeked.type!==i.TOKEN_WHITESPACE)return t=this.peeked,this.peeked=null,t;this.peeked=null}if(t=this.tokens.nextToken(),!e)for(;t&&t.type===i.TOKEN_WHITESPACE;)t=this.tokens.nextToken();return t},peekToken:function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},pushToken:function(e){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=e},fail:function(e,t,n){if((void 0===t||void 0===n)&&this.peekToken()){var i=this.peekToken();t=i.lineno,n=i.colno}throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new o.TemplateError(e,t,n)},skip:function(e){var t=this.nextToken();return!(!t||t.type!==e)||(this.pushToken(t),!1)},expect:function(e){var t=this.nextToken();return t.type!==e&&this.fail("expected "+e+", got "+t.type,t.lineno,t.colno),t},skipValue:function(e,t){var n=this.nextToken();return!(!n||n.type!==e||n.value!==t)||(this.pushToken(n),!1)},skipSymbol:function(e){return this.skipValue(i.TOKEN_SYMBOL,e)},advanceAfterBlockEnd:function(e){var t;return e||(t=this.peekToken(),t||this.fail("unexpected end of file"),t.type!==i.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value),t=this.nextToken(),t&&t.type===i.TOKEN_BLOCK_END?"-"===t.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement"),t},advanceAfterVariableEnd:function(){var e=this.nextToken();e&&e.type===i.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(e),this.fail("expected variable end"))},parseFor:function(){var e,t,n=this.peekToken();this.skipSymbol("for")?(e=new r.For(n.lineno,n.colno),t="endfor"):this.skipSymbol("asyncEach")?(e=new r.AsyncEach(n.lineno,n.colno),t="endeach"):this.skipSymbol("asyncAll")?(e=new r.AsyncAll(n.lineno,n.colno),t="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),e.name=this.parsePrimary(),e.name instanceof r.Symbol||this.fail("parseFor: variable name expected for loop");var s=this.peekToken().type;if(s===i.TOKEN_COMMA){var o=e.name;for(e.name=new r.Array(o.lineno,o.colno),e.name.addChild(o);this.skip(i.TOKEN_COMMA);){var a=this.parsePrimary();e.name.addChild(a)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),e.body=this.parseUntilBlocks(t,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),e.else_=this.parseUntilBlocks(t)),this.advanceAfterBlockEnd(),e},parseMacro:function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var t=this.parsePrimary(!0),n=this.parseSignature(),i=new r.Macro(e.lineno,e.colno,t,n);return this.advanceAfterBlockEnd(e.value),i.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),i},parseCall:function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var t=this.parseSignature(!0)||new r.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var i=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var s=new r.Symbol(e.lineno,e.colno,"caller"),o=new r.Caller(e.lineno,e.colno,s,t,i),a=n.args.children;a[a.length-1]instanceof r.KeywordArgs||a.push(new r.KeywordArgs);var l=a[a.length-1];return l.addChild(new r.Pair(e.lineno,e.colno,s,o)),new r.Output(e.lineno,e.colno,[n])},parseWithContext:function(){var e=this.peekToken(),t=null;return this.skipSymbol("with")?t=!0:this.skipSymbol("without")&&(t=!1),null!==t&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),t},parseImport:function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var n=this.parseExpression(),i=this.parseWithContext(),s=new r.Import(e.lineno,e.colno,t,n,i);return this.advanceAfterBlockEnd(e.value),s},parseFrom:function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var t=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var n,s=new r.NodeList;;){var o=this.peekToken();if(o.type===i.TOKEN_BLOCK_END){s.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),"-"===o.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}s.children.length>0&&!this.skip(i.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var a=this.parsePrimary();if("_"===a.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",a.lineno,a.colno),this.skipSymbol("as")){var l=this.parsePrimary();s.addChild(new r.Pair(a.lineno,a.colno,a,l))}else s.addChild(a);n=this.parseWithContext()}return new r.FromImport(e.lineno,e.colno,t,s,n)},parseBlock:function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var t=new r.Block(e.lineno,e.colno);t.name=this.parsePrimary(),t.name instanceof r.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(t.name.value);var n=this.peekToken();return n||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(n.value),t},parseExtends:function(){var e="extends",t=this.peekToken();this.skipSymbol(e)||this.fail("parseTemplateRef: expected "+e);var n=new r.Extends(t.lineno,t.colno);return n.template=this.parseExpression(),this.advanceAfterBlockEnd(t.value),n},parseInclude:function(){var e="include",t=this.peekToken();this.skipSymbol(e)||this.fail("parseInclude: expected "+e);var n=new r.Include(t.lineno,t.colno);return n.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(n.ignoreMissing=!0),this.advanceAfterBlockEnd(t.value),n},parseIf:function(){var e,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?e=new r.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?e=new r.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if, elif, or elseif",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("elif","elseif","else","endif");var n=this.peekToken();switch(n&&n.value){case"elseif":case"elif":e.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return e},parseSet:function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var t,n=new r.Set(e.lineno,e.colno,[]);(t=this.parsePrimary())&&(n.targets.push(t),this.skip(i.TOKEN_COMMA)););return this.skipValue(i.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(i.TOKEN_BLOCK_END)?(n.body=new r.Capture(e.lineno,e.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",e.lineno,e.colno),n},parseStatement:function(){var e,t=this.peekToken();if(t.type!==i.TOKEN_SYMBOL&&this.fail("tag name expected",t.lineno,t.colno),this.breakOnBlocks&&o.indexOf(this.breakOnBlocks,t.value)!==-1)return null;switch(t.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();default:if(this.extensions.length)for(var n=0;n<this.extensions.length;n++){var s=this.extensions[n];if(o.indexOf(s.tags||[],t.value)!==-1)return s.parse(this,r,i)}this.fail("unknown block tag: "+t.value,t.lineno,t.colno)}return e},parseRaw:function(e){e=e||"raw";for(var t="end"+e,n=new RegExp("([\\s\\S]*?){%\\s*("+e+"|"+t+")\\s*(?=%})%}"),i=1,s="",o=null,a=this.advanceAfterBlockEnd();(o=this.tokens._extractRegex(n))&&i>0;){var l=o[0],c=o[1],h=o[2];h===e?i+=1:h===t&&(i-=1),0===i?(s+=c,this.tokens.backN(l.length-c.length)):s+=l}return new r.Output(a.lineno,a.colno,[new r.TemplateData(a.lineno,a.colno,s)])},parsePostfix:function(e){for(var t,n=this.peekToken();n;){if(n.type===i.TOKEN_LEFT_PAREN)e=new r.FunCall(n.lineno,n.colno,e,this.parseSignature());else if(n.type===i.TOKEN_LEFT_BRACKET)t=this.parseAggregate(),t.children.length>1&&this.fail("invalid index"),e=new r.LookupVal(n.lineno,n.colno,e,t.children[0]);else{if(n.type!==i.TOKEN_OPERATOR||"."!==n.value)break;this.nextToken();var s=this.nextToken();s.type!==i.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+s.value,s.lineno,s.colno),t=new r.Literal(s.lineno,s.colno,s.value),e=new r.LookupVal(n.lineno,n.colno,e,t)}n=this.peekToken()}return e},parseExpression:function(){var e=this.parseInlineIf();return e},parseInlineIf:function(){var e=this.parseOr();if(this.skipSymbol("if")){var t=this.parseOr(),n=e;e=new r.InlineIf(e.lineno,e.colno),e.body=n,e.cond=t,this.skipSymbol("else")?e.else_=this.parseOr():e.else_=null}return e},parseOr:function(){for(var e=this.parseAnd();this.skipSymbol("or");){var t=this.parseAnd();e=new r.Or(e.lineno,e.colno,e,t)}return e},parseAnd:function(){for(var e=this.parseNot();this.skipSymbol("and");){var t=this.parseNot();e=new r.And(e.lineno,e.colno,e,t)}return e},parseNot:function(){var e=this.peekToken();return this.skipSymbol("not")?new r.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},parseIn:function(){for(var e=this.parseCompare();;){var t=this.nextToken();if(!t)break;var n=t.type===i.TOKEN_SYMBOL&&"not"===t.value;if(n||this.pushToken(t),!this.skipSymbol("in")){n&&this.pushToken(t);break}var s=this.parseCompare();e=new r.In(e.lineno,e.colno,e,s),n&&(e=new r.Not(e.lineno,e.colno,e))}return e},parseCompare:function(){for(var e=["==","===","!=","!==","<",">","<=",">="],t=this.parseConcat(),n=[];;){var i=this.nextToken();if(!i)break;if(o.indexOf(e,i.value)===-1){this.pushToken(i);break}n.push(new r.CompareOperand(i.lineno,i.colno,this.parseConcat(),i.value))}return n.length?new r.Compare(n[0].lineno,n[0].colno,t,n):t},parseConcat:function(){for(var e=this.parseAdd();this.skipValue(i.TOKEN_TILDE,"~");){var t=this.parseAdd();e=new r.Concat(e.lineno,e.colno,e,t)}return e},parseAdd:function(){for(var e=this.parseSub();this.skipValue(i.TOKEN_OPERATOR,"+");){var t=this.parseSub();e=new r.Add(e.lineno,e.colno,e,t)}return e},parseSub:function(){for(var e=this.parseMul();this.skipValue(i.TOKEN_OPERATOR,"-");){var t=this.parseMul();e=new r.Sub(e.lineno,e.colno,e,t)}return e},parseMul:function(){for(var e=this.parseDiv();this.skipValue(i.TOKEN_OPERATOR,"*");){var t=this.parseDiv();e=new r.Mul(e.lineno,e.colno,e,t)}return e},parseDiv:function(){for(var e=this.parseFloorDiv();this.skipValue(i.TOKEN_OPERATOR,"/");){var t=this.parseFloorDiv();e=new r.Div(e.lineno,e.colno,e,t)}return e},parseFloorDiv:function(){for(var e=this.parseMod();this.skipValue(i.TOKEN_OPERATOR,"//");){var t=this.parseMod();e=new r.FloorDiv(e.lineno,e.colno,e,t)}return e},parseMod:function(){for(var e=this.parsePow();this.skipValue(i.TOKEN_OPERATOR,"%");){var t=this.parsePow();e=new r.Mod(e.lineno,e.colno,e,t)}return e},parsePow:function(){for(var e=this.parseUnary();this.skipValue(i.TOKEN_OPERATOR,"**");){var t=this.parseUnary();e=new r.Pow(e.lineno,e.colno,e,t)}return e},parseUnary:function(e){var t,n=this.peekToken();return t=this.skipValue(i.TOKEN_OPERATOR,"-")?new r.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(i.TOKEN_OPERATOR,"+")?new r.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),e||(t=this.parseFilter(t)),t},parsePrimary:function(e){var t,n=this.nextToken(),s=null;return n?n.type===i.TOKEN_STRING?t=n.value:n.type===i.TOKEN_INT?t=parseInt(n.value,10):n.type===i.TOKEN_FLOAT?t=parseFloat(n.value):n.type===i.TOKEN_BOOLEAN?"true"===n.value?t=!0:"false"===n.value?t=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===i.TOKEN_NONE?t=null:n.type===i.TOKEN_REGEX&&(t=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==t?s=new r.Literal(n.lineno,n.colno,t):n.type===i.TOKEN_SYMBOL?s=new r.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),s=this.parseAggregate()),e||(s=this.parsePostfix(s)),s?s:void this.fail("unexpected token: "+n.value,n.lineno,n.colno)},parseFilterName:function(){for(var e=this.expect(i.TOKEN_SYMBOL),t=e.value;this.skipValue(i.TOKEN_OPERATOR,".");)t+="."+this.expect(i.TOKEN_SYMBOL).value;return new r.Symbol(e.lineno,e.colno,t)},parseFilterArgs:function(e){if(this.peekToken().type===i.TOKEN_LEFT_PAREN){var t=this.parsePostfix(e);return t.args.children}return[]},parseFilter:function(e){for(;this.skip(i.TOKEN_PIPE);){var t=this.parseFilterName();e=new r.Filter(t.lineno,t.colno,t,new r.NodeList(t.lineno,t.colno,[e].concat(this.parseFilterArgs(e))))}return e},parseFilterStatement:function(){var e=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var t=this.parseFilterName(),n=this.parseFilterArgs(t);this.advanceAfterBlockEnd(e.value);var i=new r.Capture(t.lineno,t.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var s=new r.Filter(t.lineno,t.colno,t,new r.NodeList(t.lineno,t.colno,[i].concat(n)));return new r.Output(t.lineno,t.colno,[s])},parseAggregate:function(){var e,t=this.nextToken();switch(t.type){case i.TOKEN_LEFT_PAREN:e=new r.Group(t.lineno,t.colno);break;case i.TOKEN_LEFT_BRACKET:e=new r.Array(t.lineno,t.colno);break;case i.TOKEN_LEFT_CURLY:e=new r.Dict(t.lineno,t.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===i.TOKEN_RIGHT_PAREN||n===i.TOKEN_RIGHT_BRACKET||n===i.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(i.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",t.lineno,t.colno)),e instanceof r.Dict){var s=this.parsePrimary();this.skip(i.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",t.lineno,t.colno);var o=this.parseExpression();e.addChild(new r.Pair(s.lineno,s.colno,s,o))}else{var a=this.parseExpression();e.addChild(a)}}return e},parseSignature:function(e,t){var n=this.peekToken();if(!t&&n.type!==i.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",n.lineno,n.colno)}n.type===i.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var s=new r.NodeList(n.lineno,n.colno),o=new r.KeywordArgs(n.lineno,n.colno),a=!1;;){if(n=this.peekToken(),!t&&n.type===i.TOKEN_RIGHT_PAREN){this.nextToken();break}if(t&&n.type===i.TOKEN_BLOCK_END)break;if(a&&!this.skip(i.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",n.lineno,n.colno);else{var l=this.parseExpression();this.skipValue(i.TOKEN_OPERATOR,"=")?o.addChild(new r.Pair(l.lineno,l.colno,l,this.parseExpression())):s.addChild(l)}a=!0}return o.children.length&&s.addChild(o),s},parseUntilBlocks:function(){var e=this.breakOnBlocks;this.breakOnBlocks=o.toArray(arguments);var t=this.parse();return this.breakOnBlocks=e,t},parseNodes:function(){for(var e,t=[];e=this.nextToken();)if(e.type===i.TOKEN_DATA){var n=e.value,s=this.peekToken(),o=s&&s.value;this.dropLeadingWhitespace&&(n=n.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),s&&(s.type===i.TOKEN_BLOCK_START&&"-"===o.charAt(o.length-1)||s.type===i.TOKEN_VARIABLE_START&&"-"===o.charAt(this.tokens.tags.VARIABLE_START.length)||s.type===i.TOKEN_COMMENT&&"-"===o.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\s*$/,"")),t.push(new r.Output(e.lineno,e.colno,[new r.TemplateData(e.lineno,e.colno,n)]))}else if(e.type===i.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var a=this.parseStatement();if(!a)break;t.push(a)}else if(e.type===i.TOKEN_VARIABLE_START){var l=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),t.push(new r.Output(e.lineno,e.colno,[l]))}else e.type===i.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return t},parse:function(){return new r.NodeList(0,0,this.parseNodes())},parseAsRoot:function(){return new r.Root(0,0,this.parseNodes())}});e.exports={parse:function(e,t,n){var r=new a(i.lex(e,n));return void 0!==t&&(r.extensions=t),r.parseAsRoot()},Parser:a}},function(e,t,n){"use strict";function i(e,t,n,i){return{type:e,value:t,lineno:n,colno:i}}function r(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1,t=t||{};var n=t.tags||{};this.tags={BLOCK_START:n.blockStart||c,BLOCK_END:n.blockEnd||h,VARIABLE_START:n.variableStart||u,VARIABLE_END:n.variableEnd||p,COMMENT_START:n.commentStart||f,COMMENT_END:n.commentEnd||m},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var s=n(1),o=" \n\t\r",a="()[]{}%*-+~/#,:|.<>=!",l="0123456789",c="{%",h="%}",u="{{",p="}}",f="{#",m="#}",d="string",v="whitespace",g="data",y="block-start",k="block-end",x="variable-start",b="variable-end",E="comment",w="left-paren",T="right-paren",L="left-bracket",_="right-bracket",O="left-curly",A="right-curly",S="operator",N="comma",C="colon",B="tilde",F="pipe",I="int",R="float",K="boolean",M="none",P="symbol",j="special",D="regex";r.prototype.nextToken=function(){var e,t=this.lineno,n=this.colno;if(this.in_code){var r=this.current();if(this.is_finished())return null;if('"'===r||"'"===r)return i(d,this.parseString(r),t,n);if(e=this._extract(o))return i(v,e,t,n);if((e=this._extractString(this.tags.BLOCK_END))||(e=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&(r=this.current(),"\n"===r?this.forward():"\r"===r&&(this.forward(),r=this.current(),"\n"===r?this.forward():this.back())),i(k,e,t,n);if((e=this._extractString(this.tags.VARIABLE_END))||(e=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,i(b,e,t,n);if("r"===r&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var c="";!this.is_finished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}c+=this.current(),this.forward()}for(var h=["g","i","m","y"],u="";!this.is_finished();){var p=h.indexOf(this.current())!==-1;if(!p)break;u+=this.current(),this.forward()}return i(D,{body:c,flags:u},t,n)}if(a.indexOf(r)!==-1){this.forward();var f,m=["==","===","!=","!==","<=",">=","//","**"],j=r+this.current();switch(s.indexOf(m,j)!==-1&&(this.forward(),r=j,s.indexOf(m,j+this.current())!==-1&&(r=j+this.current(),this.forward())),r){case"(":f=w;break;case")":f=T;break;case"[":f=L;break;case"]":f=_;break;case"{":f=O;break;case"}":f=A;break;case",":f=N;break;case":":f=C;break;case"~":f=B;break;case"|":f=F;break;default:f=S}return i(f,r,t,n)}if(e=this._extractUntil(o+a),e.match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var V=this._extract(l);return i(R,e+"."+V,t,n)}return i(I,e,t,n)}if(e.match(/^(true|false)$/))return i(K,e,t,n);if("none"===e)return i(M,e,t,n);if(e)return i(P,e,t,n);throw new Error("Unexpected value while parsing: "+e)}var U=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.is_finished())return null;if((e=this._extractString(this.tags.BLOCK_START+"-"))||(e=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,i(y,e,t,n);if((e=this._extractString(this.tags.VARIABLE_START+"-"))||(e=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,i(x,e,t,n);e="";var W,G=!1;for(this._matches(this.tags.COMMENT_START)&&(G=!0,e=this._extractString(this.tags.COMMENT_START));null!==(W=this._extractUntil(U));){if(e+=W,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!G){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var H=e.slice(-this.colno);if(/^\s+$/.test(H)&&(e=e.slice(0,-this.colno),!e.length))return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!G)throw new Error("unexpected end of comment");e+=this._extractString(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===W&&G)throw new Error("expected end of comment, got end of file");return i(G?E:g,e,t,n)},r.prototype.parseString=function(e){this.forward();for(var t="";!this.is_finished()&&this.current()!==e;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":t+="\n";break;case"t":t+="\t";break;case"r":t+="\r";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},r.prototype._matches=function(e){if(this.index+e.length>this.len)return null;var t=this.str.slice(this.index,this.index+e.length);return t===e},r.prototype._extractString=function(e){return this._matches(e)?(this.index+=e.length,e):null},r.prototype._extractUntil=function(e){return this._extractMatching(!0,e||"")},r.prototype._extract=function(e){return this._extractMatching(!1,e)},r.prototype._extractMatching=function(e,t){if(this.is_finished())return null;var n=t.indexOf(this.current());if(e&&n===-1||!e&&n!==-1){var i=this.current();this.forward();for(var r=t.indexOf(this.current());(e&&r===-1||!e&&r!==-1)&&!this.is_finished();)i+=this.current(),this.forward(),r=t.indexOf(this.current());return i}return""},r.prototype._extractRegex=function(e){var t=this.currentStr().match(e);return t?(this.forwardN(t[0].length),t):null},r.prototype.is_finished=function(){return this.index>=this.len},r.prototype.forwardN=function(e){for(var t=0;t<e;t++)this.forward()},r.prototype.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},r.prototype.backN=function(e){for(var t=0;t<e;t++)this.back()},r.prototype.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var e=this.src.lastIndexOf("\n",this.index-1);e===-1?this.colno=this.index:this.colno=this.index-e}else this.colno--},r.prototype.current=function(){return this.is_finished()?"":this.str.charAt(this.index)},r.prototype.currentStr=function(){return this.is_finished()?"":this.str.substr(this.index)},r.prototype.previous=function(){return this.str.charAt(this.index-1)},e.exports={lex:function(e,t){return new r(e,t)},TOKEN_STRING:d,TOKEN_WHITESPACE:v,TOKEN_DATA:g,TOKEN_BLOCK_START:y,TOKEN_BLOCK_END:k,TOKEN_VARIABLE_START:x,TOKEN_VARIABLE_END:b,TOKEN_COMMENT:E,TOKEN_LEFT_PAREN:w,TOKEN_RIGHT_PAREN:T,TOKEN_LEFT_BRACKET:L,TOKEN_RIGHT_BRACKET:_,TOKEN_LEFT_CURLY:O,TOKEN_RIGHT_CURLY:A,TOKEN_OPERATOR:S,TOKEN_COMMA:N,TOKEN_COLON:C,TOKEN_TILDE:B,TOKEN_PIPE:F,TOKEN_INT:I,TOKEN_FLOAT:R,TOKEN_BOOLEAN:K,TOKEN_NONE:M,TOKEN_SYMBOL:P,TOKEN_SPECIAL:j,TOKEN_REGEX:D}},function(e,t,n){(function(t){"use strict";function i(e,t,n){e instanceof t&&n.push(e),e instanceof a&&e.findAll(t,n)}function r(e,n){function i(e,n,i){for(var r=e.split("\n"),s=0;s<r.length;s++){if(r[s]&&(i&&s>0||!i))for(var o=0;o<n;o++)t.stdout.write(" ");s===r.length-1?t.stdout.write(r[s]):t.stdout.write(r[s]+"\n")}}if(n=n||0,i(e.typename+": ",n),e instanceof c)i("\n"),s.each(e.children,function(e){r(e,n+2)});else if(e instanceof se)i(e.extName+"."+e.prop),i("\n"),e.args&&r(e.args,n+2),e.contentArgs&&s.each(e.contentArgs,function(e){r(e,n+2)});else{var o=null,l=null;if(e.iterFields(function(e,t){e instanceof a?(o=o||{},o[t]=e):(l=l||{},l[t]=e)}),l?i(JSON.stringify(l,null,2)+"\n",null,!0):i("\n"),o)for(var h in o)r(o[h],n+2)}}var s=n(1),o=n(6),a=o.extend("Node",{init:function(e,t){this.lineno=e,this.colno=t;for(var n=this.fields,i=0,r=n.length;i<r;i++){var s=n[i],o=arguments[i+2];void 0===o&&(o=null),this[s]=o}},findAll:function(e,t){t=t||[];var n,r;if(this instanceof c){var s=this.children;for(n=0,r=s.length;n<r;n++)i(s[n],e,t)}else{var o=this.fields;for(n=0,r=o.length;n<r;n++)i(this[o[n]],e,t)}return t},iterFields:function(e){s.each(this.fields,function(t){e(this[t],t)},this)}}),l=a.extend("Value",{fields:["value"]}),c=a.extend("NodeList",{fields:["children"],init:function(e,t,n){this.parent(e,t,n||[])},addChild:function(e){this.children.push(e)}}),h=c.extend("Root"),u=l.extend("Literal"),p=l.extend("Symbol"),f=c.extend("Group"),m=c.extend("Array"),d=a.extend("Pair",{fields:["key","value"]}),v=c.extend("Dict"),g=a.extend("LookupVal",{fields:["target","val"]}),y=a.extend("If",{fields:["cond","body","else_"]}),k=y.extend("IfAsync"),x=a.extend("InlineIf",{fields:["cond","body","else_"]}),b=a.extend("For",{fields:["arr","name","body","else_"]}),E=b.extend("AsyncEach"),w=b.extend("AsyncAll"),T=a.extend("Macro",{fields:["name","args","body"]}),L=T.extend("Caller"),_=a.extend("Import",{fields:["template","target","withContext"]}),O=a.extend("FromImport",{fields:["template","names","withContext"],init:function(e,t,n,i,r){this.parent(e,t,n,i||new c,r)}}),A=a.extend("FunCall",{fields:["name","args"]}),S=A.extend("Filter"),N=S.extend("FilterAsync",{fields:["name","args","symbol"]}),C=v.extend("KeywordArgs"),B=a.extend("Block",{fields:["name","body"]}),F=a.extend("Super",{fields:["blockName","symbol"]}),I=a.extend("TemplateRef",{fields:["template"]}),R=I.extend("Extends"),K=a.extend("Include",{fields:["template","ignoreMissing"]}),M=a.extend("Set",{fields:["targets","value"]}),P=c.extend("Output"),j=a.extend("Capture",{fields:["body"]}),D=u.extend("TemplateData"),V=a.extend("UnaryOp",{fields:["target"]}),U=a.extend("BinOp",{fields:["left","right"]}),W=U.extend("In"),G=U.extend("Or"),H=U.extend("And"),Y=V.extend("Not"),$=U.extend("Add"),z=U.extend("Concat"),X=U.extend("Sub"),q=U.extend("Mul"),J=U.extend("Div"),Q=U.extend("FloorDiv"),Z=U.extend("Mod"),ee=U.extend("Pow"),te=V.extend("Neg"),ne=V.extend("Pos"),ie=a.extend("Compare",{fields:["expr","ops"]}),re=a.extend("CompareOperand",{fields:["expr","type"]}),se=a.extend("CallExtension",{fields:["extName","prop","args","contentArgs"],init:function(e,t,n,i){this.extName=e._name||e,this.prop=t,this.args=n||new c,this.contentArgs=i||[],this.autoescape=e.autoescape}}),oe=se.extend("CallExtensionAsync");e.exports={Node:a,Root:h,NodeList:c,Value:l,Literal:u,Symbol:p,Group:f,Array:m,Pair:d,Dict:v,Output:P,Capture:j,TemplateData:D,If:y,IfAsync:k,InlineIf:x,For:b,AsyncEach:E,AsyncAll:w,Macro:T,Caller:L,Import:_,FromImport:O,FunCall:A,Filter:S,FilterAsync:N,KeywordArgs:C,Block:B,Super:F,Extends:R,Include:K,Set:M,LookupVal:g,BinOp:U,In:W,Or:G,And:H,Not:Y,Add:$,Concat:z,Sub:X,Mul:q,Div:J,FloorDiv:Q,Mod:Z,Pow:ee,Neg:te,Pos:ne,Compare:ie,CompareOperand:re,CallExtension:se,CallExtensionAsync:oe,printNodes:r}}).call(t,n(11))},function(e,t){},function(e,t,n){"use strict";function i(){return"hole_"+d++}function r(e,t){for(var n=null,i=0;i<e.length;i++){var r=t(e[i]);r!==e[i]&&(n||(n=e.slice()),n[i]=r)}return n||e}function s(e,t,n){if(!(e instanceof f.Node))return e;if(!n){var i=t(e);if(i&&i!==e)return i}if(e instanceof f.NodeList){var o=r(e.children,function(e){return s(e,t,n)});o!==e.children&&(e=new f[e.typename](e.lineno,e.colno,o))}else if(e instanceof f.CallExtension){var a=s(e.args,t,n),l=r(e.contentArgs,function(e){return s(e,t,n)});a===e.args&&l===e.contentArgs||(e=new f[e.typename](e.extName,e.prop,a,l))}else{var c=e.fields.map(function(t){return e[t]}),h=r(c,function(e){return s(e,t,n)});h!==c&&(e=new f[e.typename](e.lineno,e.colno),h.forEach(function(t,n){e[e.fields[n]]=t}))}return n?t(e)||e:e}function o(e,t){return s(e,t,!0)}function a(e,t,n){var r=[],s=o(n?e[n]:e,function(e){if(e instanceof f.Block)return e;if(e instanceof f.Filter&&m.indexOf(t,e.name.value)!==-1||e instanceof f.CallExtensionAsync){var n=new f.Symbol(e.lineno,e.colno,i());return r.push(new f.FilterAsync(e.lineno,e.colno,e.name,e.args,n)),n}});return n?e[n]=s:e=s,r.length?(r.push(e),new f.NodeList(e.lineno,e.colno,r)):e}function l(e,t){return o(e,function(e){return e instanceof f.Output?a(e,t):e instanceof f.Set?a(e,t,"value"):e instanceof f.For?a(e,t,"arr"):e instanceof f.If?a(e,t,"cond"):e instanceof f.CallExtension?a(e,t,"args"):void 0})}function c(e){return s(e,function(e){if(e instanceof f.Block){var t=!1,n=i();e.body=s(e.body,function(e){if(e instanceof f.FunCall&&"super"===e.name.value)return t=!0,new f.Symbol(e.lineno,e.colno,n)}),t&&e.body.children.unshift(new f.Super(0,0,e.name,new f.Symbol(0,0,n)))}})}function h(e){return o(e,function(e){if(e instanceof f.If||e instanceof f.For){var t=!1;if(s(e,function(e){if(e instanceof f.FilterAsync||e instanceof f.IfAsync||e instanceof f.AsyncEach||e instanceof f.AsyncAll||e instanceof f.CallExtensionAsync)return t=!0,e}),t){if(e instanceof f.If)return new f.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof f.For)return new f.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}})}function u(e,t){return h(c(l(e,t)))}function p(e,t){return u(e,t||[])}var f=n(10),m=n(1),d=0;e.exports={transform:p}},function(e,t,n){"use strict";function i(e,t,n){return function(){var i,r,a=o(arguments),l=s(arguments);if(a>e.length){i=Array.prototype.slice.call(arguments,0,e.length);var c=Array.prototype.slice.call(arguments,i.length,a);for(r=0;r<c.length;r++)r<t.length&&(l[t[r]]=c[r]);i.push(l)}else if(a<e.length){for(i=Array.prototype.slice.call(arguments,0,a),r=a;r<e.length;r++){var h=e[r];i.push(l[h]),delete l[h]}i.push(l)}else i=arguments;return n.apply(this,i)}}function r(e){return e.__keywords=!0,e}function s(e){var t=e.length;if(t){var n=e[t-1];if(n&&n.hasOwnProperty("__keywords"))return n}return{}}function o(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return n&&n.hasOwnProperty("__keywords")?t-1:t}function a(e){return"string"!=typeof e?e:(this.val=e,void(this.length=e.length))}function l(e,t){return e instanceof a?new a(t):t.toString()}function c(e){var t=typeof e;return"string"===t?new a(e):"function"!==t?e:function(){var t=e.apply(this,arguments);return"string"==typeof t?new a(t):t}}function h(e,t){return e=void 0!==e&&null!==e?e:"",!t||e instanceof a||(e=y.escape(e.toString())),e}function u(e,t,n){if(null===e||void 0===e)throw new y.TemplateError("attempted to output null or undefined value",t+1,n+1);return e}function p(e,t){return e=e||{},"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function f(e,t,n,i){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(n,i)}function m(e,t,n){var i=t.lookup(n);return void 0!==i?i:e.lookup(n)}function d(e,t,n){return e.lineno?e:new y.TemplateError(e,t,n)}function v(e,t,n,i){if(y.isArray(e)){var r=e.length;y.asyncIter(e,function(e,i,s){switch(t){case 1:n(e,i,r,s);break;case 2:n(e[0],e[1],i,r,s);break;case 3:n(e[0],e[1],e[2],i,r,s);break;default:e.push(i,s),n.apply(this,e)}},i)}else y.asyncFor(e,function(e,t,i,r,s){n(e,t,i,r,s)},i)}function g(e,t,n,i){function r(e,t){l++,a[e]=t,l===s&&i(null,a.join(""))}var s,o,a,l=0;if(y.isArray(e))if(s=e.length,a=new Array(s),0===s)i(null,"");else for(o=0;o<e.length;o++){var c=e[o];switch(t){case 1:n(c,o,s,r);break;case 2:n(c[0],c[1],o,s,r);break;case 3:n(c[0],c[1],c[2],o,s,r);break;default:c.push(o,r),n.apply(this,c)}}else{var h=y.keys(e);if(s=h.length,a=new Array(s),0===s)i(null,"");else for(o=0;o<h.length;o++){var u=h[o];n(u,e[u],o,s,r)}}}var y=n(1),k=n(6),x=k.extend({init:function(e,t){this.variables={},this.parent=e,this.topLevel=!1,this.isolateWrites=t},set:function(e,t,n){var i=e.split("."),r=this.variables,s=this;if(n&&(s=this.resolve(i[0],!0)))return void s.set(e,t);for(var o=0;o<i.length-1;o++){var a=i[o];r[a]||(r[a]={}),r=r[a]}r[i[i.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t?t:null},lookup:function(e){var t=this.parent,n=this.variables[e];return void 0!==n?n:t&&t.lookup(e)},resolve:function(e,t){var n=t&&this.isolateWrites?void 0:this.parent,i=this.variables[e];return void 0!==i?this:n&&n.resolve(e)},push:function(e){return new x(this,e)},pop:function(){return this.parent}});a.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),a.prototype.valueOf=function(){return this.val},a.prototype.toString=function(){return this.val},e.exports={Frame:x,makeMacro:i,makeKeywordArgs:r,numArgs:o,suppressValue:h,ensureDefined:u,memberLookup:p,contextOrFrameLookup:m,callWrap:f,handleError:d,isArray:y.isArray,keys:y.keys,SafeString:a,copySafeness:l,markSafe:c,asyncEach:v,asyncAll:g,inOperator:y.inOperator}},function(e,t,n){"use strict";function i(e,t){return null===e||void 0===e||e===!1?t:e}var r=n(1),s=n(13),o={abs:Math.abs,batch:function(e,t,n){var i,r=[],s=[];for(i=0;i<e.length;i++)i%t===0&&s.length&&(r.push(s),s=[]),s.push(e[i]);if(s.length){if(n)for(i=s.length;i<t;i++)s.push(n);r.push(s)}return r},capitalize:function(e){e=i(e,"");var t=e.toLowerCase();return s.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,t){if(e=i(e,""),t=t||80,e.length>=t)return e;var n=t-e.length,o=r.repeat(" ",n/2-n%2),a=r.repeat(" ",n/2);return s.copySafeness(e,o+e+a)},default:function(e,t,n){return n?e?e:t:void 0!==e?e:t},dictsort:function(e,t,n){if(!r.isObject(e))throw new r.TemplateError("dictsort filter: val must be an object");var i=[];for(var s in e)i.push([s,e[s]]);var o;if(void 0===n||"key"===n)o=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return i.sort(function(e,n){var i=e[o],s=n[o];return t||(r.isString(i)&&(i=i.toUpperCase()),r.isString(s)&&(s=s.toUpperCase())),i>s?1:i===s?0:-1}),i},dump:function(e,t){return JSON.stringify(e,null,t)},escape:function(e){return e instanceof s.SafeString?e:(e=null===e||void 0===e?"":e,s.markSafe(r.escape(e.toString())))},safe:function(e){return e instanceof s.SafeString?e:(e=null===e||void 0===e?"":e,s.markSafe(e.toString()))},first:function(e){return e[0]},groupby:function(e,t){return r.groupBy(e,t)},indent:function(e,t,n){if(e=i(e,""),""===e)return"";t=t||4;for(var o="",a=e.split("\n"),l=r.repeat(" ",t),c=0;c<a.length;c++)o+=0!==c||n?l+a[c]+"\n":a[c]+"\n";return s.copySafeness(e,o)},join:function(e,t,n){return t=t||"",n&&(e=r.map(e,function(e){return e[n]})),e.join(t)},last:function(e){return e[e.length-1]},length:function(e){var t=i(e,"");return void 0!==t?"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set?t.size:!r.isObject(t)||t instanceof s.SafeString?t.length:Object.keys(t).length:0},list:function(e){if(r.isString(e))return e.split("");if(r.isObject(e)){var t=[];if(Object.keys)t=Object.keys(e);else for(var n in e)t.push(n);return r.map(t,function(t){return{key:t,value:e[t]}})}if(r.isArray(e))return e;throw new r.TemplateError("list filter: type not iterable")},lower:function(e){return e=i(e,""),e.toLowerCase()},nl2br:function(e){return null===e||void 0===e?"":s.copySafeness(e,e.replace(/\r\n|\n/g,"<br />\n"))},random:function(e){return e[Math.floor(Math.random()*e.length)]},rejectattr:function(e,t){return e.filter(function(e){return!e[t]})},selectattr:function(e,t){return e.filter(function(e){return!!e[t]})},replace:function(e,t,n,i){var r=e;if(t instanceof RegExp)return e.replace(t,n);"undefined"==typeof i&&(i=-1);var o="";if("number"==typeof t)t+="";else if("string"!=typeof t)return e;if("number"==typeof e&&(e+=""),"string"!=typeof e&&!(e instanceof s.SafeString))return e;if(""===t)return o=n+e.split("").join(n)+n,s.copySafeness(e,o);var a=e.indexOf(t);if(0===i||a===-1)return e;for(var l=0,c=0;a>-1&&(i===-1||c<i);)o+=e.substring(l,a)+n,l=a+t.length,c++,a=e.indexOf(t,l);return l<e.length&&(o+=e.substring(l)),s.copySafeness(r,o)},reverse:function(e){var t;return t=r.isString(e)?o.list(e):r.map(e,function(e){return e}),t.reverse(),r.isString(e)?s.copySafeness(e,t.join("")):t},round:function(e,t,n){t=t||0;var i,r=Math.pow(10,t);return i="ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round,i(e*r)/r},slice:function(e,t,n){for(var i=Math.floor(e.length/t),r=e.length%t,s=0,o=[],a=0;a<t;a++){var l=s+a*i;a<r&&s++;var c=s+(a+1)*i,h=e.slice(l,c);n&&a>=r&&h.push(n),o.push(h)}return o},sum:function(e,t,n){var i=0;"number"==typeof n&&(i+=n),t&&(e=r.map(e,function(e){return e[t]}));for(var s=0;s<e.length;s++)i+=e[s];return i},sort:s.makeMacro(["value","reverse","case_sensitive","attribute"],[],function(e,t,n,i){return e=r.map(e,function(e){return e}),e.sort(function(e,s){var o,a;return i?(o=e[i],a=s[i]):(o=e,a=s),!n&&r.isString(o)&&r.isString(a)&&(o=o.toLowerCase(),a=a.toLowerCase()),o<a?t?1:-1:o>a?t?-1:1:0}),e}),string:function(e){return s.copySafeness(e,e)},striptags:function(e,t){e=i(e,""),t=t||!1;var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,r=o.trim(e.replace(n,"")),a="";return a=t?r.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):r.replace(/\s+/gi," "),s.copySafeness(e,a)},title:function(e){e=i(e,"");for(var t=e.split(" "),n=0;n<t.length;n++)t[n]=o.capitalize(t[n]);return s.copySafeness(e,t.join(" "))},trim:function(e){return s.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,n,r){var o=e;if(e=i(e,""),t=t||255,e.length<=t)return e;if(n)e=e.substring(0,t);else{var a=e.lastIndexOf(" ",t);a===-1&&(a=t),e=e.substring(0,a)}return e+=void 0!==r&&null!==r?r:"...",s.copySafeness(o,e)},upper:function(e){return e=i(e,""),e.toUpperCase()},urlencode:function(e){var t=encodeURIComponent;if(r.isString(e))return t(e);var n;if(r.isArray(e))n=e.map(function(e){return t(e[0])+"="+t(e[1])});else{n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(t(i)+"="+t(e[i]))}return n.join("&")},urlize:function(e,t,n){isNaN(t)&&(t=1/0);var i=n===!0?' rel="nofollow"':"",r=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,s=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=/^https?:\/\/.*$/,a=/^www\./,l=/\.(?:org|net|com)(?:\:|\/|$)/,c=e.split(/(\s+)/).filter(function(e){return e&&e.length}).map(function(e){var n=e.match(r),c=n&&n[1]||e;return o.test(c)?'<a href="'+c+'"'+i+">"+c.substr(0,t)+"</a>":a.test(c)?'<a href="http://'+c+'"'+i+">"+c.substr(0,t)+"</a>":s.test(c)?'<a href="mailto:'+c+'">'+c+"</a>":l.test(c)?'<a href="http://'+c+'"'+i+">"+c.substr(0,t)+"</a>":e});return c.join("")},wordcount:function(e){e=i(e,"");var t=e?e.match(/\w+/g):null;return t?t.length:null},float:function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},int:function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}};o.d=o.default,o.e=o.escape,e.exports=o},function(e,t,n){"use strict";var i=n(16),r=n(17),s=i.extend({init:function(e,t){this.baseURL=e||".",t=t||{},this.useCache=!!t.useCache,this.async=!!t.async},resolve:function(e,t){throw new Error("relative templates not support in the browser yet")},getSource:function(e,t){var n,i=this.useCache;return this.fetch(this.baseURL+"/"+e,function(r,s){if(r)if(t)t(r.content);else{if(404!==r.status)throw r.content;n=null}else n={src:s,path:e,noCache:!i},t&&t(null,n)}),n},fetch:function(e,t){var n,i=!0;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4===n.readyState&&i&&(i=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},e+=(e.indexOf("?")===-1?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,this.async),n.send()}});e.exports={WebLoader:s,PrecompiledLoader:r}},function(e,t,n){"use strict";var i=n(3),r=n(6),s=n(1),o=r.extend({on:function(e,t){this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[e]&&s.each(this.listeners[e],function(e){e.apply(null,t)})},resolve:function(e,t){return i.resolve(i.dirname(e),t)},isRelative:function(e){return 0===e.indexOf("./")||0===e.indexOf("../")}});e.exports=o},function(e,t,n){"use strict";var i=n(16),r=i.extend({init:function(e){this.precompiled=e||{}},getSource:function(e){return this.precompiled[e]?{src:{type:"code",obj:this.precompiled[e]},path:e}:null}});e.exports=r},function(e,t){"use strict";function n(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current}}}function i(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}function r(){return{range:function(e,t,n){"undefined"==typeof t?(t=e,e=0,n=1):n||(n=1);var i,r=[];if(n>0)for(i=e;i<t;i+=n)r.push(i);else for(i=e;i>t;i+=n)r.push(i);return r},cycler:function(){return n(Array.prototype.slice.call(arguments))},joiner:function(e){return i(e)}}}e.exports=r},function(e,t,n){var i,r;(function(n,s){!function(o){"use strict";var a=function(){var e=Array.prototype.slice.call(arguments);"function"==typeof e[0]&&e[0].apply(null,e.splice(1))},l=function(e){"function"==typeof n?n(e):"undefined"!=typeof s&&s.nextTick?s.nextTick(e):setTimeout(e,0)},c=function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return n<e.length-1?t(n+1):null},i};return t(0)},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=function(e,t,n){var i=n?l:a;if(t=t||function(){},!h(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var s=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=e.next();o?r.push(s(o)):r.push(t),i(function(){e.apply(null,r)})}}};s(c(e))()};i=[],r=function(){return u}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(20).setImmediate,n(11))},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(21),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return d[m]=i,f(m),m++}function r(e){delete d[e]}function s(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function o(e){if(v)setTimeout(o,0,e);else{var t=d[e];if(t){v=!0;try{s(t)}finally{r(e),v=!1}}}}function a(){f=function(e){t.nextTick(function(){o(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function h(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},f=function(t){e.port2.postMessage(t)}}function u(){var e=g.documentElement;f=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function p(){f=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var f,m=1,d={},v=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?a():l()?c():e.MessageChannel?h():g&&"onreadystatechange"in g.createElement("script")?u():p(),y.setImmediate=i,y.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(11))},function(e,t){function n(){"use strict";function e(){i.contextOrFrameLookup=c,s.prototype.assertType=h,o.prototype.parseAggregate=u,i.memberLookup=p}function t(e){return{index:e.index,lineno:e.lineno,colno:e.colno}}function n(e,t,n,r){e=e||[],null===t&&(t=r<0?e.length-1:0),null===n?n=r<0?-1:e.length:n<0&&(n+=e.length),t<0&&(t+=e.length);for(var s=[],o=t;!(o<0||o>e.length)&&!(r>0&&o>=n)&&!(r<0&&o<=n);o+=r)s.push(i.memberLookup(e,o));return s}var i=this.runtime,r=this.lib,s=this.compiler.Compiler,o=this.parser.Parser,a=this.nodes,l=this.lexer,c=i.contextOrFrameLookup,h=s.prototype.assertType,u=o.prototype.parseAggregate,p=i.memberLookup;i.contextOrFrameLookup=function(e,t,n){var i=c.apply(this,arguments);if(void 0===i)switch(n){case"True":return!0;case"False":return!1;case"None":return null}return i};var f=a.Node.extend("Slice",{fields:["start","stop","step"],init:function(e,t,n,i,r){n=n||new a.Literal(e,t,null),i=i||new a.Literal(e,t,null),r=r||new a.Literal(e,t,1),this.parent(e,t,n,i,r)}});s.prototype.assertType=function(e){if(!(e instanceof f))return h.apply(this,arguments)},s.prototype.compileSlice=function(e,t){this.emit("("),this._compileExpression(e.start,t),this.emit("),("),this._compileExpression(e.stop,t),this.emit("),("),this._compileExpression(e.step,t),this.emit(")")},o.prototype.parseAggregate=function(){var e=this,n=t(this.tokens);n.colno--,n.index--;try{return u.apply(this)}catch(u){var i=t(this.tokens),s=function(){return r.extend(e.tokens,i),u};r.extend(this.tokens,n),this.peeked=!1;var o=this.peekToken();if(o.type!==l.TOKEN_LEFT_BRACKET)throw s();this.nextToken();for(var c=new f(o.lineno,o.colno),h=!1,p=0;p<=c.fields.length&&!this.skip(l.TOKEN_RIGHT_BRACKET);p++){if(p===c.fields.length){if(!h)break;this.fail("parseSlice: too many slice components",o.lineno,o.colno)}if(this.skip(l.TOKEN_COLON))h=!0;else{var m=c.fields[p];c[m]=this.parseExpression(),h=this.skip(l.TOKEN_COLON)||h}}if(!h)throw s();return new a.Array(o.lineno,o.colno,[c])}};var m={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||e<0)throw new Error("KeyError");return this.splice(e,1)},append:function(e){return this.push(e)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if((t=this.indexOf(e))===-1)throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},d={items:function(){var e=[];for(var t in this)e.push([t,this[t]]);return e},values:function(){var e=[];for(var t in this)e.push(this[t]);return e},keys:function(){var e=[];for(var t in this)e.push(t);return e},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return this.hasOwnProperty(e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw new Error("KeyError");delete this[e]}return n},popitem:function(){for(var e in this){var t=this[e];return delete this[e],[e,t]}throw new Error("KeyError")},setdefault:function(e,t){return e in this?this[e]:(void 0===t&&(t=null),this[e]=t)},update:function(e){for(var t in e)this[t]=e[t];return null}};return d.iteritems=d.items,d.itervalues=d.values,d.iterkeys=d.keys,i.memberLookup=function(e,t,i){return 4===arguments.length?n.apply(this,arguments):(e=e||{},r.isArray(e)&&m.hasOwnProperty(t)?function(){return m[t].apply(e,arguments)}:r.isObject(e)&&d.hasOwnProperty(t)?function(){return d[t].apply(e,arguments)}:p.apply(this,arguments))},e}e.exports=n}])});
"use strict";var Core=Core||{};Core.Init=(function(TargetNS){var Namespaces={};TargetNS.RegisterNamespace=function(NewNamespace,InitializationBlock){if(typeof NewNamespace==='undefined'||typeof InitializationBlock==='undefined'){return;}
if(typeof Namespaces[InitializationBlock]==='undefined'){Namespaces[InitializationBlock]=[];}
Namespaces[InitializationBlock].push({Namespace:NewNamespace});};TargetNS.ExecuteInit=function(InitializationBlock){if(typeof InitializationBlock==='undefined'){return;}
if(typeof Namespaces[InitializationBlock]==='undefined'){return;}
if(Namespaces[InitializationBlock].length<1){return;}
$.each(Namespaces[InitializationBlock],function(){if($.isFunction(this.Namespace.Init)){this.Namespace.Init();}});};return TargetNS;}(Core.Init||{}));

"use strict";(function(){window.isJQueryObject=function(){var I;if(typeof jQuery==='undefined'){return false;}
for(I=0;I<arguments.length;I++){if(!(arguments[I]instanceof jQuery)){return false;}}
return true;};}());

"use strict";var Core=Core||{};Core.Debug=(function(TargetNS){var DebugConsole,DebugLog;if(typeof console==='object'&&typeof console.log==='function'){DebugConsole=console;DebugLog=console.log;}
else if(typeof opera==='object'&&typeof opera.PostError==='function'){DebugConsole=opera;DebugLog=opera.PostError;}
TargetNS.Log=DebugConsole?function(){DebugLog.apply(DebugConsole,arguments);}:function(){};TargetNS.CheckDependency=function(TargetNamespace,Required,RequiredLabel,Silent){var RequiredEval,ErrorMessage;try{RequiredEval=eval('try{ typeof '+Required+'} catch (E) {}');}
catch(Event){$.noop(Event);}
if(RequiredEval==='function'||RequiredEval==='object'){return true;}
if(!Silent){ErrorMessage='Namespace '+TargetNamespace+' could not be initialized, because '+RequiredLabel+' could not be found.';if(typeof Core.Language!=='undefined'){ErrorMessage=Core.Language.Translate('Namespace %s could not be initialized, because %s could not be found.',TargetNamespace,RequiredLabel);}
alert(ErrorMessage);throw ErrorMessage;}
return false;};TargetNS.SimulateRTLPage=function(){var ExcludeTags={'html':1,'head':1,'style':1,'title':1,'link':1,'meta':1,'script':1,'object':1,'iframe':1},Replacement='  ( ';$('body').addClass('RTL');function ReplaceAllText(Node){var ChildNodes=(Node||document.body).childNodes,CurrentNode,InputType,InputValue,ReplacementValue,CurrentText,I=0;while(I<ChildNodes.length){CurrentNode=ChildNodes[I++];if(CurrentNode.nodeType===1&&!ExcludeTags[CurrentNode.nodeName])
{ReplaceAllText(CurrentNode);if(CurrentNode.nodeName==='INPUT'){InputType=CurrentNode.getAttribute('type');if(InputType==='button'||InputType==='submit'||InputType==='reset'||InputType==='text'){InputValue=CurrentNode.getAttribute('value');if(InputValue&&InputValue.length){ReplacementValue=Replacement.substr(0,InputValue.length);CurrentNode.setAttribute('value',ReplacementValue);}}}}
if(CurrentNode.nodeType!==3){continue;}
CurrentText=CurrentNode.nodeValue;if(!CurrentText){continue;}
CurrentText=CurrentText.replace(/\s+/g,'');if(!CurrentText.length){continue;}
CurrentNode.nodeValue=Replacement.substr(0,CurrentText.length);}}
return ReplaceAllText();};return TargetNS;}(Core.Debug||{}));

"use strict";var Core=Core||{};Core.Exception=(function(TargetNS){TargetNS.Init=function(){$(window).on('beforeunload.Exception',function(){TargetNS.AboutToLeave=true;});};TargetNS.ApplicationError=function(ErrorMessage,ErrorType){var Type=ErrorType,Message=ErrorMessage,Types=['Error','InternalError','TypeError','CommunicationError','ConnectionError'],DefaultType='Error';if(!$.inArray(Type,Types)){Type=DefaultType;}
this.GetType=function(){return Type;};this.GetMessage=function(){return Message;};};TargetNS.Throw=function(ErrorMessage,ErrorType){throw new TargetNS.ApplicationError(ErrorMessage,ErrorType);};TargetNS.IsErrorOfType=function(ErrorObject,ErrorType){return(ErrorObject instanceof TargetNS.ApplicationError&&ErrorObject.GetType()===ErrorType);};TargetNS.HandleFinalError=function(ErrorObject){var UserErrorMessage='An error occurred! Please check the browser error log for more details!',ErrorType;if(typeof Core.Language!=='undefined'){UserErrorMessage=Core.Language.Translate('An error occurred! Please check the browser error log for more details!')}
if(ErrorObject instanceof TargetNS.ApplicationError){ErrorType=ErrorObject.GetType();if(TargetNS.AboutToLeave&&(ErrorType==='CommunicationError'||ErrorType==='ConnectionError')){return false;}
if(ErrorType==='ConnectionError'||ErrorType==='CommunicationError'){Core.App.Publish('Core.App.AjaxError');}
else{TargetNS.ShowError(ErrorObject.GetMessage(),ErrorType);alert(UserErrorMessage);}
return true;}
else if(ErrorObject instanceof Error){TargetNS.ShowError(ErrorObject.message,'JavaScriptError');alert(UserErrorMessage);throw ErrorObject;}
else{TargetNS.ShowError(ErrorObject,'UndefinedError');alert(UserErrorMessage);throw ErrorObject;}};TargetNS.ShowError=function(ErrorMessage,ErrorType){Core.Debug.Log('[ERROR] '+ErrorType+': '+ErrorMessage);};Core.Init.RegisterNamespace(TargetNS,'DOCUMENT_READY');return TargetNS;}(Core.Exception||{}));

"use strict";var Core=Core||{};Core.Data=(function(TargetNS){TargetNS.Set=function($Element,Name,Object){if(isJQueryObject($Element)){$Element.data(Name,Object);}};TargetNS.Get=function($Element,Name){var DataObject;if(isJQueryObject($Element)){DataObject=$Element.data(Name);if(typeof DataObject==='undefined'||DataObject===null){return{};}
else{return DataObject;}}
return{};};TargetNS.CompareObject=function(ObjectOne,ObjectTwo){var Key;if(!ObjectOne||!ObjectTwo){return false;}
if(typeof ObjectOne!=='object'||typeof ObjectTwo!=='object'){return false;}
if(ObjectOne.constructor!==ObjectTwo.constructor){return false;}
for(Key in ObjectOne){if((typeof ObjectOne[Key]==='object')&&(typeof ObjectTwo[Key]==='object')){if(!Core.Data.CompareObject(ObjectOne[Key],ObjectTwo[Key])){return false;}}
else{if(ObjectOne[Key]!==ObjectTwo[Key]){return false;}}}
for(Key in ObjectTwo){if((typeof ObjectTwo[Key]==='object')&&(typeof ObjectOne[Key]==='object')){if(!Core.Data.CompareObject(ObjectTwo[Key],ObjectOne[Key])){return false;}}
else{if(ObjectTwo[Key]!==ObjectOne[Key]){return false;}}}
return true;};TargetNS.CopyObject=function(Data){var Key='',TempObject;if(!Data||typeof Data!=='object'){return Data;}
TempObject=new Data.constructor();for(Key in Data){if(Data.hasOwnProperty(Key)){TempObject[Key]=Core.Data.CopyObject(Data[Key]);}}
return TempObject;};return TargetNS;}(Core.Data||{}));

"use strict";var Core=Core||{};Core.Config=(function(TargetNS){var Config={},ConfigPrefix='';if(!Core.Debug.CheckDependency('Core.Config','Core.Data','Core.Data')){return false;}
TargetNS.Set=function(Key,Value){var Keys=Key.split('.'),KeyToken,ConfigLevel=Config,Count=0;for(KeyToken in Keys){if(Keys.hasOwnProperty(KeyToken)){if(Keys.length===Count+1){ConfigLevel[ConfigPrefix+Keys[KeyToken]]=Value;}
else if(typeof ConfigLevel[ConfigPrefix+Keys[KeyToken]]==='undefined'){ConfigLevel[ConfigPrefix+Keys[KeyToken]]={};ConfigLevel=ConfigLevel[ConfigPrefix+Keys[KeyToken]];}
else{ConfigLevel=ConfigLevel[ConfigPrefix+Keys[KeyToken]];}
Count++;}}};TargetNS.Get=function(Key,DefaultValue){var Keys=Key.split('.'),KeyToken,ConfigLevel=Config,Count=0;for(KeyToken in Keys){if(Keys.hasOwnProperty(KeyToken)){if(typeof ConfigLevel!=='object'){return DefaultValue;}
if(Keys.length===Count+1){return ConfigLevel[ConfigPrefix+Keys[KeyToken]]||DefaultValue;}
else{ConfigLevel=ConfigLevel[ConfigPrefix+Keys[KeyToken]];}
Count++;}}};TargetNS.AddConfig=function(Data,ConfigKey){var ConfigOptions,Keys,KeyToken,ConfigLevel=Config,Count=0;ConfigOptions=Core.Data.CopyObject(Data);if(typeof ConfigKey==='undefined'){$.each(Data,function(Key,Value){TargetNS.Set(Key,Value);});}
else{Keys=ConfigKey.split('.');for(KeyToken in Keys){if(Keys.length===Count+1){ConfigLevel[ConfigPrefix+Keys[KeyToken]]=ConfigOptions;}
else{if(typeof ConfigLevel[ConfigPrefix+Keys[KeyToken]]==='undefined'){ConfigLevel=ConfigLevel[ConfigPrefix+Keys[KeyToken]];}
else{ConfigLevel=ConfigLevel[ConfigPrefix+Keys[KeyToken]];}
Count++;}}}};TargetNS.AddConfig({'Microsoft Internet Explorer 5.5':function(){return($.browser.msie&&$.browser.version==='5.5');},'Microsoft Internet Explorer 6':function(){return($.browser.msie&&$.browser.version==='6.0');},'Microsoft Internet Explorer 7':function(){return($.browser.msie&&$.browser.version==='7.0');},'Microsoft Internet Explorer 8':function(){return($.browser.msie&&$.browser.version==='8.0');},'Microsoft Internet Explorer 9':function(){return($.browser.msie&&$.browser.version==='9.0');},'Microsoft Internet Explorer 10':function(){return($.browser.msie&&$.browser.version==='10.0');},'Konqueror (without WebKit engine)':function(){return($.browser.webkit&&navigator.vendor==='KDE');},'Netscape, old Mozilla, old Firefox':function(){var BrowserVersion,BrowserDetected=false;if($.browser.mozilla){BrowserVersion=$.browser.version.split('.');if(parseInt(BrowserVersion[0],10)<31){BrowserDetected=true;}}
return BrowserDetected;},'Safari Version 5 and older':function(){var BrowserVersion=$.browser.version.split('.');return($.browser.safari&&parseInt(BrowserVersion[0],10)<535);}},'BrowserBlackList::Agent');TargetNS.AddConfig({'Microsoft Internet Explorer 5.5':function(){return($.browser.msie&&$.browser.version==='5.5');},'Microsoft Internet Explorer 6':function(){return($.browser.msie&&$.browser.version==='6.0');},'Microsoft Internet Explorer 7':function(){return($.browser.msie&&$.browser.version==='7.0');},'Microsoft Internet Explorer 8':function(){return($.browser.msie&&$.browser.version==='8.0');},'Microsoft Internet Explorer 9':function(){return($.browser.msie&&$.browser.version==='9.0');},'Microsoft Internet Explorer 10':function(){return($.browser.msie&&$.browser.version==='10.0');},'Konqueror (without WebKit engine)':function(){return($.browser.webkit&&navigator.vendor==='KDE');},'Netscape, old Mozilla, old Firefox':function(){var BrowserVersion,BrowserDetected=false;if($.browser.mozilla){BrowserVersion=$.browser.version.split('.');if(parseInt(BrowserVersion[0],10)<31){BrowserDetected=true;}}
return BrowserDetected;},'Safari Version 5 and older':function(){var BrowserVersion=$.browser.version.split('.');return($.browser.safari&&parseInt(BrowserVersion[0],10)<535);}},'BrowserBlackList::Customer');return TargetNS;}(Core.Config||{}));

"use strict";var Core=Core||{};Core.Language=(function(TargetNS){var MetaData={},Translations={};TargetNS.Load=function(LanguageMetaData,TranslationData){if(typeof LanguageMetaData!=='object'||typeof TranslationData!=='object'){return;}
MetaData=LanguageMetaData;Translations=TranslationData;};TargetNS.Translate=function(TranslateString){var Translated="",Args;if(typeof TranslateString==='undefined'){return"";}
Translated=Translations[TranslateString];if(!Translated||!Translated.length){Translated=TranslateString;}
if(arguments.length<=1){return Translated;}
for(Args=1;Args<arguments.length;Args++){Translated=Translated.replace('%s',arguments[Args]);}
return Translated;};TargetNS.DecimalSeparatorGet=function(){return MetaData.DecimalSeparator;};return TargetNS;}(Core.Language||{}));

"use strict";var Core=Core||{};Core.Template=(function(TargetNS){var Templates={},NunjucksEnvironment;TargetNS.Load=function(TemplateData){if(typeof TemplateData!=='object'){return;}
Templates=TemplateData;};TargetNS.Render=function(TemplateName,Data){var Template;if(typeof TemplateName==='undefined'||typeof Templates[TemplateName]==='undefined'){return;}
Template=Templates[TemplateName];return NunjucksEnvironment.renderString(Template,Data);};TargetNS.RenderString=function(TemplateString,Data){if(typeof TemplateString==='undefined'||typeof Data==='undefined'){return;}
return NunjucksEnvironment.renderString(TemplateString,Data);};TargetNS.Init=function(){NunjucksEnvironment=new nunjucks.Environment();NunjucksEnvironment.addFilter('Translate',function(){return Core.Language.Translate.apply(window,arguments);});};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL_EARLY');return TargetNS;}(Core.Template||{}));

"use strict";var Core=Core||{};Core.JSON=(function(TargetNS){if(!Core.Debug.CheckDependency('Core.JSON','JSON.parse','JSON parser',true)){return false;}
TargetNS.Parse=function(JSONString){var JSONObject;if(typeof JSONString!=='string'&&typeof JSONString!=='undefined'){return JSONString;}
try{JSONObject=JSON.parse(JSONString);}
catch(e){JSONObject={};}
return JSONObject;};TargetNS.Stringify=function(JSONObject){var JSONString;try{JSONString=JSON.stringify(JSONObject);}
catch(e){JSONString="";}
return JSONString;};return TargetNS;}(Core.JSON||{}));

"use strict";var Core=Core||{};Core.App=(function(TargetNS){if(!Core.Debug.CheckDependency('Core.App','Core.Exception','Core.Exception')){return false;}
if(!Core.Debug.CheckDependency('Core.App','Core.Config','Core.Config')){return false;}
function SerializeData(Data){var QueryString='';$.each(Data,function(Key,Value){QueryString+=encodeURIComponent(Key)+'='+encodeURIComponent(Value)+';';});return QueryString;}
TargetNS.BindWindowUnloadEvent=function(Namespace,CallbackFunction){if(!$.isFunction(CallbackFunction)){return;}
if($.browser.msie&&parseInt($.browser.version,10)<11){$(window).on('unload.'+Namespace,function(){CallbackFunction();});}
else{$(window).on('pagehide.'+Namespace,function(){CallbackFunction();});}};TargetNS.UnbindWindowUnloadEvent=function(Namespace){$(window).off('unload.'+Namespace);$(window).off('pagehide.'+Namespace);};TargetNS.GetSessionInformation=function(){var Data={};if(!Core.Config.Get('SessionIDCookie')){Data[Core.Config.Get('SessionName')]=Core.Config.Get('SessionID');Data[Core.Config.Get('CustomerPanelSessionName')]=Core.Config.Get('SessionID');}
Data.ChallengeToken=Core.Config.Get('ChallengeToken');return Data;};TargetNS.BrowserCheck=function(Interface){var AppropriateBrowser=true,BrowserBlackList=Core.Config.Get('BrowserBlackList::'+Interface);if(typeof BrowserBlackList!=='undefined'){$.each(BrowserBlackList,function(Key,Value){if($.isFunction(Value)){if(Value()){AppropriateBrowser=false;}}});return AppropriateBrowser;}
alert(Core.Language.Translate('Error: Browser Check failed!'));};TargetNS.BrowserCheckIECompatibilityMode=function(){var IE7=($.browser.msie&&$.browser.version==='7.0');if(!IE7){return false;}
if(navigator&&navigator.userAgent&&(navigator.userAgent.match(/Trident\/4.0/)||navigator.userAgent.match(/Trident\/5.0/)||navigator.userAgent.match(/Trident\/6.0/)||navigator.userAgent.match(/Trident\/7.0/))){return true;}
return false;};TargetNS.Ready=function(Callback){if($.isFunction(Callback)){$(document).ready(function(){try{Callback();}
catch(Error){Core.Exception.HandleFinalError(Error);}});}
else{Core.Exception.ShowError('No function parameter given in Core.App.Ready','TypeError');}
TargetNS.Subscribe('Core.App.AjaxErrorResolved',function(){var $DialogObj=$('#AjaxErrorDialog'),CountDown=20;window.clearInterval(TargetNS.AjaxConnectionCheckInterval);delete TargetNS.AjaxConnectionCheckInterval;if(!$('body').hasClass('ConnectionErrorDetected')){return false;}
$('body').removeClass('ConnectionErrorDetected');if($('#AjaxErrorDialogInner').find('.NoConnection').is(':visible')){$('#AjaxErrorDialogInner').find('.NoConnection').hide();$('#AjaxErrorDialogInner').find('.ConnectionReEstablished').show().delay(1000).find('.Icon').addClass('Green');}
else{$DialogObj.find('.NoConnection').hide();$DialogObj.find('.ConnectionReEstablished').show().find('.Icon').addClass('Green');Core.UI.Dialog.ShowDialog({HTML:$DialogObj,Title:'',Modal:true,CloseOnClickOutside:false,CloseOnEscape:false,PositionTop:'100px',PositionLeft:'Center',Buttons:[{Label:Core.Language.Translate("Reload page"),Class:'Primary ReloadButton',Function:function(){location.reload();}},{Label:Core.Language.Translate("Close this dialog"),Function:function(){clearInterval(TargetNS.TimerID);delete TargetNS.TimerID;if(TargetNS.AjaxConnectionCheckInterval){clearInterval(TargetNS.AjaxConnectionCheckInterval);delete TargetNS.AjaxConnectionCheckInterval;}
Core.UI.Dialog.CloseDialog($('#AjaxErrorDialogInner'));}}],AllowAutoGrow:true});$('#AjaxErrorDialogInner').closest('.Dialog').find('>.Header').hide();$('#AjaxErrorDialogInner').closest('.Dialog').find('.Close').remove();}
if(!Core.Form.IsFormModified()){TargetNS.TimerID=window.setInterval(function(){CountDown--;$('.ReloadButton span').text(Core.Language.Translate("Reload page (%ss)",CountDown));if(CountDown==0){clearInterval(TargetNS.TimerID);window.location.reload();}},1000);}});TargetNS.Subscribe('Core.App.AjaxError',function(){var $DialogObj=$('#AjaxErrorDialog');$('body').addClass('ConnectionErrorDetected');if($('#AjaxErrorDialogInner').find('.NoConnection').is(':visible')){return false;}
if(!TargetNS.AjaxConnectionCheckInterval){TargetNS.AjaxConnectionCheckInterval=window.setInterval(function(){Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),null,function(){TargetNS.Publish('Core.App.AjaxErrorResolved');},'html');},5000);}
if($('#AjaxErrorDialogInner').find('.ConnectionReEstablished').is(':visible')){$('#AjaxErrorDialogInner').find('.ConnectionReEstablished').hide().prev('.NoConnection').show();$('.ReloadButton span').text(Core.Language.Translate("Reload page"));clearInterval(TargetNS.TimerID);delete TargetNS.TimerID;return false;}
$DialogObj.find('.ConnectionReEstablished').hide();$DialogObj.find('.NoConnection').show();Core.UI.Dialog.ShowDialog({HTML:$DialogObj,Title:'',Modal:true,CloseOnClickOutside:false,CloseOnEscape:false,PositionTop:'100px',PositionLeft:'Center',Buttons:[{Label:Core.Language.Translate("Reload page"),Class:'Primary ReloadButton',Function:function(){location.reload();}},{Label:Core.Language.Translate("Close this dialog"),Function:function(){clearInterval(TargetNS.TimerID);delete TargetNS.TimerID;if(TargetNS.AjaxConnectionCheckInterval){clearInterval(TargetNS.AjaxConnectionCheckInterval);delete TargetNS.AjaxConnectionCheckInterval;}
Core.UI.Dialog.CloseDialog($('#AjaxErrorDialogInner'));}}],AllowAutoGrow:true});$('#AjaxErrorDialogInner').closest('.Dialog').find('>.Header').hide();$('#AjaxErrorDialogInner').closest('.Dialog').find('.Close').remove();});};TargetNS.InternalRedirect=function(Data){var URL;URL=Core.Config.Get('Baselink')+SerializeData(Data);URL+=SerializeData(TargetNS.GetSessionInformation());window.location.href=URL;};TargetNS.EscapeSelector=function(Selector){if(Selector&&Selector.length){return Selector.replace(/( |#|:|\.|\[|\]|@|!|"|\$|%|&|<|=|>|'|\(|\)|\*|\+|,|\?|\/|;|\\|\^|{|}|`|\||~)/g,'\\$1');}
return'';};TargetNS.EscapeHTML=function(StringToEscape){var HTMLEntities={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'};if(!StringToEscape){return'';}
return StringToEscape.replace(/[&<>"]/g,function(Entity){return HTMLEntities[Entity]||Entity;});};TargetNS.HumanReadableDataSize=function(Size){var SizeStr,ReadableSize;var FormatSize=function(Size){var ReadableSize,Integer,Float,Separator;if(Number.isInteger(Size)){ReadableSize=Size.toString();}
else{Integer=Math.floor(Size);Float=Math.round((Size-Integer)*10);Separator=Core.Language.DecimalSeparatorGet()||'.';ReadableSize=Integer.toString()+Separator.toString()+Float.toString();}
return ReadableSize;}
if(Size>=Math.pow(1024,4)){ReadableSize=FormatSize(Size/Math.pow(1024,4));SizeStr=Core.Language.Translate('%s TB',ReadableSize);}
else if(Size>=Math.pow(1024,3)){ReadableSize=FormatSize(Size/Math.pow(1024,3));SizeStr=Core.Language.Translate('%s GB',ReadableSize);}
else if(Size>=Math.pow(1024,2)){ReadableSize=FormatSize(Size/Math.pow(1024,2));SizeStr=Core.Language.Translate('%s MB',ReadableSize);}
else if(Size>=1024){ReadableSize=FormatSize(Size/1024);SizeStr=Core.Language.Translate('%s KB',ReadableSize);}
else{SizeStr=Core.Language.Translate('%s B',Size);}
return SizeStr;}
TargetNS.Publish=function(Topic,Args){$.publish(Topic,Args);};TargetNS.Subscribe=function(Topic,Callback){return $.subscribe(Topic,Callback);};TargetNS.Unsubscribe=function(Handle){$.unsubscribe(Handle);};TargetNS.Init=function(){var RefreshSeconds=parseInt(Core.Config.Get('Refresh'),10)||0;if(RefreshSeconds!==0){window.setInterval(function(){if($('.Dialog:visible').length){return;}
if(Core&&Core.UI&&Core.UI.Popup&&Core.UI.Popup.HasOpenPopups()){return;}
window.location.reload();},RefreshSeconds*1000);}
TargetNS.ReturnToPreviousPage();};TargetNS.ReturnToPreviousPage=function(){$('.ReturnToPreviousPage').on('click',function(){if(history.length>1){history.back();return false;}
if(Core.UI.Popup.CurrentIsPopupWindow()){Core.UI.Popup.ClosePopup();return false;}
return false;});};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.App||{}));

"use strict";var Core=Core||{};Core.App=Core.App||{};Core.App.Responsive=(function(TargetNS){var ActiveScreenSize='ScreenXL',ScreenSizes={'ScreenXS':['ScreenS','ScreenM','ScreenL','ScreenXL'],'ScreenS':['ScreenM','ScreenL','ScreenXL'],'ScreenM':['ScreenL','ScreenXL'],'ScreenL':['ScreenXL'],'ScreenXL':[]};function GetAllScreenClasses(){var Classes=[],Key;for(Key in ScreenSizes){Classes.push('Visible-'+Key);}
return Classes;}
function CheckScreenResolution(){var $ResponsiveFooter=$('#ResponsiveFooter'),AllClasses=GetAllScreenClasses().join(' '),Key,i;Core.App.Publish('Event.App.Responsive.CheckScreenResolution');for(Key in ScreenSizes){if($ResponsiveFooter.find('.Visible-'+Key).is(':visible')&&Key!==ActiveScreenSize){ActiveScreenSize=Key;break;}}
if(!$('body').hasClass('Visible-'+ActiveScreenSize)){$('body')
.removeClass(AllClasses)
.addClass('Visible-'+ActiveScreenSize);Core.App.Publish('Event.App.Responsive.'+ActiveScreenSize);Core.App.Publish('Event.App.Responsive.SmallerOrEqual'+ActiveScreenSize);for(i=0;i<ScreenSizes[ActiveScreenSize].length;i++){Core.App.Publish('Event.App.Responsive.SmallerOrEqual'+ScreenSizes[ActiveScreenSize][i]);}}}
TargetNS.GetScreenSize=function(){return ActiveScreenSize;};TargetNS.IsSmallerOrEqual=function(ScreenSize,CompareSize){var i;if(ScreenSize===CompareSize){return true;}
for(i=0;i<ScreenSizes[ScreenSize].length;i++){if(ScreenSizes[ScreenSize][i]===CompareSize){return true;}}
return false;};TargetNS.CheckIfTouchDevice=function(){if(('ontouchstart'in window)||(navigator.msMaxTouchPoints>0)){$('body').addClass('TouchDevice');}};TargetNS.IsTouchDevice=function(){return($('body').hasClass('TouchDevice'));};TargetNS.Init=function(){var TimeoutID=0;try{if((top.location.href!==location.href&&window.name.search(/^OTRSPopup_/)===-1)||parseInt(localStorage.getItem("DesktopMode"),10)>0){if(!$('#ViewModeSwitch').length){$('#Footer').append('<div id="ViewModeSwitch"><a href="#">'+Core.Language.Translate('Switch to mobile mode')+'</a></div>');$('#ViewModeSwitch').on('click.Responsive',function(){localStorage.setItem("DesktopMode",0);location.reload();return false;});}
$('body').addClass('Visible-ScreenXL');return;}}
catch(Exception){$.noop(Exception);}
$(window).on('resize',function(){clearTimeout(TimeoutID);TimeoutID=window.setTimeout(function(){CheckScreenResolution();},50);});Core.App.Subscribe('Event.App.Responsive.ScreenXS',function(){});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenXS',function(){});Core.App.Subscribe('Event.App.Responsive.ScreenS',function(){});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenS',function(){});Core.App.Subscribe('Event.App.Responsive.ScreenM',function(){});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenM',function(){});Core.App.Subscribe('Event.App.Responsive.ScreenL',function(){});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenL',function(){});Core.App.Subscribe('Event.App.Responsive.ScreenXL',function(){});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenXL',function(){});CheckScreenResolution();};Core.Init.RegisterNamespace(TargetNS,'FINISH');return TargetNS;}(Core.App.Responsive||{}));

"use strict";var Core=Core||{};Core.AJAX=(function(TargetNS){var AJAXLoaderPrefix='AJAXLoader',ActiveAJAXCalls={};if(!Core.Debug.CheckDependency('Core.AJAX','Core.Exception','Core.Exception')){return;}
if(!Core.Debug.CheckDependency('Core.AJAX','Core.App','Core.App')){return;}
function HandleAJAXError(XHRObject,Status,Error){var ErrorMessage=Core.Language.Translate('Error during AJAX communication. Status: %s, Error: %s',Status,Error);if(RedirectAfterSessionTimeOut(XHRObject)){return;}
if(Status==='abort'){return;}
if(Core.Config.Get('AjaxDebug')&&typeof XHRObject==='object'){ErrorMessage+="\n\nResponse status: "+XHRObject.status+" ("+XHRObject.statusText+")\n";ErrorMessage+="Response headers: "+XHRObject.getAllResponseHeaders()+"\n";ErrorMessage+="Response content: "+XHRObject.responseText;}
if(!XHRObject.status){Core.Exception.HandleFinalError(new Core.Exception.ApplicationError(ErrorMessage,'ConnectionError'));return;}
Core.Exception.HandleFinalError(new Core.Exception.ApplicationError(ErrorMessage,'CommunicationError'));}
function ToggleAJAXLoader(FieldID,Show){var $Element=$('#'+FieldID),$Loader=$('#'+AJAXLoaderPrefix+FieldID),LoaderHTML='<span id="'+AJAXLoaderPrefix+FieldID+'" class="AJAXLoader"></span>';if($Element.is('[type=hidden]')){return;}
if(!$Element.length){ActiveAJAXCalls[FieldID]=0;return;}
if(typeof ActiveAJAXCalls[FieldID]==='undefined'){ActiveAJAXCalls[FieldID]=0;}
if(Show){ActiveAJAXCalls[FieldID]++;}
else{ActiveAJAXCalls[FieldID]--;if(ActiveAJAXCalls[FieldID]<=0){ActiveAJAXCalls[FieldID]=0;}}
if(ActiveAJAXCalls[FieldID]>0){if(!$Loader.length){$Element.after(LoaderHTML);}
else{$Loader.show();}}
else{$Loader.hide();}}
function SerializeData(Data){var QueryString='';$.each(Data,function(Key,Value){QueryString+=';'+encodeURIComponent(Key)+'='+encodeURIComponent(Value);});return QueryString;}
function GetSessionInformation(){var Data={};if(!Core.Config.Get('SessionIDCookie')){Data[Core.Config.Get('SessionName')]=Core.Config.Get('SessionID');Data[Core.Config.Get('CustomerPanelSessionName')]=Core.Config.Get('SessionID');}
Data.ChallengeToken=Core.Config.Get('ChallengeToken');return Data;}
function GetAdditionalDefaultData(){var Data={};Data=GetSessionInformation();Data.Action=Core.Config.Get('Action');return Data;}
function UpdateTicketAttachments(Attachments){$('.AttachmentList tbody').empty();$(Attachments).each(function(){var AttachmentItem=Core.Template.Render('AjaxDnDUpload/AttachmentItem',{'Filename':this.Filename,'Filetype':this.ContentType,'Filesize':this.Filesize,'FileID':this.FileID,});$(AttachmentItem).prependTo($('.AttachmentList tbody')).fadeIn();});if($('.AttachmentList tbody tr').length){$('.AttachmentList').show();}
else{$('.AttachmentList').hide();}}
function UpdateTextarea($Element,Value){var $ParentBody,ParentBody,Range,StartRange=0,NewPosition=0,CKEditorObj=parent.CKEDITOR;if($Element.length){$ParentBody=$Element;ParentBody=$ParentBody[0];if(Core.App.Responsive.IsSmallerOrEqual(Core.App.Responsive.GetScreenSize(),'ScreenL')&&(!localStorage.getItem("DesktopMode")||parseInt(localStorage.getItem("DesktopMode"),10)<=0)){CKEditorObj=CKEDITOR;}
if(CKEditorObj&&CKEditorObj.instances.RichText){CKEditorObj.instances.RichText.focus();window.setTimeout(function(){try{CKEditorObj.instances.RichText.setData(Value);}
catch(Error){$.noop();}},100);return;}
else{if($Element.parent().data('Cursor')){StartRange=parent.$Element.data('Cursor').StartRange;}
$ParentBody.val(Value);NewPosition=StartRange+Value.length;if(ParentBody.selectionStart){ParentBody.selectionStart=NewPosition;ParentBody.selectionEnd=NewPosition;}
else if(document.selection){Range=document.selection.createRange().duplicate();Range.moveStart('character',NewPosition);Range.select();}
return;}}
else{alert(Core.Language.Translate('This window must be called from compose window.'));return;}}
function UpdateFormElements(Data){if(typeof Data!=='object'){return;}
$.each(Data,function(DataKey,DataValue){var $Element=$('#'+DataKey);if(DataKey==='TicketAttachments'){UpdateTicketAttachments(DataValue);return;}
if((!$Element.length||!DataValue)&&!$Element.is('textarea')){return;}
if($Element.is('select')){$Element.empty();$.each(DataValue,function(Index,Value){var NewOption,OptionText=Core.App.EscapeHTML(Value[1]);NewOption=new Option(OptionText,Value[0],Value[2],Value[3]);if(Value[4]){NewOption.disabled=true;}
NewOption.innerHTML=OptionText;$Element.append(NewOption);});if($Element.hasClass('Modernize')){$Element.trigger('redraw.InputField');}
return;}
if($Element.is('textarea')){UpdateTextarea($Element,DataValue);return;}
$Element.val(DataValue);if($Element.hasClass('Modernize')){$Element.trigger('redraw.InputField');}});}
function RedirectAfterSessionTimeOut(XHRObject){var Headers=XHRObject.getAllResponseHeaders(),OldUrl=location.href,NewUrl=Core.Config.Get('Baselink')+"RequestedURL="+encodeURIComponent(OldUrl);if(Headers.match(/X-OTRS-Login: /i)){location.href=NewUrl;return true;}
return false;}
TargetNS.SerializeForm=function($Element,Ignore){var QueryString="";if(typeof Ignore==='undefined'){Ignore={};}
if(isJQueryObject($Element)&&$Element.length){$Element.closest('form').find('input:not(:file), textarea, select').filter(':not([disabled=disabled])').each(function(){var Name=$(this).attr('name')||'';if(!Name.length||typeof Ignore[Name]!=='undefined'){return;}
if($(this).is(':checkbox, :radio')){if($(this).is(':checked')){QueryString+=encodeURIComponent(Name)+'='+encodeURIComponent($(this).val()||'on')+";";}}
else if($(this).is('select')){$.each($(this).find('option:selected'),function(){QueryString+=encodeURIComponent(Name)+'='+encodeURIComponent($(this).val()||'')+";";});}
else{QueryString+=encodeURIComponent(Name)+'='+encodeURIComponent($(this).val()||'')+";";}});}
return QueryString;};TargetNS.FormUpdate=function($EventElement,Subaction,ChangedElement,FieldsToUpdate,SuccessCallback){var URL=Core.Config.Get('Baselink'),Data=GetAdditionalDefaultData(),QueryString;Data.Subaction=Subaction;Data.ElementChanged=ChangedElement;QueryString=TargetNS.SerializeForm($EventElement,Data)+SerializeData(Data);if(FieldsToUpdate){$.each(FieldsToUpdate,function(Index,Value){ToggleAJAXLoader(Value,true);});}
return $.ajax({type:'POST',url:URL,data:QueryString,dataType:'json',success:function(Response,Status,XHRObject){Core.App.Publish('Core.App.AjaxErrorResolved');if(RedirectAfterSessionTimeOut(XHRObject)){return false;}
if(!Response){Core.Exception.HandleFinalError(new Core.Exception.ApplicationError("Invalid JSON from: "+URL,'CommunicationError'));}
else{UpdateFormElements(Response,FieldsToUpdate);if(typeof SuccessCallback==='function'){SuccessCallback();}
Core.App.Publish('Event.AJAX.FormUpdate.Callback',[Response]);}},complete:function(){if(FieldsToUpdate){$.each(FieldsToUpdate,function(Index,Value){ToggleAJAXLoader(Value,false);});}},error:function(XHRObject,Status,Error){HandleAJAXError(XHRObject,Status,Error)}});};TargetNS.ContentUpdate=function($ElementToUpdate,URL,Callback){var QueryString,QueryIndex=URL.indexOf("?"),GlobalResponse;if(QueryIndex>=0){QueryString=URL.substr(QueryIndex+1);URL=URL.substr(0,QueryIndex);}
QueryString+=SerializeData(GetSessionInformation());return $.ajax({type:'POST',url:URL,data:QueryString,dataType:'html',success:function(Response,Status,XHRObject){Core.App.Publish('Core.App.AjaxErrorResolved');if(RedirectAfterSessionTimeOut(XHRObject)){return false;}
if(!Response){Core.Exception.HandleFinalError(new Core.Exception.ApplicationError("No content from: "+URL,'CommunicationError'));}
else if($ElementToUpdate&&isJQueryObject($ElementToUpdate)&&$ElementToUpdate.length){GlobalResponse=Response;$ElementToUpdate.html(Response);}
else{Core.Exception.HandleFinalError(new Core.Exception.ApplicationError("No such element id: "+$ElementToUpdate.attr('id')+" in page!",'CommunicationError'));}},complete:function(){if($.isFunction(Callback)){Callback();}
Core.App.Publish('Event.AJAX.ContentUpdate.Callback',[GlobalResponse]);},error:function(XHRObject,Status,Error){HandleAJAXError(XHRObject,Status,Error)}});};TargetNS.FunctionCall=function(URL,Data,Callback,DataType){if(typeof Data==='string'){Data+=SerializeData(GetSessionInformation());}else{Data=$.extend(Data,GetSessionInformation());}
return $.ajax({type:'POST',url:URL,data:Data,dataType:(typeof DataType==='undefined')?'json':DataType,success:function(Response,Status,XHRObject){Core.App.Publish('Core.App.AjaxErrorResolved');if(RedirectAfterSessionTimeOut(XHRObject)){return false;}
if($.isFunction(Callback)){Callback(Response);Core.App.Publish('Event.AJAX.FunctionCall.Callback',[Response]);}
else{Core.Exception.HandleFinalError(new Core.Exception.ApplicationError("Invalid callback method: "+((typeof Callback==='undefined')?'undefined':Callback.toString())));}},error:function(XHRObject,Status,Error){HandleAJAXError(XHRObject,Status,Error)}});};return TargetNS;}(Core.AJAX||{}));

"use strict";var Core=Core||{};Core.UI=(function(TargetNS){var IDGeneratorCount=0;TargetNS.InitWidgetActionToggle=function(){$(".WidgetAction.Toggle > a")
.each(function(){var $WidgetElement=$(this).closest("div.Header").parent('div'),ContentDivID=TargetNS.GetID($WidgetElement.children('.Content'));if(!$WidgetElement.hasClass('Expanded')&&!$WidgetElement.hasClass('Collapsed')){$WidgetElement.addClass('Expanded');}
$(this)
.attr('aria-controls',ContentDivID)
.attr('aria-expanded',$WidgetElement.hasClass('Expanded'));})
.off('click.WidgetToggle')
.on('click.WidgetToggle',function(Event){var $WidgetElement=$(this).closest("div.Header").parent('div'),Animate=$WidgetElement.hasClass('Animate'),$that=$(this);function ToggleWidget(){$WidgetElement
.toggleClass('Collapsed')
.toggleClass('Expanded')
.end()
.end()
.attr('aria-expanded',$that.closest("div.Header").parent('div').hasClass('Expanded'));Core.App.Publish('Event.UI.ToggleWidget',[$WidgetElement]);}
if(Animate){$WidgetElement.addClass('AnimationRunning').find('.Content').slideToggle("fast",function(){ToggleWidget();$WidgetElement.removeClass('AnimationRunning');});}else{ToggleWidget();}
Event.preventDefault();});};TargetNS.WidgetOverlayShow=function($Widget,Type){var IconClass='fa-check'
if(Type||Type=='Loading'){IconClass='fa-circle-o-notch fa-spin'}
$Widget
.addClass('HasOverlay')
.find('.Content')
.prepend('<div class="Overlay" style="display: none;"><i class="fa '+IconClass+'"></i></div>')
.children('.Overlay')
.fadeIn();};TargetNS.InitWidgetTabs=function(){function ActivateTab($TriggerObj){var $ContainerObj=$TriggerObj.closest('.WidgetSimple'),TargetID=$TriggerObj.attr('href').replace('#',''),$TargetObj=$ContainerObj.find('div[data-id="'+TargetID+'"]');if($TriggerObj.hasClass('Disabled')){return false;}
if($TargetObj.length&&!$TargetObj.hasClass('Active')){$ContainerObj.find('.Header > a').removeClass('Active');$TriggerObj.addClass('Active');$ContainerObj.find('.Content > div.Active').hide().removeClass('Active');$TargetObj.fadeIn(function(){$(this).addClass('Active');Core.UI.InputFields.Activate($TargetObj);});}}
$('.WidgetSimple.Tabs .Header a').each(function(){var TargetID=$(this).attr('href');if(window.location.href.indexOf(TargetID)>-1){ActivateTab($(this));return false;}});$('.WidgetSimple.Tabs .Header a').on('click',function(Event){if($(this).hasClass('Disabled')){Event.stopPropagation();Event.preventDefault();return false;}
ActivateTab($(this));});};TargetNS.WidgetOverlayHide=function($Widget,Switch){if(Switch){$Widget
.find('.Overlay i')
.fadeOut()
.parent()
.append('<i class="fa fa-check" style="display: none;" />')
.find('i:last-child')
.fadeIn()
.parent()
.delay(1000)
.fadeOut(function(){$(this).remove();$Widget.removeClass('HasOverlay');});}
else{$Widget
.find('.Overlay')
.fadeOut(function(){$(this).remove();$Widget.removeClass('HasOverlay');});}};TargetNS.InitMessageBoxClose=function(){$(".MessageBox > a.Close")
.off('click.MessageBoxClose')
.on('click.MessageBoxClose',function(Event){$(this).parent().remove();Event.preventDefault();});};TargetNS.GetID=function($Element){var ID;function GenerateID(){return'Core_UI_AutogeneratedID_'+IDGeneratorCount++;}
if($Element){if($Element.attr('id')){ID=$Element.attr('id');}
else{ID=GenerateID();$Element.attr('id',ID);}}
else{ID=GenerateID();}
return ID;};TargetNS.ToggleTwoContainer=function($Element1,$Element2){if(isJQueryObject($Element1,$Element2)&&$Element1.length&&$Element2.length){$Element1.slideToggle('fast',function(){$Element2.slideToggle('fast',function(){Core.UI.InputFields.InitSelect($Element2.find('.Modernize'));});Core.UI.InputFields.InitSelect($Element1.find('.Modernize'));});}};TargetNS.RegisterToggleTwoContainer=function($ClickedElement,$Element1,$Element2){if(isJQueryObject($ClickedElement)&&$ClickedElement.length){$ClickedElement.click(function(){var $ContainerObj=$(this).closest('.WidgetSimple').find('.AllocationListContainer'),FieldName,Data={};if($Element1.is(':visible')){TargetNS.ToggleTwoContainer($Element1,$Element2);}
else{TargetNS.ToggleTwoContainer($Element2,$Element1);}
Data.Columns={};Data.Order=[];$ContainerObj.find('.AvailableFields').find('li').each(function(){FieldName=$(this).attr('data-fieldname');Data.Columns[FieldName]=0;});$ContainerObj.find('.AssignedFields').find('li').each(function(){FieldName=$(this).attr('data-fieldname');Data.Columns[FieldName]=1;Data.Order.push(FieldName);});$ContainerObj.closest('form').find('.ColumnsJSON').val(Core.JSON.Stringify(Data));return false;});}};TargetNS.ScrollTo=function($Element){if(isJQueryObject($Element)&&$Element.length){window.scrollTo(0,$Element.offset().top);}};TargetNS.ShowNotification=function(Text,Type,Link,Callback,ID,Icon){var $ExistingNotifications,$NotificationObj;if(!Text){return false;}
if(!Type){Type='Notice';}
$ExistingNotifications=$('.MessageBox').filter(function(){var Match=0;if($(this).find('a').text().indexOf(Text)>0&&$(this).hasClass(Type)){Match=1;}
return Match;});if($ExistingNotifications.length){return false;}
if(Link){Link=Core.Config.Get('Baselink')+Link;}
$NotificationObj=$(Core.Template.Render("Agent/Notification",{Class:Type,URL:Link,ID:ID,Icon:Icon,Text:Text}));$NotificationObj.hide();if($('.MessageBox:visible').length){$NotificationObj.insertAfter('.MessageBox:visible:last');}
else{$NotificationObj.insertAfter('#NavigationContainer');}
$NotificationObj.slideDown(function(){if($.isFunction(Callback)){Callback();}});return true;};TargetNS.HideNotification=function(Text,Type,Callback){if(!Text||!Type){return false;}
$('.MessageBox').filter(function(){if($(this).find('a').text().indexOf(Text)>0&&$(this).hasClass(Type)){$(this).slideUp(function(){$(this).remove();if($.isFunction(Callback)){Callback();}})}});return true;}
TargetNS.InitCheckboxSelection=function($Element){if(!$Element.length){return;}
$Element.off('click.CheckboxSelection').on('click.CheckboxSelection',function(Event){var $Checkbox=$(this).find('input[type="checkbox"]');if(!$Checkbox.length){return;}
if($(Event.target).is('input[type="checkbox"]')){return;}
Event.stopPropagation();$Checkbox
.prop('checked',!$Checkbox.prop('checked'))
.triggerHandler('click');});};TargetNS.Animate=function($Element,Type){if(!$Element.length||!Type){return;}
$Element.addClass('Animation'+Type);};TargetNS.InitMasterAction=function(){$('.MasterAction').click(function(Event){var $MasterActionLink=$(this).find('.MasterActionLink');if(Event.target!==$MasterActionLink.get(0)){window.location=$MasterActionLink.attr('href');return false;}});};TargetNS.InitAjaxDnDUpload=function(){function UploadFiles(SelectedFiles,$DropObj){var $ContainerObj=$DropObj.closest('.Field'),$FileuploadFieldObj=$ContainerObj.find('.AjaxDnDUpload'),FormID=$FileuploadFieldObj.data('form-id')?$FileuploadFieldObj.data('form-id'):$DropObj.closest('form').find('input[name=FormID]').val(),ChallengeToken=$DropObj.closest('form').find('input[name=ChallengeToken]').val(),IsMultiple=($FileuploadFieldObj.attr('multiple')=='multiple'),MaxFiles=$FileuploadFieldObj.data('max-files'),MaxSizePerFile=$FileuploadFieldObj.data('max-size-per-file'),MaxSizePerFileHR=$FileuploadFieldObj.data('max-size-per-file-hr'),FileTypes=$FileuploadFieldObj.data('file-types'),Upload,XHRObj,FileTypeNotAllowed=[],FileTypeNotAllowedText,FilesTooBig=[],FilesTooBigText,AttemptedToUploadAgain=[],AttemptedToUploadAgainText,NoSpaceLeft=[],NoSpaceLeftText,UsedSpace=0,WebMaxFileUpload=Core.Config.Get('WebMaxFileUpload');if(!FormID||!SelectedFiles||!$DropObj||!ChallengeToken){return false;}
if(!IsMultiple&&SelectedFiles.length>1){alert(Core.Language.Translate("Please only select one file for upload."));return false;}
if(!IsMultiple&&$FileuploadFieldObj.closest('.Field').find('.AttachmentList tbody tr').length>0){alert(Core.Language.Translate("Sorry, you can only upload one file here."));return false;}
if(MaxFiles&&$FileuploadFieldObj.closest('.Field').find('.AttachmentList tbody tr').length>=MaxFiles){alert(Core.Language.Translate("Sorry, you can only upload %s files.",[MaxFiles]));return false;}
if(MaxFiles&&SelectedFiles.length>MaxFiles){alert(Core.Language.Translate("Please only select at most %s files for upload.",[MaxFiles]));return false;}
if(FileTypes){FileTypes=FileTypes.split(',');}
$DropObj.prev('input[type=file]').removeClass('Error');$.each($FileuploadFieldObj.closest('.Field').find('.AttachmentList tbody tr td.Filesize'),function(){var FileSize=parseFloat($(this).attr('data-file-size'));if(FileSize){UsedSpace+=FileSize;}});$.each(SelectedFiles,function(index,File){var $CurrentRowObj,FileExtension=File.name.slice((File.name.lastIndexOf(".")-1>>>0)+2),AttachmentItem=Core.Template.Render('AjaxDnDUpload/AttachmentItemUploading',{'Filename':File.name,'Filetype':File.type});if(File.size>(WebMaxFileUpload-UsedSpace)){NoSpaceLeft.push(File.name+' ('+Core.App.HumanReadableDataSize(File.size)+')');return true;}
UsedSpace+=File.size;if(typeof FileTypes==='object'&&FileTypes.indexOf(FileExtension)<0){FileTypeNotAllowed.push(File.name);return true;}
if(MaxSizePerFile&&File.size>MaxSizePerFile){FilesTooBig.push(File.name);return true;}
if($ContainerObj.find('.AttachmentList tbody tr td.Filename:contains('+File.name+')').length){AttemptedToUploadAgain.push(File.name);return true;}
$DropObj.addClass('Uploading');$ContainerObj.find('.AttachmentList').show();$(AttachmentItem).prependTo($ContainerObj.find('.AttachmentList tbody')).fadeIn();$CurrentRowObj=$ContainerObj.find('.AttachmentList tbody tr:first-child');Upload=new FormData();Upload.append('Files',File);$.ajax({url:Core.Config.Get('CGIHandle')+'?Action=AjaxAttachment;Subaction=Upload;FormID='+FormID+';ChallengeToken='+ChallengeToken,type:'post',data:Upload,xhr:function(){XHRObj=$.ajaxSettings.xhr();if(XHRObj.upload){XHRObj.upload.addEventListener('progress',function(Upload){var Percentage=(Upload.loaded*100)/Upload.total;$CurrentRowObj.find('.Progress').animate({'width':Percentage+'%'});if(Percentage===100){$CurrentRowObj.find('.Progress').delay(1000).fadeOut(function(){$(this).remove();});}},false);}
return XHRObj;},dataType:'json',cache:false,contentType:false,processData:false,success:function(Response){$.each(Response,function(index,Attachment){var AttachmentItem,$ExistingItemObj=$ContainerObj.find('.AttachmentList tbody tr td.Filename:contains('+Attachment.Filename+')'),$TargetObj;if($ExistingItemObj.length){$TargetObj=$ExistingItemObj.closest('tr');if($TargetObj.find('a').data('file-id')){return;}
$TargetObj
.find('.Filetype')
.text(Attachment.ContentType)
.closest('tr')
.find('.Filesize')
.text(Attachment.HumanReadableDataSize)
.attr('data-file-size',Attachment.Filesize)
.next('td')
.find('a')
.removeClass('Hidden')
.data('file-id',Attachment.FileID);}
else{AttachmentItem=Core.Template.Render('AjaxDnDUpload/AttachmentItem',{'Filename':Attachment.Filename,'Filetype':Attachment.ContentType,'Filesize':Attachment.Filesize,'FileID':Attachment.FileID,});$(AttachmentItem).prependTo($ContainerObj.find('.AttachmentList tbody')).fadeIn();}
if(!$('#AttachmentExists').length){$('.AttachmentListContainer').append('<input type="hidden" id="AttachmentExists" name="AttachmentExists" value="1" />');}});$DropObj.prev('input[type=file]').val('');$DropObj.removeClass('Uploading');},error:function(){$DropObj.removeClass('Uploading');}});});if(FileTypeNotAllowed.length||FilesTooBig.length||NoSpaceLeft.length||AttemptedToUploadAgain.length){FileTypeNotAllowedText='';FilesTooBigText='';AttemptedToUploadAgainText='';NoSpaceLeftText='';if(FileTypeNotAllowed.length){FileTypeNotAllowedText=Core.Language.Translate('The following files are not allowed to be uploaded: %s','<br>'+FileTypeNotAllowed.join(',<br>')+'<br><br>');}
if(FilesTooBig.length){FilesTooBigText=Core.Language.Translate('The following files exceed the maximum allowed size per file of %s and were not uploaded: %s',MaxSizePerFileHR,'<br>'+FilesTooBig.join(',<br>')+'<br><br>');}
if(AttemptedToUploadAgain.length){AttemptedToUploadAgainText=Core.Language.Translate('The following files were already uploaded and have not been uploaded again: %s','<br>'+AttemptedToUploadAgain.join(',<br>')+'<br><br>');}
if(NoSpaceLeft.length){NoSpaceLeftText=Core.Language.Translate('No space left for the following files: %s','<br>'+NoSpaceLeft.join(',<br>'))
+'<br><br>'
+Core.Language.Translate('Available space %s of %s.',Core.App.HumanReadableDataSize(WebMaxFileUpload-UsedSpace),Core.App.HumanReadableDataSize(WebMaxFileUpload));}
Core.UI.Dialog.ShowAlert(Core.Language.Translate('Upload information'),FileTypeNotAllowedText+FilesTooBigText+AttemptedToUploadAgainText+NoSpaceLeftText);}}
$('.AttachmentList').each(function(){if($(this).find('tbody tr').length){$('.AttachmentList').show();}});$('.AttachmentList').on('click','.AttachmentDelete',function(){var $TriggerObj=$(this),$AttachmentListContainerObj=$TriggerObj.closest('.AttachmentListContainer'),$UploadFieldObj=$AttachmentListContainerObj.next('.AjaxDnDUpload'),FormID=$UploadFieldObj.data('form-id')?$UploadFieldObj.data('form-id'):$(this).closest('form').find('input[name=FormID]').val(),Data={Action:$(this).data('delete-action')?$(this).data('delete-action'):'AjaxAttachment',Subaction:'Delete',FileID:$(this).data('file-id'),FormID:FormID,ObjectID:$(this).data('object-id'),FieldID:$(this).data('field-id'),};$TriggerObj.closest('.AttachmentListContainer').find('.Busy').fadeIn();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(Response){if(Response&&Response.Message&&Response.Message=='Success'){$TriggerObj.closest('tr').fadeOut(function(){$(this).remove();if(Response.Data&&Response.Data.length){$.each(Response.Data,function(index,Attachment){$AttachmentListContainerObj.find('.AttachmentList td:contains('+Attachment.Filename+')').closest('tr').find('a').data('file-id',Attachment.FileID);});$AttachmentListContainerObj.find('.Busy').fadeOut();}
else{$AttachmentListContainerObj.find('.AttachmentList').hide();$AttachmentListContainerObj.find('.Busy').hide();$('#AttachmentExists').remove();}});}
else{alert(Core.Language.Translate('An unknown error occurred when deleting the attachment. Please try again. If the error persists, please contact your system administrator.'));$AttachmentListContainerObj.find('.Busy').hide();}});return false;});$('input[type=file].AjaxDnDUpload').each(function(){var IsMultiple=($(this).attr('multiple')=='multiple'),UploadContainer=Core.Template.Render('AjaxDnDUpload/UploadContainer',{'IsMultiple':IsMultiple});$(this)
.val('')
.hide()
.on('change',function(Event){UploadFiles(Event.target.files,$(this).next('.DnDUpload'));})
.after($(UploadContainer))
.next('.DnDUpload')
.on('click keydown',function(Event){if(Event.keyCode&&Event.keyCode==9){return true;}
if(Event.keyCode&&(Event.keyCode!=13&&Event.keyCode!=32)){return false;}
if(!IsMultiple&&$(this).closest('.Field').find('.AttachmentList tbody tr').length>0){alert(Core.Language.Translate("Sorry, you can only upload one file here."));return false;}
$(this).prev('input.AjaxDnDUpload').trigger('click');})
.on('drag dragstart dragend dragover dragenter dragleave drop',function(Event){Event.preventDefault();Event.stopPropagation();})
.on('dragover dragenter',function(){$(this).addClass('DragOver');})
.on('dragleave dragend drop',function(){$(this).removeClass('DragOver');})
.on('drop',function(Event){UploadFiles(Event.originalEvent.dataTransfer.files,$(this));});});};TargetNS.InitStickyElement=function(){var Position=$('.StickyElement').offset(),Width=$('.StickyElement').outerWidth(),$Element=$('.StickyElement'),Visible=$('.StickyElement').is(':visible');if(!Visible){return;}
if(Core.App.Responsive.IsSmallerOrEqual(Core.App.Responsive.GetScreenSize(),'ScreenL')){return;}
if(!$Element.length||$Element.length>1){return;}
if($Element.hasClass('IsSticky')){return;}
function RepositionElement($Element,Width){if($(window).scrollTop()>Position.top){if($Element.hasClass('IsSticky')){return false;}
$Element.css({'position':'fixed','top':'9px','width':Width}).addClass('IsSticky');}
else{$Element.css('position','static').removeClass('IsSticky');}}
RepositionElement($Element,Width);$(window).off('scroll.StickyElement').on('scroll.StickyElement',function(){RepositionElement($Element,Width);});};TargetNS.Init=function(){Core.UI.InitWidgetActionToggle();Core.UI.InitWidgetTabs();Core.UI.InitMessageBoxClose();Core.UI.InitMasterAction();Core.UI.InitAjaxDnDUpload();Core.UI.InitStickyElement();};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.InputFields=(function(TargetNS){var Config={InputFieldPadding:3,SelectionBoxOffsetLeft:5,SelectionBoxOffsetRight:5,ErrorClass:'Error',ServerErrorClass:'ServerError',FadeDuration:150,ResizeEvent:'onorientationchange'in window?'orientationchange':'resize',ResizeTimeout:0,SafeMargin:30,MaxNumberOfOptions:1000,MinQueryLength:4,Diacritics:{"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u0152":"OE","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u1E9E":"SS","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u0153":"oe","\u0276":"oe","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u017F":"s","\u1E9B":"s","\u00DF":"ss","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z","\uFF10":"0","\u2080":"0","\u24EA":"0","\u2070":"0","\u00B9":"1","\u2474":"1","\u2081":"1","\u2776":"1","\u24F5":"1","\u2488":"1","\u2460":"1","\uFF11":"1","\u00B2":"2","\u2777":"2","\u2475":"2","\uFF12":"2","\u2082":"2","\u24F6":"2","\u2461":"2","\u2489":"2","\u00B3":"3","\uFF13":"3","\u248A":"3","\u2476":"3","\u2083":"3","\u2778":"3","\u24F7":"3","\u2462":"3","\u24F8":"4","\u2463":"4","\u248B":"4","\uFF14":"4","\u2074":"4","\u2084":"4","\u2779":"4","\u2477":"4","\u248C":"5","\u2085":"5","\u24F9":"5","\u2478":"5","\u277A":"5","\u2464":"5","\uFF15":"5","\u2075":"5","\u2479":"6","\u2076":"6","\uFF16":"6","\u277B":"6","\u2086":"6","\u2465":"6","\u24FA":"6","\u248D":"6","\uFF17":"7","\u2077":"7","\u277C":"7","\u24FB":"7","\u248E":"7","\u2087":"7","\u247A":"7","\u2466":"7","\u2467":"8","\u248F":"8","\u24FC":"8","\u247B":"8","\u2078":"8","\uFF18":"8","\u277D":"8","\u2088":"8","\u24FD":"9","\uFF19":"9","\u2490":"9","\u277E":"9","\u247C":"9","\u2089":"9","\u2468":"9","\u2079":"9"}};TargetNS.Activate=function($Context){if(parseInt(Core.Config.Get('InputFieldsActivated'),10)===1){TargetNS.InitSelect($('select.Modernize',$Context));}};TargetNS.Deactivate=function($Context){$('select.Modernize',$Context).each(function(Index,SelectObj){var $SelectObj=$(SelectObj),$ShowTreeObj=$SelectObj.next('.ShowTreeSelection');if($SelectObj.data('modernized')){$('#'+Core.App.EscapeSelector($SelectObj.data('modernized'))).parents('.InputField_Container')
.blur()
.remove();$SelectObj.show()
.removeData('modernized');$ShowTreeObj.show();}});};function InitCallback(){TargetNS.Activate();}
TargetNS.Init=function(){InitCallback();Core.App.Subscribe('Event.UI.ToggleWidget',InitCallback);};function CheckAvailability($SelectObj,$SearchObj,$InputContainerObj){if($SelectObj.attr('disabled')||$SearchObj.data('form-disabled')){$SearchObj.attr('disabled','disabled');$SearchObj.attr('readonly','readonly');$InputContainerObj.addClass('AlreadyDisabled');return;}
$SearchObj.prop('readonly',false);$InputContainerObj.removeClass('AlreadyDisabled');if($SelectObj.find('option')
.not("[value='']")
.not("[value='-||']")
.not('[disabled]')
.length===0)
{$SearchObj
.attr('readonly','readonly')
.attr('title',Core.Language.Translate('Not available'));$InputContainerObj.find('.InputField_Selection').remove();$InputContainerObj.find('.InputField_More').remove();}
else{$SearchObj
.removeAttr('title')
.prop('readonly',false)
.val('');}}
function ValidateFormElement($SelectObj){var $FormObj=$SelectObj.closest('form');if($FormObj.hasClass('Validate')){Core.Form.Validate.ValidateElement($SelectObj);}}
function CloseOpenSelections($Context){$('select.Modernize',$Context).each(function(){var Selector=Core.App.EscapeSelector($(this).data('modernized'));if(!Selector){return;}
$('#'+Selector).filter('[aria-expanded=true]').trigger('blur');});}
function ShowSelectionBoxes($SelectObj,$InputContainerObj){var Selection,SelectionLength,$SelectionFilterObj,i=0,OffsetLeft=0,OffsetRight=Config.SelectionBoxOffsetRight,MoreBox=false,Multiple=($SelectObj.attr('multiple')!==''&&$SelectObj.attr('multiple')!==undefined)?true:false,PossibleNone=false,MaxWidth,$SearchObj=$InputContainerObj.find('.InputField_Search'),$TempMoreObj;if($SearchObj.attr('aria-expanded'))return;if($SearchObj.attr('readonly'))return;$InputContainerObj.find('.InputField_Selection').remove();$InputContainerObj.find('.InputField_SelectionFilter').remove();$InputContainerObj.find('.InputField_More').remove();$SelectObj.find('option').each(function(Index,Option){if($(Option).attr('value')===''||$(Option).attr('value')==='||-'){PossibleNone=true;return true;}});if($SelectObj.attr('size')&&parseInt($SelectObj.attr('size'),10)>1){PossibleNone=true;}
if($SelectObj.val()){MaxWidth=$SearchObj.width()-Config.SelectionBoxOffsetRight-Config.InputFieldPadding;if($.isArray($SelectObj.val())){Selection=$.unique($SelectObj.val());SelectionLength=Selection.length;}else{Selection=[$SelectObj.val()];SelectionLength=1;}
if(SelectionLength>1){$TempMoreObj=$('<div />').hide()
.addClass('InputField_More')
.text(Core.Language.Translate("and %s more...").replace(/%s/,'##'))
.appendTo($InputContainerObj);MaxWidth-=$TempMoreObj.outerWidth();$TempMoreObj.remove();}
$.each(Selection,function(Index,Value){var $SelectionObj,Text,$TextObj,$RemoveObj;if(Value===''||Value==='||-'){return true;}
$SelectionObj=$('<div />').appendTo($InputContainerObj);$SelectionObj.addClass('InputField_Selection')
.data('value',Value);Text=$SelectObj.find('option[value="'+Core.App.EscapeSelector(Value)+'"]').first().text().trim();$TextObj=$('<div />').appendTo($SelectionObj);$TextObj.addClass('Text')
.text(Text)
.off('click.InputField').on('click.InputField',function(){$SearchObj.trigger('focus');});if(PossibleNone||Multiple){$RemoveObj=$('<div />').appendTo($SelectionObj);$RemoveObj.addClass('Remove')
.append($('<a />').attr('href','#')
.attr('title',Core.Language.Translate('Remove selection'))
.text('x')
.attr('role','button')
.attr('tabindex','-1')
.attr('aria-label',Core.Language.Translate('Remove selection')+': '+Text)
.off('click.InputField').on('click.InputField',function(){var HasEmptyElement=$SelectObj.find('option[value=""]').length===0?false:true,SelectedValue=$(this).parents('.InputField_Selection')
.data('value');Selection.splice(Selection.indexOf(SelectedValue),1);if(HasEmptyElement&&Selection.length===0){$SelectObj.val('');}
else{$SelectObj.val(Selection);}
ShowSelectionBoxes($SelectObj,$InputContainerObj);setTimeout(function(){$SelectObj.trigger('change');ValidateFormElement($SelectObj);},0);if(Multiple){RefreshSelectionFilter($SelectObj,null);}
return false;}));}
if(OffsetLeft===0){OffsetLeft=Config.SelectionBoxOffsetLeft;}
if(OffsetLeft+$SelectionObj.outerWidth()<MaxWidth){if($('body').hasClass('RTL')){$SelectionObj.css('right',OffsetLeft+'px')
.show();}
else{$SelectionObj.css('left',OffsetLeft+'px')
.show();}}else{if(i===0){while(MaxWidth>0&&OffsetLeft+$SelectionObj.outerWidth()>=MaxWidth){$TextObj.text($TextObj.text().substring(0,$TextObj.text().length-4)
+'...');}
if($('body').hasClass('RTL')){$SelectionObj.css('right',OffsetLeft+'px')
.show();}
else{$SelectionObj.css('left',OffsetLeft+'px')
.show();}}
else{if(!MoreBox){$SelectionObj.after($('<div />').addClass('InputField_More')
.css(($('body').hasClass('RTL')?'right':'left'),OffsetLeft+'px')
.text(Core.Language.Translate("and %s more...").replace(/%s/,SelectionLength-i))
.on('click.InputField',function(){$SearchObj.trigger('focus');}));MoreBox=true;}
$SelectionObj.remove();return false;}}
OffsetLeft+=$SelectionObj.outerWidth()+OffsetRight;i++;});if(Multiple&&MoreBox){$SelectionFilterObj=$('<a />').appendTo($InputContainerObj);$SelectionFilterObj.addClass('InputField_Action InputField_SelectionFilter')
.attr('href','#')
.attr('title',Core.Language.Translate('Show current selection'))
.css(($('body').hasClass('RTL')?'left':'right'),Config.SelectionBoxOffsetRight+'px')
.append($('<i />').addClass('fa fa-eye'))
.attr('role','button')
.attr('tabindex','-1')
.attr('aria-label',Core.Language.Translate('Current selection'))
.off('click.InputField').on('click.InputField',function(){if($SelectObj.data('filters')!==''&&$SelectObj.data('filters')!==undefined){$.each($SelectObj.data('filters').Filters,function(Index,Filter){if(Filter.Name===Core.Language.Translate('Current selection')){$SelectObj.data('filtered',Index+1);$SelectObj.data('expand-filters',true);$SelectObj.data('selection-filter',true);ApplyFilter($SelectObj,null);$SearchObj=$('#'+Core.App.EscapeSelector($SelectObj.data('modernized')));$SearchObj.width($SelectObj.outerWidth())
.trigger('blur');CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);setTimeout(function(){$SearchObj.focus();},0);return true;}});}
return false;});}}}
function HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj){if($ListContainerObj&&$TreeContainerObj){$ListContainerObj.fadeOut(Config.FadeDuration,function(){$TreeContainerObj.find('.jstree')
.jstree('destroy')
.remove();$(this).remove();Core.App.Publish('Event.UI.InputFields.Closed',$SearchObj);});$InputContainerObj.find('.InputField_ClearSearch')
.remove();$SearchObj.removeAttr('aria-expanded');}
if(!$SearchObj.attr('readonly')){$SearchObj.val('');}
ShowSelectionBoxes($SelectObj,$InputContainerObj);if($SelectObj.data('changed')){$SelectObj.removeData('changed');setTimeout(function(){$SelectObj.trigger('change');ValidateFormElement($SelectObj);},0);}}
function RegisterActionEvent($TreeObj,$ActionObj,ActionType){switch(ActionType){case'SelectAll':$ActionObj.off('click.InputField').on('click.InputField',function(){$TreeObj.jstree('open_all');$TreeObj.find('li')
.not('.jstree-clicked,.Disabled')
.each(function(){$TreeObj.jstree('select_node',this);});return false;}).on('mousedown.InputField',function(){return false;});break;case'SelectAll_Search':$ActionObj.off('click.InputField').on('click.InputField',function(){$TreeObj.find('li:visible .jstree-search')
.not('.jstree-clicked,.Disabled')
.each(function(){$TreeObj.jstree('select_node',this);});return false;});break;case'ClearAll':$ActionObj.off('click.InputField').on('click.InputField',function(){$TreeObj.jstree('deselect_node',$TreeObj.jstree('get_selected'));return false;}).on('mousedown.InputField',function(){return false;});break;case'ClearAll_Search':$ActionObj.off('click.InputField').on('click.InputField',function(){var SelectedNodesIDs=$TreeObj.jstree('get_selected');$.each(SelectedNodesIDs,function(){var $Node=$('#'+this);if($Node.is(':visible')){$TreeObj.jstree('deselect_node',this);}});return false;});break;case'Confirm':$ActionObj.off('click.InputField').on('click.InputField',function(){$TreeObj.blur();return false;});break;}}
function ApplyFilter($SelectObj,$ToolbarContainerObj){var Selection,FilterIndex;if($SelectObj.val()){if($.isArray($SelectObj.val())){Selection=$SelectObj.val();}else{Selection=[$SelectObj.val()];}
$SelectObj.data('selection',Selection);}
$SelectObj.empty();if($SelectObj.data('filtered')&&$SelectObj.data('filtered')!=='0'){FilterIndex=parseInt($SelectObj.data('filtered'),10)-1;$.each($SelectObj.data('filters').Filters[FilterIndex].Data,function(Index,Option){var $OptionObj=$('<option />');$OptionObj.attr('value',Option.Key)
.text(Option.Value);if(Option.Disabled){$OptionObj.attr('disabled',true);}
if(Option.Selected){$OptionObj.attr('selected',true);}
$SelectObj.append($OptionObj);});if($ToolbarContainerObj){if(!$ToolbarContainerObj.find('.InputField_Filters')
.hasClass('Active'))
{$ToolbarContainerObj.find('.InputField_Filters')
.addClass('Active')
.prepend('<i class="fa fa-filter" /> ');}}}
else{if($ToolbarContainerObj){$ToolbarContainerObj.find('.InputField_Filters')
.removeClass('Active')
.find('.fa.fa-filter')
.remove();}
$SelectObj.append($SelectObj.data('original'));$SelectObj.data('expand-filters',false);}
if($SelectObj.data('selection')){$SelectObj.val($SelectObj.data('selection'));$SelectObj.removeData('selection');}}
function RegisterFilterEvent($SelectObj,$InputContainerObj,$ToolbarContainerObj,$FilterObj,ActionType){var $SearchObj;switch(ActionType){case'ShowFilters':$FilterObj.off('click.InputField').on('click.InputField',function(){var $FiltersListObj=$ToolbarContainerObj.find('.InputField_FiltersList');if($FiltersListObj.is(':visible')){$FiltersListObj.hide();}
else{$FiltersListObj.show();}
return false;}).on('mousedown.InputField',function(){return false;});break;case'Filter':$FilterObj.off('click.InputField').on('click.InputField',function(Event){$FilterObj.siblings('input').each(function(Index,Filter){if($(Filter).attr('id')!==$FilterObj.attr('id')){$(Filter).attr('checked',false);}});Event.stopPropagation();})
.off('change.InputField').on('change.InputField',function(){if(this.checked){$SelectObj.data('filtered',$FilterObj.data('index'));}
else{$SelectObj.data('filtered','0');}
ApplyFilter($SelectObj,$ToolbarContainerObj);$SearchObj=$('#'+Core.App.EscapeSelector($SelectObj.data('modernized')));$SearchObj.width($SelectObj.outerWidth())
.trigger('blur');CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);setTimeout(function(){$SearchObj.focus();},0);});break;}}
function FocusNextElement($Element){var $TabbableElements=$Element.closest('form')
.find(':tabbable:visible')
.not($Element.closest('.InputField_Container').find(':tabbable:visible'))
.add($Element);setTimeout(function(){$TabbableElements.eq($TabbableElements.index($Element)+1)
.focus();},0);}
function FocusPreviousElement($Element){var $TabbableElements=$Element.closest('form')
.find(':tabbable:visible')
.not($Element.closest('.InputField_Container').find(':tabbable:visible'))
.add($Element);setTimeout(function(){$TabbableElements.eq($TabbableElements.index($Element)-1)
.focus();},0);}
function BuildSelectionFilter($SelectObj){var Filters=new Object(),SelectionFilterIndex,SelectionFilter,Elements;if($SelectObj.data('filters')!==''&&$SelectObj.data('filters')!==undefined){Filters.Filters=$SelectObj.data('filters').Filters;$.each(Filters.Filters,function(Index,Filter){if(Filter.Name===Core.Language.Translate('Current selection')){SelectionFilterIndex=Index;SelectionFilter=Filter;Filters.Filters.splice(SelectionFilterIndex,1);SelectionFilter.Data=new Array();return true;}});}else{Filters.Filters=new Array();}
if(Filters.Filters.length===0||!SelectionFilterIndex){SelectionFilter=new Object();SelectionFilter.Name=Core.Language.Translate('Current selection');SelectionFilter.Data=new Array();}
Elements=Core.UI.TreeSelection.BuildElementsArray($SelectObj,$SelectObj.data('tree',true));SelectionFilter.Data=GetSelectionFilterData(Elements);function GetSelectionFilterData(Elements,Data){if(Data===undefined){Data=new Array();}
$.each(Elements,function(Index,Element){if(typeof Element==='object'){if(Element.state){if(Element.state.selected){Data.push({'Key':Element.ID,'Value':Element.Name});}
if(Element.children.length>0){return GetSelectionFilterData(Element.children,Data);}}}});return Data;}
if(SelectionFilter.Data.length==0){SelectionFilter.Data.push({'Key':'','Value':''});}
Filters.Filters.push(SelectionFilter);$SelectObj.data('filters',Filters);}
function RefreshSelectionFilter($SelectObj,$ToolbarContainerObj){var Filters=new Object(),SelectionFilterIndex,$FilterObj;BuildSelectionFilter($SelectObj);if($SelectObj.data('filters')!==''&&$SelectObj.data('filters')!==undefined){Filters.Filters=$SelectObj.data('filters').Filters;$.each(Filters.Filters,function(Index,Filter){if(Filter.Name===Core.Language.Translate('Current selection')){SelectionFilterIndex=Index;if($ToolbarContainerObj){$FilterObj=$ToolbarContainerObj.find('input[type="checkbox"]').filter(function(){return $(this).data('index')===SelectionFilterIndex+1;});}
return true;}});}
if($SelectObj.val()!==null&&$SelectObj.val().length===0){$SelectObj.data('filtered','0');$SelectObj.data('selection',[]);ApplyFilter($SelectObj,$ToolbarContainerObj);if($FilterObj){$FilterObj.attr('disabled',true)
.attr('checked',false);}}else{if(SelectionFilterIndex===parseInt($SelectObj.data('filtered'),10)-1){ApplyFilter($SelectObj,$ToolbarContainerObj);}
if($FilterObj){$FilterObj.attr('disabled',false);}}}
TargetNS.RemoveDiacritics=function(Str){var Chars=Str.split(''),i=Chars.length-1,Alter=false,Ch;for(;i>=0;i--){Ch=Chars[i];if(Config.Diacritics.hasOwnProperty(Ch)){Chars[i]=Config.Diacritics[Ch];Alter=true;}}
if(Alter){Str=Chars.join('');}
return Str;}
TargetNS.InitSelect=function($SelectFields){if(!$SelectFields.length){return false;}
$SelectFields.each(function(Index,SelectObj){var $ToolbarContainerObj,$InputContainerObj,$TreeContainerObj,$ListContainerObj,$ContainerObj,$ToolbarObj,$SearchObj,$SelectObj,$LabelObj,Multiple,TreeView,Focused,TabFocus,SearchID,SkipFocus,Searching,Filterable,SelectWidth,SearchLabel,$FiltersObj,$ShowTreeObj,$FiltersListObj,WholeRowClicked,ScrollEventListener;if($(SelectObj).children('option').length>Config.MaxNumberOfOptions){return;}
if($(SelectObj).is(':visible')){$SelectObj=$(SelectObj);Multiple=($SelectObj.attr('multiple')!==''&&$SelectObj.attr('multiple')!==undefined)?true:false;Filterable=($SelectObj.data('filters')!==''&&$SelectObj.data('filters')!==undefined)?true:false;TreeView=false;SkipFocus=false;TabFocus=false;Searching=false;Focused=null;SelectWidth=$SelectObj.outerWidth();$SelectObj.hide();$ShowTreeObj=$SelectObj.next('.ShowTreeSelection');if($SelectObj.data('tree')||$ShowTreeObj.length){if($ShowTreeObj.length){$ShowTreeObj.hide();}
$SelectObj.data('tree',true);TreeView=true;}
$ContainerObj=$('<div />').insertBefore($SelectObj);$ContainerObj.addClass('InputField_Container')
.attr('tabindex','-1');$InputContainerObj=$('<div />').appendTo($ContainerObj);$InputContainerObj.addClass('InputField_InputContainer');SearchID=$SelectObj.attr('id');if(!SearchID){SearchID=Core.UI.GetID($SelectObj);}
SearchID+='_Search';$SelectObj.data('modernized',SearchID);$SearchObj=$('<input />').appendTo($InputContainerObj);$SearchObj.attr('id',SearchID)
.addClass('InputField_Search')
.attr('type','text')
.attr('role','search')
.attr('autocomplete','off');if($SelectObj.hasClass('Small')){$SearchObj.addClass('Small');}
$SearchObj.width(SelectWidth);Core.App.Subscribe('Event.UI.InputFields.Resize',function(){$SearchObj.blur().hide();SelectWidth=$SelectObj.show().outerWidth();$SelectObj.hide();$SearchObj.width(SelectWidth).show();});if($SelectObj.attr('id')){$LabelObj=$('label[for="'+Core.App.EscapeSelector($SelectObj.attr('id'))+'"]');if($LabelObj.length>0){$LabelObj.on('click.InputField',function(){$SearchObj.focus();});$SearchObj.attr('aria-label',$LabelObj.text());}}
if(!$LabelObj||$LabelObj.length===0){if($SelectObj.attr('aria-label')){SearchLabel=$SelectObj.attr('aria-label');}
else if($SelectObj.attr('title')){SearchLabel=$SelectObj.attr('title');}
else{SearchLabel=SearchID.replace(/_/g,' ');}
$SearchObj.attr('aria-label',SearchLabel);}
if($SelectObj.hasClass(Config.ErrorClass)){$SearchObj.addClass(Config.ErrorClass);}
if($SelectObj.hasClass(Config.ServerErrorClass)){$SearchObj.addClass(Config.ServerErrorClass);}
if(Multiple){Filterable=true;BuildSelectionFilter($SelectObj);}
if(Filterable){$SelectObj.data('original',$SelectObj.children());if($SelectObj.data('filtered')&&$SelectObj.data('filtered')!=='0')
{ApplyFilter($SelectObj,$ToolbarContainerObj);}}
ShowSelectionBoxes($SelectObj,$InputContainerObj);CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);Core.App.Subscribe('Event.Form.DisableForm',function($Form){if($Form.find($SearchObj).attr('readonly')){$SearchObj.data('form-disabled',true);CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);}});Core.App.Subscribe('Event.Form.EnableForm',function($Form){if(!$Form.find($SearchObj).attr('readonly')){$SearchObj.removeData('form-disabled');CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);}});Core.App.Subscribe('Event.UI.Dialog.ShowDialog.DragStart',function(){CloseOpenSelections();});Core.App.Subscribe('Event.UI.Dialog.ShowDialog.BeforeOpen',function(){CloseOpenSelections();});Core.App.Subscribe('Event.UI.Dialog.CloseDialog.Close',function(){CloseOpenSelections();});Core.App.Subscribe('Event.UI.RichTextEditor.Focus',function(){CloseOpenSelections();});Core.App.Subscribe('Event.Agent.TicketZoom.ArticleClick',function(){CloseOpenSelections();});Core.App.Subscribe('Event.Agent.TicketOverview.InlineActions.Hidden',function($InlineActionsContainer){setTimeout(function(){CloseOpenSelections($InlineActionsContainer);},0);});$SearchObj.off('focus.InputField')
.on('focus.InputField',function(){var TreeID,$TreeObj,SelectedID,OldSelectedID,Elements,SelectedNodes,AvailableHeightBottom,AvailableHeightTop,AvailableMaxHeight,PossibleNone,$ClearAllObj,$SelectAllObj,$ConfirmObj,ErrorTooltipPosition='TongueTop';function CalculateListPosition(){AvailableHeightBottom=parseInt($(window).scrollTop()+$(window).height()
-($InputContainerObj.offset().top
+$InputContainerObj.outerHeight()
+Config.SafeMargin),10);AvailableHeightTop=parseInt($InputContainerObj.offset().top-$(window).scrollTop()-Config.SafeMargin,10);$ListContainerObj
.css({left:$InputContainerObj.offset().left});if(AvailableHeightTop>AvailableHeightBottom){AvailableMaxHeight=AvailableHeightTop;$SearchObj.removeClass('ExpandToBottom')
.addClass('ExpandToTop');$ListContainerObj
.removeClass('ExpandToBottom')
.addClass('ExpandToTop')
.css({top:'auto',bottom:parseInt($('body').height()-$InputContainerObj.offset().top,10)});}
else{AvailableMaxHeight=AvailableHeightBottom;$SearchObj.removeClass('ExpandToTop')
.addClass('ExpandToBottom');$ListContainerObj
.removeClass('ExpandToTop')
.addClass('ExpandToBottom')
.css({top:parseInt($InputContainerObj.offset().top+$InputContainerObj.outerHeight(),10),bottom:'auto'});}}
$SelectObj.find('option').each(function(Index,Option){if($(Option).attr('value')===''||$(Option).attr('value')==='||-'){PossibleNone=true;return true;}});function ShowErrorToolTip(){if($SelectObj.attr('id')){if($SearchObj.hasClass('ExpandToTop')){ErrorTooltipPosition='TongueBottom';}
else{ErrorTooltipPosition='TongueTop';}
if($SelectObj.hasClass(Config.ErrorClass)){Core.Form.ErrorTooltips.ShowTooltip($SearchObj,$('#'+Core.App.EscapeSelector($SelectObj.attr('id'))+Config.ErrorClass).html(),ErrorTooltipPosition);}
if($SelectObj.hasClass(Config.ServerErrorClass)){Core.Form.ErrorTooltips.ShowTooltip($SearchObj,$('#'+Core.App.EscapeSelector($SelectObj.attr('id'))+Config.ServerErrorClass).html(),ErrorTooltipPosition);}}}
ShowErrorToolTip();Focused=this;SkipFocus=false;if($SearchObj.attr('aria-expanded')){return false;}
if($SearchObj.attr('readonly')){return false;}
CloseOpenSelections();$SearchObj.attr('aria-expanded',true);$InputContainerObj.find('.InputField_Selection').remove();$InputContainerObj.find('.InputField_SelectionFilter').remove();$InputContainerObj.find('.InputField_More').remove();$ListContainerObj=$('<div />')
.addClass('InputField_ListContainer')
.attr('tabindex','-1')
.appendTo('body');CalculateListPosition();ScrollEventListener=function(Event){if(!$ListContainerObj){return;}
CalculateListPosition();ShowErrorToolTip();if(Event.target!==document&&!$(Event.target).hasClass('InputField_TreeContainer')){if($InputContainerObj.position().top+$InputContainerObj.outerHeight()-$(Event.target).outerHeight()>=0)
{$ListContainerObj.hide();}else{$ListContainerObj.show();}}};document.addEventListener('scroll',ScrollEventListener,true);$TreeContainerObj=$('<div />').appendTo($ListContainerObj);$TreeContainerObj.addClass('InputField_TreeContainer')
.attr('tabindex','-1');if(Filterable){AvailableMaxHeight-=$SelectObj.data('filters').Filters.length*Config.SafeMargin;}
if(AvailableMaxHeight<90){AvailableMaxHeight=90;}
$TreeContainerObj.css('max-height',AvailableMaxHeight+'px');$TreeContainerObj.width($SearchObj.width()
+Config.InputFieldPadding*2);TreeID=$SelectObj.attr('id');if(!TreeID){TreeID=Core.UI.GetID($SelectObj);}
TreeID+='_Select';$TreeObj=$('<div id="'+Core.App.EscapeSelector(TreeID)+'"><ul></ul></div>');SelectedID=$SelectObj.val();Elements={};SelectedNodes=[];Elements=Core.UI.TreeSelection.BuildElementsArray($SelectObj,TreeView);if(Elements.HighestLevel===0&&!$SelectObj.data('tree')){TreeView=false;}
$TreeObj.jstree({core:{animation:70,data:Elements,multiple:Multiple,expand_selected_onload:true,check_callback:true,themes:{name:'InputField',variant:(TreeView)?'Tree':'NoTree',icons:false,dots:false,url:false}},search:{show_only_matches:true,show_only_matches_children:true,search_callback:function(Search,Node){var SearchString=TargetNS.RemoveDiacritics(Search),NodeString=TargetNS.RemoveDiacritics(Node.text);return((NodeString.toLowerCase().indexOf(SearchString.toLowerCase())!==-1||NodeString.toUpperCase().indexOf(SearchString.toUpperCase())!==-1));}},plugins:['multiselect','search','wholerow']})
.on('focus.jstree','.jstree-anchor',function(){if(!SkipFocus){Focused=this;}else{SkipFocus=false;}})
.on('focus.jstree',function(){if(!SkipFocus){Focused=this;}else{SkipFocus=false;}
if(TabFocus){$($TreeObj.find('a.jstree-anchor:visible')
.not('.jstree-disabled')
.get(0)).trigger('focus.jstree');TabFocus=false;}})
.on('mousedown.jstree',function(Event){var $Target=$(Event.target);if($Target.hasClass('jstree-wholerow')){WholeRowClicked=$Target;}})
.on('blur.jstree','.jstree-anchor',function(){setTimeout(function(){if(!Focused){HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj);}
Focused=null;},0);})
.on('blur.jstree',function(){setTimeout(function(){if(!Focused&&!WholeRowClicked){HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj);}
Focused=null;WholeRowClicked=null;},0);})
.on('select_node.jstree',function(Node,Selected,Event){var $SelectedNode=$('#'+Selected.node.id),SelectedNodesIDs;if($SelectedNode.hasClass('Disabled')||!$SelectedNode.is(':visible')){$TreeObj.jstree('deselect_node',Selected.node);}
SelectedNodes=[];SelectedNodesIDs=$TreeObj.jstree('get_selected');$.each(SelectedNodesIDs,function(){var $Node=$('#'+this);SelectedNodes.push($Node.data('id'));});$SelectObj.val(SelectedNodes);OldSelectedID=SelectedID;SelectedID=$SelectObj.val();if(!Multiple){SkipFocus=true;$TreeObj.blur();}
RefreshSelectionFilter($SelectObj,$ToolbarContainerObj);$SelectObj.data('changed',true);return false;})
.on('click.jstree',function(Event){var $HoveredNode,HoveredValue;Event.preventDefault();if(typeof Event.originalEvent!=='undefined'&&Event.originalEvent.type==='keydown'&&Event.originalEvent.which===$.ui.keyCode.ENTER){$HoveredNode=$TreeObj.find('.jstree-hovered');HoveredValue=$HoveredNode.closest('li').data('id');if(!Multiple){if(HoveredValue!==OldSelectedID){$TreeObj.jstree('deselect_all');$TreeObj.jstree('select_node',$HoveredNode.get(0));}
else{if(PossibleNone){$TreeObj.jstree('deselect_all');$SelectObj.val('');}}
FocusNextElement($SearchObj);}}
Event.stopPropagation();return false;})
.on('deselect_node.jstree',function(){var SelectedNodesIDs,HasEmptyElement=$SelectObj.find('option[value=""]').length===0?false:true;if(Multiple){SelectedNodes=[];SelectedNodesIDs=$TreeObj.jstree('get_selected');$.each(SelectedNodesIDs,function(){var $Node=$('#'+this);SelectedNodes.push($Node.data('id'));});if(HasEmptyElement&&SelectedNodes.length===0){$SelectObj.val('');}
else{$SelectObj.val(SelectedNodes);}
OldSelectedID=SelectedID;SelectedID=$SelectObj.val();RefreshSelectionFilter($SelectObj,$ToolbarContainerObj);$SelectObj.data('changed',true);}})
.on('dblclick.jstree','.jstree-wholerow',function(Event){var Node;if(TreeView){Node=$(Event.target).closest('li');$TreeObj.jstree('toggle_node',Node);}})
.keydown(function(Event){var $HoveredNode;switch(Event.which){case $.ui.keyCode.TAB:$HoveredNode=$TreeObj.find('.jstree-hovered');if(!Multiple){$TreeObj.jstree('deselect_all');}
$TreeObj.jstree('select_node',$HoveredNode.get(0));if(Event.shiftKey){FocusPreviousElement($SearchObj);}
else{FocusNextElement($SearchObj);}
break;case $.ui.keyCode.ESCAPE:Event.preventDefault();$TreeObj.blur();break;case $.ui.keyCode.SPACE:Event.preventDefault();$HoveredNode=$TreeObj.find('.jstree-hovered');if(!Multiple){if(!$HoveredNode.hasClass('jstree-clicked')){$TreeObj.jstree('deselect_all');$TreeObj.jstree('select_node',$HoveredNode.get(0));}
else{if(PossibleNone){$TreeObj.jstree('deselect_all');$SelectObj.val('');setTimeout(function(){$SelectObj.trigger('change');ValidateFormElement($SelectObj);},0);}}
FocusNextElement($SearchObj);}
else{if($HoveredNode.hasClass('jstree-clicked')){$TreeObj.jstree('deselect_node',$HoveredNode.get(0));}
else{$TreeObj.jstree('select_node',$HoveredNode.get(0));}}
break;case 65:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_SelectAll')
.click();}
break;case 68:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_ClearAll')
.click();}
break;case 70:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_Filters')
.click();$ListContainerObj.find('.InputField_FiltersList').children('input').first().focus();}
break;}})
.on('loaded.jstree',function(){if(SelectedID){if(typeof SelectedID==='object'){$.each(SelectedID,function(NodeIndex,Data){$TreeObj.jstree('select_node',$TreeObj.find('li[data-id="'+Core.App.EscapeSelector(Data)+'"]'));});}
else{$TreeObj.jstree('select_node',$TreeObj.find('li[data-id="'+Core.App.EscapeSelector(SelectedID)+'"]'));}}
Core.App.Publish('Event.UI.InputFields.Expanded',$SearchObj);});$TreeContainerObj.on('focus.InputField',function(){if(!SkipFocus){Focused=this;}else{SkipFocus=false;}}).on('blur.jstree',function(){setTimeout(function(){if(!Focused){HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj);}
Focused=null;},0);});$TreeObj
.appendTo($TreeContainerObj)
.show();$ToolbarContainerObj=$('<div />').appendTo($ListContainerObj);$ToolbarContainerObj.addClass('InputField_ToolbarContainer')
.attr('tabindex','-1')
.width($TreeContainerObj.width());$ToolbarObj=$('<ul />').appendTo($ToolbarContainerObj)
.attr('tabindex','-1')
.on('focus.InputField',function(){if(!SkipFocus){Focused=this;}else{SkipFocus=false;}}).on('blur.InputField',function(){setTimeout(function(){if(!Focused){HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj);}
Focused=null;},0);});if(Multiple){$SelectAllObj=$('<a />').addClass('InputField_SelectAll')
.attr('href','#')
.attr('role','button')
.attr('tabindex','-1')
.text(Core.Language.Translate('Select all'))
.attr('aria-label',Core.Language.Translate('Select all'))
.appendTo($ToolbarObj)
.wrap('<li />');RegisterActionEvent($TreeObj,$SelectAllObj,'SelectAll');$ClearAllObj=$('<a />').addClass('InputField_ClearAll')
.attr('href','#')
.attr('role','button')
.attr('tabindex','-1')
.text(Core.Language.Translate('Clear all'))
.attr('aria-label',Core.Language.Translate('Clear all'))
.appendTo($ToolbarObj)
.wrap('<li />');RegisterActionEvent($TreeObj,$ClearAllObj,'ClearAll');}
if(Filterable){$FiltersObj=$('<a />').addClass('InputField_Filters')
.attr('href','#')
.attr('role','button')
.attr('tabindex','-1')
.text(Core.Language.Translate('Filters'))
.attr('aria-label',Core.Language.Translate('Filters'))
.appendTo($ToolbarObj)
.wrap('<li />');RegisterFilterEvent($SelectObj,$InputContainerObj,$ToolbarContainerObj,$FiltersObj,'ShowFilters');if(!$SelectObj.data('filtered')){$SelectObj.data('filtered','0');}else if($SelectObj.data('filtered')!=='0'){$FiltersObj.addClass('Active')
.prepend('<i class="fa fa-filter" /> ');}
$FiltersListObj=$('<div />').appendTo($ToolbarContainerObj);$FiltersListObj.addClass('InputField_FiltersList')
.attr('tabindex','-1');if(!$SelectObj.data('expand-filters')&&$SelectObj.data('expand-filters')!=='0')
{$FiltersListObj.hide();}
$.each($SelectObj.data('filters').Filters,function(FilterIndex,Filter){var $FilterObj=$('<input />').appendTo($FiltersListObj),$SpanObj=$('<span />').appendTo($FiltersListObj);$FilterObj.attr('type','checkbox')
.attr('tabindex','-1')
.addClass('InputField_FilterCheckbox')
.data('index',FilterIndex+1);if($SelectObj.data('filtered')&&parseInt($SelectObj.data('filtered'),10)===FilterIndex+1)
{$FilterObj.attr('checked',true);}
if(Filter.Data.length===1&&(Filter.Data[0].Key===''||Filter.Data[0].Key==='||-'))
{$FilterObj.attr('disabled',true);}
Core.UI.GetID($FilterObj);$SpanObj.text(Filter.Name);$SpanObj.on('click',function(Event){$FilterObj.click();Event.stopPropagation();});$('<br />').appendTo($FiltersListObj);RegisterFilterEvent($SelectObj,$InputContainerObj,$ToolbarContainerObj,$FilterObj,'Filter');});$FiltersListObj
.on('focus','input',function(){Focused=this;})
.on('keydown','input',function(Event){var $FilterElements,FilterElementIndex;switch(Event.which){case $.ui.keyCode.TAB:$FilterElements=$FiltersListObj.find('input');FilterElementIndex=$FilterElements.index(Event.target);if(!Event.shiftKey){Event.preventDefault();Event.stopPropagation();if(FilterElementIndex+1===$FilterElements.length){$FilterElements.first().focus();}
else{$FilterElements.eq(FilterElementIndex+1).focus();}}
else{Event.preventDefault();Event.stopPropagation();if(FilterElementIndex===0){$FilterElements.last().focus();}
else{$FilterElements.eq(FilterElementIndex-1).focus();}}
break;case $.ui.keyCode.ESCAPE:$ListContainerObj.find('.InputField_Filters')
.click();$SearchObj.focus();break;case 70:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_Filters')
.click();$SearchObj.focus();}
break;}});}
if(Multiple){$ConfirmObj=$('<a />').addClass('InputField_Confirm')
.attr('href','#')
.attr('role','button')
.attr('tabindex','-1')
.text(Core.Language.Translate('Confirm'))
.attr('aria-label',Core.Language.Translate('Confirm'))
.appendTo($ToolbarObj)
.prepend('<i class="fa fa-check-square-o" /> ')
.wrap('<li />');RegisterActionEvent($TreeObj,$ConfirmObj,'Confirm');}
if($ToolbarObj.children().length===0){$ToolbarContainerObj.hide();}
$SearchObj.off('keyup.InputField').on('keyup.InputField',function(){var SearchValue=$SearchObj.val().trim(),NoMatchNodeJSON,$ClearSearchObj,SearchTimeout;window.clearTimeout(SearchTimeout);SearchTimeout=window.setTimeout(function(){if(SearchValue===''){$TreeObj.jstree('delete_node',$TreeObj.find('.jstree-no-match'));$TreeObj.jstree('clear_search');Searching=false;$SearchObj.siblings('.InputField_ClearSearch')
.remove();if(Multiple){$SelectAllObj.off('click.InputField').on('click.InputField',function(){$TreeObj.jstree('open_all');$TreeObj.find('li')
.not('.jstree-clicked,.Disabled')
.each(function(){$TreeObj.jstree('select_node',this);});return false;});$ClearAllObj.off('click.InputField').on('click.InputField',function(){$TreeObj.jstree('deselect_node',$TreeObj.jstree('get_selected'));return false;});}
return false;}
$TreeObj.jstree('delete_node',$TreeObj.find('.jstree-no-match'));$TreeObj.jstree('search',Core.App.EscapeHTML(SearchValue));Searching=true;if(Multiple){RegisterActionEvent($TreeObj,$SelectAllObj,'SelectAll_Search');RegisterActionEvent($TreeObj,$ClearAllObj,'ClearAll_Search');}
if($TreeObj.find('.jstree-search').length===0){NoMatchNodeJSON={text:Core.Language.Translate('No matches found.'),state:{disabled:true},'li_attr':{class:'Disabled jstree-no-match'}};$TreeObj.jstree('create_node',$TreeObj,NoMatchNodeJSON);$TreeObj.find('li:visible')
.not('.jstree-no-match')
.hide();}
if($SearchObj.siblings('.InputField_ClearSearch').length===0){$ClearSearchObj=$('<a />').insertAfter($SearchObj);$ClearSearchObj.addClass('InputField_Action InputField_ClearSearch')
.attr('href','#')
.attr('title',Core.Language.Translate('Clear search'))
.css(($('body').hasClass('RTL')?'left':'right'),Config.SelectionBoxOffsetRight+'px')
.append($('<i />').addClass('fa fa-times-circle'))
.attr('role','button')
.attr('tabindex','-1')
.attr('aria-label',Core.Language.Translate('Clear search'))
.off('click.InputField').on('click.InputField',function(){$SearchObj.val('');$TreeObj.jstree('delete_node',$TreeObj.find('.jstree-no-match'));$TreeObj.jstree('clear_search');Searching=false;if(Multiple){RegisterActionEvent($TreeObj,$SelectAllObj,'SelectAll');RegisterActionEvent($TreeObj,$ClearAllObj,'ClearAll');}
$(this).remove();return false;}).on('mousedown.InputField',function(){return false;});}},250);});if(!$SearchObj.parents('.Dialog').length||$SearchObj.parents('.Dialog').length&&($InputContainerObj.position().top+$InputContainerObj.outerHeight()-$SearchObj.parents('.Dialog').find('.InnerContent').outerHeight()<0)){$ListContainerObj.fadeIn(Config.FadeDuration);}})
.off('blur.InputField').on('blur.InputField',function(){document.removeEventListener('scroll',ScrollEventListener,true);setTimeout(function(){if(!Focused){HideSelectList($SelectObj,$InputContainerObj,$SearchObj,$ListContainerObj,$TreeContainerObj);}
Focused=null;},0);Core.Form.ErrorTooltips.HideTooltip();})
.keydown(function(Event){var $TreeObj=$TreeContainerObj.find('.jstree');switch(Event.which){case $.ui.keyCode.ENTER:Event.preventDefault();Event.stopPropagation();break;case $.ui.keyCode.TAB:if(!Event.shiftKey){TabFocus=true;}
Focused=null;break;case $.ui.keyCode.ESCAPE:Event.preventDefault();$TreeObj.blur();$SearchObj.blur();break;case $.ui.keyCode.UP:Event.preventDefault();$($TreeObj.find('a.jstree-anchor:visible')
.not('.jstree-disabled')
.last()
.get(0)).trigger('focus.jstree');break;case $.ui.keyCode.DOWN:Event.preventDefault();$($TreeObj.find('a.jstree-anchor:visible')
.not('.jstree-disabled')
.get(0)).trigger('focus.jstree');break;case 65:if(Event.ctrlKey||Event.metaKey){if(!Searching){Event.preventDefault();$ListContainerObj.find('.InputField_SelectAll')
.click();}}
break;case 68:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_ClearAll')
.click();}
break;case 70:if(Event.ctrlKey||Event.metaKey){Event.preventDefault();$ListContainerObj.find('.InputField_Filters')
.click();$ListContainerObj.find('.InputField_FiltersList').children('input').first().focus();}
break;}})
.off('remove.InputField').on('remove.InputField',function(){CloseOpenSelections();});$SelectObj.off('redraw.InputField').on('redraw.InputField',function(){if(!$SearchObj.is(':visible'))return;CloseOpenSelections();if(Filterable){$SelectObj.data('original',$SelectObj.children());if($SelectObj.data('filtered')&&$SelectObj.data('filtered')!=='0')
{ApplyFilter($SelectObj,$ToolbarContainerObj);}}
CheckAvailability($SelectObj,$SearchObj,$InputContainerObj);$SearchObj.width($SelectObj.outerWidth());ShowSelectionBoxes($SelectObj,$InputContainerObj);})
.off('error.InputField').on('error.InputField',function(){if($SelectObj.hasClass(Config.ErrorClass)){$SearchObj.addClass(Config.ErrorClass);}
else{$SearchObj.removeClass(Config.ErrorClass);}
if($SelectObj.hasClass(Config.ServerErrorClass)){$SearchObj.addClass(Config.ServerErrorClass);}
else{$SearchObj.removeClass(Config.ServerErrorClass);}});}});$('body').off('click.InputField').on('click.InputField',function(){if($('.InputField_ListContainer').length&&(!$(document.activeElement).parents('.InputField_Container').length||document.activeElement.tagName.toUpperCase()!=='INPUT')){CloseOpenSelections();}});return true;};TargetNS.IsEnabled=function($Element){if($Element.data('modernized')&&$Element.data('modernized')!==''){return true;}
return false;};$.jstree.defaults.multiselect={};$.jstree.plugins.multiselect=function(options,parent){this.activate_node=function(obj,e){e.ctrlKey=true;parent.activate_node.call(this,obj,e);};};$(window).on(Config.ResizeEvent+'.InputField',function(){clearTimeout(Config.ResizeTimeout);Config.ResizeTimeout=setTimeout(function(){Core.App.Publish('Event.UI.InputFields.Resize');},100);});Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI.InputFields||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Accordion=(function(TargetNS){var AccordionAnimationRunning=false;TargetNS.AnimationIsRunning=function(){return AccordionAnimationRunning;};TargetNS.StartAnimation=function(){AccordionAnimationRunning=true;};TargetNS.StopAnimation=function(){AccordionAnimationRunning=false;};TargetNS.ContentSelector=undefined;TargetNS.Init=function($Element,LinkSelector,ContentSelector){var $LinkSelectors=$Element.find(LinkSelector);if(!isJQueryObject($Element)||$Element.length===0){return false;}
if($LinkSelectors.length===0){return false;}
TargetNS.ContentSelector=ContentSelector;$LinkSelectors.click(function(){var $ListElement=$(this).closest('li');TargetNS.OpenElement($ListElement,true);return false;});};TargetNS.OpenElement=function($ListElement,WithAnimation){var $AllListElements,$ActiveListElement;if($ListElement.hasClass('Active')){return false;}
if(TargetNS.AnimationIsRunning()){return false;}
$AllListElements=$ListElement.parent('ul').find('li');$ActiveListElement=$AllListElements.filter('.Active');if(WithAnimation){TargetNS.StartAnimation();$AllListElements.find('div.Content div').css('overflow','hidden');$AllListElements.find('div.Content div').each(function(){$(this).data('overflow',$(this).css('overflow'));$(this).css('overflow','hidden');});$ActiveListElement.find(TargetNS.ContentSelector).add($ListElement.find(TargetNS.ContentSelector)).slideToggle("slow",function(){$AllListElements.find('div.Content div').each(function(){$(this).css('overflow',$(this).data('overflow'));});$ListElement.addClass('Active');$ActiveListElement.removeClass('Active');TargetNS.StopAnimation();});}
else{$ActiveListElement.find(TargetNS.ContentSelector).add($ListElement.find(TargetNS.ContentSelector)).toggle();$ListElement.addClass('Active');$ActiveListElement.removeClass('Active');}
Core.App.Publish('Event.UI.Accordion.OpenElement',[$ListElement]);};return TargetNS;}(Core.UI.Accordion||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Datepicker=(function(TargetNS){var VacationDays,VacationDaysOneTime,DatepickerCount=0;if(!Core.Debug.CheckDependency('Core.UI.Datepicker','$([]).datepicker','jQuery UI datepicker')){return false;}
function CheckDate(DateObject){var DayDescription='',DayClass='';if(typeof VacationDays==='undefined'){VacationDays=Core.Config.Get('Datepicker.VacationDays').TimeVacationDays;}
if(typeof VacationDaysOneTime==='undefined'){VacationDaysOneTime=Core.Config.Get('Datepicker.VacationDays').TimeVacationDaysOneTime;}
if(typeof VacationDays[DateObject.getMonth()+1]!=='undefined'&&typeof VacationDays[DateObject.getMonth()+1][DateObject.getDate()]!=='undefined'){DayDescription+=VacationDays[DateObject.getMonth()+1][DateObject.getDate()];DayClass='Highlight ';}
if(typeof VacationDaysOneTime[DateObject.getFullYear()]!=='undefined'&&typeof VacationDaysOneTime[DateObject.getFullYear()][DateObject.getMonth()+1]!=='undefined'&&typeof VacationDaysOneTime[DateObject.getFullYear()][DateObject.getMonth()+1][DateObject.getDate()]!=='undefined'){DayDescription+=VacationDaysOneTime[DateObject.getFullYear()][DateObject.getMonth()+1][DateObject.getDate()];DayClass='Highlight ';}
if(DayClass.length){return[true,DayClass,DayDescription];}
else{return[true,''];}}
TargetNS.Init=function(Element){var $DatepickerElement,HasDateSelectBoxes=false,Options,ErrorMessage;if(typeof Element.VacationDays==='object'){Core.Config.Set('Datepicker.VacationDays',Element.VacationDays);}
function LeadingZero(Number){if(Number.toString().length===1){return'0'+Number;}
else{return Number;}}
DatepickerCount++;if(typeof Element==='object'&&typeof Element.Day!=='undefined'&&typeof Element.Month!=='undefined'&&typeof Element.Year!=='undefined'&&isJQueryObject(Element.Day,Element.Month,Element.Year)&&Element.Day.length){$DatepickerElement=$('<input>').attr('type','hidden').attr('id','Datepicker'+DatepickerCount);Element.Year.after($DatepickerElement);if(Element.Day.is('select')&&Element.Month.is('select')&&Element.Year.is('select')){HasDateSelectBoxes=true;}}
else{return false;}
Options={beforeShowDay:function(DateObject){return CheckDate(DateObject);},showOn:'focus',prevText:Core.Language.Translate('Previous'),nextText:Core.Language.Translate('Next'),firstDay:Element.WeekDayStart,showMonthAfterYear:0,monthNames:[Core.Language.Translate('Jan'),Core.Language.Translate('Feb'),Core.Language.Translate('Mar'),Core.Language.Translate('Apr'),Core.Language.Translate('May'),Core.Language.Translate('Jun'),Core.Language.Translate('Jul'),Core.Language.Translate('Aug'),Core.Language.Translate('Sep'),Core.Language.Translate('Oct'),Core.Language.Translate('Nov'),Core.Language.Translate('Dec')],monthNamesShort:[Core.Language.Translate('January'),Core.Language.Translate('February'),Core.Language.Translate('March'),Core.Language.Translate('April'),Core.Language.Translate('May_long'),Core.Language.Translate('June'),Core.Language.Translate('July'),Core.Language.Translate('August'),Core.Language.Translate('September'),Core.Language.Translate('October'),Core.Language.Translate('November'),Core.Language.Translate('December')],dayNames:[Core.Language.Translate('Sunday'),Core.Language.Translate('Monday'),Core.Language.Translate('Tuesday'),Core.Language.Translate('Wednesday'),Core.Language.Translate('Thursday'),Core.Language.Translate('Friday'),Core.Language.Translate('Saturday')],dayNamesShort:[Core.Language.Translate('Sun'),Core.Language.Translate('Mon'),Core.Language.Translate('Tue'),Core.Language.Translate('Wed'),Core.Language.Translate('Thu'),Core.Language.Translate('Fri'),Core.Language.Translate('Sat')],dayNamesMin:[Core.Language.Translate('Su'),Core.Language.Translate('Mo'),Core.Language.Translate('Tu'),Core.Language.Translate('We'),Core.Language.Translate('Th'),Core.Language.Translate('Fr'),Core.Language.Translate('Sa')],isRTL:Core.Config.Get('Datepicker.IsRTL')};Options.onSelect=function(DateText,Instance){var Year=Instance.selectedYear,Month=Instance.selectedMonth+1,Day=Instance.selectedDay;if(HasDateSelectBoxes){Element.Year.find('option[value='+Year+']').prop('selected',true);Element.Month.find('option[value='+Month+']').prop('selected',true);Element.Day.find('option[value='+Day+']').prop('selected',true);}
else{Element.Year.val(Year);Element.Month.val(LeadingZero(Month));Element.Day.val(LeadingZero(Day));}};Options.beforeShow=function(Input){$(Input).val('');return{defaultDate:new Date(Element.Year.val(),Element.Month.val()-1,Element.Day.val())};};$DatepickerElement.datepicker(Options);if(!$('#'+Core.App.EscapeSelector(Element.Day.attr('id'))+'DatepickerIcon').length){$DatepickerElement.after('<a href="#" class="DatepickerIcon" id="'+Element.Day.attr('id')+'DatepickerIcon" title="'+Core.Language.Translate('Open date selection')+'"><i class="fa fa-calendar"></i></a>');if(Element.DateInFuture){ErrorMessage=Core.Language.Translate('Invalid date (need a future date)!');}
else if(Element.DateNotInFuture){ErrorMessage=Core.Language.Translate('Invalid date (need a past date)!');}
else{ErrorMessage=Core.Language.Translate('Invalid date!');}
Element.Year
.after('<div id="'+Element.Day.attr('id')+'Error" class="TooltipErrorMessage"><p>'+ErrorMessage+'</p></div>')
.after('<div id="'+Element.Month.attr('id')+'Error" class="TooltipErrorMessage"><p>'+ErrorMessage+'</p></div>')
.after('<div id="'+Element.Year.attr('id')+'Error" class="TooltipErrorMessage"><p>'+ErrorMessage+'</p></div>');if(Element.Hour&&Element.Hour.length){Element.Hour
.after('<div id="'+Element.Hour.attr('id')+'Error" class="TooltipErrorMessage"><p>'+ErrorMessage+'</p></div>')
.after('<div id="'+Element.Minute.attr('id')+'Error" class="TooltipErrorMessage"><p>'+ErrorMessage+'</p></div>');}}
$('#'+Core.App.EscapeSelector(Element.Day.attr('id'))+'DatepickerIcon').off('click.Datepicker').on('click.Datepicker',function(){$DatepickerElement.datepicker('show');return false;});$('#ui-datepicker-div').hide();};return TargetNS;}(Core.UI.Datepicker||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.DnD=(function(TargetNS){if(!Core.Debug.CheckDependency('Core.UI.DnD','$([]).sortable','jQuery UI sortable')){return false;}
TargetNS.Sortable=function($Elements,Options){$Elements.sortable({handle:Options.Handle,items:Options.Items,axis:Options.Axis,placeholder:Options.Placeholder,helper:Options.Helper,containment:Options.Containment,forcePlaceholderSize:true,distance:Options.Distance,opacity:Options.Opacity,tolerance:Options.Tolerance,update:Options.Update});};return TargetNS;}(Core.UI.DnD||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Floater=(function(TargetNS){TargetNS.Init=function(){var FloaterHoverTimer={},FloaterTriggerHoverTimer={};function CreateFloaterOpenTimeout($Element,TimeoutFunction){FloaterTriggerHoverTimer[$Element]=setTimeout(TimeoutFunction,500);}
function ClearFloaterOpenTimeout($Element){if(typeof FloaterTriggerHoverTimer[$Element]!=='undefined'){clearTimeout(FloaterTriggerHoverTimer[$Element]);}}
function CreateFloaterCloseTimeout($Element,TimeoutFunction){FloaterHoverTimer[$Element]=setTimeout(TimeoutFunction,500);}
function ClearFloaterCloseTimeout($Element){if(typeof FloaterHoverTimer[$Element]!=='undefined'){clearTimeout(FloaterHoverTimer[$Element]);}}
function RemoveActiveFloater($FloaterObj){if(!$FloaterObj){$FloaterObj=$('div.MetaFloater:visible');}
$('[data-trigger="floater"]').removeClass('FloaterOpen');$FloaterObj.fadeOut('fast',function(){$(this).remove();ClearFloaterCloseTimeout($(this));});}
$('body').off('click.FloaterClose').on('click.FloaterClose','.MetaFloater > a.Close',function(){RemoveActiveFloater($(this).closest('.MetaFloater'));return false;});$('body').off('click.FloaterScale').on('click.FloaterScale','.MetaFloater > a.Scale',function(){var $IconObj=$(this).find('i'),$IframeObj=$(this).closest('.MetaFloater').find('iframe');if($IconObj.hasClass('fa-search-plus')){$IconObj.removeClass('fa-search-plus').addClass('fa-search-minus');$IframeObj.addClass('NoScale');}
else{$IconObj.removeClass('fa-search-minus').addClass('fa-search-plus');$IframeObj.removeClass('NoScale');}
return false;});$('body').off('mouseenter.Floater').on('mouseenter.Floater','div.MetaFloater',function(){ClearFloaterCloseTimeout($(this));});$('body').off('mouseleave.Floater').on('mouseleave.Floater','div.MetaFloater',function(){CreateFloaterCloseTimeout($(this),function(){RemoveActiveFloater();});});$('body').off('mouseleave.FloaterTrigger').on('mouseleave.FloaterTrigger','[data-trigger="floater"]',function(Event){ClearFloaterOpenTimeout($(Event.target));CreateFloaterCloseTimeout($(this),function(){RemoveActiveFloater();});});$('body').off('mouseenter.FloaterTrigger').on('mouseenter.FloaterTrigger','[data-trigger="floater"]',function(Event){ClearFloaterCloseTimeout($(this));CreateFloaterOpenTimeout($(Event.target),function(){var $TriggerObj=$(Event.target),TriggerOffset=$TriggerObj.offset(),ViewportWidth=parseInt($(window).width(),10),AvailableHeightBottom,AvailableHeightTop,FloaterWidth,$FloaterObj,Margin=25,iFrameURL=$TriggerObj.data('floater-url'),FloaterTemplate=Core.Template.Render('MetaFloater');if(!iFrameURL){return false;}
if($TriggerObj.hasClass('FloaterOpen')){return false;}
$('[data-trigger="floater"]').removeClass('FloaterOpen');$TriggerObj.addClass('FloaterOpen');$FloaterObj=$(FloaterTemplate);$('body > div.MetaFloater:visible').remove();$FloaterObj.appendTo('body').css('display','none');FloaterWidth=parseInt($FloaterObj.outerWidth(),10);if(TriggerOffset.left-ViewportWidth/50<FloaterWidth/2){$FloaterObj.addClass('Left').css({right:'auto',left:TriggerOffset.left});}
else if(ViewportWidth-TriggerOffset.left+($TriggerObj.outerWidth()/2)-ViewportWidth/50<FloaterWidth/2){$FloaterObj.addClass('Right').css({right:'auto',left:TriggerOffset.left-FloaterWidth+$TriggerObj.outerWidth()});}
else{$FloaterObj.addClass('Center').css({right:'auto',left:parseInt(TriggerOffset.left+($TriggerObj.outerWidth()/2)-FloaterWidth/2,10)});}
AvailableHeightBottom=parseInt($(window).scrollTop()+$(window).height()-(TriggerOffset.top+$TriggerObj.outerHeight()),10);AvailableHeightTop=parseInt(TriggerOffset.top-$(window).scrollTop(),10);if(AvailableHeightTop>AvailableHeightBottom){$FloaterObj.addClass('Bottom').css({top:'auto',bottom:parseInt($('body').height()-TriggerOffset.top,10)+Margin});}
else{$FloaterObj.addClass('Top').css({top:parseInt(TriggerOffset.top+$TriggerObj.outerHeight(),10)+Margin,bottom:'auto'});}
$FloaterObj.find('iframe').attr('src',iFrameURL);$FloaterObj.find('a.Open').attr('href',$TriggerObj.attr('href'));$FloaterObj.fadeIn();$('div.MetaFloater:visible iframe').off('load.MetaFloater').on('load.MetaFloater',function(){$(this).closest('.Content').fadeIn('fast',function(){var $ActiveFloaterObj=$('div.MetaFloater:visible');$ActiveFloaterObj
.children('div.NoPreview, a.Scale, a.Open').fadeIn()
.parent()
.children('i').remove();});});});});}
Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI.Floater||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Resizable=(function(TargetNS){var ScrollerMinHeight=120,HandleHeight=9;TargetNS.Init=function($Element,ScrollerHeight,Callback){var CurrentTableHeight,InitScroller=true;ScrollerHeight=Math.max(ScrollerHeight||0,ScrollerMinHeight);if(isJQueryObject($Element)&&$Element.length){CurrentTableHeight=$Element.find('table').outerHeight();if((CurrentTableHeight)<=ScrollerMinHeight){$Element.find('.Scroller').height(CurrentTableHeight);InitScroller=false;}
else if((CurrentTableHeight)<ScrollerHeight){$Element.find('.Scroller').height(CurrentTableHeight);}
else{$Element.find('.Scroller').height(ScrollerHeight);}
if(InitScroller){$Element.resizable({handles:{s:$Element.find('.Handle a')},minHeight:ScrollerMinHeight+HandleHeight,maxHeight:$Element.find('table').outerHeight()+HandleHeight,resize:function(Event,UI){var Height,Width;Height=UI.size.height-HandleHeight;Width=UI.size.width-2;$Element.find('div.Scroller').height(Height+'px').width(Width+'px');if($.isFunction(Callback)){Callback(Event,UI,Height,Width);}}});}
else{$('div.Handle').hide();$Element.find('.Scroller').css('margin-bottom','1px');}}};return TargetNS;}(Core.UI.Resizable||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Table=(function(TargetNS){TargetNS.InitTableFilter=function($FilterInput,$Container,ColumnNumber,HideEmptyContainers){var Timeout;$FilterInput.wrap('<span class="TableFilterContainer" />');$FilterInput.off('keydown.FilterInput').on('keydown.FilterInput',function(){window.clearTimeout(Timeout);Timeout=window.setTimeout(function(){var FilterText=($FilterInput.val()||'').toLowerCase(),$Rows=$Container.find('tbody tr:not(.FilterMessage), li:not(.Header):not(.FilterMessage)'),$Elements=$Rows.closest('tr, li');if(typeof ColumnNumber==='string'||typeof ColumnNumber==='number'){$Rows=$Rows.find('td:eq('+ColumnNumber+')');}
function CheckText($Element,Filter){var Text;Text=$Element.text();if(Text&&Text.toLowerCase().indexOf(Filter)>-1){return true;}
if($Element.is('li, td')){Text=$Element.attr('title');if(Text&&Text.toLowerCase().indexOf(Filter)>-1){return true;}}
else{$Element.find('td').each(function(){Text=$(this).attr('title');if(Text&&Text.toLowerCase().indexOf(Filter)>-1){return true;}});}
return false;}
if(FilterText.length){if(!$FilterInput.next('.FilterRemove').length){$FilterInput.after('<a href="#" class="FilterRemove"><i class="fa fa-times"></i></a>').next('.FilterRemove').attr('title',Core.Language.Translate('Remove the filter')).off('click.RemoveFilter').on('click.RemoveFilter',function(){$(this).prev('input').val('').trigger('keydown').focus();}).fadeIn();}
$Elements.hide();$Rows.each(function(){if(CheckText($(this),FilterText)){$(this).closest('tr, li').show();}});}
else{$FilterInput.next('.FilterRemove').fadeOut(function(){$(this).remove();});$Elements.show();$('#SelectAllrw').removeClass('Disabled');$('table th input:not([name="rw"]:visible)').prop('disabled',false);if($('input[type="checkbox"][name="rw"]').length!==0&&$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').filter(':checked').length===$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').length){$('table th input:not([name="rw"]:visible)').prop('disabled',true);$('#SelectAllrw').addClass('Disabled');}}
$Container.each(function(){var $Widget=$(this).closest('.WidgetSimple'),IsCollapsed=$Widget.hasClass('Collapsed');$Widget.show();if(IsCollapsed){$Widget.addClass("Expanded").removeClass("Collapsed");}
if($(this).find('tbody tr:visible:not(.FilterMessage), li:visible:not(.Header):not(.FilterMessage)').length){$(this).find('.FilterMessage').hide();if(HideEmptyContainers){$(this).closest('.WidgetSimple').show();}}
else{$(this).find('.FilterMessage').show();if(HideEmptyContainers){$(this).closest('.WidgetSimple').hide();}}
if(IsCollapsed){$Widget.addClass("Collapsed").removeClass("Expanded");}});if(!$Container.filter(':visible').length&&!$Container.closest(".WidgetSimple:visible").length){$('.FilterMessageWidget').show();}
else{$('.FilterMessageWidget').hide();}
Core.App.Publish('Event.UI.Table.InitTableFilter.Change',[$FilterInput,$Container,ColumnNumber]);},100);});$FilterInput.off('keypress.FilterInput').on('keypress.FilterInput',function(Event){if((Event.charCode||Event.keyCode)===13){Event.preventDefault();}});};return TargetNS;}(Core.UI.Table||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Accessibility=(function(TargetNS){TargetNS.Init=function(){$('.ARIARoleBanner')
.attr('role','banner');$('.ARIARoleNavigation')
.attr('role','navigation');$('.ARIARoleSearch')
.attr('role','search');$('.ARIARoleContentinfo')
.attr('role','contentinfo');$('.ARIARoleMain')
.attr('role','main');$('.ARIAHasPopup')
.attr('aria-haspopup','true');$('.Validate_Required, .Validate_DependingRequiredAND, .Validate_DependingRequiredOR')
.attr('aria-required','true');TargetNS.AccessibleNavigation();};TargetNS.AccessibleNavigation=function(){$('#Navigation > ul > li a').on('focus',function(){$(this)
.next('ul')
.addClass('Expanded');});$('#Navigation > ul > li > ul').on('mouseleave',function(){$(this).removeClass('Expanded');});$('#Navigation > ul > li > ul li a').on('focus',function(){$(this)
.closest('ul')
.addClass('Expanded');});$('#Navigation > ul > li > ul li:last-child').prev('li').find('a').on('focusout',function(){$(this)
.closest('ul')
.removeClass('Expanded');});};TargetNS.AudibleAlert=function(Text){var AlertMessageID='Accessibility_AlertMessage';$('#'+AlertMessageID).remove();$('body').append('<div role="alert" id="'+AlertMessageID+'" class="ARIAAlertMessage">'+Text+'</div>');};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI.Accessibility||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.RichTextEditor=(function(TargetNS){var $FormID,TimeOutRTEOnChange;function CheckFormID($EditorArea){if(typeof $FormID==='undefined'){$FormID=$EditorArea.closest('form').find('input:hidden[name=FormID]');}
return $FormID;}
TargetNS.InitEditor=function($EditorArea){var EditorID='',Editor,UserLanguage,UploadURL='',EditorConfig;if(typeof CKEDITOR==='undefined'){return false;}
if(isJQueryObject($EditorArea)&&$EditorArea.hasClass('HasCKEInstance')){return false;}
if(isJQueryObject($EditorArea)&&$EditorArea.length===1){EditorID=$EditorArea.attr('id');}
if(EditorID===''){Core.Exception.Throw('RichTextEditor: Need exactly one EditorArea!','TypeError');}
$EditorArea.addClass('HasCKEInstance');CKEDITOR.on('instanceCreated',function(Editor){CKEDITOR.addCss(Core.Config.Get('RichText.EditingAreaCSS'));Editor.editor.on('change',function(){window.clearTimeout(TimeOutRTEOnChange);TimeOutRTEOnChange=window.setTimeout(function(){Core.Form.Validate.ValidateElement($(Editor.editor.element.$));Core.App.Publish('Event.UI.RichTextEditor.ChangeValidationComplete',[Editor]);},250);});Core.App.Publish('Event.UI.RichTextEditor.InstanceCreated',[Editor]);});CKEDITOR.on('instanceReady',function(Editor){if(Core.Config.Get('RichText.Type')=='CodeMirror'){window['codemirror_'+Editor.editor.id].setOption("tabSize",4);window['codemirror_'+Editor.editor.id].setOption("indentUnit",4);window['codemirror_'+Editor.editor.id].setOption("tabMode",'spaces');window['codemirror_'+Editor.editor.id].setOption("smartIndent",true);window['codemirror_'+Editor.editor.id].setOption("extraKeys",{Tab:function(cm){var spaces=Array(cm.getOption("indentUnit")+1).join(" ");cm.replaceSelection(spaces);}});}
Core.App.Publish('Event.UI.RichTextEditor.InstanceReady',[Editor]);});UserLanguage=Core.Config.Get('UserLanguage').replace(/_/,"-");if(CheckFormID($EditorArea).length){UploadURL=Core.Config.Get('Baselink')
+'Action='
+Core.Config.Get('RichText.PictureUploadAction','PictureUpload')
+'&FormID='
+CheckFormID($EditorArea).val()
+'&'+Core.Config.Get('SessionName')
+'='+Core.Config.Get('SessionID');}
EditorConfig={customConfig:'',disableNativeSpellChecker:false,defaultLanguage:UserLanguage,language:UserLanguage,width:Core.Config.Get('RichText.Width',620),resize_minWidth:Core.Config.Get('RichText.Width',620),height:Core.Config.Get('RichText.Height',320),removePlugins:CheckFormID($EditorArea).length?'':'image2,uploadimage',forcePasteAsPlainText:false,format_tags:'p;h1;h2;h3;h4;h5;h6;pre',fontSize_sizes:'8px;10px;12px;16px;18px;20px;22px;24px;26px;28px;30px;',extraAllowedContent:'div[type]{*}; img[*]; col[width]; style[*]{*}; *[id](*)',enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_BR,contentsLangDirection:Core.Config.Get('RichText.TextDir','ltr'),toolbar:CheckFormID($EditorArea).length?Core.Config.Get('RichText.Toolbar'):Core.Config.Get('RichText.ToolbarWithoutImage'),filebrowserBrowseUrl:'',filebrowserUploadUrl:UploadURL,extraPlugins:'splitquote,preventimagepaste,contextmenu_linkopen',entities:false,skin:'moono-lisa'};if(Core.Config.Get('RichText.Type')=='CodeMirror'){$.extend(EditorConfig,{startupMode:'source',allowedContent:true,extraPlugins:'codemirror',codemirror:{theme:'default',lineNumbers:true,lineWrapping:true,matchBrackets:true,autoCloseTags:true,autoCloseBrackets:true,enableSearchTools:true,enableCodeFolding:true,enableCodeFormatting:true,autoFormatOnStart:false,autoFormatOnModeChange:false,autoFormatOnUncomment:false,mode:'htmlmixed',showTrailingSpace:true,highlightMatches:true,styleActiveLine:true}
});}
Editor=CKEDITOR.replace(EditorID,EditorConfig);if(typeof Editor!=='undefined'){CKEDITOR.instances[EditorID].updateElementOriginal=CKEDITOR.instances[EditorID].updateElement;CKEDITOR.instances[EditorID].updateElement=function(){var Data;CKEDITOR.instances[EditorID].updateElementOriginal();Data=this.element.getValue();if(typeof CKEDITOR.instances[EditorID].config.codemirror==='undefined'&&!Data.match(/<img/)){Data=Data.replace(/\s+|&nbsp;|<\/?\w+[^>]*\/?>/g,'');if(!Data.length){this.element.setValue('');}}};CKEDITOR.tools.writeCssText=function(styles,sort){var name,stylesArr=[];for(name in styles)
stylesArr.push(name+':'+styles[name]);return stylesArr.join('; ');};CKEDITOR.instances[EditorID].on('blur',function(){CKEDITOR.instances[EditorID].updateElement();Core.Form.Validate.ValidateElement($EditorArea);});CKEDITOR.instances[EditorID].on('focus',function(){Core.App.Publish('Event.UI.RichTextEditor.Focus',[Editor]);if($EditorArea.attr('class').match(/Error/)){window.setTimeout(function(){CKEDITOR.instances[EditorID].updateElement();Core.Form.Validate.ValidateElement($EditorArea);Core.App.Publish('Event.UI.RichTextEditor.FocusValidationComplete',[Editor]);},0);}});$EditorArea.focus(function(){TargetNS.Focus($EditorArea);Core.UI.ScrollTo($("label[for="+$EditorArea.attr('id')+"]"));});}};TargetNS.InitAllEditors=function(){if(typeof CKEDITOR==='undefined'){return;}
$('textarea.RichText').each(function(){TargetNS.InitEditor($(this));});};TargetNS.Init=function(){if(typeof CKEDITOR==='undefined'){return;}
TargetNS.InitAllEditors();};TargetNS.GetRTE=function($EditorArea){var $RTE;if(isJQueryObject($EditorArea)){$RTE=$('#cke_'+$EditorArea.attr('id'));return($RTE.length?$RTE:undefined);}};TargetNS.UpdateLinkedField=function($EditorArea){var EditorID='',Data,StrippedContent;if(isJQueryObject($EditorArea)&&$EditorArea.length===1){EditorID=$EditorArea.attr('id');}
if(EditorID===''){Core.Exception.Throw('RichTextEditor: Need exactly one EditorArea!','TypeError');}
Data=CKEDITOR.instances[EditorID].getData();StrippedContent=Data.replace(/\s+|&nbsp;|<\/?\w+[^>]*\/?>/g,'');if(StrippedContent.length===0&&!Data.match(/<img/)){$EditorArea.val('');}
else{$EditorArea.val(Data);}};TargetNS.IsEnabled=function($EditorArea){if(typeof CKEDITOR==='undefined'){return false;}
if(isJQueryObject($EditorArea)&&$EditorArea.length){return(CKEDITOR.instances[$EditorArea[0].id]?true:false);}
return false;};TargetNS.Focus=function($EditorArea){var EditorID='';if(isJQueryObject($EditorArea)&&$EditorArea.length===1){EditorID=$EditorArea.attr('id');}
if(EditorID===''){Core.Exception.Throw('RichTextEditor: Need exactly one EditorArea!','TypeError');}
if(typeof CKEDITOR==='object'){CKEDITOR.instances[EditorID].focus();}
else{$EditorArea.focus();}};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.UI.RichTextEditor||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Dialog=(function(TargetNS){var DialogCounter=1;if(!Core.Debug.CheckDependency('Core.UI.Dialog','$([]).draggable','jQuery UI draggable')){return false;}
if(!Core.Debug.CheckDependency('Core.UI.Dialog','Core.Config','Core.Config')){return false;}
if(!Core.Debug.CheckDependency('Core.UI.Dialog','Core.UI.InputFields','Core.UI.InputFields')){return false;}
function AdjustScrollableHeight(AllowAutoGrow){var ContentScrollHeight=0,WindowHeight=$(window).height(),WindowScrollTop=$(window).scrollTop(),DialogTopMargin=$('.Dialog:visible').offset().top,DialogHeight=$('.Dialog:visible').height();if($('.Dialog:visible').hasClass('Fullsize')){ContentScrollHeight=WindowHeight-80;}
else if(AllowAutoGrow||DialogHeight>300){ContentScrollHeight=WindowHeight-((DialogTopMargin-WindowScrollTop)*2)-100;}
else{ContentScrollHeight=200;}
$('.Dialog:visible .Content .InnerContent').css('max-height',ContentScrollHeight);}
function FocusFirstElement(){var $FirstElement=$('div.Dialog:visible .Content')
.find('a:visible, input:visible, textarea:visible, select:visible, button:visible')
.filter(':first'),$FocusField;if(!$FirstElement||!$FirstElement.length||$('div.Dialog:visible').find('.OTRSBusinessRequiredDialog').length){return;}
if($FirstElement.hasClass('InputField_Search')){$FocusField=$('<input/>')
.addClass('FocusField')
.insertBefore($FirstElement);$FocusField.focus();}
else{$FirstElement.focus();}}
function InitKeyEvent(CloseOnEscape){var $Dialog=$('div.Dialog:visible');$(document).off('keypress.Dialog').on('keypress.Dialog',function(Event){if($.browser.opera&&(Event.keyCode===9||(Event.keyCode===27&&CloseOnEscape))){Event.preventDefault();Event.stopPropagation();return false;}}).off('keydown.Dialog').on('keydown.Dialog',function(Event){var $Tabbables,$First,$Last;if(Event.keyCode===9){$Tabbables=$('a:visible, input:visible, textarea:visible, select:visible, button:visible',$Dialog);$First=$Tabbables.filter(':first');$Last=$Tabbables.filter(':last');if(Event.target===$Last[0]&&!Event.shiftKey){$First.focus(1);Event.preventDefault();Event.stopPropagation();return false;}
else if(Event.target===$First[0]&&Event.shiftKey){$Last.focus(1);Event.preventDefault();Event.stopPropagation();return false;}}
else if(Event.keyCode===27&&CloseOnEscape){TargetNS.CloseDialog($Dialog);Event.preventDefault();Event.stopPropagation();return false;}});}
function DefaultSubmitFunction(){$('.Dialog:visible form').submit();}
function DefaultCloseFunction(){TargetNS.CloseDialog($('.Dialog:visible'));}
TargetNS.ShowDialog=function(Params){var $Dialog,$Content,$ButtonFooter,HTMLBackup,DialogCopy,DialogCopySelector,DialogHTML,FullsizeMode=false;DialogHTML='<div class="Dialog">';if(!Params.HideHeader){DialogHTML+='<div class="Header"><a class="Close" title="'+Core.Language.Translate('Close this dialog')+'" href="#"><i class="fa fa-times"></i></a></div>';}
DialogHTML+='<div class="Content"></div>';if(!Params.HideFooter){DialogHTML+='<div class="Footer"></div>';}
DialogHTML+='</div>';function HandleClosingAction(){var $CloseButton=$('.Dialog:visible button.Close');Core.App.Publish('Event.UI.Dialog.CloseDialog.Close',[$Dialog]);if(Core.Form&&Core.Form.ErrorTooltips){Core.Form.ErrorTooltips.HideTooltip();}
if($CloseButton.length){$CloseButton.trigger('click');}
else{DefaultCloseFunction();}}
function CalculateDialogPosition(Position,Type){var ScrollTop=$(window).scrollTop(),WindowHeight=$(window).height();Type=Type||'top';Position=Position.toString();if(Position.match(/%/)){Position=parseInt(Position.replace(/%/,''),10);if(Type==='top'){Position=parseInt(WindowHeight*(Position/100),10)+ScrollTop;}
else if(Type==='bottom'){Position=WindowHeight+ScrollTop-parseInt(WindowHeight*(Position/100),10);}}
else{Position=parseInt(Position.replace(/px/,''),10);if(Type==='top'){Position=Position+ScrollTop;}
else if(Type==='bottom'){Position=WindowHeight+ScrollTop-Position;}}
return(Position+'px');}
Core.App.Publish('Event.UI.Dialog.ShowDialog.BeforeOpen');if($('.Dialog:visible').length){TargetNS.CloseDialog($('.Dialog:visible'));}
if(Params.Modal){$('<div id="Overlay" tabindex="-1">').appendTo('body');$('body').css({'overflow':'hidden'});$('#Overlay').height($(document).height()).css('top',0);$('body').css('min-height',$(window).height());}
$Dialog=$(DialogHTML);if(Core.App.Responsive.IsSmallerOrEqual(Core.App.Responsive.GetScreenSize(),'ScreenL')){FullsizeMode=true;$Dialog.addClass('Fullsize');}
if(Params.Modal){$Dialog.addClass('Modal');}
if(Params.HTML){if(typeof Params.HTML!=='string'&&isJQueryObject(Params.HTML)){DialogCopy=Core.Data.Get($('body'),'DialogCopy');DialogCopySelector=Core.Data.Get($('body'),'DialogCopySelector');HTMLBackup=(Params.HTML)[0].innerHTML;DialogCopy[DialogCounter]=HTMLBackup;DialogCopySelector[DialogCounter]=Params.HTML;Core.Data.Set($('body'),'DialogCopy',DialogCopy);Core.Data.Set($('body'),'DialogSelector',DialogCopySelector);Params.HTML.empty();Params.HTML=HTMLBackup;}}
if(Params.Type==='Alert'){$Dialog.addClass('Alert');$Dialog.attr("role","alertdialog");$Content=$Dialog.find('.Content').append('<div class="InnerContent"></div>').find('.InnerContent');$Content.append('<i class="fa fa-warning"></i>');if(Params.Headline){$Content.append('<h2>'+Params.Headline+'</h2>');}
if(Params.Text){$Content.append('<p>'+Params.Text+'</p>');}
Params.Buttons=[{Label:'OK',Type:'Close',Function:Params.OnClose}];$Content.append('<div class="Center Spacing"><button type="button" id="DialogButton1" class="CallForAction Close"><span>'+Core.Language.Translate('OK')+'</span></button></div>');}
else if(Params.Type==='Search'){$Dialog.addClass('Search');$Dialog.attr("role","dialog");$Content=$Dialog.find('.Content');if(Params.HTML){$Content.append(Params.HTML);}}
else{$Dialog.attr("role","dialog");$Content=$Dialog.find('.Content');if(Params.Buttons){$Content.append('<div class="InnerContent"></div>').find('.InnerContent').append(Params.HTML);$ButtonFooter=$('<div class="ContentFooter Center"></div>');$.each(Params.Buttons,function(Index,Value){var Classes='CallForAction';if(Value.Type==='Close'){Classes+=' Close';}
if(Value.Class){Classes+=' '+Value.Class;}
$ButtonFooter.append('<button id="DialogButton'+(Index-0+1)+'" class="'+Classes+'" type="button"><span>'+Value.Label+'</span></button> ');});$ButtonFooter.appendTo($Content);}
else{if(Params.HTML){$Content.append(Params.HTML);}}}
if(Params.Title){$Dialog.children('div.Header').append('<h1>'+Params.Title+'</h1>');}
$Dialog.appendTo('body');if($Dialog.find('.Content .ContentFooter').length){$Dialog.find('.Footer').addClass('ContentFooter');}
Core.Data.Set($Dialog,'DialogCounter',DialogCounter);DialogCounter++;if(Params.Type==='Alert'){$Dialog.css({top:$(window).scrollTop()+($(window).height()*0.3),left:Math.round(($(window).width()-$Dialog.width())/2)});}
if(typeof Params.PositionTop!=='undefined'){$Dialog.css('top',CalculateDialogPosition(Params.PositionTop,'top'));}
if(typeof Params.PositionLeft!=='undefined'){if(Params.PositionLeft==='Center'){$Dialog.css('left',Math.round(($(window).width()-$Dialog.width())/2));}
else{$Dialog.css('left',Params.PositionLeft);}}
if(typeof Params.PositionBottom!=='undefined'){$Dialog.css('bottom',CalculateDialogPosition(Params.PositionBottom,'bottom'));}
if(typeof Params.PositionRight!=='undefined'){$Dialog.css('right',Params.PositionRight);}
AdjustScrollableHeight(Params.AllowAutoGrow);if(FullsizeMode){$Dialog.css('top',$(window).scrollTop());}
if(!FullsizeMode){$Dialog.draggable({containment:'body',handle:'.Header',start:function(){Core.App.Publish('Event.UI.Dialog.ShowDialog.DragStart',$Dialog);if(Core.Form&&Core.Form.ErrorTooltips){Core.Form.ErrorTooltips.HideTooltip();}},stop:function(){Core.App.Publish('Event.UI.Dialog.ShowDialog.DragStop',$Dialog);}});}
if(Params.Buttons){$.each(Params.Buttons,function(Index,Value){$('#DialogButton'+(Index-0+1)).click(function(){if(Value.Type==='Submit'){if($.isFunction(Value.Function)){if(Value.Function()){DefaultSubmitFunction();}}
else{DefaultSubmitFunction();}}
else if(Value.Type==='Close'){if($.isFunction(Value.Function)){if(Value.Function()){DefaultCloseFunction();}}
else{DefaultCloseFunction();}}
else{if($.isFunction(Value.Function)){Value.Function();}}});});}
$Dialog.find('.Header a.Close').click(function(){HandleClosingAction();return false;});if(Params.CloseOnClickOutside){$(document).off('click.Dialog').on('click.Dialog',function(event){if($(event.target).parents('html').length&&$(event.target).closest('div.Dialog').length===0){HandleClosingAction();}});}
$(window).off('resize.Dialog').on('resize.Dialog',function(){AdjustScrollableHeight(Params.AllowAutoGrow);});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenL',function(){$Dialog.addClass('Fullsize');});Core.App.Subscribe('Event.App.Responsive.ScreenXL',function(){$Dialog.removeClass('Fullsize');});InitKeyEvent(Params.CloseOnEscape);Core.UI.InputFields.Activate($Dialog);FocusFirstElement();};TargetNS.ShowContentDialog=function(HTML,Title,PositionTop,PositionLeft,Modal,Buttons,AllowAutoGrow){TargetNS.ShowDialog({HTML:HTML,Title:Title,Modal:Modal,CloseOnClickOutside:true,CloseOnEscape:true,PositionTop:PositionTop,PositionLeft:PositionLeft,Buttons:Buttons,AllowAutoGrow:AllowAutoGrow});};TargetNS.ShowWaitingDialog=function(Title,Text){var DialogTemplate=Core.Template.Render('Dialog/Waiting',{Text:Text});TargetNS.ShowDialog({HTML:DialogTemplate,Title:Title,Modal:true,CloseOnClickOutside:false,CloseOnEscape:false,PositionTop:'20%',PositionLeft:'Center',AllowAutoGrow:true,HideHeader:true,HideFooter:true});};TargetNS.MakeDialogWait=function(){$('.Dialog:visible .InnerContent').prepend('<div class="Waiting"><i class="fa fa-spinner fa-spin"></i></div>').find('.Waiting').fadeIn();};TargetNS.ShowAlert=function(Headline,Text,CloseFunction){TargetNS.ShowDialog({Type:'Alert',Modal:true,Title:Headline,Text:Text,OnClose:CloseFunction});};TargetNS.CloseDialog=function(Object){var $Dialog,$DialogSelector,DialogCopy,DialogSelectorData,InternalDialogCounter,BackupHTML;$Dialog=$(Object).closest('.Dialog:visible');InternalDialogCounter=Core.Data.Get($Dialog,'DialogCounter');Core.App.Publish('Event.UI.Dialog.CloseDialog.Close',[$Dialog]);$Dialog.remove();$('#Overlay').remove();$('body').css({'overflow':'auto'});$(document).unbind('keydown.Dialog').unbind('keypress.Dialog').unbind('click.Dialog');$(window).unbind('resize.Dialog');$('body').css('min-height','auto');if(InternalDialogCounter){DialogCopy=Core.Data.Get($('body'),'DialogCopy');DialogSelectorData=Core.Data.Get($('body'),'DialogSelector');if(typeof DialogCopy!=='undefined'){BackupHTML=DialogCopy[InternalDialogCounter];$DialogSelector=DialogSelectorData[InternalDialogCounter];if(BackupHTML&&BackupHTML.length){$DialogSelector.append(BackupHTML);}
delete DialogCopy[InternalDialogCounter];delete DialogSelectorData[InternalDialogCounter];}
Core.Data.Set($('body'),'DialogCopy',DialogCopy);}};return TargetNS;}(Core.UI.Dialog||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.ActionRow=(function(TargetNS){var TicketElementSelectors={'Small':'div.Overview table td input[type="checkbox"][name=TicketID]','Medium':'ul.Overview input[type="checkbox"][name=TicketID]','Large':'ul.Overview input[type="checkbox"][name=TicketID]'},TicketView;if(!Core.Debug.CheckDependency('Core.UI.ActionRow','Core.JSON','JSON API')){return false;}
if(!Core.Debug.CheckDependency('Core.UI.ActionRow','Core.Data','Data API')){return false;}
function SerializeData(Data){var QueryString='';$.each(Data,function(Key,Value){QueryString+=';'+encodeURIComponent(Key)+'='+encodeURIComponent(Value);});return QueryString;}
TargetNS.AddActions=function($Element,JSONString){var Actions;if(isJQueryObject($Element)){if(typeof JSONString==='string'){Actions=Core.JSON.Parse(JSONString);}
else{Actions=JSONString;}
Core.Data.Set($Element,'Actions',Actions);}
else{Core.Debug.Log('Element does not exist or no valid data structure passed.');}};TargetNS.UpdateActionRow=function($ClickedElement,$Checkboxes,$ActionRow){var TicketActionData,ActionRowElement;$Checkboxes=$Checkboxes.filter(':checked');if(!$Checkboxes.length){$ActionRow
.find('li').filter(':not(.AlwaysPresent)').remove()
.end().end()
.find('#BulkAction').addClass('Inactive');}
else if($Checkboxes.length===1&&!$('#SelectAllTickets').is(':checked')){$ActionRow.find('#BulkAction').removeClass('Inactive');TicketActionData=Core.Data.Get($Checkboxes.closest('li, tr'),'Actions');if(typeof TicketActionData!=='undefined'){$.each(TicketActionData,function(Index,Value){if(Value.HTML){$(Value.HTML).attr('id',Value.ID).appendTo($ActionRow);ActionRowElement=$ActionRow.find('#'+Value.ID).find('a');if(typeof Value.Target==='undefined'||Value.Target===""){ActionRowElement.attr('href',Value.Link);}
if(Value.PopupType){ActionRowElement.on('click.Popup',function(){Core.UI.Popup.OpenPopup(Value.Link,Value.PopupType);return false;});}}});}}
else{$ActionRow
.find('li').filter(':not(.AlwaysPresent)').remove()
.end().end()
.find('#BulkAction').removeClass('Inactive');}};TargetNS.Init=function(){if($('#TicketOverviewMedium').length){TicketView='Medium';}
else if($('#TicketOverviewLarge').length){TicketView='Large';}
else{TicketView='Small';}
if((TicketView==='Medium'||TicketView==='Large')&&$('#EmptyMessage'+TicketView).length===1){$('#SelectAllTickets').closest('li').addClass('Hidden');}
$('#SelectAllTickets').on('click',function(){var Status=$(this).prop('checked');$(TicketElementSelectors[TicketView]).prop('checked',Status).triggerHandler('click');});$(TicketElementSelectors[TicketView]).on('click',function(Event){Event.stopPropagation();Core.UI.ActionRow.UpdateActionRow($(this),$(TicketElementSelectors[TicketView]),$('div.OverviewActions ul.Actions'));Core.Form.SelectAllCheckboxes($(this),$('#SelectAllTickets'));});$('#BulkAction a').on('click',function(){var $Element=$(this),$SelectedTickets,TicketIDParameter="TicketID=",TicketIDs="",URL;if($Element.parent('li').hasClass('Inactive')){return false;}
else{$SelectedTickets=$(TicketElementSelectors[TicketView]+':checked');$SelectedTickets.each(function(){TicketIDs+=TicketIDParameter+$(this).val()+";";});URL=Core.Config.Get('Baselink')+"Action=AgentTicketBulk;"+TicketIDs;URL+=SerializeData(Core.App.GetSessionInformation());Core.UI.Popup.OpenPopup(URL,'TicketAction');}
return false;});};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.UI.ActionRow||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Popup=(function(TargetNS){var OpenPopups={},PopupProfiles,PopupDefaultProfile='Default',RegisterPopupTimeOut=1000,WindowMode='Popup';if(!Core.Debug.CheckDependency('Core.UI.Dialog','Core.Config','Core.Config')){return false;}
PopupProfiles={'Default':{WindowURLParams:"dependent=yes,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no",Left:100,Top:100,Width:1040,Height:700}};function CheckOpenPopups(){$.each(OpenPopups,function(Key,Value){if(Value.closed){delete OpenPopups[Key];}});}
function GetPopupObjectByType(Type){return OpenPopups[Type];}
function GetWindowParentObject(){if(window.opener!==null&&typeof window.opener!=='undefined'){if(typeof window.opener.Core!=='undefined'){return window.opener;}
else{return window.parent;}}
else{return window.parent;}}
function CurrentIsPopupWindow(){var PopupType;if(window.name.match(/OTRSPopup_([^_]+)_.+/)){PopupType=RegExp.$1;}
return PopupType;}
TargetNS.CurrentIsPopupWindow=function(){return CurrentIsPopupWindow();};TargetNS.ProfileAdd=function(Key,Values){PopupProfiles[Key]=Values;};TargetNS.ProfileList=function(){return PopupProfiles;};TargetNS.RegisterPopupEvent=function(){$(window).on('Popup',function(Event,Type,Param){if(Type&&typeof Type!=='undefined'){if(Type==='Reload'){window.location.reload();}
else if(Type==='URL'){if(Param&&typeof Param.URL!=='undefined'){window.location.href=Param.URL;}}}});};TargetNS.FirePopupEvent=function(Type,Param,ExecuteInMobileMode){if(ExecuteInMobileMode===false&&!$('body').hasClass('Visible-ScreenXL')&&(!localStorage.getItem("DesktopMode")||parseInt(localStorage.getItem("DesktopMode"),10)<=0)){return;}
$(window).off('beforeunload.Popup');Core.App.UnbindWindowUnloadEvent('Popup');$(window).trigger('Popup',[Type,Param]);};TargetNS.CheckPopupsOnUnload=function(){var Size=0;CheckOpenPopups();$.each(OpenPopups,function(Key,Value){if(Value.name.match(/OTRSPopup_.+/)){Size++;}});if(Size){return Core.Language.Translate('If you now leave this page, all open popup windows will be closed, too!');}};TargetNS.ClosePopupsOnUnload=function(){CheckOpenPopups();$.each(OpenPopups,function(Key,Value){if(Value.name.match(/OTRSPopup_.+/)){TargetNS.ClosePopup(Value);}});};TargetNS.RegisterPopupAtParentWindow=function(WindowObject){var Type;/OTRSPopup_([^_]+)_.*/.exec(WindowObject.name);Type=RegExp.$1;if(typeof OpenPopups[Type]==='undefined'){OpenPopups[Type]=WindowObject;}
else{if(OpenPopups[Type]!==WindowObject){OpenPopups[Type]=WindowObject;}}};TargetNS.InitRegisterPopupAtParentWindow=function(){window.setTimeout(function(){var PopupType=CurrentIsPopupWindow(),ParentWindow;if(typeof PopupType!=='undefined'){ParentWindow=GetWindowParentObject();}
if(ParentWindow&&!ParentWindow.name&&ParentWindow.Core&&ParentWindow.Core.UI&&ParentWindow.Core.UI.Popup){try{ParentWindow.Core.UI.Popup.RegisterPopupAtParentWindow(window,PopupType);}
catch(Event){$.noop(Event);}}
Core.UI.Popup.InitRegisterPopupAtParentWindow();},RegisterPopupTimeOut);};TargetNS.GetPopupObject=function(Type){return GetPopupObjectByType(Type);};TargetNS.GetWindowMode=function(){if(WindowMode==='Popup'||WindowMode==='Iframe'){return WindowMode;}
else{return undefined;}};TargetNS.SetWindowMode=function(Mode){if(Mode==='Popup'||Mode==='Iframe'){WindowMode=Mode;}
else{WindowMode=undefined;}};TargetNS.Resize=function(Type,Width,Height){var PopupObject=GetPopupObjectByType(Type);if(WindowMode==='Iframe'){return;}
if(typeof PopupObject!=='undefined'){PopupObject.resizeTo(Width,Height);}};TargetNS.OpenPopup=function(URL,Type,Profile,Unlinked){var PopupObject,PopupProfile,NewWindow,WindowName,ConfirmClosePopup=true,PopupFeatures;if(Core.App.Responsive.IsSmallerOrEqual(Core.App.Responsive.GetScreenSize(),'ScreenL')&&(!localStorage.getItem("DesktopMode")||parseInt(localStorage.getItem("DesktopMode"),10)<=0)){TargetNS.SetWindowMode('Iframe');}
else{TargetNS.SetWindowMode('Popup');}
CheckOpenPopups();if(URL){PopupObject=GetPopupObjectByType(Type);if(!Unlinked){if(typeof PopupObject!=='undefined'){ConfirmClosePopup=window.confirm(Core.Language.Translate('A popup of this screen is already open. Do you want to close it and load this one instead?'));if(ConfirmClosePopup){TargetNS.ClosePopup(PopupObject);}}}
if(ConfirmClosePopup){PopupProfile=PopupProfiles[Profile]?Profile:PopupDefaultProfile;if(Unlinked&&Unlinked===1){WindowName='PopupOTRS_'+Type+'_'+Date.parse(new Date());}
else{WindowName='OTRSPopup_'+Type+'_'+Date.parse(new Date());}
if(WindowMode==='Popup'){PopupFeatures=PopupProfiles[PopupProfile].WindowURLParams;PopupFeatures+=',left='+((window.screen.left||0)+PopupProfiles[PopupProfile].Left);PopupFeatures+=',width='+PopupProfiles[PopupProfile].Width;if(window.screen.availHeight<PopupProfiles[PopupProfile].Height+PopupProfiles[PopupProfile].Top){PopupFeatures+=',height='+(window.screen.availHeight-PopupProfiles[PopupProfile].Top-20);PopupFeatures+=',top='+((window.screen.top||0)+(PopupProfiles[PopupProfile].Top/2));}
else{PopupFeatures+=',height='+PopupProfiles[PopupProfile].Height;PopupFeatures+=',top='+((window.screen.top||0)+PopupProfiles[PopupProfile].Top);}
NewWindow=window.open(URL,WindowName,PopupFeatures);if(!NewWindow||NewWindow.closed||typeof NewWindow.closed==='undefined'){window.alert(Core.Language.Translate('Could not open popup window. Please disable any popup blockers for this application.'));}
else{OpenPopups[Type]=NewWindow;}}
else if(WindowMode==='Iframe'){window.scrollTo(0,0);$('html').addClass('NoScroll');$('body').append('<iframe data-popuptype="'+Type+'" name="'+WindowName+'" class="PopupIframe" src="'+URL+'"></iframe>');$('iframe.PopupIframe').height($(window).height());}}}};TargetNS.HasOpenPopups=function(){var HasOpenPopups=false,Popup;CheckOpenPopups();for(Popup in OpenPopups){if(OpenPopups.hasOwnProperty(Popup)){HasOpenPopups=true;break;}}
return HasOpenPopups;};TargetNS.ClosePopup=function(PopupType){var PopupObject,ParentObject,PlaceOfExecution,LocalWindowMode;if(typeof PopupType==='undefined'){PlaceOfExecution='Popup';PopupType=CurrentIsPopupWindow();PopupObject=window;ParentObject=GetWindowParentObject();}
else{PlaceOfExecution='Parent';if(typeof PopupType==='string'){PopupObject=GetPopupObjectByType(PopupType);ParentObject=window;}
else{PopupObject=PopupType;if(PopupObject&&typeof PopupObject.name!=='undefined'&&PopupObject.name.match(/OTRSPopup_([^_]+)_.+/)){PopupType=RegExp.$1;}
ParentObject=window;}}
if(typeof PopupObject!=='undefined'&&typeof ParentObject!=='undefined'){if(PlaceOfExecution==='Parent'){LocalWindowMode=TargetNS.GetWindowMode();}
else if(PlaceOfExecution==='Popup'){LocalWindowMode=ParentObject.Core.UI.Popup.GetWindowMode();}
if(LocalWindowMode==='Popup'){PopupObject.close();}
else if(LocalWindowMode==='Iframe'){$('iframe.PopupIframe[data-popuptype='+PopupType+']',ParentObject.document).remove();$('html',ParentObject.document).removeClass('NoScroll');}}
CheckOpenPopups();};TargetNS.ExecuteInParentWindow=function(FunctionToExecute,FunctionParameters){var ParentWindow=GetWindowParentObject();if(typeof ParentWindow==='undefined'||ParentWindow===null){return;}
if(typeof FunctionParameters==='undefined'){FunctionParameters=[ParentWindow];}
else{FunctionParameters.unshift(ParentWindow);}
if(typeof FunctionToExecute!=='undefined'&&$.isFunction(FunctionToExecute)){FunctionToExecute.apply(ParentWindow,FunctionParameters);}};TargetNS.Init=function(){var PopupURL,PopupClose=Core.Config.Get('PopupClose');if(PopupClose==='LoadParentURLAndClose'){PopupURL=Core.Config.Get('PopupURL');if(TargetNS.CurrentIsPopupWindow()){TargetNS.ExecuteInParentWindow(function(WindowObject){WindowObject.Core.UI.Popup.FirePopupEvent('URL',{URL:Core.Config.Get('Baselink')+PopupURL});});TargetNS.ClosePopup();}
else{window.location.href=Core.Config.Get('Baselink')+PopupURL;}}
else if(PopupClose==='ReloadParentAndClose'){TargetNS.ExecuteInParentWindow(function(WindowObject){WindowObject.Core.UI.Popup.FirePopupEvent('Reload');});TargetNS.ClosePopup();}
$(window).on('beforeunload.Popup',function(){return Core.UI.Popup.CheckPopupsOnUnload();});Core.App.BindWindowUnloadEvent('Popup',Core.UI.Popup.ClosePopupsOnUnload);Core.UI.Popup.RegisterPopupEvent();if(CurrentIsPopupWindow()){Core.UI.Popup.InitRegisterPopupAtParentWindow();$('.CancelClosePopup').on('click',function(){TargetNS.ClosePopup();});$('.UndoClosePopup').on('click',function(){var RedirectURL=$(this).attr('href'),ParentWindow=GetWindowParentObject();ParentWindow.Core.UI.Popup.FirePopupEvent('URL',{URL:RedirectURL});TargetNS.ClosePopup();});if(window.opener){$('body').addClass('RealPopup');}}};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI.Popup||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.TreeSelection=(function(TargetNS){function GetChildren(Elements,Index,Data){var NewElements=Elements;$.each(Elements,function(InnerIndex,InnerData){if(typeof InnerData!=='object'){return false;}
if(InnerData.ID===Data.ChildOf){NewElements[InnerIndex].children.push(Data);delete NewElements[Index];}});return NewElements;}
function CollectElements(Elements,Level){var NewElements=Elements;$.each(Elements,function(Index,Data){if(typeof Data!=='object'){return false;}
if(Data.Level===Level){if(Level>0){NewElements=GetChildren(NewElements,Index,Data);}}});return NewElements;}
TargetNS.BuildElementsArray=function($Element,Sort){var Elements=[],Level,HighestLevel=0;if(typeof Sort==='undefined'){Sort=true;}
$Element.find('option').each(function(){var ElementID=$(this).attr('value'),ElementDisabled=$(this).is(':disabled'),ElementName=Core.App.EscapeHTML($(this).text()),ElementSelected=$(this).is(':selected'),ElementTitle=$(this).attr('title'),ElementNameTrim=ElementName.replace(/(^[\xA0]+)/g,''),CurrentLevel=(ElementName.length-ElementNameTrim.length)/2,ChildOf=0,ElementIndex=0,CurrentElement;if(!ElementID||ElementID==="||-"||(ElementDisabled&&ElementName.match(/^-+$/))){return true;}
if(Elements.length&&CurrentLevel>0){if(CurrentLevel>Elements[Elements.length-1].Level){ChildOf=Elements[Elements.length-1].ID;}
else if(CurrentLevel===Elements[Elements.length-1].Level){ChildOf=Elements[Elements.length-1].ChildOf;}
else{for(ElementIndex=Elements.length;ElementIndex>=0;ElementIndex--){if(CurrentLevel>Elements[ElementIndex-1].Level){ChildOf=Elements[ElementIndex-1].ID;break;}}}}
if(ElementDisabled&&ElementID==='-'){ElementID=Core.UI.GetID();}
CurrentElement={ID:ElementID,Name:ElementNameTrim,Level:CurrentLevel,ChildOf:ChildOf,children:[],text:ElementNameTrim,state:{selected:ElementSelected},li_attr:{'data-id':ElementID,'class':(ElementDisabled)?'Disabled':''}};if(ElementTitle!==undefined){CurrentElement["li_attr"]["title"]=ElementTitle;}
Elements.push(CurrentElement);if(CurrentLevel>HighestLevel){HighestLevel=CurrentLevel;}});if(Sort){Elements.sort(function(a,b){if(a.Level-b.Level===0){return(a.Name.localeCompare(b.Name));}
else{return(a.Level-b.Level);}});}
for(Level=HighestLevel;Level>=0;Level--){Elements=CollectElements(Elements,Level);}
Elements.HighestLevel=HighestLevel;return Elements;};TargetNS.ShowTreeSelection=function($TriggerObj){var $TreeObj=$('<div id="JSTree"><ul></ul></div>'),$SelectObj=$TriggerObj.prevAll('select'),SelectSize=$SelectObj.attr('size'),Multiple=($SelectObj.attr('multiple')!==''&&$SelectObj.attr('multiple')!==undefined)?true:false,ElementCount=$SelectObj.find('option').length,DialogTitle=$SelectObj.parent().prev('label').clone().children().remove().end().text(),Elements={},InDialog=false,StyleSheetURL,SelectedNodesTree,SelectedNodes=[],$CurrentFocusedObj;if(!$SelectObj){return false;}
if($SelectObj.closest('.Dialog').length){InDialog=true;}
if(InDialog&&$TriggerObj.hasClass('TreeSelectionVisible')){$TriggerObj
.removeClass('TreeSelectionVisible')
.prev('.jstree')
.jstree('destroy')
.remove();$SelectObj.show();return false;}
if(!DialogTitle){DialogTitle=$SelectObj.prev('label').text();}
DialogTitle=$.trim(DialogTitle);DialogTitle=DialogTitle.substr(0,DialogTitle.length-1);DialogTitle=DialogTitle.replace(/^\*\s+/,'');if(ElementCount===1&&$SelectObj.find('option').text()==='-'){alert(Core.Language.Translate('There are currently no elements available to select from.'));return false;}
Elements=Core.UI.TreeSelection.BuildElementsArray($SelectObj);StyleSheetURL=Core.Config.Get('WebPath')+'skins/Agent/default/css/thirdparty/jstree-theme/default/style.css';$TreeObj.jstree({core:{animation:70,data:Elements,multiple:((SelectSize&&Multiple)||Multiple)?true:false,expand_selected_onload:true,themes:{theme:'default',icons:false,responsive:true,variant:'small',url:StyleSheetURL}},search:{show_only_matches:true,show_only_matches_children:true},plugins:['search']})
.on('select_node.jstree',function(node,selected,event){var $Node=$('#'+selected.node.id);if($Node.hasClass('Disabled')||!$Node.is(':visible')){$TreeObj.jstree('deselect_node',selected.node);}
$TreeObj.jstree('toggle_node',selected.node);if(InDialog){SelectedNodes=[];SelectedNodesTree=$TreeObj.jstree('get_selected');$.each(SelectedNodesTree,function(){SelectedNodes.push($('#'+Core.App.EscapeSelector(this)).data('id'));});$SelectObj.val(SelectedNodes);}
if((event&&event.type!==undefined)&&!InDialog&&!Multiple){$TreeObj.next('#SubmitTree').focus();}})
.on('deselect_node.jstree',function(){if(InDialog){SelectedNodes=[];SelectedNodesTree=$TreeObj.jstree('get_selected');$.each(SelectedNodesTree,function(){SelectedNodes.push($('#'+Core.App.EscapeSelector(this)).data('id'));});$SelectObj.val(SelectedNodes);}});if(!InDialog){Core.UI.Dialog.ShowContentDialog('<div class="OverlayTreeSelector" id="TreeContainer"></div>',DialogTitle,'20%','Center',true);$('#TreeContainer')
.prepend($TreeObj)
.prepend('<div id="TreeSearch"><input type="text" id="TreeSearchInput" placeholder="'+Core.Language.Translate('Search')+'..." /><span title="'+Core.Language.Translate('Delete')+'">x</span></div>')
.append('<input type="button" id="SubmitTree" class="Primary" title="'+Core.Language.Translate('Apply')+'" value="'+Core.Language.Translate('Apply')+'" />');}
else{$TreeObj
.addClass('Hidden InOverlay')
.insertAfter($SelectObj)
.show();$SelectObj.hide();$TriggerObj.addClass('TreeSelectionVisible');}
$CurrentFocusedObj=document.activeElement;$('#TreeSearch').find('input').focus();$('#TreeSearch').find('input').on('keyup',function(){$TreeObj.jstree('search',$(this).val());$('.jstree-search')
.parent()
.removeClass('jstree-open')
.addClass('jstree-closed')
.find('ins').click(function(){$(this).nextAll('ul').find('li').show();});});$('#TreeSearch').find('span').on('click',function(){$(this).prev('input').val('');$TreeObj.jstree('clear_search');});$('#TreeContainer').find('input#SubmitTree').on('click',function(){var SelectedObj=$TreeObj.jstree('get_selected',true),$Node;if(typeof SelectedObj==='object'&&SelectedObj[0]){if(SelectedObj.length>1){$(SelectedObj).each(function(){var $SelectedNode=$('#'+this.id);SelectedNodes.push($SelectedNode.attr('data-id'));});$SelectObj
.val(SelectedNodes)
.trigger('change');}
else{$Node=$('#'+SelectedObj[0].id);if($Node.attr('data-id')!==$SelectObj.val()){$SelectObj
.val($Node.attr('data-id'))
.trigger('change');}}}
else{$SelectObj
.val('')
.trigger('change');}
Core.UI.Dialog.CloseDialog($('.Dialog'));});Core.App.Subscribe('Event.UI.Dialog.CloseDialog.Close',function(Dialog){if($(Dialog).find('#TreeContainer').length&&!$(Dialog).find('#SearchForm').length){$CurrentFocusedObj.focus();}});};TargetNS.InitTreeSelection=function(){$('.Field, fieldset').off('click.ShowTreeSelection').on('click.ShowTreeSelection','.ShowTreeSelection',function(){Core.UI.TreeSelection.ShowTreeSelection($(this));return false;});};TargetNS.InitDynamicFieldTreeViewRestore=function(){$('.DynamicFieldWithTreeView').each(function(){var Data=[];$(this).find('option').each(function(){Data.push([$(this).attr('value'),$(this).text(),$(this).prop('selected'),$(this).prop('disabled')]);});Core.UI.TreeSelection.RestoreDynamicFieldTreeView($(this),Data,1);});};TargetNS.RestoreDynamicFieldTreeView=function($FieldObj,Data,CheckClass,AJAXUpdate){var Key,Value,Selected,SelectedAttr,Disabled,DisabledAttr,SelectData=[],NeededSpaces,Spaces,i;if(CheckClass&&$FieldObj.hasClass('TreeViewRestored')){return false;}
$FieldObj.find('option').remove();$.each(Data,function(index,OptionData){Key=OptionData[0]||'';Value=OptionData[1]||'';Spaces='';NeededSpaces=0;Selected=OptionData[2]||false;Disabled=OptionData[3]||false;if(AJAXUpdate===1){Selected=OptionData[3];Disabled=OptionData[4];}
if(Key.match(/::/g)){NeededSpaces=Key.match(/::/g).length;}
if(NeededSpaces>0){NeededSpaces=NeededSpaces*2;for(i=0;i<NeededSpaces;i++){Spaces='&nbsp;'+Spaces;}}
Value=Spaces+Value;SelectedAttr='';if(Selected){SelectedAttr=' selected="selected"';}
DisabledAttr='';if(Disabled){DisabledAttr=' disabled="disabled"';}
SelectData.push({'Key':Key,'Value':Value,'SelectedAttr':SelectedAttr,'DisabledAttr':DisabledAttr});});SelectData.sort(function(a,b){var KeyA=a.Key.toLowerCase(),KeyB=b.Key.toLowerCase();if(KeyA<KeyB){return-1;}
if(KeyA>KeyB){return 1;}
return 0;});$.each(SelectData,function(index,SelectedData){$FieldObj.append('<option value="'+SelectedData.Key+'"'+SelectedData.SelectedAttr+SelectedData.DisabledAttr+'>'+SelectedData.Value+'</option>');});$FieldObj.addClass('TreeViewRestored');};TargetNS.Init=function(){Core.UI.TreeSelection.InitTreeSelection();Core.UI.TreeSelection.InitDynamicFieldTreeViewRestore();};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.UI.TreeSelection||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Autocomplete=(function(TargetNS){var ConfigFallback={AutoCompleteActive:1,MinQueryLength:2,QueryDelay:100,MaxResultsDisplayed:20},ConfigElements=['AutoCompleteActive','MinQueryLength','QueryDelay','MaxResultsDisplayed','ButtonText'],Config={},AJAXLoaderPrefix='AJAXLoader';function InitConfig(Type,Options){var TypeConfig=Core.Config.Get('Autocomplete');$.each(ConfigElements,function(ConfigKey,ConfigElement){if(Options&&typeof Options[ConfigElement]!=='undefined'){Config[ConfigElement]=Options[ConfigElement];}
else if(Type&&TypeConfig[Type]){Config[ConfigElement]=TypeConfig[Type][ConfigElement];}
else{Config[ConfigElement]=ConfigFallback[ConfigElement];}});Config.AutoCompleteActive=parseInt(Config.AutoCompleteActive,10);if(!Config.AutoCompleteActive){Config.MinQueryLength=500;}
return Config;}
$.ui.autocomplete.prototype._renderItem=function(ul,item){var Regex=new RegExp("("+this.term.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")+")","i"),Label=Core.App.EscapeHTML(item.label);Label=Label.replace(Regex,"<strong>$1</strong>");return $('<li></li>')
.data('item.autocomplete',item)
.append('<a href="#">'+Label+'</a>')
.appendTo(ul);};TargetNS.GetConfig=function(Key){return Config[Key];};TargetNS.SearchButtonClicked={};TargetNS.Init=function($Element,SourceFunction,SelectFunction,Type,Options){var AutocompleteConfig,$Loader;if(!isJQueryObject($Element)||!$Element.length){return;}
AutocompleteConfig=InitConfig(Type,Options);$Element.each(function(){var $SingleElement=$(this);$(this).data('request-counter',0);$SingleElement.autocomplete({minLength:AutocompleteConfig.MinQueryLength,delay:AutocompleteConfig.QueryDelay,search:function(){var FieldID=$SingleElement.attr('id'),LoaderHTML='<span id="'+AJAXLoaderPrefix+FieldID+'" class="AJAXLoader"></span>';$Loader=$('#'+AJAXLoaderPrefix+Core.App.EscapeSelector(FieldID));if(!$Loader.length){$SingleElement.after(LoaderHTML);$Loader=$('#'+AJAXLoaderPrefix+Core.App.EscapeSelector(FieldID));}
$SingleElement.data('request-counter',parseInt($SingleElement.data('request-counter'),10)+1);$Loader.show();},response:function(){$SingleElement.data('request-counter',parseInt($SingleElement.data('request-counter'),10)-1);if(parseInt($SingleElement.data('request-counter'),10)<=0){$Loader.hide();}},open:function(){$SingleElement.autocomplete('widget').addClass('ui-overlay-autocomplete');return false;},source:function(Request,Response){if($SingleElement.data('AutoCompleteXHR')){$SingleElement.data('AutoCompleteXHR').abort();$SingleElement.removeData('AutoCompleteXHR');Response({});}
if(SourceFunction){SourceFunction(Request,Response);}
},select:function(Event,UI){if(SelectFunction){SelectFunction(Event,UI);}
Event.preventDefault();return false;}});});if(!AutocompleteConfig.AutoCompleteActive){$Element.each(function(){var $SelectedElement=$(this);$SelectedElement.after('<button id="'+Core.App.EscapeSelector($SelectedElement.attr('id'))+'Search" type="button">'+Config.ButtonText+'</button>');$('#'+Core.App.EscapeSelector($SelectedElement.attr('id'))+'Search').click(function(){TargetNS.SearchButtonClicked[$SelectedElement.attr('id')]=true;$SelectedElement.autocomplete("option","minLength",0);$SelectedElement.autocomplete("search");$SelectedElement.autocomplete("option","minLength",500);});});}};return TargetNS;}(Core.UI.Autocomplete||{}));

"use strict";var Core=Core||{};Core.Form=(function(TargetNS){var FormModified=false;if(!Core.Debug.CheckDependency('Core.Form','Core.Data','Core.Data')){return false;}
$('input[type="checkbox"][name="rw"]').each(function(){if($(this).attr('checked')==='checked'){$(this).parent().siblings().children().prop('checked',true).prop('disabled',true);$(this).addClass('Disabled');}});if($('input[type="checkbox"][name="rw"]').length!==0&&$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').filter(':checked').length===$('input[type="checkbox"][name="rw"]').not('#SelectAllrw').length){$('table th input:not([name="rw"]:visible)').prop('disabled',true);$('#SelectAllrw').addClass('Disabled');}
TargetNS.Init=function(){$("form input, select, textarea").on('change',FormModifiedSet);}
TargetNS.IsFormModified=function(){return FormModified;}
TargetNS.DisableForm=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
if(!$Form.hasClass('AlreadyDisabled')){$.each($Form.find("input:not([type='hidden']), textarea, select, button"),function(){var ReadonlyValue=$(this).attr('readonly'),TagnameValue=$(this).prop('tagName'),DisabledValue=$(this).attr('disabled');if(TagnameValue==='BUTTON'){Core.Data.Set($(this),'OldDisabledStatus',DisabledValue);}
else{Core.Data.Set($(this),'OldReadonlyStatus',ReadonlyValue);}});$Form
.find("input:not([type='hidden']), textarea, select")
.attr('readonly','readonly')
.end()
.find('button')
.attr('disabled','disabled');$Form.addClass('AlreadyDisabled');Core.App.Publish('Event.Form.DisableForm',[$Form]);}};TargetNS.EnableForm=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
$Form
.find("input:not([type=hidden]), textarea, select")
.removeAttr('readonly')
.end()
.find('button')
.removeAttr('disabled');$.each($Form.find("input:not([type='hidden']), textarea, select, button"),function(){var TagnameValue=$(this).prop('tagName'),ReadonlyValue=Core.Data.Get($(this),'OldReadonlyStatus'),DisabledValue=Core.Data.Get($(this),'OldDisabledStatus');if(TagnameValue==='BUTTON'){if(DisabledValue==='disabled'){$(this).attr('disabled','disabled');}}
else{if(ReadonlyValue==='readonly'){$(this).attr('readonly','readonly');}}});$Form.removeClass('AlreadyDisabled');Core.App.Publish('Event.Form.EnableForm',[$Form]);};TargetNS.SelectAllCheckboxes=function($ClickedBox,$SelectAllCheckbox){var ElementName,SelectAllID,$Elements,Status,CountCheckboxes,CountSelectedCheckboxes,RWMasterSwitch,RowInputs,HeadElements,CheckAll;if(isJQueryObject($ClickedBox,$SelectAllCheckbox)){ElementName=$ClickedBox.attr('name');SelectAllID=$SelectAllCheckbox.attr('id');$Elements=$('input[type="checkbox"][name="'+Core.App.EscapeSelector(ElementName)+'"]').filter('[id!="'+Core.App.EscapeSelector(SelectAllID)+'"]:visible');Status=$ClickedBox.prop('checked');RWMasterSwitch=$('#SelectAllrw');HeadElements=$('table th input:not([name="rw"]:visible)');CheckAll=$('input[type="checkbox"]:visible');if(ElementName==='rw'){if($ClickedBox.attr('id')==='SelectAllrw'){if(RWMasterSwitch.hasClass('Disabled')){CheckAll.prop('disabled',false);RWMasterSwitch.removeClass('Disabled');$Elements.prop('checked',false).removeClass('Disabled');return;}else{CheckAll.prop('checked',true);$('input[type="checkbox"]:visible:not([name="rw"])').not(RWMasterSwitch).prop('disabled',true);$Elements.addClass('Disabled');RWMasterSwitch.addClass('Disabled');return;}}else{RWMasterSwitch.removeClass('Disabled');HeadElements.prop('disabled',false);if($ClickedBox.hasClass('Disabled')){$ClickedBox.parent().siblings().children().prop('disabled',false);$ClickedBox.removeClass('Disabled');}else{RowInputs=$ClickedBox.parent().siblings().children('input');RowInputs.each(function(){if(!$(this)[0].checked){$(this).trigger('click');}
$(this).prop('checked',true).prop('disabled',true);})
$ClickedBox.addClass('Disabled');}}}
if($ClickedBox.attr('id')&&$ClickedBox.attr('id')===SelectAllID){if(!$Elements.filter(':enabled').length){$ClickedBox.prop('checked',true);return;}
$Elements.not(":disabled").prop('checked',Status).triggerHandler('click');}
else{CountCheckboxes=$Elements.length;CountSelectedCheckboxes=$Elements.filter(':checked').length;if(CountCheckboxes===CountSelectedCheckboxes){$SelectAllCheckbox.prop('checked',true);if(ElementName==='rw'){CheckAll.prop('checked',true).not(RWMasterSwitch);RWMasterSwitch.addClass('Disabled');HeadElements.prop('disabled',true);}}
else{$SelectAllCheckbox.prop('checked',false);}}}};TargetNS.InitSelectAllCheckboxes=function($Checkboxes,$SelectAllCheckbox){if(isJQueryObject($Checkboxes,$SelectAllCheckbox)){if($Checkboxes.filter(':checked').length&&($Checkboxes.filter('[id!="'+Core.App.EscapeSelector($SelectAllCheckbox.attr('id'))+'"]').length===$Checkboxes.filter(':checked').length)){$SelectAllCheckbox.prop('checked',true);}
Core.App.Subscribe('Event.UI.Table.InitTableFilter.Change',function($FilterInput,$Container){var CountCheckboxesVisible=$Checkboxes.filter('[id!="'+Core.App.EscapeSelector($SelectAllCheckbox.attr('id'))+'"]:visible');if(!$.contains($Container[0],$SelectAllCheckbox[0])){return;}
if(CountCheckboxesVisible.length&&(CountCheckboxesVisible.filter(':checked').length===CountCheckboxesVisible.length)){$SelectAllCheckbox.prop('checked',true);}
else{$SelectAllCheckbox.prop('checked',false);}});}};function FormModifiedSet(){FormModified=true;$("form input, select, textarea").off('change',FormModified);}
$('body').on('keydown','textarea',function(Event){if((Event.ctrlKey||Event.metaKey)&&Event.keyCode==13){$(this.form).find(':submit').first().click();}});Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Form||{}));

"use strict";var Core=Core||{};Core.Form=Core.Form||{};Core.Form.ErrorTooltips=(function(TargetNS){var TooltipContainerID='OTRS_UI_Tooltips_ErrorTooltip',TooltipOffsetTop=20,TooltipOffsetLeft=20,TongueClass='TongueLeft',TonguePosition='TongueBottom',TongueHeight=10,$TooltipContent=$('<div class="Content" role="tooltip"></div>'),$Tooltip,Offset;TargetNS.ShowTooltip=function($Element,TooltipContent,TooltipPosition){var $TooltipContainer=$('#'+TooltipContainerID),TopOffset;if(TooltipPosition==null){TooltipPosition=TonguePosition;}
if(!$TooltipContainer.length){$('body').append('<div id="'+TooltipContainerID+'" class="TooltipContainer"></div>');$TooltipContainer=$('#'+TooltipContainerID);}
if(($(document).width()-$Element.offset().left)<250){TongueClass='TongueRight';}
$Tooltip=$('<div class="Tooltip '+TongueClass+' '+TooltipPosition+'"></div>');$TooltipContent.html(TooltipContent);$Tooltip.append($TooltipContent);Offset=$Element.offset();$TooltipContainer
.empty()
.append($Tooltip)
.show();if(TooltipPosition==='TongueBottom'){TopOffset=Offset.top+TooltipOffsetTop;}
else if(TooltipPosition==='TongueTop'){TopOffset=Offset.top+$Element.height()-$TooltipContainer.height()-TooltipOffsetTop+TongueHeight;}
$TooltipContainer
.css('left',Offset.left+TooltipOffsetLeft)
.css('top',TopOffset);};TargetNS.HideTooltip=function(){$('#'+TooltipContainerID).hide().empty();};TargetNS.InitTooltip=function($Element,TooltipContent){$Element
.off('focus.Tooltip')
.on('focus.Tooltip',function(){TargetNS.ShowTooltip($Element,TooltipContent);});$Element.off('blur.Tooltip').on('blur.Tooltip',TargetNS.HideTooltip);};TargetNS.RemoveTooltip=function($Element){TargetNS.HideTooltip();$Element.off('focus.Tooltip');$Element.off('blur.Tooltip');};function ShowRTETooltip(Event){TargetNS.ShowTooltip($('#cke_'+Event.listenerData.ElementID+' .cke_contents'),Event.listenerData.Message);}
function RemoveRTETooltip(){TargetNS.HideTooltip();}
TargetNS.InitRTETooltip=function($Element,Message){var ElementID=$Element.attr('id');CKEDITOR.instances[ElementID].on('focus',ShowRTETooltip,null,{ElementID:ElementID,Message:Message});CKEDITOR.instances[ElementID].on('blur',RemoveRTETooltip,null,ElementID);};TargetNS.RemoveRTETooltip=function($Element){var ElementID=$Element.attr('id');CKEDITOR.instances[ElementID].removeListener('focus',ShowRTETooltip);CKEDITOR.instances[ElementID].removeListener('blur',RemoveRTETooltip);TargetNS.HideTooltip();};return TargetNS;}(Core.Form.ErrorTooltips||{}));

"use strict";var Core=Core||{};Core.Form=Core.Form||{};Core.Form.Validate=(function(TargetNS){var Options={FormClass:'Validate',ErrorClass:'Error',ErrorLabelClass:'LabelError',ServerErrorClass:'ServerError',ServerLabelClass:'ServerLabelError',IgnoreClass:'ValidationIgnore',SubmitFunction:{}};if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.UI.Accessibility','Core.UI.Accessibility')){return false;}
if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.UI.Dialog','Core.UI.Dialog')){return false;}
if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.Form','Core.Form')){return false;}
if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.UI.RichTextEditor','Core.UI.RichTextEditor')){return false;}
if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.Form.ErrorTooltips','Core.Form.ErrorTooltips')){return false;}
if(!Core.Debug.CheckDependency('Core.Form.Validate','Core.App','Core.App')){return false;}
TargetNS.HighlightError=function(Element,ErrorType){var $Element=$(Element),InputErrorMessageHTML,InputErrorMessageText;if(ErrorType!=='Error'&&ErrorType!=='ServerError'){ErrorType='Error';}
if(Core.UI.RichTextEditor.IsEnabled($Element)){window.setTimeout(function(){$Element.focus();},0);}
if(Core.UI.InputFields.IsEnabled($Element)){window.setTimeout(function(){$('#'+$Element.data('modernized')).focus();},0);}
if($Element.hasClass(Options.ErrorClass)){return false;}
$Element.addClass(Options.ErrorClass).triggerHandler('error.InputField');$(Element.form).find("label[for="+Core.App.EscapeSelector(Element.id)+"]").addClass(Options.ErrorLabelClass);$Element.attr('aria-invalid',true);if($Element.is('input[type="checkbox"], input[type="radio"]')){$Element.data('ValidateOldValue',$Element.prop('checked'));}
else{$Element.data('ValidateOldValue',$Element.val());}
InputErrorMessageHTML=$('#'+Core.App.EscapeSelector($Element.attr('id'))+ErrorType).html();InputErrorMessageText=$('#'+Core.App.EscapeSelector($Element.attr('id'))+ErrorType).text();if(InputErrorMessageHTML&&InputErrorMessageHTML.length){if($('#cke_'+Core.App.EscapeSelector(Element.id)).length){Core.Form.ErrorTooltips.InitRTETooltip($Element,InputErrorMessageHTML);}
else if($Element.hasClass('RichText')&&parseInt(Core.Config.Get('RichTextSet'),10)===1)
{Core.App.Subscribe('Event.UI.RichTextEditor.InstanceReady',function(){Core.Form.ErrorTooltips.InitRTETooltip($Element,InputErrorMessageHTML);});}
else{Core.Form.ErrorTooltips.InitTooltip($Element,InputErrorMessageHTML);}}
Core.UI.Accessibility.AudibleAlert(InputErrorMessageText);if($Element.closest('.WidgetSimple.Collapsed').find('.WidgetAction.Toggle > a').length){$Element.closest('.WidgetSimple.Collapsed').find('.WidgetAction.Toggle > a').trigger('click');}};TargetNS.UnHighlightError=function(Element){var $Element=$(Element),ElementValue,RemoveError=true;if($Element.hasClass(Options.ServerErrorClass)){if($Element.is('input[type="checkbox"], input[type="radio"]')){ElementValue=$Element.prop('checked');}
else{ElementValue=$Element.val();}
if($Element.data('ValidateOldValue')===ElementValue){RemoveError=false;}
else{$Element.removeData('ValidateOldValue');}}
if(RemoveError){$Element.removeClass(Options.ErrorClass).removeClass(Options.ServerErrorClass).triggerHandler('error.InputField');if(Element.id&&Element.id.length){$(Element.form).find("label[for="+Core.App.EscapeSelector(Element.id)+"]").removeClass(Options.ErrorLabelClass);}
$Element.attr('aria-invalid',false);if($('#cke_'+Core.App.EscapeSelector(Element.id)).length){Core.Form.ErrorTooltips.RemoveRTETooltip($Element);}else{Core.Form.ErrorTooltips.RemoveTooltip($Element);}}};function OnErrorElement(){return true;}
function OnSubmit(Form){$(Form).removeClass('ClientError').removeClass('LabelError');if($.isFunction(Options.SubmitFunction[Form.id])){Options.SubmitFunction[Form.id](Form);}
else{Form.submit();}
if($(Form).hasClass("PreventMultipleSubmits")){window.setTimeout(function(){Core.Form.DisableForm($(Form));},0);}}
function ValidatorMethodRequired(Value,Element){var Text,$Element=$(Element);if(Element.nodeName.toLowerCase()==='select'){Text=$(Element).find('option:selected').text();return(Text.length&&Text!=='-');}
if(Core.UI.RichTextEditor.IsEnabled($Element)){Value=CKEDITOR.instances[Element.id].getData();if(typeof CKEDITOR.instances[Element.id].config.codemirror==='undefined'&&!Value.match(/<img/)){Value=Value.replace(/\s+|&nbsp;|<\/?\w+[^>]*\/?>/g,'');}}
if($Element.filter('input[type="checkbox"], input[type="radio"]').length){return $Element.filter(':checked').length>0;}
return $.trim(Value).length>0;}
function ValidatorMethodDnDUpload(Value,Element){var $AttachmentList=$(Element).prev('.AttachmentListContainer'),AttachmentCount=$AttachmentList.find('table tbody tr').length;return AttachmentCount;}
$.validator.addMethod("Validate_Required",ValidatorMethodRequired,"");$.validator.addMethod("Validate_Number",$.validator.methods.digits,"");$.validator.addMethod("Validate_DnDUpload",ValidatorMethodDnDUpload,"");$.validator.addMethod("Validate_Email",ValidatorMethodRequired,"");$.validator.addMethod("Validate_Email_Optional",function(Value,Element){if(!Value.length){return true;}
else{return $.validator.methods.email.call(this,Value,Element);}},"");$.validator.addMethod("Validate_MaxLength",function(Value,Element){return(Value.replace(/\n\r?/g,"\n\r").length<=$(Element).data('maxlength'));},"");$.validator.addMethod("Validate_DateYear",function(Value){return(parseInt(Value,10)>999&&parseInt(Value,10)<10000);},"");$.validator.addMethod("Validate_DateMonth",function(Value){return(parseInt(Value,10)>0&&parseInt(Value,10)<13);},"");function DateValidator(Value,Element,DateOptions){var Classes=$(Element).attr('class'),DateObject,RegExYear,RegExMonth,RegExHour,RegExMinute,YearElement='',MonthElement='',HourElement='',MinuteElement='',DateYearClassPrefix='Validate_DateYear_',DateMonthClassPrefix='Validate_DateMonth_',DateHourClassPrefix='Validate_DateHour_',DateMinuteClassPrefix='Validate_DateMinute_',DateAfterBefore,DateCheck,$UsedObj;$UsedObj=$(Element).siblings('input.DynamicFieldText[id*="Used"][type="checkbox"]');if($UsedObj.length>0&&$UsedObj.is(':checked')===false){return true;}
RegExYear=new RegExp(DateYearClassPrefix);RegExMonth=new RegExp(DateMonthClassPrefix);RegExHour=new RegExp(DateHourClassPrefix);RegExMinute=new RegExp(DateMinuteClassPrefix);$.each(Classes.split(' '),function(Index,ClassValue){if(RegExYear.test(ClassValue)){YearElement=ClassValue.replace(DateYearClassPrefix,'');}
if(RegExMonth.test(ClassValue)){MonthElement=ClassValue.replace(DateMonthClassPrefix,'');}
if(RegExHour.test(ClassValue)){HourElement=ClassValue.replace(DateHourClassPrefix,'');}
if(RegExMinute.test(ClassValue)){MinuteElement=ClassValue.replace(DateMinuteClassPrefix,'');}});if(YearElement.length&&MonthElement.length&&$('#'+Core.App.EscapeSelector(YearElement)).length&&$('#'+Core.App.EscapeSelector(MonthElement)).length){DateObject=new Date($('#'+Core.App.EscapeSelector(YearElement)).val(),$('#'+Core.App.EscapeSelector(MonthElement)).val()-1,Value);if(DateObject.getFullYear()===parseInt($('#'+Core.App.EscapeSelector(YearElement)).val(),10)&&DateObject.getMonth()+1===parseInt($('#'+Core.App.EscapeSelector(MonthElement)).val(),10)&&DateObject.getDate()===parseInt(Value,10)){DateCheck=new Date();if(MinuteElement.length&&HourElement.length){DateObject.setHours($('#'+Core.App.EscapeSelector(HourElement)).val(),$('#'+Core.App.EscapeSelector(MinuteElement)).val(),0,0);}
else{DateCheck.setHours(0,0,0,0);}
if(DateOptions.DateInFuture){if(DateObject>=DateCheck){return true;}}
else if(DateOptions.DateNotInFuture){if(DateObject<=DateCheck){return true;}}
else if(DateOptions.DateAfterPrefix||DateOptions.DateBeforePrefix||DateOptions.DateAfterValue||DateOptions.DateBeforeValue)
{DateAfterBefore=DateOptions.DateAfterPrefix||DateOptions.DateBeforePrefix||DateOptions.DateAfterValue||DateOptions.DateBeforeValue;if(DateOptions.DateAfterPrefix||DateOptions.DateBeforePrefix){DateAfterBefore=Core.App.EscapeSelector(DateAfterBefore);if($('#'+DateAfterBefore+'Year').length&&$('#'+DateAfterBefore+'Month').length&&$('#'+DateAfterBefore+'Day').length)
{DateCheck=new Date($('#'+DateAfterBefore+'Year').val(),$('#'+DateAfterBefore+'Month').val()-1,$('#'+DateAfterBefore+'Day').val());if($('#'+DateAfterBefore+'Hour').length&&$('#'+DateAfterBefore+'Minute').length)
{DateCheck.setHours($('#'+DateAfterBefore+'Hour').val(),$('#'+DateAfterBefore+'Minute').val(),0,0);}
else{DateCheck.setHours(0,0,0,0);}}}else{DateCheck=new Date(DateAfterBefore);}
if(DateOptions.DateAfterPrefix||DateOptions.DateAfterValue){if(DateObject>=DateCheck){return true;}}else if(DateOptions.DateBeforePrefix||DateOptions.DateBeforeValue){if(DateObject<=DateCheck){return true;}}}
else{return true;}}}
return false;}
$.validator.addMethod("Validate_DateDay",function(Value,Element){return DateValidator(Value,Element,{});},"");$.validator.addMethod("Validate_DateInFuture",function(Value,Element){var $DateSelection=$(Element).parent().find('input[type=checkbox].DateSelection, input[type=radio].DateSelection');if($DateSelection.length&&!$DateSelection.prop("checked")){return true;}
return DateValidator(Value,Element,{DateInFuture:true});},"");$.validator.addMethod("Validate_DateNotInFuture",function(Value,Element){var $DateSelection=$(Element).parent().find('input[type=checkbox].DateSelection, input[type=radio].DateSelection');if($DateSelection.length&&!$DateSelection.prop("checked")){return true;}
return DateValidator(Value,Element,{DateNotInFuture:true});},"");$.validator.addMethod("Validate_DateAfter",function(Value,Element){var $DateSelection=$(Element).parent().find('input[type=checkbox].DateSelection');if($DateSelection.length&&!$DateSelection.prop("checked")){return true;}
if($(Element).data('validate-date-after')){return DateValidator(Value,Element,{DateAfterValue:$(Element).data('validate-date-after')});}
return DateValidator(Value,Element,{DateAfterPrefix:$.grep(Element.className.split(" "),function(ClassName){return ClassName.indexOf('Validate_DateAfter_')===0;}).join().substring(19)});},"");$.validator.addMethod("Validate_DateBefore",function(Value,Element){var $DateSelection=$(Element).parent().find('input[type=checkbox].DateSelection');if($DateSelection.length&&!$DateSelection.prop("checked")){return true;}
if($(Element).data('validate-date-before')){return DateValidator(Value,Element,{DateBeforeValue:$(Element).data('validate-date-before')});}
return DateValidator(Value,Element,{DateBeforePrefix:$.grep(Element.className.split(" "),function(ClassName){return ClassName.indexOf('Validate_DateBefore_')===0;}).join().substring(20)});},"");$.validator.addMethod("Validate_DateHour",function(Value){return(parseInt(Value,10)>=0&&parseInt(Value,10)<24);},"");$.validator.addMethod("Validate_DateMinute",function(Value){return(parseInt(Value,10)>=0&&parseInt(Value,10)<60);},"");$.validator.addMethod("Validate_TimeUnits",function(Value){return(Value===""||/^-{0,1}\d+?((\.|,){0,1}\d+?){0,1}$/.test(Value));},"");$.validator.addMethod("Validate_Equal",function(Value,Element){var Classes=$(Element).attr('class'),EqualElements=[],ApplyRule=0,EqualClassPrefix='Validate_Equal_',RegExEqual,I;RegExEqual=new RegExp(EqualClassPrefix);$.each(Classes.split(' '),function(Index,ClassValue){if(RegExEqual.test(ClassValue)){EqualElements.push(ClassValue.replace(EqualClassPrefix,''));}});if(EqualElements.length){for(I=0;I<EqualElements.length;I++){if($('#'+$.trim(EqualElements[I])).val()===Value){ApplyRule++;}}
return(ApplyRule===EqualElements.length);}});$.validator.addMethod("Validate_NotEqual",function(Value,Element){var Classes=$(Element).attr('class'),GroupClass='',ApplyRule=1,EqualClassPrefix='Validate_NotEqual_',RegExEqual;RegExEqual=new RegExp(EqualClassPrefix);$.each(Classes.split(' '),function(Index,ClassValue){if(RegExEqual.test(ClassValue)){GroupClass=ClassValue;}});if(GroupClass!==''){$(Element).closest('fieldset fieldset.TableLike').find('.'+GroupClass).each(function(){if($(Element).attr('id')!==$(this).attr('id')&&$(this).val()===Value){ApplyRule=0;}});}
return ApplyRule;});$.validator.addClassRules("Validate_Required",{Validate_Required:true});$.validator.addClassRules("Validate_DnDUpload",{Validate_DnDUpload:true});$.validator.addClassRules("Validate_Number",{Validate_Number:true});$.validator.addClassRules("Validate_Email",{Validate_Email:true});$.validator.addClassRules("Validate_Email_Optional",{Validate_Email_Optional:true});$.validator.addClassRules("Validate_MaxLength",{Validate_MaxLength:true});$.validator.addClassRules("Validate_RequiredDropdown",{Validate_Required:true});$.validator.addClassRules("Validate_RequiredRichText",{Validate_Required:true});$.validator.addClassRules("Validate_DateYear",{Validate_DateYear:true});$.validator.addClassRules("Validate_DateMonth",{Validate_DateMonth:true});$.validator.addClassRules("Validate_DateDay",{Validate_DateDay:true});$.validator.addClassRules("Validate_DateHour",{Validate_DateHour:true});$.validator.addClassRules("Validate_DateMinute",{Validate_DateMinute:true});$.validator.addClassRules("Validate_TimeUnits",{Validate_TimeUnits:true});$.validator.addClassRules("Validate_Equal",{Validate_Equal:true});$.validator.addClassRules("Validate_NotEqual",{Validate_NotEqual:true});function GetDependentElements(Element){var Classes=$(Element).attr('class'),DependentElementIDs=[],RegEx,DependingClassPrefix='Validate_Depending_';RegEx=new RegExp(DependingClassPrefix);$.each(Classes.split(' '),function(Index,Value){if(RegEx.test(Value)){DependentElementIDs.push(Value.replace(DependingClassPrefix,''));}});return DependentElementIDs;}
$.validator.addMethod("Validate_DependingRequiredAND",function(Value,Element){var I,DependentElementIDs=[],$DependentElement;DependentElementIDs=GetDependentElements(Element);for(I=0;I<DependentElementIDs.length;I++){$DependentElement=$('#'+$.trim(DependentElementIDs[I]));if($DependentElement.length&&ValidatorMethodRequired($DependentElement.val(),$DependentElement[0])){return ValidatorMethodRequired(Value,Element);}}
return true;},"");$.validator.addClassRules("Validate_DependingRequiredAND",{Validate_DependingRequiredAND:true
});$.validator.addMethod("Validate_DependingRequiredOR",function(Value,Element){var I,DependentElementIDs=[],$DependentElement;DependentElementIDs=GetDependentElements(Element);for(I=0;I<DependentElementIDs.length;I++){$DependentElement=$('#'+$.trim(DependentElementIDs[I]));if($DependentElement.length&&ValidatorMethodRequired($DependentElement.val(),$DependentElement[0])){return true;}}
return ValidatorMethodRequired(Value,Element);},"");$.validator.addClassRules("Validate_DependingRequiredOR",{Validate_DependingRequiredOR:true
});$.validator.addMethod("Validate_Regex",ValidatorMethodRegex,"");function ValidatorMethodRegex(Value,Element){var Regex=$(Element).attr("data-regex");if(Value.match(Regex)){return true;}
return false;}
TargetNS.Init=function(){var FormSelector,$ServerErrors,ServerErrorDialogCloseFunction,ChangedStateID=parseInt($('#ComposeStateID, #NewStateID, #NextStateID').val(),10),PendingStateIDs=Core.Config.Get('PendingStateIDs')||[],Index;if(Options.FormClass){FormSelector='form.'+Options.FormClass;}
else{FormSelector='form';}
if(parseInt(Core.Config.Get('CheckEmailAddresses'),10)){$.validator.addMethod("Validate_Email",$.validator.methods.email,"");}
$(FormSelector).each(function(){$(this).validate({ignoreTitle:true,errorClass:Options.ErrorClass,highlight:TargetNS.HighlightError,unhighlight:TargetNS.UnHighlightError,errorPlacement:OnErrorElement,submitHandler:OnSubmit,ignore:'.'+Options.IgnoreClass});});$ServerErrors=$('input.'+Options.ServerErrorClass)
.add('textarea.'+Options.ServerErrorClass)
.add('select.'+Options.ServerErrorClass);if($ServerErrors.length){$ServerErrors.each(function(){$(this).parents('.WidgetSimple.Collapsed').toggleClass('Collapsed Expanded');TargetNS.HighlightError(this,'ServerError');});ServerErrorDialogCloseFunction=function(){Core.UI.Dialog.CloseDialog($('.Dialog:visible'));$ServerErrors.eq(0).focus();};Core.UI.Dialog.ShowAlert(Core.Language.Translate('Error'),Core.Language.Translate('One or more errors occurred!'),ServerErrorDialogCloseFunction);}
for(Index=0;Index<PendingStateIDs.length;Index++){PendingStateIDs[Index]=parseInt(PendingStateIDs[Index],10);}
if(PendingStateIDs.indexOf(ChangedStateID)===-1){$('#Day').removeClass('Validate_DateInFuture');}
$('#ComposeStateID, #NewStateID, #NextStateID').on('change',function(){ChangedStateID=parseInt($(this).val(),10);if(PendingStateIDs.indexOf(ChangedStateID)>-1){$('#Day').addClass('Validate_DateInFuture');}
else{$('#Day').removeClass('Validate_DateInFuture');}})};TargetNS.ValidateElement=function($Element){if(isJQueryObject($Element)){return $Element.closest('form').validate().element($Element);}
return false;};TargetNS.SetSubmitFunction=function($Form,Func){if(!isJQueryObject($Form)){return false;}
if($.isFunction(Func)&&$Form.length){Options.SubmitFunction[$Form.attr('id')]=Func;}};TargetNS.AddDependingValidation=function(Name,Basis,Depends){var RuleHash={};RuleHash[Basis]={depends:Depends};$.validator.addClassRules(Name,RuleHash);};TargetNS.AddMethod=function(Name,Function){if(Name&&$.isFunction(Function)){$.validator.addMethod(Name,Function,"");}};TargetNS.AddRule=function(Name,MethodHash){if(Name&&typeof MethodHash==="object"){$.validator.addClassRules(Name,MethodHash);}};TargetNS.DisableValidation=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
$Form
.find("input:not([type='hidden']), textarea, select")
.addClass(Options.IgnoreClass);};TargetNS.EnableValidation=function($Form){if(!isJQueryObject($Form)){$Form=$('body');}
$Form
.find("input:not([type='hidden']), textarea, select")
.removeClass(Options.IgnoreClass);};Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL');return TargetNS;}(Core.Form.Validate||{}));

"use strict";var Core=Core||{};Core.Agent=(function(TargetNS){if(!Core.Debug.CheckDependency('Core.Agent','Core.UI','Core.UI')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.Form','Core.Form')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.Form.Validate','Core.Form.Validate')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.UI.Accessibility','Core.UI.Accessibility')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.UI.InputFields','Core.UI.InputFields')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.UI.TreeSelection','Core.UI.TreeSelection')){return false;}
if(!Core.Debug.CheckDependency('Core.Agent','Core.AJAX','Core.AJAX')){return false;}
function InitAvatarFlyout(){var Timeout,TimeoutDuration=700;$('#ToolBar .UserAvatar > a').off('click.UserAvatar').on('click.UserAvatar',function(){$(this).next('div').fadeToggle('fast');$(this).toggleClass('Active');return false;});$('#ToolBar .UserAvatar > div').off('mouseenter.UserAvatar').on('mouseenter.UserAvatar',function(){if(Timeout&&$(this).css('opacity')==1){clearTimeout(Timeout);}});$('#ToolBar .UserAvatar > div').off('mouseleave.UserAvatar').on('mouseleave.UserAvatar',function(){Timeout=setTimeout(function(){$('#ToolBar .UserAvatar > div').fadeOut('fast');$('#ToolBar .UserAvatar > div').prev('a').removeClass('Active');},TimeoutDuration);});}
function InitNavigation(){var NavigationTimer={},NavigationDuration=500,NavigationHoverTimer={},NavigationHoverDuration=350,InitialNavigationContainerHeight=$('#NavigationContainer').css('height'),NavigationResizeTimeout;function CreateSubnavCloseTimeout($Element,TimeoutFunction){NavigationTimer[$Element.attr('id')]=setTimeout(TimeoutFunction,NavigationDuration);}
function ClearSubnavCloseTimeout($Element){if(typeof NavigationTimer[$Element.attr('id')]!=='undefined'){clearTimeout(NavigationTimer[$Element.attr('id')]);}}
function CreateSubnavOpenTimeout($Element,TimeoutFunction){NavigationHoverTimer[$Element.attr('id')]=setTimeout(TimeoutFunction,NavigationHoverDuration);}
function ClearSubnavOpenTimeout($Element){if(typeof NavigationHoverTimer[$Element.attr('id')]!=='undefined'){clearTimeout(NavigationHoverTimer[$Element.attr('id')]);}}
function SetNavContainerHeight($ParentElement){if($ParentElement.find('ul').length){$('#NavigationContainer').css('height',parseInt(InitialNavigationContainerHeight,10)+parseInt($ParentElement.find('ul').outerHeight(),10));}}
TargetNS.ReorderNavigationItems(Core.Config.Get('NavbarOrderItems'));$('#Navigation > li')
.addClass('CanDrag')
.filter(function(){return $('ul',this).length;})
.on('mouseenter',function(){var $Element=$(this);ClearSubnavCloseTimeout($Element);if($('body').hasClass('Visible-ScreenXL')&&!Core.App.Responsive.IsTouchDevice()&&($Element.parent().attr('id')!=='Navigation'||parseInt(Core.Config.Get('OpenMainMenuOnHover'),10))){CreateSubnavOpenTimeout($Element,function(){$Element.addClass('Active').attr('aria-expanded',true)
.siblings().removeClass('Active');SetNavContainerHeight($Element);ClearSubnavCloseTimeout($Element);});}})
.on('mouseleave',function(){var $Element=$(this);if($('body').hasClass('Visible-ScreenXL')){ClearSubnavOpenTimeout($Element);if(!$Element.hasClass('Active')){return false;}
CreateSubnavCloseTimeout($Element,function(){$Element.removeClass('Active').attr('aria-expanded',false);$Element.parent().parent().removeClass('NavContainerZIndex');if(!$('#Navigation > li.Active').length){$('#NavigationContainer').css('height',InitialNavigationContainerHeight);}});}})
.on('click',function(Event){var $Element=$(this),$Target=$(Event.target);if($Target.attr('onclick')){return false;}
if($('body').hasClass('Visible-ScreenXL')&&!Core.App.Responsive.IsTouchDevice()&&parseInt(Core.Config.Get('OpenMainMenuOnHover'),10)){return true;}
if(!parseInt(Core.Config.Get('OTRSBusinessIsInstalled'),10)&&$Target.hasClass('OTRSBusinessRequired')){return true;}
if(navigator&&navigator.userAgent&&navigator.userAgent.match(/Windows Phone/i)&&$Target.closest('ul').attr('id')!=='Navigation'){window.location.href=$Target.closest('a').attr('href');Event.stopPropagation();Event.preventDefault();return true;}
if($Element.hasClass('Active')){$Element.removeClass('Active').attr('aria-expanded',false);$Element.parent().parent().removeClass('NavContainerZIndex');if($('body').hasClass('Visible-ScreenXL')){$('#NavigationContainer').css('height',InitialNavigationContainerHeight);}}
else{$Element.addClass('Active').attr('aria-expanded',true)
.siblings().removeClass('Active');if($('body').hasClass('Visible-ScreenXL')){SetNavContainerHeight($Element);ClearSubnavCloseTimeout($Element);$Element.parent().parent().addClass('NavContainerZIndex');}}
if($Target.closest('li').find('ul').length){Event.preventDefault();Event.stopPropagation();return false;}})
.each(function(){var $Li=$(this),ARIAControlsID=$Li.children('ul').attr('id');if(ARIAControlsID&&ARIAControlsID.length){$Li.attr('aria-controls',ARIAControlsID).attr('aria-expanded',false);}});if(parseInt(Core.Config.Get('MenuDragDropEnabled'),10)===1){Core.App.Subscribe('Event.App.Responsive.ScreenXL',function(){$('#NavigationContainer').css('height','35px');Core.UI.DnD.Sortable($('#Navigation'),{Items:'li.CanDrag',Tolerance:'pointer',Distance:15,Opacity:0.6,Helper:'clone',Axis:'x',Containment:$('#Navigation'),Update:function(){var Items=[];$.each($('#Navigation').children('li'),function(){Items.push($(this).attr('id'));});TargetNS.PreferencesUpdate('UserNavBarItemsOrder',Core.JSON.Stringify(Items),function(){$('#Navigation').after('<i class="fa fa-check"></i>').next('.fa-check').css('left',$('#Navigation').outerWidth()+10).delay(200).fadeIn(function(){$(this).delay(1500).fadeOut();});});$('#NavigationContainer').css('height',InitialNavigationContainerHeight);}});});Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenL',function(){if($('#Navigation').sortable("instance")){$('#Navigation').sortable("destroy");$('#NavigationContainer').css('height','100%');}});}
$('#Navigation li').filter(function(){return $('ul',this).length;}).attr('aria-haspopup','true');$('#GlobalSearchNav, #GlobalSearchNavResponsive').on('click',function(){var SearchFrontend=Core.Config.Get('SearchFrontend');if(SearchFrontend){try{eval(SearchFrontend);}
catch(Error){$.noop(Error);}}
else{Core.Agent.Search.OpenSearchDialog();}
return false;});TargetNS.ResizeNavigationBar();$(window).resize(function(){if(!$('body').hasClass('Visible-ScreenXL')){return;}
window.clearTimeout(NavigationResizeTimeout);NavigationResizeTimeout=window.setTimeout(function(){TargetNS.ResizeNavigationBar(true);},400);});}
function NavigationBarShowSlideButton(Direction,Difference){var Opposites=(Direction==='Right')?'Left':'Right',NewPosition,HideButton=false,Delay=150;if(!$('#NavigationContainer').find('.NavigationBarNavigate'+Direction).length){$('#NavigationContainer')
.append('<a href="#" title="'+Core.Language.Translate('Slide the navigation bar')+'" class="Hidden NavigationBarNavigate'+Direction+'"><i class="fa fa-chevron-'+Direction.toLowerCase()+'"></i></a>')
.find('.NavigationBarNavigate'+Direction)
.delay(Delay)
.fadeIn()
.on('click',function(){if(Direction==='Right'){NewPosition=(parseInt($('#Navigation').css('left'),10)*-1)+parseInt($('#NavigationContainer').width(),10);if(NewPosition>=(parseInt($('#Navigation').width(),10)-parseInt($('#NavigationContainer').width(),10))){NewPosition=parseInt($('#Navigation').width(),10)-parseInt($('#NavigationContainer').width(),10);HideButton=true;}
$('#Navigation')
.animate({'left':NewPosition*-1},'fast',function(){if(HideButton){$('#NavigationContainer')
.find('.NavigationBarNavigate'+Direction)
.fadeOut(Delay,function(){$(this).remove();});}
NavigationBarShowSlideButton(Opposites,Difference);});}
else{NewPosition=(parseInt($('#Navigation').css('left'),10)*-1)-parseInt($('#NavigationContainer').width(),10);if(NewPosition<=0){NewPosition=0;HideButton=true;}
$('#Navigation')
.animate({'left':NewPosition*-1},'fast',function(){if(HideButton){$('#NavigationContainer')
.find('.NavigationBarNavigate'+Direction)
.fadeOut(Delay,function(){$(this).remove();});}
NavigationBarShowSlideButton(Opposites,Difference);});}
return false;});}}
function InitSubmitAndContinue(){$('#SubmitAndContinue').on('click',function(){$('#ContinueAfterSave').val(1);$('#Submit').click();});}
TargetNS.ReorderNavigationItems=function(NavbarCustomOrderItems){var CurrentItems;if(NavbarCustomOrderItems&&parseInt(Core.Config.Get('MenuDragDropEnabled'),10)===1){NavbarCustomOrderItems=JSON.parse(NavbarCustomOrderItems);CurrentItems=$('#Navigation').children('li').get();CurrentItems.sort(function(a,b){var IDA,IDB;IDA=$(a).attr('id');IDB=$(b).attr('id');if($.inArray(IDA,NavbarCustomOrderItems)<$.inArray(IDB,NavbarCustomOrderItems)){return-1;}
if($.inArray(IDA,NavbarCustomOrderItems)>$.inArray(IDB,NavbarCustomOrderItems)){return 1;}
return 0;});$('#Navigation').empty().append(CurrentItems);}
$('#Navigation').hide().css('visibility','visible').show();};function ToolBarIsAside(){if((!$('body').hasClass('RTL')&&(parseInt($('#ToolBar').css('left'),10)>parseInt($('#ToolBar').css('right'),10)||isNaN(parseInt($('#ToolBar').css('left'),10)))&&parseInt($('#NavigationContainer').css('top'),10)<parseInt($('#ToolBar').height(),10))||($('body').hasClass('RTL')&&(parseInt($('#ToolBar').css('left'),10)<parseInt($('#ToolBar').css('right'),10)||isNaN(parseInt($('#ToolBar').css('right'),10)))&&parseInt($('#NavigationContainer').css('top'),10)<parseInt($('#ToolBar').height(),10))){return true;}
return false;}
TargetNS.ResizeNavigationBar=function(RealResizeEvent){var NavigationBarWidth=0,NewContainerWidth;if(RealResizeEvent&&!$('body').hasClass('Visible-ScreenXL')){return;}
if(!$('#NavigationContainer').attr('data-original-width')){$('#NavigationContainer').attr('data-original-width',parseInt(parseInt($('#NavigationContainer').css('width'),10)/$('body').width()*100,10)+'%');}
$('#Navigation').css('left','0px');$('.NavigationBarNavigateLeft').remove();if(ToolBarIsAside()&&(!$('#NavigationContainer').hasClass('IsResized')||RealResizeEvent)){$('#NavigationContainer').css('width',$('#NavigationContainer').attr('data-original-width'));NewContainerWidth=$('#NavigationContainer').width()-$('#ToolBar').width()-parseInt($('#ToolBar').css('right'),10);if($('body').hasClass('RTL')){NewContainerWidth=$('#NavigationContainer').width()-$('#ToolBar').width()-parseInt($('#ToolBar').css('left'),10);}
$('#NavigationContainer')
.css('width',NewContainerWidth)
.addClass('IsResized');}
$('#Navigation > li').each(function(){NavigationBarWidth+=$(this)[0].getBoundingClientRect().width
+parseInt($(this).css('margin-left'),10)
+parseInt($(this).css('margin-right'),10)
+parseInt($(this).css('border-left-width'),10)
+parseInt($(this).css('border-right-width'),10);});if($.browser.msie||$.browser.trident){NavigationBarWidth+=1;}
$('#Navigation').css('width',Math.ceil(NavigationBarWidth));if(NavigationBarWidth>$('#NavigationContainer').outerWidth()){NavigationBarShowSlideButton('Right',parseInt($('#NavigationContainer').outerWidth(true)-NavigationBarWidth,10));}
else if(NavigationBarWidth<$('#NavigationContainer').outerWidth(true)){$('.NavigationBarNavigateRight, .NavigationBarNavigateLeft').remove();if($('body').hasClass('RTL')){$('#Navigation').css({'left':'auto','right':'0px'});}
else{$('#Navigation').css({'left':'0px','right':'auto'});}}};TargetNS.SupportedBrowser=true;TargetNS.IECompatibilityMode=false;TargetNS.Init=function(){TargetNS.SupportedBrowser=Core.App.BrowserCheck('Agent');TargetNS.IECompatibilityMode=Core.App.BrowserCheckIECompatibilityMode();if(TargetNS.IECompatibilityMode){TargetNS.SupportedBrowser=false;alert(Core.Language.Translate('Please turn off Compatibility Mode in Internet Explorer!'));}
if(!TargetNS.SupportedBrowser){alert(Core.Language.Translate('The browser you are using is too old.')
+' '
+Core.Language.Translate('This software runs with a huge lists of browsers, please upgrade to one of these.')
+' '
+Core.Language.Translate('Please see the documentation or ask your admin for further information.'));}
Core.App.Responsive.CheckIfTouchDevice();InitNavigation();InitAvatarFlyout();InitSubmitAndContinue();TargetNS.InitPagination();if(!parseInt(Core.Config.Get('OTRSBusinessIsInstalled'),10)){InitOTRSBusinessRequiredDialog();}
if(parseInt(Core.Config.Get('NewTicketInNewWindow'),10)){InitTicketInNewWindow();}};TargetNS.PreferencesUpdate=function(Key,Value,SuccessCallback){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentPreferences',Subaction:'UpdateAJAX',Key:Key,Value:Value};if(!$.isFunction(SuccessCallback)){SuccessCallback=$.noop;}
Core.AJAX.FunctionCall(URL,Data,SuccessCallback);return true;};TargetNS.CheckSessionExpiredAndReload=function(){if($('#LoginBox').length){location.reload();}};TargetNS.InitPagination=function(){var WidgetContainers=Core.Config.Get('ContainerNames');if(typeof WidgetContainers!=='undefined'){$.each(WidgetContainers,function(Index,Value){if(typeof Core.Config.Get('PaginationData'+Value.NameForm)!=='undefined'){PaginationEvent(Value);Core.App.Subscribe('Event.AJAX.ContentUpdate.Callback',function($WidgetElement){if(typeof $WidgetElement!=='undefined'&&$WidgetElement.search(Value.NameForm)!==parseInt('-1',10)){PaginationEvent(Value);}});}});}};function PaginationEvent(Params){var ServerData=Core.Config.Get('PaginationData'+Params.NameForm),Pagination,PaginationData,$Container;if(typeof ServerData!=='undefined'){$('.Pagination'+Params.NameForm).off('click.PaginationAJAX'+Params.NameForm).on('click.PaginationAJAX'+Params.NameForm,function(){Pagination=Core.Data.Get($(this),'pagination-pagenumber');PaginationData=ServerData[Pagination];$Container=$(this).parents('.WidgetSimple');$Container.addClass('Loading');Core.AJAX.ContentUpdate($('#'+PaginationData.AjaxReplace),PaginationData.Baselink,function(){$Container.removeClass('Loading');});return false;});}}
function InitOTRSBusinessRequiredDialog(){$('body').on('click','a.OTRSBusinessRequired',function(){TargetNS.ShowOTRSBusinessRequiredDialog();return false;});}
TargetNS.ShowOTRSBusinessRequiredDialog=function(){var OTRSBusinessLabel='<strong>OTRS Business Solution</strong>';Core.UI.Dialog.ShowContentDialog('<div class="OTRSBusinessRequiredDialog">'+Core.Language.Translate('This feature is part of the %s. Please contact us at %s for an upgrade.',OTRSBusinessLabel,'sales@otrs.com')+'<a class="Hidden" href="http://www.otrs.com/solutions/" target="_blank"><span></span></a></div>','','240px','Center',true,[{Label:Core.Language.Translate('Find out more'),Class:'Primary',Function:function(){$('.OTRSBusinessRequiredDialog').find('a span').trigger('click');}}]);};function InitTicketInNewWindow(){$('#nav-Tickets-Newphoneticket a').attr('target','_blank');$('#nav-Tickets-Newemailticket a').attr('target','_blank');$('#nav-Tickets-Newprocessticket a').attr('target','_blank');$('.PhoneTicket a').attr('target','_blank');$('.EmailTicket a').attr('target','_blank');$('.ProcessTicket a').attr('target','_blank');}
Core.Init.RegisterNamespace(TargetNS,'APP_GLOBAL_EARLY');return TargetNS;}(Core.Agent||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Search=(function(TargetNS){var AJAXStopWordCheckRunning=false;TargetNS.AdditionalAttributeSelectionRebuild=function(){var $AttributeClone=$('#AttributeOrig option').clone(),$AttributeSelection=$('#Attribute').empty();$AttributeClone.each(function(){if(!$('#SearchInsert label#Label'+$(this).attr('value')).length){$AttributeSelection.append($(this));}});$AttributeSelection.trigger('redraw.InputField');return true;};TargetNS.SearchAttributeAdd=function(Attribute){var $Label=$('#SearchAttributesHidden label#Label'+Attribute);if($Label.length){$Label.prev().clone().appendTo('#SearchInsert');$Label.clone().appendTo('#SearchInsert');$Label.next().clone().appendTo('#SearchInsert')
.find('.RemoveButton').on('click',function(){var $Element=$(this).parent();TargetNS.SearchAttributeRemove($Element);TargetNS.AdditionalAttributeSelectionRebuild();return false;});$('.CustomerAutoCompleteSimple').each(function(){Core.Agent.CustomerSearch.InitSimple($(this));});Core.UI.TreeSelection.InitTreeSelection();Core.UI.InputFields.Activate($('#SearchInsert'));Core.UI.TreeSelection.InitDynamicFieldTreeViewRestore();}
return false;};TargetNS.SearchAttributeRemove=function($Element){$Element.prev().prev().remove();$Element.prev().remove();$Element.remove();};function SearchProfileDelete(Profile,SearchProfileAction){var Data={Action:SearchProfileAction,Subaction:'AJAXProfileDelete',Profile:Profile};Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(){});}
function CheckForSearchedValues(){var SearchValueFlag=false;$('#SearchForm label').each(function(){var ElementName,$Element,$LabelElement=$(this),$FieldElement=$LabelElement.next('.Field');if($(this).attr('id')){ElementName=$(this).attr('id').substring(5);$Element=$('#SearchForm input[name='+Core.App.EscapeSelector(ElementName)+']');if(!$Element.length){$Element=$(this).next().find('select');}
if($FieldElement.find('input[name$="SearchType"]').val()==='TimeSlot'&&!$FieldElement.find('select').length){$Element=$FieldElement.find('input[type=text]').first();}
if($Element.length){if($Element.val()&&$Element.val()!==''){SearchValueFlag=true;}}}});if(!SearchValueFlag){alert(Core.Language.Translate('Please enter at least one search value or * to find anything.'));}
return SearchValueFlag;}
function ShowWaitingDialog(){Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'10px','Center',true);}
function AJAXStopWordCheck(SearchStrings,CallbackStopWordsFound,CallbackNoStopWordsFound){var StopWordCheckData={Action:'AgentTicketSearch',Subaction:'AJAXStopWordCheck',SearchStrings:SearchStrings},MIMEBaseElements={'MIMEBase_From':1,'MIMEBase_To':1,'MIMEBase_Cc':1,'MIMEBase_Subject':1,'MIMEBase_Body':1};if(AJAXStopWordCheckRunning){return;}
AJAXStopWordCheckRunning=true;Core.Form.DisableForm($('#SearchForm'));Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),StopWordCheckData,function(Result){var FoundStopWords='';$.each(Result.FoundStopWords,function(Key,StopWords){var TranslatedKey=Core.Config.Get('FieldTitle'+Key);if(!StopWords.length){return;}
if(!TranslatedKey){TranslatedKey=Key;}
if(MIMEBaseElements[TranslatedKey]){TranslatedKey=TranslatedKey.replace('MIMEBase_','');}
FoundStopWords+=TranslatedKey+': '+StopWords.join(', ')+"\n";});AJAXStopWordCheckRunning=false;Core.Form.EnableForm($('#SearchForm'));if(FoundStopWords.length){CallbackStopWordsFound(FoundStopWords);}
else{CallbackNoStopWordsFound();}});}
function CheckSearchStringsForStopWords(Callback){var SearchStrings={},SearchStringsFound=0,RelevantElementNames={'MIMEBase_From':1,'MIMEBase_To':1,'MIMEBase_Cc':1,'MIMEBase_Subject':1,'MIMEBase_Body':1,'Fulltext':1};if(!Core.Config.Get('CheckSearchStringsForStopWords')){Callback();return;}
$('#SearchForm label').each(function(){var ElementName,$Element;if($(this).attr('id')){ElementName=$(this).attr('id').substring(5);if(!RelevantElementNames[ElementName]){return;}
$Element=$('#SearchForm input[name='+ElementName+']');if($Element.length){if($Element.val()&&$Element.val()!==''){SearchStrings[ElementName]=$Element.val();SearchStringsFound=1;}}}});if(!SearchStringsFound){Callback();return;}
AJAXStopWordCheck(SearchStrings,function(FoundStopWords){alert(Core.Language.Translate('Please remove the following words from your search as they cannot be searched for:')+"\n"+FoundStopWords);},Callback);}
TargetNS.OpenSearchDialog=function(Action,Profile,EmptySearch){var Referrer=Core.Config.Get('Action'),Data;if(!Action){Action='AgentSearch';}
Data={Action:Action,Referrer:Referrer,Profile:Profile,EmptySearch:EmptySearch,Subaction:'AJAX'};ShowWaitingDialog();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowDialog({HTML:HTML,Title:Core.Language.Translate('Search'),Modal:true,CloseOnClickOutside:false,CloseOnEscape:true,PositionTop:'10px',PositionLeft:'Center',AllowAutoGrow:true});$('#SearchProfileAddBlock').hide();$('#SaveProfile').parent().hide().prev().hide().prev().hide();if($('#SearchProfile').val()&&$('#SearchProfile').val()!=='last-search'){$('#SearchProfileDelete').show();$('#SearchProfileAsLink').show();$('#SaveProfile').parent().show().prev().show().prev().show();$('#SaveProfile').prop('checked',false);}
Core.UI.InputFields.Activate($('.Dialog:visible'));$('#Attribute').on('change',function(){var Attribute=$('#Attribute').val();TargetNS.SearchAttributeAdd(Attribute);TargetNS.AdditionalAttributeSelectionRebuild();$('.ShowTreeSelection').off('click').on('click',function(){Core.UI.TreeSelection.ShowTreeSelection($(this));return false;});return false;});$('#SearchForm').off('keypress.FilterInput').on('keypress.FilterInput',function(Event){if((Event.charCode||Event.keyCode)===13){if(!CheckForSearchedValues()){return false;}
else{$('#SearchFormSubmit').trigger('click');}
return false;}});$('#SearchFormSubmit').on('click',function(){var ShownAttributes=[];if($('#SearchProfileAddAction, #SearchProfileAddName').is(':visible')&&$('#SearchProfileAddName').val()){$('#SearchProfileAddAction').trigger('click');}
$('#SearchInsert label').each(function(){if($(this).attr('id')){ShownAttributes.push($(this).attr('id'));}});$('#SearchForm #ShownAttributes').val(ShownAttributes.join(';'));if($('#SearchForm #ResultForm').val()==='Normal'){if(!CheckForSearchedValues()){return false;}
else{CheckSearchStringsForStopWords(function(){$('#SearchForm').submit();return false;});}}
else{$('#SearchForm').attr('target','SearchResultPage');if(!CheckForSearchedValues()){return false;}
else{CheckSearchStringsForStopWords(function(){$('#SearchForm').submit();$('#SearchForm').attr('target','');});}}
return false;});Core.Form.Validate.Init();Core.Form.Validate.SetSubmitFunction($('#SearchForm'),function(Form){Form.submit();if($('#SearchForm #ResultForm').val()==='Normal'){ShowWaitingDialog();}});$('#SearchProfile').on('change',function(){var SearchProfile=$('#SearchProfile').val(),SearchProfileEmptySearch=$('#EmptySearch').val(),SearchProfileAction=$('#SearchAction').val();TargetNS.OpenSearchDialog(SearchProfileAction,SearchProfile,SearchProfileEmptySearch);return false;});$('#SearchProfileNew').on('click',function(Event){$('#SearchProfileAddBlock').toggle();$('#SearchProfileAddName').focus();Event.preventDefault();return false;});$('#SearchProfileAddAction').on('click',function(){var ProfileName,$Element1;ProfileName=$('#SearchProfileAddName').val();if(!ProfileName.length||ProfileName.length<2){return;}
$Element1=$('#SearchProfile').children().first().clone();$Element1.text(ProfileName);$Element1.attr('value',ProfileName);$Element1.prop('selected',true);$('#SearchProfile').append($Element1).trigger('redraw.InputField');$('#SearchProfileAddName').val('');$('#SearchProfileAddBlock').hide();$('#SaveProfile').parent().hide().prev().hide().prev().hide();$('#SaveProfile').prop('checked',true);$('#SearchProfileDelete').show();$('#SearchProfileAsLink').show();});$('#SearchProfileAsLink').on('click',function(){var SearchProfile=$('#SearchProfile').val(),SearchProfileAction=$('#SearchAction').val();window.location.href=Core.Config.Get('Baselink')+'Action='+SearchProfileAction+
';Subaction=Search;TakeLastSearch=1;SaveProfile=1;Profile='+encodeURIComponent(SearchProfile);return false;});$('#SearchProfileDelete').on('click',function(Event){var SearchProfileAction=$('#SearchAction').val();$('#SearchProfile').find('option:selected').each(function(){if($(this).attr('value')!=='last-search'){$('#SearchInsert').text('');SearchProfileDelete($(this).val(),SearchProfileAction);$(this).remove();TargetNS.SearchAttributeAdd('Fulltext');TargetNS.AdditionalAttributeSelectionRebuild();}});$('#SearchProfile').trigger('change');if($('#SearchProfile').val()&&$('#SearchProfile').val()==='last-search'){$('#SearchProfileDelete').hide();$('#SearchProfileAsLink').hide();}
Event.preventDefault();return false;});window.setTimeout(function(){TargetNS.AddSearchAttributes();TargetNS.AdditionalAttributeSelectionRebuild();},0);},'html');};TargetNS.InitToolbarFulltextSearch=function(){$('#ToolBar li.Extended.SearchFulltext form[name="SearchFulltext"]').off('keypress.FilterInput').on('keypress.FilterInput',function(Event){var SearchString;if((Event.charCode||Event.keyCode)===13){SearchString=$('#Fulltext').val();if(!SearchString.length||!Core.Config.Get('CheckSearchStringsForStopWords')){return true;}
AJAXStopWordCheck({Fulltext:SearchString},function(FoundStopWords){alert(Core.Language.Translate('Please remove the following words from your search as they cannot be searched for:')+"\n"+FoundStopWords);},function(){$('#ToolBar li.Extended.SearchFulltext form[name="SearchFulltext"]').submit();});return false;}});};TargetNS.AddSearchAttributes=function(){var i,SearchAttributes=Core.Config.Get('SearchAttributes');if(typeof SearchAttributes!=='undefined'&&SearchAttributes.length>0){for(i=0;i<SearchAttributes.length;i++){Core.Agent.Search.SearchAttributeAdd(SearchAttributes[i]);}}};TargetNS.Init=function(){var NonAJAXSearch=Core.Config.Get('NonAJAXSearch');if(typeof NonAJAXSearch!=='undefined'&&parseInt(NonAJAXSearch,10)===1){Core.Agent.Search.OpenSearchDialog(Core.Config.Get('Action'),Core.Config.Get('Profile'));}};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Agent.Search||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.CustomerInformationCenterSearch=(function(TargetNS){function ShowWaitingDialog(){Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'10px','Center',true);}
function Redirect(CustomerID,Event){var Session='';Event.preventDefault();Event.stopPropagation();ShowWaitingDialog();if(!Core.Config.Get('SessionIDCookie')){Session=';'+Core.Config.Get('SessionName')+'='+Core.Config.Get('SessionID');}
window.location.href=Core.Config.Get('Baselink')+'Action=AgentCustomerInformationCenter;CustomerID='+encodeURIComponent(CustomerID)+Session;}
TargetNS.InitAutocomplete=function($Input,Subaction){Core.UI.Autocomplete.Init($Input,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentCustomerInformationCenterSearch',Subaction:Subaction,Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Input.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Input.removeData('AutoCompleteXHR');$.each(Result,function(){ValueData.push({label:this.Label,value:this.Value});});Response(ValueData);}));},function(Event,UI){Redirect(UI.item.value,Event);},'CustomerSearch');};TargetNS.OpenSearchDialog=function(){var Data={Action:'AgentCustomerInformationCenterSearch'};ShowWaitingDialog();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowContentDialog(HTML,Core.Language.Translate('Search'),'10px','Center',true);TargetNS.Init();},'html');};TargetNS.Init=function(){TargetNS.InitAutocomplete($("#AgentCustomerInformationCenterSearchCustomerID"),'SearchCustomerID');TargetNS.InitAutocomplete($("#AgentCustomerInformationCenterSearchCustomerUser"),'SearchCustomerUser');$("#AgentCustomerInformationCenterSearchForm").submit(function(Event){Event.preventDefault();});};return TargetNS;}(Core.Agent.CustomerInformationCenterSearch||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.CustomerSearch=(function(TargetNS){var BackupData={CustomerInfo:'',CustomerEmail:'',CustomerKey:''},CustomerFieldChangeRunCount={};function DeactivateSelectionCustomerID(){if($('#TemplateSelectionCustomerID').length){$('#SelectionCustomerID').prop('disabled',true)
$('#SelectionCustomerID').prop('title',Core.Language.Translate('First select a customer user, then select a customer ID to assign to this ticket.'));$('#SelectionCustomerID').addClass('Disabled');}}
function ActivateSelectionCustomerID(){if($('#TemplateSelectionCustomerID').length&&$('#SelectionCustomerID').hasClass('Disabled')){$('#SelectionCustomerID').prop('disabled',false)
$('#SelectionCustomerID').prop('title',Core.Language.Translate('Select a customer ID to assign to this ticket.'));$('#SelectionCustomerID').removeClass('Disabled');}}
function GetCustomerInfo(CustomerUserID){var Data={Action:'AgentCustomerSearch',Subaction:'CustomerInfo',CustomerUserID:CustomerUserID},SignatureURL;Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){$('#CustomerID').val(Response.CustomerID);$('#ShowCustomerID').html(Response.CustomerID);Core.App.Publish('Event.Agent.CustomerSearch.GetCustomerInfo.Callback',[Response.CustomerID]);$('#CustomerInfo .Content').html(Response.CustomerTableHTMLString);if(Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketPhone'){$('#ServiceID').attr('selectedIndex',0);Core.AJAX.FormUpdate($('#CustomerID').closest('form'),'AJAXUpdate','ServiceID',['Dest','SelectedCustomerUser','Signature','NextStateID','PriorityID','ServiceID','SLAID','CryptKeyID','OwnerAll','ResponsibleAll','TicketFreeText1','TicketFreeText2','TicketFreeText3','TicketFreeText4','TicketFreeText5','TicketFreeText6','TicketFreeText7','TicketFreeText8','TicketFreeText9','TicketFreeText10','TicketFreeText11','TicketFreeText12','TicketFreeText13','TicketFreeText14','TicketFreeText15','TicketFreeText16']);if($('#Dest').val()!==''){SignatureURL=Core.Config.Get('Baselink')+'Action='+Core.Config.Get('Action')+';Subaction=Signature;Dest='+$('#Dest').val()+';SelectedCustomerUser='+$('#SelectedCustomerUser').val();if(!Core.Config.Get('SessionIDCookie')){SignatureURL+=';'+Core.Config.Get('SessionName')+'='+Core.Config.Get('SessionID');}
$('#Signature').attr('src',SignatureURL);}}
if(Core.Config.Get('Action')==='AgentTicketProcess'&&typeof Core.Config.Get('CustomerFieldsToUpdate')!=='undefined'){$('#ServiceID').attr('selectedIndex',0);Core.AJAX.FormUpdate($('#CustomerID').closest('form'),'AJAXUpdate','ServiceID',Core.Config.Get('CustomerFieldsToUpdate'));}});}
function GetCustomerTickets(CustomerUserID,CustomerID){var Data={Action:'AgentCustomerSearch',Subaction:'CustomerTickets',CustomerUserID:CustomerUserID,CustomerID:CustomerID};if(typeof Core.Config.Get('CustomerSearch')!=='undefined'&&!parseInt(Core.Config.Get('CustomerSearch').ShowCustomerTickets,10)){return;}
function CustomerHistoryEvents(){$('select[name=ResponseID]').on('change',function(){var URL;if($(this).val()>0){URL=Core.Config.Get('Baselink')+$(this).parents().serialize();Core.UI.Popup.OpenPopup(URL,'TicketAction');$(this).val('0');}});$('select[name=ResponseID]').on('click',function(Event){Event.stopPropagation();return false;});$('#CustomerTickets .MasterAction').on('click',function(Event){var $MasterActionLink=$(this).find('a.MasterActionLink');if($(Event.target).hasClass('InputField_Search')){return true;}
if(Core.Config.Get('Action')==='AgentTicketCustomer'){Core.UI.Popup.ExecuteInParentWindow(function(WindowObject){WindowObject.Core.UI.Popup.FirePopupEvent('URL',{URL:$MasterActionLink.attr('href')});});Core.UI.Popup.ClosePopup();return false;}
else{if(Event.target!==$MasterActionLink.get(0)){window.location=$MasterActionLink.attr('href');return false;}}});$("#SortBy").off('change').on('change',function(){var SortedData,Selection=$(this).val().split('|');if(Selection.length===2){SortedData={Action:'AgentCustomerSearch',Subaction:'CustomerTickets',CustomerUserID:CustomerUserID,CustomerID:CustomerID,SortBy:Selection[0],OrderBy:Selection[1]};Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),SortedData,function(Response){if($('#CustomerTickets').length){$('#CustomerTickets').html(Response.CustomerTicketsHTMLString);ReplaceCustomerTicketLinks();}});}});Core.UI.InputFields.Activate();Core.App.Subscribe('Event.UI.Accordion.OpenElement',function($Element){Core.UI.InputFields.Activate($Element);});}
function ReplaceCustomerTicketLinks(){$('#CustomerTickets').find('.AriaRoleMain').removeAttr('role').removeClass('AriaRoleMain');$('#CustomerTickets').find('.OverviewZoom a, .Pagination a, .TableSmall th a').click(function(){var Link=$(this).attr('href'),URLComponents;URLComponents=Link.split('?',2);Core.AJAX.FunctionCall(URLComponents[0],URLComponents[1],function(Response){if($('#CustomerTickets').length){$('#CustomerTickets').html(Response.CustomerTicketsHTMLString);ReplaceCustomerTicketLinks();$('#CustomerTickets a.SplitSelection').off('click').on('click',function(){Core.Agent.TicketSplit.OpenSplitSelection($(this).attr('href'));return false;});}});return false;});Core.UI.Accordion.Init($('.Preview > ul'),'li h3 a','.HiddenBlock');if(Core.Config.Get('Action')==='AgentTicketPhone'||Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketCustomer'||Core.Config.Get('Action')==='AgentChatAppend')
{CustomerHistoryEvents();}
return false;}
Core.AJAX.FunctionCall(Core.Config.Get('Baselink'),Data,function(Response){if($('#CustomerTickets').length){$('#CustomerTickets').html(Response.CustomerTicketsHTMLString);ReplaceCustomerTicketLinks();$('#CustomerTickets a.AsPopup').off('click').on('click',function(){Core.UI.Popup.OpenPopup($(this).attr('href'),'Action');return false;});$('#CustomerTickets a.SplitSelection').off('click').on('click',function(){Core.Agent.TicketSplit.OpenSplitSelection($(this).attr('href'));return false;});}});}
function CheckPhoneCustomerCountLimit(){if(Core.Config.Get('Action')!=='AgentTicketPhone'){return;}
if(parseInt(Core.Config.Get('CustomerSearch').AllowMultipleFrom,10)){return;}
if($('#TicketCustomerContentFromCustomer input.CustomerTicketText').length>0){$('#FromCustomer').val('').prop('disabled',true).prop('readonly',true);$('#Dest').trigger('focus');}
else{$('#FromCustomer').val('').prop('disabled',false).prop('readonly',false);}}
TargetNS.InitSimple=function($Element){var CustomerSearchType=$Element.data('customer-search-type');if(CustomerSearchType){Core.UI.Autocomplete.Init($Element,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentCustomerSearch',Subaction:'Search'+CustomerSearchType,Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Element.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Element.removeData('AutoCompleteXHR');$.each(Result,function(){ValueData.push({label:this.Label+(CustomerSearchType=='CustomerUser'?' ('+this.Value+')':''),value:this.Value});});Response(ValueData);}));},function(Event,UI){$Element.val(UI.item.value).trigger('select.Autocomplete');Event.preventDefault();Event.stopPropagation();return false;},'CustomerSearch');}}
TargetNS.Init=function($Element){var AutocompleteFocus=false;if(Core.Config.Get('Action')==='AgentTicketCustomer'){GetCustomerTickets($('#CustomerAutoComplete').val(),$('#CustomerID').val());$Element.blur(function(){if($Element.val()===''){TargetNS.ResetCustomerInfo();DeactivateSelectionCustomerID();$('#CustomerTickets').empty();}});}
if((Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketPhone')&&$('#SelectedCustomerUser').val()!==''){GetCustomerTickets($('#SelectedCustomerUser').val());}
if($('#CustomerInfo').length){BackupData.CustomerInfo=$('#CustomerInfo .Content').html();}
if(isJQueryObject($Element)){$Element.off('keyup.Validate').on('keyup.Validate',function(){var Value=$Element.val();if($Element.hasClass('ServerError')&&Value.length){$('#OTRS_UI_Tooltips_ErrorTooltip').hide();}});Core.App.Subscribe('Event.CustomerUserAddressBook.AddTicketCustomer.Callback.'+$Element.attr('id'),function(UserLogin,CustomerTicketText){$Element.val(CustomerTicketText);TargetNS.AddTicketCustomer($Element.attr('id'),CustomerTicketText,UserLogin);});Core.UI.Autocomplete.Init($Element,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentCustomerSearch',Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Element.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Element.removeData('AutoCompleteXHR');$.each(Result,function(){ValueData.push({label:this.Label+" ("+this.Value+")",value:this.Label,key:this.Value});});Response(ValueData);}));},function(Event,UI){var CustomerKey=UI.item.key,CustomerValue=UI.item.value;BackupData.CustomerKey=CustomerKey;BackupData.CustomerEmail=CustomerValue;$Element.val(CustomerValue);if(Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketCompose'||Core.Config.Get('Action')==='AgentTicketForward'||Core.Config.Get('Action')==='AgentTicketEmailOutbound'||Core.Config.Get('Action')==='AgentTicketEmailResend')
{$Element.val('');}
if(Core.Config.Get('Action')!=='AgentTicketPhone'&&Core.Config.Get('Action')!=='AgentTicketEmail'&&Core.Config.Get('Action')!=='AgentTicketCompose'&&Core.Config.Get('Action')!=='AgentTicketForward'&&Core.Config.Get('Action')!=='AgentTicketEmailOutbound'&&Core.Config.Get('Action')!=='AgentTicketEmailResend')
{$('#SelectedCustomerUser').val(CustomerKey);ActivateSelectionCustomerID();if($('#CustomerUserID').length){$('#CustomerUserID').val(CustomerKey);if($('#CustomerUserOption').length){$('#CustomerUserOption').val(CustomerKey);}
else{$('<input type="hidden" name="CustomerUserOption" id="CustomerUserOption">').val(CustomerKey).appendTo($Element.closest('form'));}}
GetCustomerTickets(CustomerKey);GetCustomerInfo(CustomerKey);}
else{TargetNS.AddTicketCustomer($(Event.target).attr('id'),CustomerValue,CustomerKey);}},'CustomerSearch');$Element.on('autocompletefocus',function(){AutocompleteFocus=true;});$Element.on('autocompleteclose',function(Event){if(AutocompleteFocus&&(Event.originalEvent===undefined||(Event.originalEvent&&Event.originalEvent.type=='blur')))
{AutocompleteFocus=true;$Element.val('');}});if(Core.Config.Get('Action')!=='AgentTicketPhone'&&Core.Config.Get('Action')!=='AgentTicketEmail'&&Core.Config.Get('Action')!=='AgentTicketCompose'&&Core.Config.Get('Action')!=='AgentTicketForward'&&Core.Config.Get('Action')!=='AgentTicketEmailOutbound'&&Core.Config.Get('Action')!=='AgentTicketEmailResend')
{$Element.blur(function(){var FieldValue=$(this).val();if(FieldValue!==BackupData.CustomerEmail&&FieldValue!==BackupData.CustomerKey){$('#SelectedCustomerUser').val('');$('#CustomerUserID').val('');$('#CustomerID').val('');$('#CustomerUserOption').val('');$('#ShowCustomerID').html('');if(Core.Config.Get('Action')!=='AgentTicketCustomer'){$('#CustomerInfo .Content').html(BackupData.CustomerInfo);}
if(Core.Config.Get('Action')==='AgentTicketProcess'&&typeof Core.Config.Get('CustomerFieldsToUpdate')!=='undefined'){Core.AJAX.FormUpdate($('#CustomerID').closest('form'),'AJAXUpdate','ServiceID',Core.Config.Get('CustomerFieldsToUpdate'));}}});}
else{TargetNS.InitCustomerField($Element);}}
$(window).on('beforeunload.CustomerSearch',function(){$('#SelectedCustomerUser').val('');return;});CheckPhoneCustomerCountLimit();};function htmlDecode(Text){return Text.replace(/&amp;/g,'&');}
TargetNS.AddTicketCustomer=function(Field,CustomerValue,CustomerKey,SetAsTicketCustomer){var $Clone=$('.CustomerTicketTemplate'+Field).clone(),CustomerTicketCounter=$('#CustomerTicketCounter'+Field).val(),TicketCustomerIDs=0,IsDuplicated=false,IsFocused=($(document.activeElement).attr('id')==Field),Suffix;if(typeof CustomerKey!=='undefined'){CustomerKey=htmlDecode(CustomerKey);}
if(CustomerValue===''){return false;}
$('[class*=CustomerTicketText]').each(function(){if($(this).val()===CustomerValue){IsDuplicated=true;}});if(IsDuplicated){TargetNS.ShowDuplicatedDialog(Field);return false;}
TicketCustomerIDs=$('.CustomerContainer input[type="radio"]').length;CustomerTicketCounter++;Suffix='_'+CustomerTicketCounter;$Clone.removeClass('Hidden CustomerTicketTemplate'+Field);$Clone.find(':input, a').each(function(){var ID=$(this).attr('id');$(this).attr('id',ID+Suffix);$(this).val(CustomerValue);if(ID!=='CustomerSelected'){$(this).attr('name',ID+Suffix);}
if($(this).hasClass('CustomerTicketRadio')){if(TicketCustomerIDs===0){$(this).prop('checked',true);}
$(this).val(CustomerTicketCounter);$(this).on('change',function(){if($(this).prop('checked')){TargetNS.ReloadCustomerInfo(CustomerKey);}
return false;});}
if($(this).hasClass('CustomerKey')){$(this).val(CustomerKey);}
if($(this).hasClass('RemoveButton')){$(this).on('click',function(){TargetNS.RemoveCustomerTicket($(this));if($('#TicketCustomerContent'+Field+' .CustomerTicketRadio').length===0){$('#CustomerTickets').empty();}
return false;});$(this).val(CustomerValue);}});$('#TicketCustomerContent'+Field).parent().removeClass('Hidden');$('#TicketCustomerContent'+Field).append($Clone);$('#CustomerTicketCounter'+Field).val(CustomerTicketCounter);if((CustomerKey!==''&&TicketCustomerIDs===0&&(Field==='ToCustomer'||Field==='FromCustomer'))||SetAsTicketCustomer){if(SetAsTicketCustomer){$('#CustomerSelected_'+CustomerTicketCounter).prop('checked',true).trigger('change');}
else{$('.CustomerContainer input[type="radio"]:first').prop('checked',true).trigger('change');}}
$('#'+Field).val('');if(IsFocused){$('#'+Field).focus();}
CheckPhoneCustomerCountLimit();if((Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketCompose'||Core.Config.Get('Action')==='AgentTicketForward'||Core.Config.Get('Action')==='AgentTicketEmailOutbound'||Core.Config.Get('Action')==='AgentTicketEmailResend')&&$('#CryptKeyID').length)
{Core.AJAX.FormUpdate($('#'+Field).closest('form'),'AJAXUpdate','',['CryptKeyID']);}
$('#FromCustomer, #ToCustomer')
.removeClass('Error ServerError')
.closest('.Field')
.prev('label')
.removeClass('LabelError');Core.Form.ErrorTooltips.HideTooltip();ActivateSelectionCustomerID();return false;};TargetNS.RemoveCustomerTicket=function(Object){var TicketCustomerIDs=0,$Field=Object.closest('.Field'),$Form;if(Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketCompose'||Core.Config.Get('Action')==='AgentTicketForward'||Core.Config.Get('Action')==='AgentTicketEmailOutbound'||Core.Config.Get('Action')==='AgentTicketEmailResend')
{$Form=Object.closest('form');}
Object.parent().remove();TicketCustomerIDs=$('.CustomerContainer input[type="radio"]').length;if(TicketCustomerIDs===0){TargetNS.ResetCustomerInfo();}
if((Core.Config.Get('Action')==='AgentTicketEmail'||Core.Config.Get('Action')==='AgentTicketCompose'||Core.Config.Get('Action')==='AgentTicketForward'||Core.Config.Get('Action')==='AgentTicketEmailOutbound'||Core.Config.Get('Action')==='AgentTicketEmailResend')&&$('#CryptKeyID').length)
{Core.AJAX.FormUpdate($Form,'AJAXUpdate','',['CryptKeyID']);}
if(!$('.CustomerContainer input[type="radio"]').is(':checked')){$('.CustomerContainer input[type="radio"]:first').prop('checked',true).trigger('change');}
if($Field.find('.CustomerTicketText:visible').length===0){$Field.addClass('Hidden');DeactivateSelectionCustomerID();}
CheckPhoneCustomerCountLimit();};TargetNS.ResetCustomerInfo=function(){$('#SelectedCustomerUser').val('');$('#CustomerUserID').val('');$('#CustomerID').val('');$('#CustomerUserOption').val('');$('#ShowCustomerID').html('');$('#CustomerInfo .Content').html(Core.Language.Translate('none'));};TargetNS.ReloadCustomerInfo=function(CustomerKey){GetCustomerTickets(CustomerKey);GetCustomerInfo(CustomerKey);$('#SelectedCustomerUser').val(CustomerKey);};TargetNS.InitCustomerField=function($Element){var ObjectId=$Element.attr('id');$('#'+ObjectId).on('change',function(){if(!$('#'+ObjectId).val()||$('#'+ObjectId).val()===''){return false;}
if(!Core.UI.Autocomplete.GetConfig('ActiveAutoComplete')){if(typeof CustomerFieldChangeRunCount[ObjectId]==='undefined'){CustomerFieldChangeRunCount[ObjectId]=1;}
else{CustomerFieldChangeRunCount[ObjectId]++;}
if(Core.UI.Autocomplete.SearchButtonClicked[ObjectId]){delete CustomerFieldChangeRunCount[ObjectId];delete Core.UI.Autocomplete.SearchButtonClicked[ObjectId];return false;}
else{if(CustomerFieldChangeRunCount[ObjectId]===1){window.setTimeout(function(){$('#'+ObjectId).trigger('change');},200);return false;}
delete CustomerFieldChangeRunCount[ObjectId];}}
if($Element.autocomplete("widget").is(':visible')){window.setTimeout(function(){$('#'+ObjectId).trigger('change');},200);return false;}
Core.Agent.CustomerSearch.AddTicketCustomer(ObjectId,$('#'+ObjectId).val());return false;});$('#'+ObjectId).on('keypress',function(e){if(e.which===13){Core.Agent.CustomerSearch.AddTicketCustomer(ObjectId,$('#'+ObjectId).val());return false;}});};TargetNS.ShowDuplicatedDialog=function(Field){Core.UI.Dialog.ShowAlert(Core.Language.Translate('Duplicated entry'),Core.Language.Translate('This address already exists on the address list.')+' '+Core.Language.Translate('It is going to be deleted from the field, please try again.'),function(){Core.UI.Dialog.CloseDialog($('.Alert'));$('#'+Field).val('');$('#'+Field).focus();return false;});};return TargetNS;}(Core.Agent.CustomerSearch||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.CustomerUserInformationCenterSearch=(function(TargetNS){function ShowWaitingDialog(){Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'10px','Center',true);}
function Redirect(CustomerUserID,Event){var Session='';Event.preventDefault();Event.stopPropagation();ShowWaitingDialog();if(!Core.Config.Get('SessionIDCookie')){Session=';'+Core.Config.Get('SessionName')+'='+Core.Config.Get('SessionID');}
window.location.href=Core.Config.Get('Baselink')+'Action=AgentCustomerUserInformationCenter;CustomerUserID='+encodeURIComponent(CustomerUserID)+Session;}
TargetNS.InitAutocomplete=function($Input,Subaction){Core.UI.Autocomplete.Init($Input,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentCustomerUserInformationCenterSearch',Subaction:Subaction,Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Input.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Input.removeData('AutoCompleteXHR');$.each(Result,function(){ValueData.push({label:this.Label,value:this.Value});});Response(ValueData);}));},function(Event,UI){Redirect(UI.item.value,Event);},'CustomerSearch');};TargetNS.OpenSearchDialog=function(){var Data={Action:'AgentCustomerUserInformationCenterSearch'};ShowWaitingDialog();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowContentDialog(HTML,Core.Language.Translate('Search'),'10px','Center',true);TargetNS.Init();},'html');};TargetNS.Init=function(){TargetNS.InitAutocomplete($("#AgentCustomerUserInformationCenterSearchCustomerUser"),'SearchCustomerUser');$("#AgentCustomerUserInformationCenterSearchForm").submit(function(Event){Event.preventDefault();});};return TargetNS;}(Core.Agent.CustomerUserInformationCenterSearch||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Header=(function(TargetNS){TargetNS.Init=function(){$('#ToolBarSearchProfile').on('change',function(Event){$(Event.target).closest('form').submit();Event.preventDefault();Event.stopPropagation();return false;});Core.Agent.CustomerInformationCenterSearch.InitAutocomplete($('#ToolBarCICSearchCustomerID'),"SearchCustomerID");Core.Agent.CustomerUserInformationCenterSearch.InitAutocomplete($('#ToolBarCICSearchCustomerUser'),"SearchCustomerUser");Core.Agent.Search.InitToolbarFulltextSearch();$('.DebugRTL').on('click',function(){Core.Debug.SimulateRTLPage();});};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Agent.Header||{}));

"use strict";var Core=Core||{};Core.UI=Core.UI||{};Core.UI.Notification=(function(TargetNS){var Notification=window.Notification||window.mozNotification||window.webkitNotification;TargetNS.RequestPermission=function(){return Notification.requestPermission(function(Result){if(Result==='denied'||Result==='default'){return false;}
return true;});};TargetNS.Show=function(Header,Body,Sticky,Icon,Action){var Options,NewNotification;if(!Notification){alert(Header+" \n "+Body);return true;}
if(Sticky===1){Sticky=true;}else{Sticky=false;}
return Notification.requestPermission(function(Result){if(Result==='denied'||Result==='default'){return false;}
Options={body:Body,sticky:Sticky,icon:Icon,vibrate:[200,100,200]};NewNotification=new Notification(Header,Options);if(Action){NewNotification.onclick=function(){window.location.href=Core.Config.Get('Baselink')+"Action="+Action;NewNotification.close();};}
return true;});};return TargetNS;}(Core.UI.Notification||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Responsive=(function(TargetNS){Core.App.Subscribe('Event.App.Responsive.SmallerOrEqualScreenL',function(){if(!$('#ViewModeSwitch').length){$('#Footer').append('<div id="ViewModeSwitch"><a href="#">'+Core.Language.Translate('Switch to desktop mode')+'</a></div>');$('#ViewModeSwitch a').on('click.Responsive',function(){localStorage.setItem("DesktopMode",1);location.reload(true);return false;});}
$('.Dashboard .WidgetSimple .Header').off('click.Responsive').on('click.Responsive',function(){$(this).find('.ActionMenu').fadeToggle();});$('.D3GraphMessage, .D3GraphCanvas').closest('.WidgetSimple').hide();$('span.Pagination a:first-child').parent().closest('.WidgetSimple').each(function(){if(!$(this).find('.ShowPagination').length){$(this).find('.WidgetAction.Close').after('<div class="WidgetAction ShowPagination"><a title="Close" href=""><i class="fa fa-angle-double-right"></i></a></div>');}});$('.WidgetAction.ShowPagination').off('click.Responsive').on('click.Responsive',function(){$(this).closest('.WidgetSimple').find('.Pagination').toggleClass('AsBlock');return false;});$('#Header').off().on('click',function(){var TargetHeight='70px',TargetFade='out';if(parseInt($('#ToolBar').height(),10)>0){TargetHeight='0px';TargetFade='in';}
$('#ToolBar').animate({height:TargetHeight,easing:'easeOutQuart'},'fast');if(TargetFade==='in'){$('.ResponsiveHandle').fadeIn();}
else{$('.ResponsiveHandle').fadeOut();}});if($('.SidebarColumn').children().length&&!$('.SidebarColumn').closest('.ResponsiveSidebarContainer').length){$('.SidebarColumn').wrap('<div class="ResponsiveSidebarContainer" />');}
if(!$('#NavigationContainer').closest('.ResponsiveSidebarContainer').length){$('#NavigationContainer').wrap('<div class="ResponsiveSidebarContainer" />');}
$('.ResponsiveSidebarContainer').off().on('click',function(Event){if(Event.target!==this){return;}
$(this).prev('.ResponsiveHandle').trigger('click');});if(!$('#ResponsiveSidebarHandle').length){$('.SidebarColumn').closest('.ResponsiveSidebarContainer').before('<span class="ResponsiveHandle" id="ResponsiveSidebarHandle"><i class="fa fa-caret-square-o-left"></i></span>');}
if(!$('#ResponsiveNavigationHandle').length){$('#NavigationContainer').closest('.ResponsiveSidebarContainer').before('<span class="ResponsiveHandle" id="ResponsiveNavigationHandle"><i class="fa fa-navicon"></i></span>');}
$('#ResponsiveNavigationHandle').off().on('click',function(){if(parseInt($('#NavigationContainer').css('left'),10)<0||parseInt($('#NavigationContainer').css('left'),10)===10){$('#ResponsiveSidebarHandle').animate({'right':'-45px'});$('#NavigationContainer').closest('.ResponsiveSidebarContainer').fadeIn();$('html').addClass('NoScroll');$('#NavigationContainer').animate({'left':'0px'});}
else{$('#ResponsiveSidebarHandle').animate({'right':'0px'});$('#NavigationContainer').closest('.ResponsiveSidebarContainer').fadeOut();$('html').removeClass('NoScroll');$('#NavigationContainer').animate({'left':'-280px'});}
return false;});$('#ResponsiveSidebarHandle').off().on('click',function(){if(parseInt($('.SidebarColumn').css('right'),10)<0){$('#ResponsiveNavigationHandle').animate({'left':'-45px'});$('.SidebarColumn').closest('.ResponsiveSidebarContainer').fadeIn();$('html').addClass('NoScroll');$('.SidebarColumn').animate({'right':'0px'});}
else{$('#ResponsiveNavigationHandle').animate({'left':'0px'});$('.SidebarColumn').closest('.ResponsiveSidebarContainer').fadeOut();$('html').removeClass('NoScroll');$('.SidebarColumn').animate({'right':'-300px'});}
return false;});Core.App.Subscribe('Event.Agent.CustomerSearch.GetCustomerInfo.Callback',function(){$('#ResponsiveSidebarHandle').after('<span class="ResponsiveHandle" id="ResponsiveSidebarNotification"><i class="fa fa-exclamation"></i></span>');$('#ResponsiveSidebarNotification').fadeIn().delay(3000).fadeOut(function(){$(this).remove();});});$('#OptionCustomer').closest('.Field').hide().prev('label').hide();$('#NavigationContainer').css('left','-280px');$('#ToolBar').detach().prependTo('body');$('.FormScreen select').each(function(){if($(this).nextAll('a:visible:not(".DatepickerIcon")').length){$(this).css('width','85%');}});$('.PreferencesScreen .Size1of3 > .WidgetSimple').removeClass('Expanded').addClass('Collapsed');});Core.App.Subscribe('Event.App.Responsive.ScreenXL',function(){$('.WidgetAction.ShowPagination, #ViewModeSwitch').remove();$('.D3GraphMessage, .D3GraphCanvas').closest('.WidgetSimple').show();$('.ResponsiveSidebarContainer').children('.SidebarColumn, #NavigationContainer').unwrap();$('#OptionCustomer').closest('.Field').show().prev('label').show();$('#NavigationContainer').css('left','10px');$('#ToolBar').detach().prependTo('#Header');$('.FormScreen select').each(function(){if($(this).nextAll('a:visible:not(".DatepickerIcon")').length){$(this).css('width','');}});$('.PreferencesScreen .WidgetSimple').removeClass('Collapsed').addClass('Expanded');});return TargetNS;}(Core.Agent.Responsive||{}));

"use strict";var JSLINT=(function(){var adsafe_id,adsafe_may,adsafe_went,anonname,approved,atrule={media:true,'font-face':true,page:true},bang={'<':true,'<=':true,'==':true,'===':true,'!==':true,'!=':true,'>':true,'>=':true,'+':true,'-':true,'*':true,'/':true,'%':true},banned={'arguments':true,callee:true,caller:true,constructor:true,'eval':true,prototype:true,unwatch:true,valueOf:true,watch:true},boolOptions={adsafe:true,bitwise:true,browser:true,cap:true,css:true,debug:true,devel:true,eqeqeq:true,evil:true,forin:true,fragment:true,immed:true,laxbreak:true,newcap:true,nomen:true,on:true,onevar:true,passfail:true,plusplus:true,regexp:true,rhino:true,undef:true,safe:true,sidebar:true,strict:true,sub:true,white:true,widget:true},browser={addEventListener:false,blur:false,clearInterval:false,clearTimeout:false,close:false,closed:false,defaultStatus:false,document:false,event:false,focus:false,frames:false,getComputedStyle:false,history:false,Image:false,length:false,location:false,moveBy:false,moveTo:false,name:false,navigator:false,onbeforeunload:true,onblur:true,onerror:true,onfocus:true,onload:true,onresize:true,onunload:true,open:false,opener:false,Option:false,parent:false,print:false,removeEventListener:false,resizeBy:false,resizeTo:false,screen:false,scroll:false,scrollBy:false,scrollTo:false,setInterval:false,setTimeout:false,status:false,top:false,XMLHttpRequest:false},cssAttributeData,cssAny,cssColorData={"aliceblue":true,"antiquewhite":true,"aqua":true,"aquamarine":true,"azure":true,"beige":true,"bisque":true,"black":true,"blanchedalmond":true,"blue":true,"blueviolet":true,"brown":true,"burlywood":true,"cadetblue":true,"chartreuse":true,"chocolate":true,"coral":true,"cornflowerblue":true,"cornsilk":true,"crimson":true,"cyan":true,"darkblue":true,"darkcyan":true,"darkgoldenrod":true,"darkgray":true,"darkgreen":true,"darkkhaki":true,"darkmagenta":true,"darkolivegreen":true,"darkorange":true,"darkorchid":true,"darkred":true,"darksalmon":true,"darkseagreen":true,"darkslateblue":true,"darkslategray":true,"darkturquoise":true,"darkviolet":true,"deeppink":true,"deepskyblue":true,"dimgray":true,"dodgerblue":true,"firebrick":true,"floralwhite":true,"forestgreen":true,"fuchsia":true,"gainsboro":true,"ghostwhite":true,"gold":true,"goldenrod":true,"gray":true,"green":true,"greenyellow":true,"honeydew":true,"hotpink":true,"indianred":true,"indigo":true,"ivory":true,"khaki":true,"lavender":true,"lavenderblush":true,"lawngreen":true,"lemonchiffon":true,"lightblue":true,"lightcoral":true,"lightcyan":true,"lightgoldenrodyellow":true,"lightgreen":true,"lightpink":true,"lightsalmon":true,"lightseagreen":true,"lightskyblue":true,"lightslategray":true,"lightsteelblue":true,"lightyellow":true,"lime":true,"limegreen":true,"linen":true,"magenta":true,"maroon":true,"mediumaquamarine":true,"mediumblue":true,"mediumorchid":true,"mediumpurple":true,"mediumseagreen":true,"mediumslateblue":true,"mediumspringgreen":true,"mediumturquoise":true,"mediumvioletred":true,"midnightblue":true,"mintcream":true,"mistyrose":true,"moccasin":true,"navajowhite":true,"navy":true,"oldlace":true,"olive":true,"olivedrab":true,"orange":true,"orangered":true,"orchid":true,"palegoldenrod":true,"palegreen":true,"paleturquoise":true,"palevioletred":true,"papayawhip":true,"peachpuff":true,"peru":true,"pink":true,"plum":true,"powderblue":true,"purple":true,"red":true,"rosybrown":true,"royalblue":true,"saddlebrown":true,"salmon":true,"sandybrown":true,"seagreen":true,"seashell":true,"sienna":true,"silver":true,"skyblue":true,"slateblue":true,"slategray":true,"snow":true,"springgreen":true,"steelblue":true,"tan":true,"teal":true,"thistle":true,"tomato":true,"turquoise":true,"violet":true,"wheat":true,"white":true,"whitesmoke":true,"yellow":true,"yellowgreen":true},cssBorderStyle,cssBreak,cssLengthData={'%':true,'cm':true,'em':true,'ex':true,'in':true,'mm':true,'pc':true,'pt':true,'px':true},cssOverflow,devel={alert:false,confirm:false,console:false,Debug:false,opera:false,prompt:false},escapes={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','/':'\\/','\\':'\\\\'},funct,functionicity=['closure','exception','global','label','outer','unused','var'],functions,global,htmltag={a:{},abbr:{},acronym:{},address:{},applet:{},area:{empty:true,parent:' map '},b:{},base:{empty:true,parent:' head '},bdo:{},big:{},blockquote:{},body:{parent:' html noframes '},br:{empty:true},button:{},canvas:{parent:' body p div th td '},caption:{parent:' table '},center:{},cite:{},code:{},col:{empty:true,parent:' table colgroup '},colgroup:{parent:' table '},dd:{parent:' dl '},del:{},dfn:{},dir:{},div:{},dl:{},dt:{parent:' dl '},em:{},embed:{},fieldset:{},font:{},form:{},frame:{empty:true,parent:' frameset '},frameset:{parent:' html frameset '},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},head:{parent:' html '},html:{parent:'*'},hr:{empty:true},i:{},iframe:{},img:{empty:true},input:{empty:true},ins:{},kbd:{},label:{},legend:{parent:' fieldset '},li:{parent:' dir menu ol ul '},link:{empty:true,parent:' head '},map:{},menu:{},meta:{empty:true,parent:' head noframes noscript '},noframes:{parent:' html body '},noscript:{parent:' body head noframes '},object:{},ol:{},optgroup:{parent:' select '},option:{parent:' optgroup select '},p:{},param:{empty:true,parent:' applet object '},pre:{},q:{},samp:{},script:{empty:true,parent:' body div frame head iframe p pre span '},select:{},small:{},span:{},strong:{},style:{parent:' head ',empty:true},sub:{},sup:{},table:{},tbody:{parent:' table '},td:{parent:' tr '},textarea:{},tfoot:{parent:' table '},th:{parent:' tr '},thead:{parent:' table '},title:{parent:' head '},tr:{parent:' table tbody thead tfoot '},tt:{},u:{},ul:{},'var':{}},ids,implied,inblock,indent,jsonmode,lines,lookahead,member,membersOnly,nexttoken,noreach,option,predefined,prereg,prevtoken,rhino={defineClass:false,deserialize:false,gc:false,help:false,load:false,loadClass:false,print:false,quit:false,readFile:false,readUrl:false,runCommand:false,seal:false,serialize:false,spawn:false,sync:false,toint32:false,version:false},scope,sidebar={System:false},src,stack,standard={Array:false,Boolean:false,Date:false,decodeURI:false,decodeURIComponent:false,encodeURI:false,encodeURIComponent:false,Error:false,'eval':false,EvalError:false,Function:false,hasOwnProperty:false,isFinite:false,isNaN:false,JSON:false,Math:false,Number:false,Object:false,parseInt:false,parseFloat:false,RangeError:false,ReferenceError:false,RegExp:false,String:false,SyntaxError:false,TypeError:false,URIError:false},standard_member={E:true,LN2:true,LN10:true,LOG2E:true,LOG10E:true,PI:true,SQRT1_2:true,SQRT2:true,MAX_VALUE:true,MIN_VALUE:true,NEGATIVE_INFINITY:true,POSITIVE_INFINITY:true},strict_mode,syntax={},tab,token,urls,warnings,widget={alert:true,animator:true,appleScript:true,beep:true,bytesToUIString:true,Canvas:true,chooseColor:true,chooseFile:true,chooseFolder:true,closeWidget:true,COM:true,convertPathToHFS:true,convertPathToPlatform:true,CustomAnimation:true,escape:true,FadeAnimation:true,filesystem:true,Flash:true,focusWidget:true,form:true,FormField:true,Frame:true,HotKey:true,Image:true,include:true,isApplicationRunning:true,iTunes:true,konfabulatorVersion:true,log:true,md5:true,MenuItem:true,MoveAnimation:true,openURL:true,play:true,Point:true,popupMenu:true,preferenceGroups:true,preferences:true,print:true,prompt:true,random:true,Rectangle:true,reloadWidget:true,ResizeAnimation:true,resolvePath:true,resumeUpdates:true,RotateAnimation:true,runCommand:true,runCommandInBg:true,saveAs:true,savePreferences:true,screen:true,ScrollBar:true,showWidgetPreferences:true,sleep:true,speak:true,Style:true,suppressUpdates:true,system:true,tellWidget:true,Text:true,TextArea:true,Timer:true,unescape:true,updateNow:true,URL:true,Web:true,widget:true,Window:true,XMLDOM:true,XMLHttpRequest:true,yahooCheckLogin:true,yahooLogin:true,yahooLogout:true},xmode,xquote,ax=/@cc|<\/?|script|\]*s\]|<\s*!|&lt/i,cx=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,tx=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jslint|members?|global)?|=|\/)?|\*[\/=]?|\+[+=]?|-[\-=]?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,hx=/^\s*(['"=>\/&#]|<(?:\/|\!(?:--)?)?|[a-zA-Z][a-zA-Z0-9_\-]*|[0-9]+|--)/,nx=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,nxg=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,ox=/[>&]|<[\/!]?|--/,lx=/\*\/|\/\*/,ix=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,jx=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,ux=/&|\+|\u00AD|\.\.|\/\*|%[^;]|base64|url|expression|data|mailto/i,sx=/^\s*([{:#%.=,>+\[\]@()"';]|\*=?|\$=|\|=|\^=|~=|[a-zA-Z_][a-zA-Z0-9_\-]*|[0-9]+|<\/|\/\*)/,ssx=/^\s*([@#!"'};:\-%.=,+\[\]()*_]|[a-zA-Z][a-zA-Z0-9._\-]*|\/\*?|\d+(?:\.\d+)?|<\/)/,qx=/[^a-zA-Z0-9-_\/ ]/,dx=/[\[\]\/\\"'*<>.&:(){}+=#]/,rx={outer:hx,html:hx,style:sx,styleproperty:ssx};function F(){}
if(typeof Object.create!=='function'){Object.create=function(o){F.prototype=o;return new F();};}
function is_own(object,name){return Object.prototype.hasOwnProperty.call(object,name);}
function combine(t,o){var n;for(n in o){if(is_own(o,n)){t[n]=o[n];}}}
String.prototype.entityify=function(){return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');};String.prototype.isAlpha=function(){return(this>='a'&&this<='z\uffff')||(this>='A'&&this<='Z\uffff');};String.prototype.isDigit=function(){return(this>='0'&&this<='9');};String.prototype.supplant=function(o){return this.replace(/\{([^{}]*)\}/g,function(a,b){var r=o[b];return typeof r==='string'||typeof r==='number'?r:a;});};String.prototype.name=function(){if(ix.test(this)){return this;}
if(nx.test(this)){return'"'+this.replace(nxg,function(a){var c=escapes[a];if(c){return c;}
return'\\u'+('0000'+a.charCodeAt().toString(16)).slice(-4);})+'"';}
return'"'+this+'"';};function assume(){if(!option.safe){if(option.rhino){combine(predefined,rhino);}
if(option.devel){combine(predefined,devel);}
if(option.browser||option.sidebar){combine(predefined,browser);}
if(option.sidebar){combine(predefined,sidebar);}
if(option.widget){combine(predefined,widget);}}}
function quit(m,l,ch){throw{name:'JSLintError',line:l,character:ch,message:m+" ("+Math.floor((l/lines.length)*100)+"% scanned)."};}
function warning(m,t,a,b,c,d){var ch,l,w;t=t||nexttoken;if(t.id==='(end)'){t=token;}
l=t.line||0;ch=t.from||0;w={id:'(error)',raw:m,evidence:lines[l-1]||'',line:l,character:ch,a:a,b:b,c:c,d:d};w.reason=m.supplant(w);JSLINT.errors.push(w);if(option.passfail){quit('Stopping. ',l,ch);}
warnings+=1;if(warnings>=option.maxerr){quit("Too many errors.",l,ch);}
return w;}
function warningAt(m,l,ch,a,b,c,d){return warning(m,{line:l,from:ch},a,b,c,d);}
function error(m,t,a,b,c,d){var w=warning(m,t,a,b,c,d);quit("Stopping, unable to continue.",w.line,w.character);}
function errorAt(m,l,ch,a,b,c,d){return error(m,{line:l,from:ch},a,b,c,d);}
var lex=(function lex(){var character,from,line,s;function nextLine(){var at;if(line>=lines.length){return false;}
character=1;s=lines[line];line+=1;at=s.search(/ \t/);if(at>=0){warningAt("Mixed spaces and tabs.",line,at+1);}
s=s.replace(/\t/g,tab);at=s.search(cx);if(at>=0){warningAt("Unsafe character.",line,at);}
if(option.maxlen&&option.maxlen<s.length){warningAt("Line too long.",line,s.length);}
return true;}
function it(type,value){var i,t;if(type==='(color)'){t={type:type};}else if(type==='(punctuator)'||(type==='(identifier)'&&is_own(syntax,value))){t=syntax[value]||syntax['(error)'];}else{t=syntax[type];}
t=Object.create(t);if(type==='(string)'||type==='(range)'){if(jx.test(value)){warningAt("Script URL.",line,from);}}
if(type==='(identifier)'){t.identifier=true;if(value==='__iterator__'||value==='__proto__'){errorAt("Reserved name '{a}'.",line,from,value);}else if(option.nomen&&(value.charAt(0)==='_'||value.charAt(value.length-1)==='_')){warningAt("Unexpected {a} in '{b}'.",line,from,"dangling '_'",value);}}
t.value=value;t.line=line;t.character=character;t.from=from;i=t.id;if(i!=='(endline)'){prereg=i&&(('(,=:[!&|?{};'.indexOf(i.charAt(i.length-1))>=0)||i==='return');}
return t;}
return{init:function(source){if(typeof source==='string'){lines=source.replace(/\r\n/g,'\n').replace(/\r/g,'\n').split('\n');}else{lines=source;}
line=0;nextLine();from=1;},range:function(begin,end){var c,value='';from=character;if(s.charAt(0)!==begin){errorAt("Expected '{a}' and instead saw '{b}'.",line,character,begin,s.charAt(0));}
for(;;){s=s.slice(1);character+=1;c=s.charAt(0);switch(c){case'':errorAt("Missing '{a}'.",line,character,c);break;case end:s=s.slice(1);character+=1;return it('(range)',value);case xquote:case'\\':warningAt("Unexpected '{a}'.",line,character,c);}
value+=c;}},token:function(){var b,c,captures,d,depth,high,i,l,low,q,t;function match(x){var r=x.exec(s),r1;if(r){l=r[0].length;r1=r[1];c=r1.charAt(0);s=s.substr(l);from=character+l-r1.length;character+=l;return r1;}}
function string(x){var c,j,r='';if(jsonmode&&x!=='"'){warningAt("Strings must use doublequote.",line,character);}
if(xquote===x||(xmode==='scriptstring'&&!xquote)){return it('(punctuator)',x);}
function esc(n){var i=parseInt(s.substr(j+1,n),16);j+=n;if(i>=32&&i<=126&&i!==34&&i!==92&&i!==39){warningAt("Unnecessary escapement.",line,character);}
character+=n;c=String.fromCharCode(i);}
j=0;for(;;){while(j>=s.length){j=0;if(xmode!=='html'||!nextLine()){errorAt("Unclosed string.",line,from);}}
c=s.charAt(j);if(c===x){character+=1;s=s.substr(j+1);return it('(string)',r,x);}
if(c<' '){if(c==='\n'||c==='\r'){break;}
warningAt("Control character in string: {a}.",line,character+j,s.slice(0,j));}else if(c===xquote){warningAt("Bad HTML string",line,character+j);}else if(c==='<'){if(option.safe&&xmode==='html'){warningAt("ADsafe string violation.",line,character+j);}else if(s.charAt(j+1)==='/'&&(xmode||option.safe)){warningAt("Expected '<\\/' and instead saw '</'.",line,character);}else if(s.charAt(j+1)==='!'&&(xmode||option.safe)){warningAt("Unexpected '<!' in a string.",line,character);}}else if(c==='\\'){if(xmode==='html'){if(option.safe){warningAt("ADsafe string violation.",line,character+j);}}else if(xmode==='styleproperty'){j+=1;character+=1;c=s.charAt(j);if(c!==x){warningAt("Escapement in style string.",line,character+j);}}else{j+=1;character+=1;c=s.charAt(j);switch(c){case xquote:warningAt("Bad HTML string",line,character+j);break;case'\\':case'\'':case'"':case'/':break;case'b':c='\b';break;case'f':c='\f';break;case'n':c='\n';break;case'r':c='\r';break;case't':c='\t';break;case'u':esc(4);break;case'v':c='\v';break;case'x':if(jsonmode){warningAt("Avoid \\x-.",line,character);}
esc(2);break;default:warningAt("Bad escapement.",line,character);}}}
r+=c;character+=1;j+=1;}}
for(;;){if(!s){return it(nextLine()?'(endline)':'(end)','');}
while(xmode==='outer'){i=s.search(ox);if(i===0){break;}else if(i>0){character+=1;s=s.slice(i);break;}else{if(!nextLine()){return it('(end)','');}}}
t=match(rx[xmode]||tx);if(!t){t='';c='';while(s&&s<'!'){s=s.substr(1);}
if(s){if(xmode==='html'){return it('(error)',s.charAt(0));}else{errorAt("Unexpected '{a}'.",line,character,s.substr(0,1));}}}else{if(c.isAlpha()||c==='_'||c==='$'){return it('(identifier)',t);}
if(c.isDigit()){if(xmode!=='style'&&!isFinite(Number(t))){warningAt("Bad number '{a}'.",line,character,t);}
if(xmode!=='style'&&xmode!=='styleproperty'&&s.substr(0,1).isAlpha()){warningAt("Missing space after '{a}'.",line,character,t);}
if(c==='0'){d=t.substr(1,1);if(d.isDigit()){if(token.id!=='.'&&xmode!=='styleproperty'){warningAt("Don't use extra leading zeros '{a}'.",line,character,t);}}else if(jsonmode&&(d==='x'||d==='X')){warningAt("Avoid 0x-. '{a}'.",line,character,t);}}
if(t.substr(t.length-1)==='.'){warningAt("A trailing decimal point can be confused with a dot '{a}'.",line,character,t);}
return it('(number)',t);}
switch(t){case'"':case"'":return string(t);case'//':if(src||(xmode&&xmode!=='script')){warningAt("Unexpected comment.",line,character);}else if(xmode==='script'&&/<\s*\//i.test(s)){warningAt("Unexpected <\/ in comment.",line,character);}else if((option.safe||xmode==='script')&&ax.test(s)){warningAt("Dangerous comment.",line,character);}
s='';token.comment=true;break;case'/*':if(src||(xmode&&xmode!=='script'&&xmode!=='style'&&xmode!=='styleproperty')){warningAt("Unexpected comment.",line,character);}
if(option.safe&&ax.test(s)){warningAt("ADsafe comment violation.",line,character);}
for(;;){i=s.search(lx);if(i>=0){break;}
if(!nextLine()){errorAt("Unclosed comment.",line,character);}else{if(option.safe&&ax.test(s)){warningAt("ADsafe comment violation.",line,character);}}}
character+=i+2;if(s.substr(i,1)==='/'){errorAt("Nested comment.",line,character);}
s=s.substr(i+2);token.comment=true;break;case'/*members':case'/*member':case'/*jslint':case'/*global':case'*/':return{value:t,type:'special',line:line,character:character,from:from};case'':break;case'/':if(token.id==='/='){errorAt("A regular expression literal can be confused with '/='.",line,from);}
if(prereg){depth=0;captures=0;l=0;for(;;){b=true;c=s.charAt(l);l+=1;switch(c){case'':errorAt("Unclosed regular expression.",line,from);return;case'/':if(depth>0){warningAt("Unescaped '{a}'.",line,from+l,'/');}
c=s.substr(0,l-1);q={g:true,i:true,m:true};while(q[s.charAt(l)]===true){q[s.charAt(l)]=false;l+=1;}
character+=l;s=s.substr(l);q=s.charAt(0);if(q==='/'||q==='*'){errorAt("Confusing regular expression.",line,from);}
return it('(regexp)',c);case'\\':c=s.charAt(l);if(c<' '){warningAt("Unexpected control character in regular expression.",line,from+l);}else if(c==='<'){warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c);}
l+=1;break;case'(':depth+=1;b=false;if(s.charAt(l)==='?'){l+=1;switch(s.charAt(l)){case':':case'=':case'!':l+=1;break;default:warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,':',s.charAt(l));}}else{captures+=1;}
break;case'|':b=false;break;case')':if(depth===0){warningAt("Unescaped '{a}'.",line,from+l,')');}else{depth-=1;}
break;case' ':q=1;while(s.charAt(l)===' '){l+=1;q+=1;}
if(q>1){warningAt("Spaces are hard to count. Use {{a}}.",line,from+l,q);}
break;case'[':c=s.charAt(l);if(c==='^'){l+=1;if(option.regexp){warningAt("Insecure '{a}'.",line,from+l,c);}}
q=false;if(c===']'){warningAt("Empty class.",line,from+l-1);q=true;}
klass:do{c=s.charAt(l);l+=1;switch(c){case'[':case'^':warningAt("Unescaped '{a}'.",line,from+l,c);q=true;break;case'-':if(q){q=false;}else{warningAt("Unescaped '{a}'.",line,from+l,'-');q=true;}
break;case']':if(!q){warningAt("Unescaped '{a}'.",line,from+l-1,'-');}
break klass;case'\\':c=s.charAt(l);if(c<' '){warningAt("Unexpected control character in regular expression.",line,from+l);}else if(c==='<'){warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c);}
l+=1;q=true;break;case'/':warningAt("Unescaped '{a}'.",line,from+l-1,'/');q=true;break;case'<':if(xmode==='script'){c=s.charAt(l);if(c==='!'||c==='/'){warningAt("HTML confusion in regular expression '<{a}'.",line,from+l,c);}}
q=true;break;default:q=true;}}while(c);break;case'.':if(option.regexp){warningAt("Insecure '{a}'.",line,from+l,c);}
break;case']':case'?':case'{':case'}':case'+':case'*':warningAt("Unescaped '{a}'.",line,from+l,c);break;case'<':if(xmode==='script'){c=s.charAt(l);if(c==='!'||c==='/'){warningAt("HTML confusion in regular expression '<{a}'.",line,from+l,c);}}}
if(b){switch(s.charAt(l)){case'?':case'+':case'*':l+=1;if(s.charAt(l)==='?'){l+=1;}
break;case'{':l+=1;c=s.charAt(l);if(c<'0'||c>'9'){warningAt("Expected a number and instead saw '{a}'.",line,from+l,c);}
l+=1;low=+c;for(;;){c=s.charAt(l);if(c<'0'||c>'9'){break;}
l+=1;low=+c+(low*10);}
high=low;if(c===','){l+=1;high=Infinity;c=s.charAt(l);if(c>='0'&&c<='9'){l+=1;high=+c;for(;;){c=s.charAt(l);if(c<'0'||c>'9'){break;}
l+=1;high=+c+(high*10);}}}
if(s.charAt(l)!=='}'){warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,'}',c);}else{l+=1;}
if(s.charAt(l)==='?'){l+=1;}
if(low>high){warningAt("'{a}' should not be greater than '{b}'.",line,from+l,low,high);}}}}
c=s.substr(0,l-1);character+=l;s=s.substr(l);return it('(regexp)',c);}
return it('(punctuator)',t);case'<!--':l=line;c=character;for(;;){i=s.indexOf('--');if(i>=0){break;}
i=s.indexOf('<!');if(i>=0){errorAt("Nested HTML comment.",line,character+i);}
if(!nextLine()){errorAt("Unclosed HTML comment.",l,c);}}
l=s.indexOf('<!');if(l>=0&&l<i){errorAt("Nested HTML comment.",line,character+l);}
character+=i;if(s[i+2]!=='>'){errorAt("Expected -->.",line,character);}
character+=3;s=s.slice(i+3);break;case'#':if(xmode==='html'||xmode==='styleproperty'){for(;;){c=s.charAt(0);if((c<'0'||c>'9')&&(c<'a'||c>'f')&&(c<'A'||c>'F')){break;}
character+=1;s=s.substr(1);t+=c;}
if(t.length!==4&&t.length!==7){warningAt("Bad hex color '{a}'.",line,from+l,t);}
return it('(color)',t);}
return it('(punctuator)',t);default:if(xmode==='outer'&&c==='&'){character+=1;s=s.substr(1);for(;;){c=s.charAt(0);character+=1;s=s.substr(1);if(c===';'){break;}
if(!((c>='0'&&c<='9')||(c>='a'&&c<='z')||c==='#')){errorAt("Bad entity",line,from+l,character);}}
break;}
return it('(punctuator)',t);}}}}};}());function addlabel(t,type){if(option.safe&&funct['(global)']&&typeof predefined[t]!=='boolean'){warning('ADsafe global: '+t+'.',token);}else if(t==='hasOwnProperty'){warning("'hasOwnProperty' is a really bad name.");}
if(is_own(funct,t)&&!funct['(global)']){warning(funct[t]===true?"'{a}' was used before it was defined.":"'{a}' is already defined.",nexttoken,t);}
funct[t]=type;if(funct['(global)']){global[t]=funct;if(is_own(implied,t)){warning("'{a}' was used before it was defined.",nexttoken,t);delete implied[t];}}else{scope[t]=funct;}}
function doOption(){var b,obj,filter,o=nexttoken.value,t,v;switch(o){case'*/':error("Unbegun comment.");break;case'/*members':case'/*member':o='/*members';if(!membersOnly){membersOnly={};}
obj=membersOnly;break;case'/*jslint':if(option.safe){warning("ADsafe restriction.");}
obj=option;filter=boolOptions;break;case'/*global':if(option.safe){warning("ADsafe restriction.");}
obj=predefined;break;default:}
t=lex.token();loop:for(;;){for(;;){if(t.type==='special'&&t.value==='*/'){break loop;}
if(t.id!=='(endline)'&&t.id!==','){break;}
t=lex.token();}
if(t.type!=='(string)'&&t.type!=='(identifier)'&&o!=='/*members'){error("Bad option.",t);}
v=lex.token();if(v.id===':'){v=lex.token();if(obj===membersOnly){error("Expected '{a}' and instead saw '{b}'.",t,'*/',':');}
if(t.value==='indent'&&o==='/*jslint'){b=+v.value;if(typeof b!=='number'||!isFinite(b)||b<=0||Math.floor(b)!==b){error("Expected a small integer and instead saw '{a}'.",v,v.value);}
obj.white=true;obj.indent=b;}else if(t.value==='maxerr'&&o==='/*jslint'){b=+v.value;if(typeof b!=='number'||!isFinite(b)||b<=0||Math.floor(b)!==b){error("Expected a small integer and instead saw '{a}'.",v,v.value);}
obj.maxerr=b;}else if(t.value==='maxlen'&&o==='/*jslint'){b=+v.value;if(typeof b!=='number'||!isFinite(b)||b<=0||Math.floor(b)!==b){error("Expected a small integer and instead saw '{a}'.",v,v.value);}
obj.maxlen=b;}else if(v.value==='true'){obj[t.value]=true;}else if(v.value==='false'){obj[t.value]=false;}else{error("Bad option value.",v);}
t=lex.token();}else{if(o==='/*jslint'){error("Missing option value.",t);}
obj[t.value]=false;t=v;}}
if(filter){assume();}}
function peek(p){var i=p||0,j=0,t;while(j<=i){t=lookahead[j];if(!t){t=lookahead[j]=lex.token();}
j+=1;}
return t;}
function advance(id,t){switch(token.id){case'(number)':if(nexttoken.id==='.'){warning("A dot following a number can be confused with a decimal point.",token);}
break;case'-':if(nexttoken.id==='-'||nexttoken.id==='--'){warning("Confusing minusses.");}
break;case'+':if(nexttoken.id==='+'||nexttoken.id==='++'){warning("Confusing plusses.");}
break;}
if(token.type==='(string)'||token.identifier){anonname=token.value;}
if(id&&nexttoken.id!==id){if(t){if(nexttoken.id==='(end)'){warning("Unmatched '{a}'.",t,t.id);}else{warning("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",nexttoken,id,t.id,t.line,nexttoken.value);}}else if(nexttoken.type!=='(identifier)'||nexttoken.value!==id){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,id,nexttoken.value);}}
prevtoken=token;token=nexttoken;for(;;){nexttoken=lookahead.shift()||lex.token();if(nexttoken.id==='(end)'||nexttoken.id==='(error)'){return;}
if(nexttoken.type==='special'){doOption();}else{if(nexttoken.id!=='(endline)'){break;}}}}
function parse(rbp,initial){var left;if(nexttoken.id==='(end)'){error("Unexpected early end of program.",token);}
advance();if(option.safe&&typeof predefined[token.value]==='boolean'&&(nexttoken.id!=='('&&nexttoken.id!=='.')){warning('ADsafe violation.',token);}
if(initial){anonname='anonymous';funct['(verb)']=token.value;}
if(initial===true&&token.fud){left=token.fud();}else{if(token.nud){left=token.nud();}else{if(nexttoken.type==='(number)'&&token.id==='.'){warning("A leading decimal point can be confused with a dot: '.{a}'.",token,nexttoken.value);advance();return token;}else{error("Expected an identifier and instead saw '{a}'.",token,token.id);}}
while(rbp<nexttoken.lbp){advance();if(token.led){left=token.led(left);}else{error("Expected an operator and instead saw '{a}'.",token,token.id);}}}
return left;}
function adjacent(left,right){left=left||token;right=right||nexttoken;if(option.white||xmode==='styleproperty'||xmode==='style'){if(left.character!==right.from&&left.line===right.line){warning("Unexpected space after '{a}'.",right,left.value);}}}
function nospace(left,right){left=left||token;right=right||nexttoken;if(option.white&&!left.comment){if(left.line===right.line){adjacent(left,right);}}}
function nonadjacent(left,right){if(option.white){left=left||token;right=right||nexttoken;if(left.line===right.line&&left.character===right.from){warning("Missing space after '{a}'.",nexttoken,left.value);}}}
function nobreaknonadjacent(left,right){left=left||token;right=right||nexttoken;if(!option.laxbreak&&left.line!==right.line){warning("Bad line breaking before '{a}'.",right,right.id);}else if(option.white){left=left||token;right=right||nexttoken;if(left.character===right.from){warning("Missing space after '{a}'.",nexttoken,left.value);}}}
function indentation(bias){var i;if(option.white&&nexttoken.id!=='(end)'){i=indent+(bias||0);if(nexttoken.from!==i){warning("Expected '{a}' to have an indentation at {b} instead at {c}.",nexttoken,nexttoken.value,i,nexttoken.from);}}}
function nolinebreak(t){t=t||token;if(t.line!==nexttoken.line){warning("Line breaking error '{a}'.",t,t.value);}}
function comma(){if(token.line!==nexttoken.line){if(!option.laxbreak){warning("Bad line breaking before '{a}'.",token,nexttoken.id);}}else if(token.character!==nexttoken.from&&option.white){warning("Unexpected space after '{a}'.",nexttoken,token.value);}
advance(',');nonadjacent(token,nexttoken);}
function symbol(s,p){var x=syntax[s];if(!x||typeof x!=='object'){syntax[s]=x={id:s,lbp:p,value:s};}
return x;}
function delim(s){return symbol(s,0);}
function stmt(s,f){var x=delim(s);x.identifier=x.reserved=true;x.fud=f;return x;}
function blockstmt(s,f){var x=stmt(s,f);x.block=true;return x;}
function reserveName(x){var c=x.id.charAt(0);if((c>='a'&&c<='z')||(c>='A'&&c<='Z')){x.identifier=x.reserved=true;}
return x;}
function prefix(s,f){var x=symbol(s,150);reserveName(x);x.nud=(typeof f==='function')?f:function(){this.right=parse(150);this.arity='unary';if(this.id==='++'||this.id==='--'){if(option.plusplus){warning("Unexpected use of '{a}'.",this,this.id);}else if((!this.right.identifier||this.right.reserved)&&this.right.id!=='.'&&this.right.id!=='['){warning("Bad operand.",this);}}
return this;};return x;}
function type(s,f){var x=delim(s);x.type=s;x.nud=f;return x;}
function reserve(s,f){var x=type(s,f);x.identifier=x.reserved=true;return x;}
function reservevar(s,v){return reserve(s,function(){if(this.id==='this'||this.id==='arguments'){if(strict_mode&&funct['(global)']){warning("Strict violation.",this);}else if(option.safe){warning("ADsafe violation.",this);}}
return this;});}
function infix(s,f,p,w){var x=symbol(s,p);reserveName(x);x.led=function(left){if(!w){nobreaknonadjacent(prevtoken,token);nonadjacent(token,nexttoken);}
if(typeof f==='function'){return f(left,this);}else{this.left=left;this.right=parse(p);return this;}};return x;}
function relation(s,f){var x=symbol(s,100);x.led=function(left){nobreaknonadjacent(prevtoken,token);nonadjacent(token,nexttoken);var right=parse(100);if((left&&left.id==='NaN')||(right&&right.id==='NaN')){warning("Use the isNaN function to compare with NaN.",this);}else if(f){f.apply(this,[left,right]);}
if(left.id==='!'){warning("Confusing use of '{a}'.",left,'!');}
if(right.id==='!'){warning("Confusing use of '{a}'.",left,'!');}
this.left=left;this.right=right;return this;};return x;}
function isPoorRelation(node){return node&&((node.type==='(number)'&&+node.value===0)||(node.type==='(string)'&&node.value===' ')||node.type==='true'||node.type==='false'||node.type==='undefined'||node.type==='null');}
function assignop(s,f){symbol(s,20).exps=true;return infix(s,function(left,that){var l;that.left=left;if(predefined[left.value]===false&&scope[left.value]['(global)']===true){warning('Read only.',left);}
if(option.safe){l=left;do{if(typeof predefined[l.value]==='boolean'){warning('ADsafe violation.',l);}
l=l.left;}while(l);}
if(left){if(left.id==='.'||left.id==='['){if(!left.left||left.left.value==='arguments'){warning('Bad assignment.',that);}
that.right=parse(19);return that;}else if(left.identifier&&!left.reserved){if(funct[left.value]==='exception'){warning("Do not assign to the exception parameter.",left);}
that.right=parse(19);return that;}
if(left===syntax['function']){warning("Expected an identifier in an assignment and instead saw a function invocation.",token);}}
error("Bad assignment.",that);},20);}
function bitwise(s,f,p){var x=symbol(s,p);reserveName(x);x.led=(typeof f==='function')?f:function(left){if(option.bitwise){warning("Unexpected use of '{a}'.",this,this.id);}
this.left=left;this.right=parse(p);return this;};return x;}
function bitwiseassignop(s){symbol(s,20).exps=true;return infix(s,function(left,that){if(option.bitwise){warning("Unexpected use of '{a}'.",that,that.id);}
nonadjacent(prevtoken,token);nonadjacent(token,nexttoken);if(left){if(left.id==='.'||left.id==='['||(left.identifier&&!left.reserved)){parse(19);return that;}
if(left===syntax['function']){warning("Expected an identifier in an assignment, and instead saw a function invocation.",token);}
return that;}
error("Bad assignment.",that);},20);}
function suffix(s,f){var x=symbol(s,150);x.led=function(left){if(option.plusplus){warning("Unexpected use of '{a}'.",this,this.id);}else if((!left.identifier||left.reserved)&&left.id!=='.'&&left.id!=='['){warning("Bad operand.",this);}
this.left=left;return this;};return x;}
function optionalidentifier(){if(nexttoken.reserved){warning("Expected an identifier and instead saw '{a}' (a reserved word).",nexttoken,nexttoken.id);}
if(nexttoken.identifier){advance();return token.value;}}
function identifier(){var i=optionalidentifier();if(i){return i;}
if(token.id==='function'&&nexttoken.id==='('){warning("Missing name in function statement.");}else{error("Expected an identifier and instead saw '{a}'.",nexttoken,nexttoken.value);}}
function reachable(s){var i=0,t;if(nexttoken.id!==';'||noreach){return;}
for(;;){t=peek(i);if(t.reach){return;}
if(t.id!=='(endline)'){if(t.id==='function'){warning("Inner functions should be listed at the top of the outer function.",t);break;}
warning("Unreachable '{a}' after '{b}'.",t,t.value,s);break;}
i+=1;}}
function statement(noindent){var i=indent,r,s=scope,t=nexttoken;if(t.id===';'){warning("Unnecessary semicolon.",t);advance(';');return;}
if(t.identifier&&!t.reserved&&peek().id===':'){advance();advance(':');scope=Object.create(s);addlabel(t.value,'label');if(!nexttoken.labelled){warning("Label '{a}' on {b} statement.",nexttoken,t.value,nexttoken.value);}
if(jx.test(t.value+':')){warning("Label '{a}' looks like a javascript url.",t,t.value);}
nexttoken.label=t.value;t=nexttoken;}
if(!noindent){indentation();}
if(nexttoken.id==='new'){warning("'new' should not be used as a statement.");}
r=parse(0,true);if(!t.block){if(!r||!r.exps){warning("Expected an assignment or function call and instead saw an expression.",token);}
if(nexttoken.id!==';'){warningAt("Missing semicolon.",token.line,token.from+token.value.length);}else{adjacent(token,nexttoken);advance(';');nonadjacent(token,nexttoken);}}
indent=i;scope=s;return r;}
function use_strict(){if(nexttoken.value==='use strict'){advance();advance(';');strict_mode=true;return true;}else{return false;}}
function statements(begin){var a=[],f,p;if(begin&&!use_strict()&&option.strict){warning('Missing "use strict" statement.',nexttoken);}
if(option.adsafe){switch(begin){case'script':if(!adsafe_may){if(nexttoken.value!=='ADSAFE'||peek(0).id!=='.'||(peek(1).value!=='id'&&peek(1).value!=='go')){error('ADsafe violation: Missing ADSAFE.id or ADSAFE.go.',nexttoken);}}
if(nexttoken.value==='ADSAFE'&&peek(0).id==='.'&&peek(1).value==='id'){if(adsafe_may){error('ADsafe violation.',nexttoken);}
advance('ADSAFE');advance('.');advance('id');advance('(');if(nexttoken.value!==adsafe_id){error('ADsafe violation: id does not match.',nexttoken);}
advance('(string)');advance(')');advance(';');adsafe_may=true;}
break;case'lib':if(nexttoken.value==='ADSAFE'){advance('ADSAFE');advance('.');advance('lib');advance('(');advance('(string)');comma();f=parse(0);if(f.id!=='function'){error('The second argument to lib must be a function.',f);}
p=f.funct['(params)'];p=p&&p.join(', ');if(p&&p!=='lib'){error("Expected '{a}' and instead saw '{b}'.",f,'(lib)','('+p+')');}
advance(')');advance(';');return a;}else{error("ADsafe lib violation.");}}}
while(!nexttoken.reach&&nexttoken.id!=='(end)'){if(nexttoken.id===';'){warning("Unnecessary semicolon.");advance(';');}else{a.push(statement());}}
return a;}
function block(f){var a,b=inblock,old_indent=indent,s=scope,t;inblock=f;scope=Object.create(scope);nonadjacent(token,nexttoken);t=nexttoken;if(nexttoken.id==='{'){advance('{');if(nexttoken.id!=='}'||token.line!==nexttoken.line){indent+=option.indent;while(!f&&nexttoken.from>indent){indent+=option.indent;}
if(!f){use_strict();}
a=statements();indent-=option.indent;indentation();}
advance('}',t);indent=old_indent;}else{warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'{',nexttoken.value);noreach=true;a=[statement()];noreach=false;}
funct['(verb)']=null;scope=s;inblock=b;return a;}
function idValue(){return this;}
function countMember(m){if(membersOnly&&typeof membersOnly[m]!=='boolean'){warning("Unexpected /*member '{a}'.",token,m);}
if(typeof member[m]==='number'){member[m]+=1;}else{member[m]=1;}}
function note_implied(token){var name=token.value,line=token.line,a=implied[name];if(typeof a==='function'){a=false;}
if(!a){a=[line];implied[name]=a;}else if(a[a.length-1]!==line){a.push(line);}}
function cssName(){if(nexttoken.identifier){advance();return true;}}
function cssNumber(){if(nexttoken.id==='-'){advance('-');adjacent();nolinebreak();}
if(nexttoken.type==='(number)'){advance('(number)');return true;}}
function cssString(){if(nexttoken.type==='(string)'){advance();return true;}}
function cssColor(){var i,number;if(nexttoken.identifier){if(nexttoken.value==='rgb'){advance();advance('(');for(i=0;i<3;i+=1){if(i){advance(',');}
number=nexttoken.value;if(nexttoken.type!=='(number)'||number<0){warning("Expected a positive number and instead saw '{a}'",nexttoken,number);advance();}else{advance();if(nexttoken.id==='%'){advance('%');if(number>100){warning("Expected a percentage and instead saw '{a}'",token,number);}}else{if(number>255){warning("Expected a small number and instead saw '{a}'",token,number);}}}}
advance(')');return true;}else if(cssColorData[nexttoken.value]===true){advance();return true;}}else if(nexttoken.type==='(color)'){advance();return true;}
return false;}
function cssLength(){if(nexttoken.id==='-'){advance('-');adjacent();nolinebreak();}
if(nexttoken.type==='(number)'){advance();if(nexttoken.type!=='(string)'&&cssLengthData[nexttoken.value]===true){adjacent();advance();}else if(+token.value!==0){warning("Expected a linear unit and instead saw '{a}'.",nexttoken,nexttoken.value);}
return true;}
return false;}
function cssLineHeight(){if(nexttoken.id==='-'){advance('-');adjacent();}
if(nexttoken.type==='(number)'){advance();if(nexttoken.type!=='(string)'&&cssLengthData[nexttoken.value]===true){adjacent();advance();}
return true;}
return false;}
function cssWidth(){if(nexttoken.identifier){switch(nexttoken.value){case'thin':case'medium':case'thick':advance();return true;}}else{return cssLength();}}
function cssMargin(){if(nexttoken.identifier){if(nexttoken.value==='auto'){advance();return true;}}else{return cssLength();}}
function cssAttr(){if(nexttoken.identifier&&nexttoken.value==='attr'){advance();advance('(');if(!nexttoken.identifier){warning("Expected a name and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();advance(')');return true;}
return false;}
function cssCommaList(){while(nexttoken.id!==';'){if(!cssName()&&!cssString()){warning("Expected a name and instead saw '{a}'.",nexttoken,nexttoken.value);}
if(nexttoken.id!==','){return true;}
comma();}}
function cssCounter(){if(nexttoken.identifier&&nexttoken.value==='counter'){advance();advance('(');if(!nexttoken.identifier){}
advance();if(nexttoken.id===','){comma();if(nexttoken.type!=='(string)'){warning("Expected a string and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();}
advance(')');return true;}
if(nexttoken.identifier&&nexttoken.value==='counters'){advance();advance('(');if(!nexttoken.identifier){warning("Expected a name and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();if(nexttoken.id===','){comma();if(nexttoken.type!=='(string)'){warning("Expected a string and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();}
if(nexttoken.id===','){comma();if(nexttoken.type!=='(string)'){warning("Expected a string and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();}
advance(')');return true;}
return false;}
function cssShape(){var i;if(nexttoken.identifier&&nexttoken.value==='rect'){advance();advance('(');for(i=0;i<4;i+=1){if(!cssLength()){warning("Expected a number and instead saw '{a}'.",nexttoken,nexttoken.value);break;}}
advance(')');return true;}
return false;}
function cssUrl(){var c,url;if(nexttoken.identifier&&nexttoken.value==='url'){nexttoken=lex.range('(',')');url=nexttoken.value;c=url.charAt(0);if(c==='"'||c==='\''){if(url.slice(-1)!==c){warning("Bad url string.");}else{url=url.slice(1,-1);if(url.indexOf(c)>=0){warning("Bad url string.");}}}
if(!url){warning("Missing url.");}
advance();if(option.safe&&ux.test(url)){error("ADsafe URL violation.");}
urls.push(url);return true;}
return false;}
cssAny=[cssUrl,function(){for(;;){if(nexttoken.identifier){switch(nexttoken.value.toLowerCase()){case'url':cssUrl();break;case'expression':warning("Unexpected expression '{a}'.",nexttoken,nexttoken.value);advance();break;default:advance();}}else{if(nexttoken.id===';'||nexttoken.id==='!'||nexttoken.id==='(end)'||nexttoken.id==='}'){return true;}
advance();}}}];cssBorderStyle=['none','hidden','dotted','dashed','solid','double','ridge','inset','outset'];cssBreak=['auto','always','avoid','left','right'];cssOverflow=['auto','hidden','scroll','visible'];cssAttributeData={background:[true,'background-attachment','background-color','background-image','background-position','background-repeat'],'background-attachment':['scroll','fixed'],'background-color':['transparent',cssColor],'background-image':['none',cssUrl],'background-position':[2,[cssLength,'top','bottom','left','right','center']],'background-repeat':['repeat','repeat-x','repeat-y','no-repeat'],'border':[true,'border-color','border-style','border-width'],'border-bottom':[true,'border-bottom-color','border-bottom-style','border-bottom-width'],'border-bottom-color':cssColor,'border-bottom-style':cssBorderStyle,'border-bottom-width':cssWidth,'border-collapse':['collapse','separate'],'border-color':['transparent',4,cssColor],'border-left':[true,'border-left-color','border-left-style','border-left-width'],'border-left-color':cssColor,'border-left-style':cssBorderStyle,'border-left-width':cssWidth,'border-right':[true,'border-right-color','border-right-style','border-right-width'],'border-right-color':cssColor,'border-right-style':cssBorderStyle,'border-right-width':cssWidth,'border-spacing':[2,cssLength],'border-style':[4,cssBorderStyle],'border-top':[true,'border-top-color','border-top-style','border-top-width'],'border-top-color':cssColor,'border-top-style':cssBorderStyle,'border-top-width':cssWidth,'border-width':[4,cssWidth],bottom:[cssLength,'auto'],'caption-side':['bottom','left','right','top'],clear:['both','left','none','right'],clip:[cssShape,'auto'],color:cssColor,content:['open-quote','close-quote','no-open-quote','no-close-quote',cssString,cssUrl,cssCounter,cssAttr],'counter-increment':[cssName,'none'],'counter-reset':[cssName,'none'],cursor:[cssUrl,'auto','crosshair','default','e-resize','help','move','n-resize','ne-resize','nw-resize','pointer','s-resize','se-resize','sw-resize','w-resize','text','wait'],direction:['ltr','rtl'],display:['block','compact','inline','inline-block','inline-table','list-item','marker','none','run-in','table','table-caption','table-cell','table-column','table-column-group','table-footer-group','table-header-group','table-row','table-row-group'],'empty-cells':['show','hide'],'float':['left','none','right'],font:['caption','icon','menu','message-box','small-caption','status-bar',true,'font-size','font-style','font-weight','font-family'],'font-family':cssCommaList,'font-size':['xx-small','x-small','small','medium','large','x-large','xx-large','larger','smaller',cssLength],'font-size-adjust':['none',cssNumber],'font-stretch':['normal','wider','narrower','ultra-condensed','extra-condensed','condensed','semi-condensed','semi-expanded','expanded','extra-expanded'],'font-style':['normal','italic','oblique'],'font-variant':['normal','small-caps'],'font-weight':['normal','bold','bolder','lighter',cssNumber],height:[cssLength,'auto'],left:[cssLength,'auto'],'letter-spacing':['normal',cssLength],'line-height':['normal',cssLineHeight],'list-style':[true,'list-style-image','list-style-position','list-style-type'],'list-style-image':['none',cssUrl],'list-style-position':['inside','outside'],'list-style-type':['circle','disc','square','decimal','decimal-leading-zero','lower-roman','upper-roman','lower-greek','lower-alpha','lower-latin','upper-alpha','upper-latin','hebrew','katakana','hiragana-iroha','katakana-oroha','none'],margin:[4,cssMargin],'margin-bottom':cssMargin,'margin-left':cssMargin,'margin-right':cssMargin,'margin-top':cssMargin,'marker-offset':[cssLength,'auto'],'max-height':[cssLength,'none'],'max-width':[cssLength,'none'],'min-height':cssLength,'min-width':cssLength,opacity:cssNumber,outline:[true,'outline-color','outline-style','outline-width'],'outline-color':['invert',cssColor],'outline-style':['dashed','dotted','double','groove','inset','none','outset','ridge','solid'],'outline-width':cssWidth,overflow:cssOverflow,'overflow-x':cssOverflow,'overflow-y':cssOverflow,padding:[4,cssLength],'padding-bottom':cssLength,'padding-left':cssLength,'padding-right':cssLength,'padding-top':cssLength,'page-break-after':cssBreak,'page-break-before':cssBreak,position:['absolute','fixed','relative','static'],quotes:[8,cssString],right:[cssLength,'auto'],'table-layout':['auto','fixed'],'text-align':['center','justify','left','right'],'text-decoration':['none','underline','overline','line-through','blink'],'text-indent':cssLength,'text-shadow':['none',4,[cssColor,cssLength]],'text-transform':['capitalize','uppercase','lowercase','none'],top:[cssLength,'auto'],'unicode-bidi':['normal','embed','bidi-override'],'vertical-align':['baseline','bottom','sub','super','top','text-top','middle','text-bottom',cssLength],visibility:['visible','hidden','collapse'],'white-space':['normal','nowrap','pre','pre-line','pre-wrap','inherit'],width:[cssLength,'auto'],'word-spacing':['normal',cssLength],'word-wrap':['break-word','normal'],'z-index':['auto',cssNumber]};function styleAttribute(){var v;while(nexttoken.id==='*'||nexttoken.id==='#'||nexttoken.value==='_'){if(!option.css){warning("Unexpected '{a}'.",nexttoken,nexttoken.value);}
advance();}
if(nexttoken.id==='-'){if(!option.css){warning("Unexpected '{a}'.",nexttoken,nexttoken.value);}
advance('-');if(!nexttoken.identifier){warning("Expected a non-standard style attribute and instead saw '{a}'.",nexttoken,nexttoken.value);}
advance();return cssAny;}else{if(!nexttoken.identifier){warning("Excepted a style attribute, and instead saw '{a}'.",nexttoken,nexttoken.value);}else{if(is_own(cssAttributeData,nexttoken.value)){v=cssAttributeData[nexttoken.value];}else{v=cssAny;if(!option.css){warning("Unrecognized style attribute '{a}'.",nexttoken,nexttoken.value);}}}
advance();return v;}}
function styleValue(v){var i=0,n,once,match,round,start=0,vi;switch(typeof v){case'function':return v();case'string':if(nexttoken.identifier&&nexttoken.value===v){advance();return true;}
return false;}
for(;;){if(i>=v.length){return false;}
vi=v[i];i+=1;if(vi===true){break;}else if(typeof vi==='number'){n=vi;vi=v[i];i+=1;}else{n=1;}
match=false;while(n>0){if(styleValue(vi)){match=true;n-=1;}else{break;}}
if(match){return true;}}
start=i;once=[];for(;;){round=false;for(i=start;i<v.length;i+=1){if(!once[i]){if(styleValue(cssAttributeData[v[i]])){match=true;round=true;once[i]=true;break;}}}
if(!round){return match;}}}
function styleChild(){if(nexttoken.id==='(number)'){advance();if(nexttoken.value==='n'&&nexttoken.identifier){adjacent();advance();if(nexttoken.id==='+'){adjacent();advance('+');adjacent();advance('(number)');}}
return;}else{switch(nexttoken.value){case'odd':case'even':if(nexttoken.identifier){advance();return;}}}
warning("Unexpected token '{a}'.",nexttoken,nexttoken.value);}
function substyle(){var v;for(;;){if(nexttoken.id==='}'||nexttoken.id==='(end)'||xquote&&nexttoken.id===xquote){return;}
while(nexttoken.id===';'){warning("Misplaced ';'.");advance(';');}
v=styleAttribute();advance(':');if(nexttoken.identifier&&nexttoken.value==='inherit'){advance();}else{if(!styleValue(v)){warning("Unexpected token '{a}'.",nexttoken,nexttoken.value);advance();}}
if(nexttoken.id==='!'){advance('!');adjacent();if(nexttoken.identifier&&nexttoken.value==='important'){advance();}else{warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'important',nexttoken.value);}}
if(nexttoken.id==='}'||nexttoken.id===xquote){warning("Missing '{a}'.",nexttoken,';');}else{advance(';');}}}
function styleSelector(){if(nexttoken.identifier){if(!is_own(htmltag,nexttoken.value)){warning("Expected a tagName, and instead saw {a}.",nexttoken,nexttoken.value);}
advance();}else{switch(nexttoken.id){case'>':case'+':advance();styleSelector();break;case':':advance(':');switch(nexttoken.value){case'active':case'after':case'before':case'checked':case'disabled':case'empty':case'enabled':case'first-child':case'first-letter':case'first-line':case'first-of-type':case'focus':case'hover':case'last-of-type':case'link':case'only-of-type':case'root':case'target':case'visited':advance();break;case'lang':advance();advance('(');if(!nexttoken.identifier){warning("Expected a lang code, and instead saw :{a}.",nexttoken,nexttoken.value);}
advance(')');break;case'nth-child':case'nth-last-child':case'nth-last-of-type':case'nth-of-type':advance();advance('(');styleChild();advance(')');break;case'not':advance();advance('(');if(nexttoken.id===':'&&peek(0).value==='not'){warning("Nested not.");}
styleSelector();advance(')');break;default:warning("Expected a pseudo, and instead saw :{a}.",nexttoken,nexttoken.value);}
break;case'#':advance('#');if(!nexttoken.identifier){warning("Expected an id, and instead saw #{a}.",nexttoken,nexttoken.value);}
advance();break;case'*':advance('*');break;case'.':advance('.');if(!nexttoken.identifier){warning("Expected a class, and instead saw #.{a}.",nexttoken,nexttoken.value);}
advance();break;case'[':advance('[');if(!nexttoken.identifier){warning("Expected an attribute, and instead saw [{a}].",nexttoken,nexttoken.value);}
advance();if(nexttoken.id==='='||nexttoken.value==='~='||nexttoken.value==='$='||nexttoken.value==='|='||nexttoken.id==='*='||nexttoken.id==='^='){advance();if(nexttoken.type!=='(string)'){warning("Expected a string, and instead saw {a}.",nexttoken,nexttoken.value);}
advance();}
advance(']');break;default:error("Expected a CSS selector, and instead saw {a}.",nexttoken,nexttoken.value);}}}
function stylePattern(){var name;if(nexttoken.id==='{'){warning("Expected a style pattern, and instead saw '{a}'.",nexttoken,nexttoken.id);}else if(nexttoken.id==='@'){advance('@');name=nexttoken.value;if(nexttoken.identifier&&atrule[name]===true){advance();return name;}
warning("Expected an at-rule, and instead saw @{a}.",nexttoken,name);}
for(;;){styleSelector();if(nexttoken.id==='</'||nexttoken.id==='{'||nexttoken.id==='(end)'){return'';}
if(nexttoken.id===','){comma();}}}
function styles(){var i;while(nexttoken.id==='@'){i=peek();if(i.identifier&&i.value==='import'){advance('@');advance();if(!cssUrl()){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'url',nexttoken.value);advance();}
advance(';');}else{break;}}
while(nexttoken.id!=='</'&&nexttoken.id!=='(end)'){stylePattern();xmode='styleproperty';if(nexttoken.id===';'){advance(';');}else{advance('{');substyle();xmode='style';advance('}');}}}
function doBegin(n){if(n!=='html'&&!option.fragment){if(n==='div'&&option.adsafe){error("ADSAFE: Use the fragment option.");}else{error("Expected '{a}' and instead saw '{b}'.",token,'html',n);}}
if(option.adsafe){if(n==='html'){error("Currently, ADsafe does not operate on whole HTML documents. It operates on <div> fragments and .js files.",token);}
if(option.fragment){if(n!=='div'){error("ADsafe violation: Wrap the widget in a div.",token);}}else{error("Use the fragment option.",token);}}
option.browser=true;assume();}
function doAttribute(n,a,v){var u,x;if(a==='id'){u=typeof v==='string'?v.toUpperCase():'';if(ids[u]===true){warning("Duplicate id='{a}'.",nexttoken,v);}
if(option.adsafe){if(adsafe_id){if(v.slice(0,adsafe_id.length)!==adsafe_id){warning("ADsafe violation: An id must have a '{a}' prefix",nexttoken,adsafe_id);}else if(!/^[A-Z]+_[A-Z]+$/.test(v)){warning("ADSAFE violation: bad id.");}}else{adsafe_id=v;if(!/^[A-Z]+_$/.test(v)){warning("ADSAFE violation: bad id.");}}}
x=v.search(dx);if(x>=0){warning("Unexpected character '{a}' in {b}.",token,v.charAt(x),a);}
ids[u]=true;}else if(a==='class'||a==='type'||a==='name'){x=v.search(qx);if(x>=0){warning("Unexpected character '{a}' in {b}.",token,v.charAt(x),a);}
ids[u]=true;}else if(a==='href'||a==='background'||a==='content'||a==='data'||a.indexOf('src')>=0||a.indexOf('url')>=0){if(option.safe&&ux.test(v)){error("ADsafe URL violation.");}
urls.push(v);}else if(a==='for'){if(option.adsafe){if(adsafe_id){if(v.slice(0,adsafe_id.length)!==adsafe_id){warning("ADsafe violation: An id must have a '{a}' prefix",nexttoken,adsafe_id);}else if(!/^[A-Z]+_[A-Z]+$/.test(v)){warning("ADSAFE violation: bad id.");}}else{warning("ADSAFE violation: bad id.");}}}else if(a==='name'){if(option.adsafe&&v.indexOf('_')>=0){warning("ADsafe name violation.");}}}
function doTag(n,a){var i,t=htmltag[n],x;src=false;if(!t){error("Unrecognized tag '<{a}>'.",nexttoken,n===n.toLowerCase()?n:n+' (capitalization error)');}
if(stack.length>0){if(n==='html'){error("Too many <html> tags.",token);}
x=t.parent;if(x){if(x.indexOf(' '+stack[stack.length-1].name+' ')<0){error("A '<{a}>' must be within '<{b}>'.",token,n,x);}}else if(!option.adsafe&&!option.fragment){i=stack.length;do{if(i<=0){error("A '<{a}>' must be within '<{b}>'.",token,n,'body');}
i-=1;}while(stack[i].name!=='body');}}
switch(n){case'div':if(option.adsafe&&stack.length===1&&!adsafe_id){warning("ADSAFE violation: missing ID_.");}
break;case'script':xmode='script';advance('>');indent=nexttoken.from;if(a.lang){warning("lang is deprecated.",token);}
if(option.adsafe&&stack.length!==1){warning("ADsafe script placement violation.",token);}
if(a.src){if(option.adsafe&&(!adsafe_may||!approved[a.src])){warning("ADsafe unapproved script source.",token);}
if(a.type){warning("type is unnecessary.",token);}}else{if(adsafe_went){error("ADsafe script violation.",token);}
statements('script');}
xmode='html';advance('</');if(!nexttoken.identifier&&nexttoken.value!=='script'){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'script',nexttoken.value);}
advance();xmode='outer';break;case'style':xmode='style';advance('>');styles();xmode='html';advance('</');if(!nexttoken.identifier&&nexttoken.value!=='style'){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'style',nexttoken.value);}
advance();xmode='outer';break;case'input':switch(a.type){case'radio':case'checkbox':case'button':case'reset':case'submit':break;case'text':case'file':case'password':case'file':case'hidden':case'image':if(option.adsafe&&a.autocomplete!=='off'){warning("ADsafe autocomplete violation.");}
break;default:warning("Bad input type.");}
break;case'applet':case'body':case'embed':case'frame':case'frameset':case'head':case'iframe':case'noembed':case'noframes':case'object':case'param':if(option.adsafe){warning("ADsafe violation: Disallowed tag: "+n);}
break;}}
function closetag(n){return'</'+n+'>';}
function html(){var a,attributes,e,n,q,t,v,w=option.white,wmode;xmode='html';xquote='';stack=null;for(;;){switch(nexttoken.value){case'<':xmode='html';advance('<');attributes={};t=nexttoken;if(!t.identifier){warning("Bad identifier {a}.",t,t.value);}
n=t.value;if(option.cap){n=n.toLowerCase();}
t.name=n;advance();if(!stack){stack=[];doBegin(n);}
v=htmltag[n];if(typeof v!=='object'){error("Unrecognized tag '<{a}>'.",t,n);}
e=v.empty;t.type=n;for(;;){if(nexttoken.id==='/'){advance('/');if(nexttoken.id!=='>'){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'>',nexttoken.value);}
break;}
if(nexttoken.id&&nexttoken.id.substr(0,1)==='>'){break;}
if(!nexttoken.identifier){if(nexttoken.id==='(end)'||nexttoken.id==='(error)'){error("Missing '>'.",nexttoken);}
warning("Bad identifier.");}
option.white=true;nonadjacent(token,nexttoken);a=nexttoken.value;option.white=w;advance();if(!option.cap&&a!==a.toLowerCase()){warning("Attribute '{a}' not all lower case.",nexttoken,a);}
a=a.toLowerCase();xquote='';if(is_own(attributes,a)){warning("Attribute '{a}' repeated.",nexttoken,a);}
if(a.slice(0,2)==='on'){if(!option.on){warning("Avoid HTML event handlers.");}
xmode='scriptstring';advance('=');q=nexttoken.id;if(q!=='"'&&q!=="'"){error("Missing quote.");}
xquote=q;wmode=option.white;option.white=false;advance(q);statements('on');option.white=wmode;if(nexttoken.id!==q){error("Missing close quote on script attribute.");}
xmode='html';xquote='';advance(q);v=false;}else if(a==='style'){xmode='scriptstring';advance('=');q=nexttoken.id;if(q!=='"'&&q!=="'"){error("Missing quote.");}
xmode='styleproperty';xquote=q;advance(q);substyle();xmode='html';xquote='';advance(q);v=false;}else{if(nexttoken.id==='='){advance('=');v=nexttoken.value;if(!nexttoken.identifier&&nexttoken.id!=='"'&&nexttoken.id!=='\''&&nexttoken.type!=='(string)'&&nexttoken.type!=='(number)'&&nexttoken.type!=='(color)'){warning("Expected an attribute value and instead saw '{a}'.",token,a);}
advance();}else{v=true;}}
attributes[a]=v;doAttribute(n,a,v);}
doTag(n,attributes);if(!e){stack.push(t);}
xmode='outer';advance('>');break;case'</':xmode='html';advance('</');if(!nexttoken.identifier){warning("Bad identifier.");}
n=nexttoken.value;if(option.cap){n=n.toLowerCase();}
advance();if(!stack){error("Unexpected '{a}'.",nexttoken,closetag(n));}
t=stack.pop();if(!t){error("Unexpected '{a}'.",nexttoken,closetag(n));}
if(t.name!==n){error("Expected '{a}' and instead saw '{b}'.",nexttoken,closetag(t.name),closetag(n));}
if(nexttoken.id!=='>'){error("Missing '{a}'.",nexttoken,'>');}
xmode='outer';advance('>');break;case'<!':if(option.safe){warning("ADsafe HTML violation.");}
xmode='html';for(;;){advance();if(nexttoken.id==='>'||nexttoken.id==='(end)'){break;}
if(nexttoken.value.indexOf('--')>=0){warning("Unexpected --.");}
if(nexttoken.value.indexOf('<')>=0){warning("Unexpected <.");}
if(nexttoken.value.indexOf('>')>=0){warning("Unexpected >.");}}
xmode='outer';advance('>');break;case'(end)':return;default:if(nexttoken.id==='(end)'){error("Missing '{a}'.",nexttoken,'</'+stack[stack.length-1].value+'>');}else{advance();}}
if(stack&&stack.length===0&&(option.adsafe||!option.fragment||nexttoken.id==='(end)')){break;}}
if(nexttoken.id!=='(end)'){error("Unexpected material after the end.");}}
type('(number)',idValue);type('(string)',idValue);syntax['(identifier)']={type:'(identifier)',lbp:0,identifier:true,nud:function(){var v=this.value,s=scope[v],f;if(typeof s==='function'){s=undefined;}else if(typeof s==='boolean'){f=funct;funct=functions[0];addlabel(v,'var');s=funct;funct=f;}
if(funct===s){switch(funct[v]){case'unused':funct[v]='var';break;case'label':warning("'{a}' is a statement label.",token,v);break;}}else if(funct['(global)']){if(option.undef&&predefined[v]!=='boolean'){warning("'{a}' is not defined.",token,v);}
note_implied(token);}else{switch(funct[v]){case'closure':case'function':case'var':case'unused':warning("'{a}' used out of scope.",token,v);break;case'label':warning("'{a}' is a statement label.",token,v);break;case'outer':case'global':break;default:if(s===true){funct[v]=true;}else if(s===null){warning("'{a}' is not allowed.",token,v);note_implied(token);}else if(typeof s!=='object'){if(option.undef){warning("'{a}' is not defined.",token,v);}else{funct[v]=true;}
note_implied(token);}else{switch(s[v]){case'function':case'var':case'unused':s[v]='closure';funct[v]=s['(global)']?'global':'outer';break;case'closure':case'parameter':funct[v]=s['(global)']?'global':'outer';break;case'label':warning("'{a}' is a statement label.",token,v);}}}}
return this;},led:function(){error("Expected an operator and instead saw '{a}'.",nexttoken,nexttoken.value);}};type('(regexp)',function(){return this;});delim('(endline)');delim('(begin)');delim('(end)').reach=true;delim('</').reach=true;delim('<!');delim('<!--');delim('-->');delim('(error)').reach=true;delim('}').reach=true;delim(')');delim(']');delim('"').reach=true;delim("'").reach=true;delim(';');delim(':').reach=true;delim(',');delim('#');delim('@');reserve('else');reserve('case').reach=true;reserve('catch');reserve('default').reach=true;reserve('finally');reservevar('arguments');reservevar('eval');reservevar('false');reservevar('Infinity');reservevar('NaN');reservevar('null');reservevar('this');reservevar('true');reservevar('undefined');assignop('=','assign',20);assignop('+=','assignadd',20);assignop('-=','assignsub',20);assignop('*=','assignmult',20);assignop('/=','assigndiv',20).nud=function(){error("A regular expression literal can be confused with '/='.");};assignop('%=','assignmod',20);bitwiseassignop('&=','assignbitand',20);bitwiseassignop('|=','assignbitor',20);bitwiseassignop('^=','assignbitxor',20);bitwiseassignop('<<=','assignshiftleft',20);bitwiseassignop('>>=','assignshiftright',20);bitwiseassignop('>>>=','assignshiftrightunsigned',20);infix('?',function(left,that){that.left=left;that.right=parse(10);advance(':');that['else']=parse(10);return that;},30);infix('||','or',40);infix('&&','and',50);bitwise('|','bitor',70);bitwise('^','bitxor',80);bitwise('&','bitand',90);relation('==',function(left,right){if(option.eqeqeq){warning("Expected '{a}' and instead saw '{b}'.",this,'===','==');}else if(isPoorRelation(left)){warning("Use '{a}' to compare with '{b}'.",this,'===',left.value);}else if(isPoorRelation(right)){warning("Use '{a}' to compare with '{b}'.",this,'===',right.value);}
return this;});relation('===');relation('!=',function(left,right){if(option.eqeqeq){warning("Expected '{a}' and instead saw '{b}'.",this,'!==','!=');}else if(isPoorRelation(left)){warning("Use '{a}' to compare with '{b}'.",this,'!==',left.value);}else if(isPoorRelation(right)){warning("Use '{a}' to compare with '{b}'.",this,'!==',right.value);}
return this;});relation('!==');relation('<');relation('>');relation('<=');relation('>=');bitwise('<<','shiftleft',120);bitwise('>>','shiftright',120);bitwise('>>>','shiftrightunsigned',120);infix('in','in',120);infix('instanceof','instanceof',120);infix('+',function(left,that){var right=parse(130);if(left&&right&&left.id==='(string)'&&right.id==='(string)'){left.value+=right.value;left.character=right.character;if(jx.test(left.value)){warning("JavaScript URL.",left);}
return left;}
that.left=left;that.right=right;return that;},130);prefix('+','num');infix('-','sub',130);prefix('-','neg');infix('*','mult',140);infix('/','div',140);infix('%','mod',140);suffix('++','postinc');prefix('++','preinc');syntax['++'].exps=true;suffix('--','postdec');prefix('--','predec');syntax['--'].exps=true;prefix('delete',function(){var p=parse(0);if(!p||(p.id!=='.'&&p.id!=='[')){warning("Expected '{a}' and instead saw '{b}'.",nexttoken,'.',nexttoken.value);}
this.first=p;return this;}).exps=true;prefix('~',function(){if(option.bitwise){warning("Unexpected '{a}'.",this,'~');}
parse(150);return this;});prefix('!',function(){this.right=parse(150);this.arity='unary';if(bang[this.right.id]===true){warning("Confusing use of '{a}'.",this,'!');}
return this;});prefix('typeof','typeof');prefix('new',function(){var c=parse(155),i;if(c&&c.id!=='function'){if(c.identifier){c['new']=true;switch(c.value){case'Object':warning("Use the object literal notation {}.",token);break;case'Array':if(nexttoken.id!=='('){warning("Use the array literal notation [].",token);}else{advance('(');if(nexttoken.id===')'){warning("Use the array literal notation [].",token);}else{i=parse(0);c.dimension=i;if((i.id==='(number)'&&/[.+\-Ee]/.test(i.value))||(i.id==='-'&&!i.right)||i.id==='(string)'||i.id==='['||i.id==='{'||i.id==='true'||i.id==='false'||i.id==='null'||i.id==='undefined'||i.id==='Infinity'){warning("Use the array literal notation [].",token);}
if(nexttoken.id!==')'){error("Use the array literal notation [].",token);}}
advance(')');}
this.first=c;return this;case'Number':case'String':case'Boolean':case'Math':case'JSON':warning("Do not use {a} as a constructor.",token,c.value);break;case'Function':if(!option.evil){warning("The Function constructor is eval.");}
break;case'Date':case'RegExp':break;default:if(c.id!=='function'){i=c.value.substr(0,1);if(option.newcap&&(i<'A'||i>'Z')){warning("A constructor name should start with an uppercase letter.",token);}}}}else{if(c.id!=='.'&&c.id!=='['&&c.id!=='('){warning("Bad constructor.",token);}}}else{warning("Weird construction. Delete 'new'.",this);}
adjacent(token,nexttoken);if(nexttoken.id!=='('){warning("Missing '()' invoking a constructor.");}
this.first=c;return this;});syntax['new'].exps=true;infix('.',function(left,that){adjacent(prevtoken,token);var m=identifier();if(typeof m==='string'){countMember(m);}
that.left=left;that.right=m;if(!option.evil&&left&&left.value==='document'&&(m==='write'||m==='writeln')){warning("document.write can be a form of eval.",left);}else if(option.adsafe){if(left&&left.value==='ADSAFE'){if(m==='id'||m==='lib'){warning("ADsafe violation.",that);}else if(m==='go'){if(xmode!=='script'){warning("ADsafe violation.",that);}else if(adsafe_went||nexttoken.id!=='('||peek(0).id!=='(string)'||peek(0).value!==adsafe_id||peek(1).id!==','){error("ADsafe violation: go.",that);}
adsafe_went=true;adsafe_may=false;}}}
if(!option.evil&&(m==='eval'||m==='execScript')){warning('eval is evil.');}else if(option.safe){for(;;){if(banned[m]===true){warning("ADsafe restricted word '{a}'.",token,m);}
if(typeof predefined[left.value]!=='boolean'||nexttoken.id==='('){break;}
if(standard_member[m]===true){if(nexttoken.id==='.'){warning("ADsafe violation.",that);}
break;}
if(nexttoken.id!=='.'){warning("ADsafe violation.",that);break;}
advance('.');token.left=that;token.right=m;that=token;m=identifier();if(typeof m==='string'){countMember(m);}}}
return that;},160,true);infix('(',function(left,that){adjacent(prevtoken,token);nospace();var n=0,p=[];if(left){if(left.type==='(identifier)'){if(left.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)){if(left.value!=='Number'&&left.value!=='String'&&left.value!=='Boolean'&&left.value!=='Date'){if(left.value==='Math'){warning("Math is not a function.",left);}else if(option.newcap){warning("Missing 'new' prefix when invoking a constructor.",left);}}}}else if(left.id==='.'){if(option.safe&&left.left.value==='Math'&&left.right==='random'){warning("ADsafe violation.",left);}}}
if(nexttoken.id!==')'){for(;;){p[p.length]=parse(10);n+=1;if(nexttoken.id!==','){break;}
comma();}}
advance(')');if(option.immed&&left.id==='function'&&nexttoken.id!==')'){warning("Wrap the entire immediate function invocation in parens.",that);}
nospace(prevtoken,token);if(typeof left==='object'){if(left.value==='parseInt'&&n===1){warning("Missing radix parameter.",left);}
if(!option.evil){if(left.value==='eval'||left.value==='Function'||left.value==='execScript'){warning("eval is evil.",left);}else if(p[0]&&p[0].id==='(string)'&&(left.value==='setTimeout'||left.value==='setInterval')){warning("Implied eval is evil. Pass a function instead of a string.",left);}}
if(!left.identifier&&left.id!=='.'&&left.id!=='['&&left.id!=='('&&left.id!=='&&'&&left.id!=='||'&&left.id!=='?'){warning("Bad invocation.",left);}}
that.left=left;return that;},155,true).exps=true;prefix('(',function(){nospace();var v=parse(0);advance(')',this);nospace(prevtoken,token);if(option.immed&&v.id==='function'){if(nexttoken.id==='('){warning("Move the invocation into the parens that contain the function.",nexttoken);}else{warning("Do not wrap function literals in parens unless they are to be immediately invoked.",this);}}
return v;});infix('[',function(left,that){nospace();var e=parse(0),s;if(e&&e.type==='(string)'){if(option.safe&&banned[e.value]===true){warning("ADsafe restricted word '{a}'.",that,e.value);}else if(!option.evil&&(e.value==='eval'||e.value==='execScript')){warning("eval is evil.",that);}else if(option.safe&&(e.value.charAt(0)==='_'||e.value.charAt(0)==='-')){warning("ADsafe restricted subscript '{a}'.",that,e.value);}
countMember(e.value);if(!option.sub&&ix.test(e.value)){s=syntax[e.value];if(!s||!s.reserved){warning("['{a}'] is better written in dot notation.",e,e.value);}}}else if(!e||e.type!=='(number)'||e.value<0){if(option.safe){warning('ADsafe subscripting.');}}
advance(']',that);nospace(prevtoken,token);that.left=left;that.right=e;return that;},160,true);prefix('[',function(){var b=token.line!==nexttoken.line;this.first=[];if(b){indent+=option.indent;if(nexttoken.from===indent+option.indent){indent+=option.indent;}}
while(nexttoken.id!=='(end)'){while(nexttoken.id===','){warning("Extra comma.");advance(',');}
if(nexttoken.id===']'){break;}
if(b&&token.line!==nexttoken.line){indentation();}
this.first.push(parse(10));if(nexttoken.id===','){comma();if(nexttoken.id===']'){warning("Extra comma.",token);break;}}else{break;}}
if(b){indent-=option.indent;indentation();}
advance(']',this);return this;},160);(function(x){x.nud=function(){var b,i,s,seen={};b=token.line!==nexttoken.line;if(b){indent+=option.indent;if(nexttoken.from===indent+option.indent){indent+=option.indent;}}
for(;;){if(nexttoken.id==='}'){break;}
if(b){indentation();}
i=optionalidentifier(true);if(!i){if(nexttoken.id==='(string)'){i=nexttoken.value;if(ix.test(i)){s=syntax[i];}
advance();}else if(nexttoken.id==='(number)'){i=nexttoken.value.toString();advance();}else{error("Expected '{a}' and instead saw '{b}'.",nexttoken,'}',nexttoken.value);}}
if(seen[i]===true){warning("Duplicate member '{a}'.",nexttoken,i);}
seen[i]=true;countMember(i);advance(':');nonadjacent(token,nexttoken);parse(10);if(nexttoken.id===','){comma();if(nexttoken.id===','||nexttoken.id==='}'){warning("Extra comma.",token);}}else{break;}}
if(b){indent-=option.indent;indentation();}
advance('}',this);return this;};x.fud=function(){error("Expected to see a statement and instead saw a block.",token);};}(delim('{')));function varstatement(prefix){var id,name,value;if(funct['(onevar)']&&option.onevar){warning("Too many var statements.");}else if(!funct['(global)']){funct['(onevar)']=true;}
this.first=[];for(;;){nonadjacent(token,nexttoken);id=identifier();if(funct['(global)']&&predefined[id]===false){warning("Redefinition of '{a}'.",token,id);}
addlabel(id,'unused');if(prefix){break;}
name=token;this.first.push(token);if(nexttoken.id==='='){nonadjacent(token,nexttoken);advance('=');nonadjacent(token,nexttoken);if(nexttoken.id==='undefined'){warning("It is not necessary to initialize '{a}' to 'undefined'.",token,id);}
if(peek(0).id==='='&&nexttoken.identifier){error("Variable {a} was not declared correctly.",nexttoken,nexttoken.value);}
value=parse(0);name.first=value;}
if(nexttoken.id!==','){break;}
comma();}
return this;}
stmt('var',varstatement).exps=true;function functionparams(){var i,t=nexttoken,p=[];advance('(');nospace();if(nexttoken.id===')'){advance(')');nospace(prevtoken,token);return;}
for(;;){i=identifier();p.push(i);addlabel(i,'parameter');if(nexttoken.id===','){comma();}else{advance(')',t);nospace(prevtoken,token);return p;}}}
function doFunction(i){var s=scope;scope=Object.create(s);funct={'(name)':i||'"'+anonname+'"','(line)':nexttoken.line,'(context)':funct,'(breakage)':0,'(loopage)':0,'(scope)':scope};token.funct=funct;functions.push(funct);if(i){addlabel(i,'function');}
funct['(params)']=functionparams();block(false);scope=s;funct['(last)']=token.line;funct=funct['(context)'];}
blockstmt('function',function(){if(inblock){warning("Function statements cannot be placed in blocks. Use a function expression or move the statement to the top of the outer function.",token);}
var i=identifier();adjacent(token,nexttoken);addlabel(i,'unused');doFunction(i);if(nexttoken.id==='('&&nexttoken.line===token.line){error("Function statements are not invocable. Wrap the whole function invocation in parens.");}
return this;});prefix('function',function(){var i=optionalidentifier();if(i){adjacent(token,nexttoken);}else{nonadjacent(token,nexttoken);}
doFunction(i);if(funct['(loopage)']&&nexttoken.id!=='('){warning("Be careful when making functions within a loop. Consider putting the function in a closure.");}
return this;});blockstmt('if',function(){var t=nexttoken;advance('(');nonadjacent(this,t);nospace();parse(20);if(nexttoken.id==='='){warning("Expected a conditional expression and instead saw an assignment.");advance('=');parse(20);}
advance(')',t);nospace(prevtoken,token);block(true);if(nexttoken.id==='else'){nonadjacent(token,nexttoken);advance('else');if(nexttoken.id==='if'||nexttoken.id==='switch'){statement(true);}else{block(true);}}
return this;});blockstmt('try',function(){var b,e,s;if(option.adsafe){warning("ADsafe try violation.",this);}
block(false);if(nexttoken.id==='catch'){advance('catch');nonadjacent(token,nexttoken);advance('(');s=scope;scope=Object.create(s);e=nexttoken.value;if(nexttoken.type!=='(identifier)'){warning("Expected an identifier and instead saw '{a}'.",nexttoken,e);}else{addlabel(e,'exception');}
advance();advance(')');block(false);b=true;scope=s;}
if(nexttoken.id==='finally'){advance('finally');block(false);return;}else if(!b){error("Expected '{a}' and instead saw '{b}'.",nexttoken,'catch',nexttoken.value);}
return this;});blockstmt('while',function(){var t=nexttoken;funct['(breakage)']+=1;funct['(loopage)']+=1;advance('(');nonadjacent(this,t);nospace();parse(20);if(nexttoken.id==='='){warning("Expected a conditional expression and instead saw an assignment.");advance('=');parse(20);}
advance(')',t);nospace(prevtoken,token);block(true);funct['(breakage)']-=1;funct['(loopage)']-=1;return this;}).labelled=true;reserve('with');blockstmt('switch',function(){var t=nexttoken,g=false;funct['(breakage)']+=1;advance('(');nonadjacent(this,t);nospace();this.condition=parse(20);advance(')',t);nospace(prevtoken,token);nonadjacent(token,nexttoken);t=nexttoken;advance('{');nonadjacent(token,nexttoken);indent+=option.indent;this.cases=[];for(;;){switch(nexttoken.id){case'case':switch(funct['(verb)']){case'break':case'case':case'continue':case'return':case'switch':case'throw':break;default:warning("Expected a 'break' statement before 'case'.",token);}
indentation(-option.indent);advance('case');this.cases.push(parse(20));g=true;advance(':');funct['(verb)']='case';break;case'default':switch(funct['(verb)']){case'break':case'continue':case'return':case'throw':break;default:warning("Expected a 'break' statement before 'default'.",token);}
indentation(-option.indent);advance('default');g=true;advance(':');break;case'}':indent-=option.indent;indentation();advance('}',t);if(this.cases.length===1||this.condition.id==='true'||this.condition.id==='false'){warning("This 'switch' should be an 'if'.",this);}
funct['(breakage)']-=1;funct['(verb)']=undefined;return;case'(end)':error("Missing '{a}'.",nexttoken,'}');return;default:if(g){switch(token.id){case',':error("Each value should have its own case label.");return;case':':statements();break;default:error("Missing ':' on a case clause.",token);}}else{error("Expected '{a}' and instead saw '{b}'.",nexttoken,'case',nexttoken.value);}}}}).labelled=true;stmt('debugger',function(){if(!option.debug){warning("All 'debugger' statements should be removed.");}
return this;}).exps=true;(function(){var x=stmt('do',function(){funct['(breakage)']+=1;funct['(loopage)']+=1;this.first=block(true);advance('while');var t=nexttoken;nonadjacent(token,t);advance('(');nospace();parse(20);if(nexttoken.id==='='){warning("Expected a conditional expression and instead saw an assignment.");advance('=');parse(20);}
advance(')',t);nospace(prevtoken,token);funct['(breakage)']-=1;funct['(loopage)']-=1;return this;});x.labelled=true;x.exps=true;}());blockstmt('for',function(){var f=option.forin,s,t=nexttoken;funct['(breakage)']+=1;funct['(loopage)']+=1;advance('(');nonadjacent(this,t);nospace();if(peek(nexttoken.id==='var'?1:0).id==='in'){if(nexttoken.id==='var'){advance('var');varstatement(true);}else{switch(funct[nexttoken.value]){case'unused':funct[nexttoken.value]='var';break;case'var':break;default:warning("Bad for in variable '{a}'.",nexttoken,nexttoken.value);}
advance();}
advance('in');parse(20);advance(')',t);s=block(true);if(!f&&(s.length>1||typeof s[0]!=='object'||s[0].value!=='if')){warning("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this);}
funct['(breakage)']-=1;funct['(loopage)']-=1;return this;}else{if(nexttoken.id!==';'){if(nexttoken.id==='var'){advance('var');varstatement();}else{for(;;){parse(0,'for');if(nexttoken.id!==','){break;}
comma();}}}
nolinebreak(token);advance(';');if(nexttoken.id!==';'){parse(20);if(nexttoken.id==='='){warning("Expected a conditional expression and instead saw an assignment.");advance('=');parse(20);}}
nolinebreak(token);advance(';');if(nexttoken.id===';'){error("Expected '{a}' and instead saw '{b}'.",nexttoken,')',';');}
if(nexttoken.id!==')'){for(;;){parse(0,'for');if(nexttoken.id!==','){break;}
comma();}}
advance(')',t);nospace(prevtoken,token);block(true);funct['(breakage)']-=1;funct['(loopage)']-=1;return this;}}).labelled=true;stmt('break',function(){var v=nexttoken.value;if(funct['(breakage)']===0){warning("Unexpected '{a}'.",nexttoken,this.value);}
nolinebreak(this);if(nexttoken.id!==';'){if(token.line===nexttoken.line){if(funct[v]!=='label'){warning("'{a}' is not a statement label.",nexttoken,v);}else if(scope[v]!==funct){warning("'{a}' is out of scope.",nexttoken,v);}
this.first=nexttoken;advance();}}
reachable('break');return this;}).exps=true;stmt('continue',function(){var v=nexttoken.value;if(funct['(breakage)']===0){warning("Unexpected '{a}'.",nexttoken,this.value);}
nolinebreak(this);if(nexttoken.id!==';'){if(token.line===nexttoken.line){if(funct[v]!=='label'){warning("'{a}' is not a statement label.",nexttoken,v);}else if(scope[v]!==funct){warning("'{a}' is out of scope.",nexttoken,v);}
this.first=nexttoken;advance();}}
reachable('continue');return this;}).exps=true;stmt('return',function(){nolinebreak(this);if(nexttoken.id==='(regexp)'){warning("Wrap the /regexp/ literal in parens to disambiguate the slash operator.");}
if(nexttoken.id!==';'&&!nexttoken.reach){nonadjacent(token,nexttoken);this.first=parse(20);}
reachable('return');return this;}).exps=true;stmt('throw',function(){nolinebreak(this);nonadjacent(token,nexttoken);this.first=parse(20);reachable('throw');return this;}).exps=true;reserve('void');reserve('class');reserve('const');reserve('enum');reserve('export');reserve('extends');reserve('import');reserve('super');reserve('let');reserve('yield');reserve('implements');reserve('interface');reserve('package');reserve('private');reserve('protected');reserve('public');reserve('static');function jsonValue(){function jsonObject(){var o={},t=nexttoken;advance('{');if(nexttoken.id!=='}'){for(;;){if(nexttoken.id==='(end)'){error("Missing '}' to match '{' from line {a}.",nexttoken,t.line);}else if(nexttoken.id==='}'){warning("Unexpected comma.",token);break;}else if(nexttoken.id===','){error("Unexpected comma.",nexttoken);}else if(nexttoken.id!=='(string)'){warning("Expected a string and instead saw {a}.",nexttoken,nexttoken.value);}
if(o[nexttoken.value]===true){warning("Duplicate key '{a}'.",nexttoken,nexttoken.value);}else if(nexttoken.value==='__proto__'){warning("Stupid key '{a}'.",nexttoken,nexttoken.value);}else{o[nexttoken.value]=true;}
advance();advance(':');jsonValue();if(nexttoken.id!==','){break;}
advance(',');}}
advance('}');}
function jsonArray(){var t=nexttoken;advance('[');if(nexttoken.id!==']'){for(;;){if(nexttoken.id==='(end)'){error("Missing ']' to match '[' from line {a}.",nexttoken,t.line);}else if(nexttoken.id===']'){warning("Unexpected comma.",token);break;}else if(nexttoken.id===','){error("Unexpected comma.",nexttoken);}
jsonValue();if(nexttoken.id!==','){break;}
advance(',');}}
advance(']');}
switch(nexttoken.id){case'{':jsonObject();break;case'[':jsonArray();break;case'true':case'false':case'null':case'(number)':case'(string)':advance();break;case'-':advance('-');if(token.character!==nexttoken.from){warning("Unexpected space after '-'.",token);}
adjacent(token,nexttoken);advance('(number)');break;default:error("Expected a JSON value.",nexttoken);}}
var itself=function(s,o){var a,i;JSLINT.errors=[];predefined=Object.create(standard);if(o){a=o.predef;if(a instanceof Array){for(i=0;i<a.length;i+=1){predefined[a[i]]=true;}}
if(o.adsafe){o.safe=true;}
if(o.safe){o.browser=false;o.css=false;o.debug=false;o.devel=false;o.eqeqeq=true;o.evil=false;o.forin=false;o.nomen=true;o.on=false;o.rhino=false;o.safe=true;o.sidebar=false;o.strict=true;o.sub=false;o.undef=true;o.widget=false;predefined.Date=null;predefined['eval']=null;predefined.Function=null;predefined.Object=null;predefined.ADSAFE=false;predefined.lib=false;}
option=o;}else{option={};}
option.indent=option.indent||4;option.maxerr=option.maxerr||50;adsafe_id='';adsafe_may=false;adsafe_went=false;approved={};if(option.approved){for(i=0;i<option.approved.length;i+=1){approved[option.approved[i]]=option.approved[i];}}else{approved.test='test';}
tab='';for(i=0;i<option.indent;i+=1){tab+=' ';}
indent=1;global=Object.create(predefined);scope=global;funct={'(global)':true,'(name)':'(global)','(scope)':scope,'(breakage)':0,'(loopage)':0};functions=[funct];ids={};urls=[];src=false;xmode=false;stack=null;member={};membersOnly=null;implied={};inblock=false;lookahead=[];jsonmode=false;warnings=0;lex.init(s);prereg=true;strict_mode=false;prevtoken=token=nexttoken=syntax['(begin)'];assume();try{advance();if(nexttoken.value.charAt(0)==='<'){html();if(option.adsafe&&!adsafe_went){warning("ADsafe violation: Missing ADSAFE.go.",this);}}else{switch(nexttoken.id){case'{':case'[':option.laxbreak=true;jsonmode=true;jsonValue();break;case'@':case'*':case'#':case'.':case':':xmode='style';advance();if(token.id!=='@'||!nexttoken.identifier||nexttoken.value!=='charset'||token.line!==1||token.from!==1){error('A css file should begin with @charset "UTF-8";');}
advance();if(nexttoken.type!=='(string)'&&nexttoken.value!=='UTF-8'){error('A css file should begin with @charset "UTF-8";');}
advance();advance(';');styles();break;default:if(option.adsafe&&option.fragment){error("Expected '{a}' and instead saw '{b}'.",nexttoken,'<div>',nexttoken.value);}
statements('lib');}}
advance('(end)');}catch(e){if(e){JSLINT.errors.push({reason:e.message,line:e.line||nexttoken.line,character:e.character||nexttoken.from},null);}}
return JSLINT.errors.length===0;};function is_array(o){return Object.prototype.toString.apply(o)==='[object Array]';}
function to_array(o){var a=[],k;for(k in o){if(is_own(o,k)){a.push(k);}}
return a;}
itself.data=function(){var data={functions:[]},fu,globals,implieds=[],f,i,j,members=[],n,unused=[],v;if(itself.errors.length){data.errors=itself.errors;}
if(jsonmode){data.json=true;}
for(n in implied){if(is_own(implied,n)){implieds.push({name:n,line:implied[n]});}}
if(implieds.length>0){data.implieds=implieds;}
if(urls.length>0){data.urls=urls;}
globals=to_array(scope);if(globals.length>0){data.globals=globals;}
for(i=1;i<functions.length;i+=1){f=functions[i];fu={};for(j=0;j<functionicity.length;j+=1){fu[functionicity[j]]=[];}
for(n in f){if(is_own(f,n)&&n.charAt(0)!=='('){v=f[n];if(is_array(fu[v])){fu[v].push(n);if(v==='unused'){unused.push({name:n,line:f['(line)'],'function':f['(name)']});}}}}
for(j=0;j<functionicity.length;j+=1){if(fu[functionicity[j]].length===0){delete fu[functionicity[j]];}}
fu.name=f['(name)'];fu.param=f['(params)'];fu.line=f['(line)'];fu.last=f['(last)'];data.functions.push(fu);}
if(unused.length>0){data.unused=unused;}
members=[];for(n in member){if(typeof member[n]==='number'){data.member=member;break;}}
return data;};itself.report=function(option){var data=itself.data();var a=[],c,e,err,f,i,k,l,m='',n,o=[],s;function detail(h,array){var b,i,singularity;if(array){o.push('<div><i>'+h+'</i> ');array=array.sort();for(i=0;i<array.length;i+=1){if(array[i]!==singularity){singularity=array[i];o.push((b?', ':'')+singularity);b=true;}}
o.push('</div>');}}
if(data.errors||data.implieds||data.unused){err=true;o.push('<div id=errors><i>Error:</i>');if(data.errors){for(i=0;i<data.errors.length;i+=1){c=data.errors[i];if(c){e=c.evidence||'';o.push('<p>Problem'+(isFinite(c.line)?' at line '+
c.line+' character '+c.character:'')+': '+c.reason.entityify()+'</p><p class=evidence>'+
(e&&(e.length>80?e.slice(0,77)+'...':e).entityify())+'</p>');}}}
if(data.implieds){s=[];for(i=0;i<data.implieds.length;i+=1){s[i]='<code>'+data.implieds[i].name+'</code>&nbsp;<i>'+
data.implieds[i].line+'</i>';}
o.push('<p><i>Implied global:</i> '+s.join(', ')+'</p>');}
if(data.unused){s=[];for(i=0;i<data.unused.length;i+=1){s[i]='<code><u>'+data.unused[i].name+'</u></code>&nbsp;<i>'+
data.unused[i].line+'</i> <code>'+
data.unused[i]['function']+'</code>';}
o.push('<p><i>Unused variable:</i> '+s.join(', ')+'</p>');}
if(data.json){o.push('<p>JSON: bad.</p>');}
o.push('</div>');}
if(!option){o.push('<br><div id=functions>');if(data.urls){detail("URLs<br>",data.urls,'<br>');}
if(xmode==='style'){o.push('<p>CSS.</p>');}else if(data.json&&!err){o.push('<p>JSON: good.</p>');}else if(data.globals){o.push('<div><i>Global</i> '+
data.globals.sort().join(', ')+'</div>');}else{o.push('<div><i>No new global variables introduced.</i></div>');}
for(i=0;i<data.functions.length;i+=1){f=data.functions[i];o.push('<br><div class=function><i>'+f.line+'-'+
f.last+'</i> '+(f.name||'')+'('+
(f.param?f.param.join(', '):'')+')</div>');detail('<big><b>Unused</b></big>',f.unused);detail('Closure',f.closure);detail('Variable',f['var']);detail('Exception',f.exception);detail('Outer',f.outer);detail('Global',f.global);detail('Label',f.label);}
if(data.member){a=to_array(data.member);if(a.length){a=a.sort();m='<br><pre id=members>/*members ';l=10;for(i=0;i<a.length;i+=1){k=a[i];n=k.name();if(l+n.length>72){o.push(m+'<br>');m='    ';l=1;}
l+=n.length+2;if(data.member[k]===1){n='<i>'+n+'</i>';}
if(i<a.length-1){n+=', ';}
m+=n;}
o.push(m+'<br>*/</pre>');}
o.push('</div>');}}
return o.join('');};itself.jslint=itself;itself.edition='2010-01-12';return itself;}());
"use strict";var Core=Core||{};Core.Fred=Core.Fred||{};Core.Fred=(function(TargetNS){var DevelFredToggleContainerLinkProccess=0;TargetNS.Init=function(){var WidgetStatus={},Key;if(window&&window.localStorage){WidgetStatus=window.localStorage.getItem('FRED_widget_status');try{WidgetStatus=JSON.parse(WidgetStatus);if(WidgetStatus===null){WidgetStatus={};}}
catch(Exception){WidgetStatus={};}
for(Key in WidgetStatus){if(WidgetStatus.hasOwnProperty(Key)){$('.DevelFredBoxContent#'+Key).removeClass('Expanded Collapsed');if(WidgetStatus[Key]==='Collapsed'||WidgetStatus[Key]==='Expanded'){$('#'+Key)
.addClass(WidgetStatus[Key])
.closest('.DevelFredBox')
.addClass(WidgetStatus[Key]);}}}}
$('.DevelFredBoxContent').filter(':not(.Collapsed, .Expanded)').addClass('Expanded');$('.FredSearch').bind('click',function(){$(this).closest('.DevelFredBox').find('.FredQuickSearch').toggle();});$('.FredMinimize').bind('click',function(){var $WidgetElement=$(this).closest('.DevelFredBox').find('.DevelFredBoxContent');$WidgetElement
.slideToggle('fast')
.toggleClass('Collapsed')
.toggleClass('Expanded');$WidgetElement
.closest('.DevelFredBox')
.removeClass('Expanded Collapsed')
.addClass($WidgetElement.hasClass('Expanded')?'Expanded':'Collapsed');WidgetStatus[$WidgetElement.attr('id')]=$WidgetElement.hasClass('Collapsed')?'Collapsed':'Expanded';if(window&&window.localStorage){window.localStorage.setItem('FRED_widget_status',JSON.stringify(WidgetStatus));}});$('.FredClose').bind('click',function(){$(this).closest('.DevelFredBox').hide();});$('.FredCloseAll').bind('click',function(){$('.DevelFredBox').hide();});$('.FredQuickSearch i').bind('click',function(){$(this).prev('input').val('').trigger('keydown');});if(Core.Debug.CheckDependency('Fred','Core.UI.Table','Core.UI.Table',true)){$('.FredQuickSearch input').each(function(){Core.UI.Table.InitTableFilter($(this),$(this).closest('.DevelFredBox').find('.FredTableDefault'));});}
else{$('.FredQuickSearch, .FredSearch').hide();}
Core.UI.Popup.ProfileAdd('FredSettings',{WindowURLParams:"dependent=yes,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no",Left:100,Top:100,Width:400,Height:500});$('.FredSettings').bind('click',function(){Core.UI.Popup.OpenPopup($(this).data('url'),'FredSettings','FredSettings');});$('.ShowBindParameters').bind('click',function(){$(this).next('.Hidden').toggle();return false;});$('.FredSettingsLink').bind('click',function(){window.close();});$('#DevelFredContainer').draggable({handle:'h1',stop:function(event,ui){var Top=ui.offset.top,Left=ui.offset.left;if(window&&window.localStorage!==undefined){window.localStorage.FRED_console_left=Left;window.localStorage.FRED_console_top=Top;}}});(function(){var SavedLeft,SavedTop,FredWidth,FredHeight;if(window&&window.localStorage!==undefined&&window.localStorage.FRED_console_left&&window.localStorage.FRED_console_top){SavedLeft=window.localStorage.FRED_console_left;SavedTop=window.localStorage.FRED_console_top;FredWidth=$('#DevelFredContainer').width();FredHeight=$('#DevelFredContainer').height();if(SavedLeft>$('body').width()){SavedLeft=$('body').width()-FredWidth;}
if(SavedTop>$('body').height()){SavedTop=$('body').height()-FredHeight;}
if(SavedLeft&&SavedTop){$('#DevelFredContainer').css('left',SavedLeft+'px');$('#DevelFredContainer').css('top',SavedTop+'px');}}}());if(!$('body').hasClass('FredActive')){$('.DevelFredBox').hide();}
$('#DevelFredToggleContainerLink').on('click',function(){var Data={Action:'DevelFred',Subaction:'ConfigSwitchAJAX',Key:'Fred::Active',Value:$('body').hasClass('FredActive')?1:0};if(DevelFredToggleContainerLinkProccess)return;DevelFredToggleContainerLinkProccess=1;$('body').toggleClass('FredActive');$('#DevelFredToggleContainerLink').toggleClass('FredActive');if(!$('.DevelFredBox').is(":visible")&&$('body').hasClass('FredActive')){$('.DevelFredBox').show();}
else{$('.DevelFredBox').hide();}
Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(){DevelFredToggleContainerLinkProccess=0;},'json');});};TargetNS.Init();return TargetNS;}(Core.Fred.JSLint||{}));

"use strict";var Core=Core||{};Core.Fred=Core.Fred||{};Core.Fred.JSLint=(function(TargetNS){function htmlEscape(str){return String(str)
.replace(/&/g,'&amp;')
.replace(/"/g,'&quot;')
.replace(/'/g,'&#39;')
.replace(/</g,'&lt;')
.replace(/>/g,'&gt;');}
function startJSLint(){var Result,ErrorsFound=false;if(TargetNS.Started){return;}
TargetNS.Started++;$.each(TargetNS.AllScripts,function(){var ErrorObject,Output,i;if(this.Src==='inline'&&this.Script.match(/_gaUserPrefs/)){return;}
Result=JSLINT(this.Script,(this.Src==='inline')?TargetNS.InlineOptions:TargetNS.RemoteOptions);if(!Result){for(i=0;i<JSLINT.errors.length;i++){ErrorObject=JSLINT.errors[i];if(ErrorObject){$('#FredJSLintRunning').remove();Output='<div class="FredJSLintError">';Output+='<p><span class="Error">Error: </span><strong>'+ErrorObject.reason+'</strong> Source:     '+this.Src+':'+ErrorObject.line+':'+ErrorObject.character+'</p>';Output+='<code>'+htmlEscape(ErrorObject.evidence)+'</code>';Output+='</div>';$('#FredJSLintScripts').append(Output);ErrorsFound=true;}}}
});if(!ErrorsFound){$('#FredJSLintRunning').remove();$('#FredJSLintScripts').append('<p class="FredJSLintSuccessful">All checks ok.</p>');}
if(TargetNS.AllScripts.length===0){$('#FredJSLintScripts').append('<p>No scripts found!</p>').css('height','15px');}}
TargetNS.CommonOptions={browser:true,white:true,indent:4,devel:true,onevar:true,undef:true,nomen:true,eqeqeq:true,plusplus:false,bitwise:true,strict:true,immed:true,predef:['Core','isJQueryObject','$','jQuery','CKEDITOR','window','document','printStackTrace']};TargetNS.RemoteOptions=$.extend(TargetNS.CommonOptions,{});TargetNS.InlineOptions=$.extend(TargetNS.CommonOptions,{white:false});TargetNS.AllScripts=TargetNS.AllScripts||[];TargetNS.Waiting=0;TargetNS.Started=0;TargetNS.Sources={};TargetNS.Init=function(){if(typeof jQuery==='undefined'||!jQuery){window.alert('Fred JSLint module needs jQuery loaded');document.getElementById('FredJSLintScripts').style.height='15px';}
else{$(document).ready(function(){Core.Fred.JSLint.GetScripts();});}};TargetNS.GetScripts=function(){$(document).ready(function(){var Scripts,Source;$('script').each(function(){Scripts=$(this).text();if($(this).is('[src]')){Source=$(this).attr('src');}
else{Source='inline';}
if(Source==='inline'){TargetNS.AllScripts.push({Src:Source,Script:Scripts});}
else{if(!Source.match(/thirdparty/)&&!Source.match(/chrome:\/\//)&&!TargetNS.Sources[Source]){TargetNS.Waiting++;TargetNS.Sources[Source]=1;$.get(Source,{},function(data){TargetNS.AllScripts.push({Src:this.url,Script:data});TargetNS.Waiting--;},'text');}}});setTimeout(function(){Core.Fred.JSLint.CheckForStart();},250);});};TargetNS.CheckForStart=function(){if(TargetNS.Waiting<=0&&TargetNS.Started===0){startJSLint();}
else{if(TargetNS.Started===0){setTimeout(function(){Core.Fred.JSLint.CheckForStart();},250);}}};return TargetNS;}(Core.Fred.JSLint||{}));

"use strict";var Core=Core||{};Core.Fred=Core.Fred||{};Core.Fred.HTMLCheck=(function(TargetNS){var CheckFunctions=[],ErrorsFound=false;function htmlEncode(Text){return Text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function escapeSelector(Selector){return Selector.replace(/(#|:|\.|\[|\])/g,'\\$1');}
function outputError($Element,ErrorType,ErrorDescription,Hint){var $Container,Code,Message;$('#FredHTMLCheckRunning').remove();ErrorsFound=true;$Container=$('<div></div>');$Container.append($Element.clone());Code=$Container.html();if(Code.length>160){Code=Code.substring(0,160)+'...';}
Message=$('<p class="Small"></p>');Message.append('<span class="Error">Error:</span> <strong>'+ErrorDescription+'</strong><div>'+Hint+'</div><div><code>'+htmlEncode(Code)+'</code></div>');$('#FredHTMLCheckResults').append(Message);}
function CheckAccessibility(){$('input:text:visible, input:password:visible, input:checkbox:visible, input:radio:visible, select:visible, textarea:visible').each(function(){var $this=$(this),$Label=$([]),Title;if($this.attr('placeholder')&&$this.attr('placeholder').length){return;}
if($this.attr('id')&&$this.attr('id').length){$Label=$('label[for='+escapeSelector($this.attr('id'))+']');}
if(!$Label.length){$Label=$this.parents('label');}
if($Label.length>1){outputError($this,'AccessibilityMultipleLabel','Input element with more than one assigned labels','Please make sure that only one label is present for this input element.');}
Title=$this.attr('title');if(Title&&Title.length){return;}
if(!$Label||!$Label.length){outputError($this,'AccessibilityMissingLabel','Input element without a describing label, placeholder or title attribute','Please add a placeholder or title attribute or a label element with a "speaking" description for this element.');}});$('a').each(function(){var $this=$(this);if($this.attr('name')&&!$this.attr('href')){return;}
$.each($this[0].attributes,function(){if(this.name==='title'&&!this.value.length){outputError($this,'AccessibilityInaccessibleLink','Link with title but without value','Please make sure that every link has a title attribute not empty.');}});if($this.text()&&$this.text().length){return;}
if($this.attr('title')&&$this.attr('title').length){return;}
outputError($this,'AccessibilityInaccessibleLink','Link without text or title','Please make sure that every link has either a text content or a title attribute that can be used by a screenreader to identify the link.');});}
CheckFunctions.push(CheckAccessibility);function CheckBadPractice(){var ObsoleteElement2Replacement,UsedIDs=[];$('input:button, input:submit, input:reset').each(function(){var $this=$(this);outputError($this,'BadPracticeInputButton','Old input with type button, submit or reset detected','Please replace this element with a <code>&lt;button&gt;</code> with the same type. Input fields must not be used for this purpose any more.');});ObsoleteElement2Replacement={b:'<code>&lt;strong&gt;</code>',i:'<code>&lt;em&gt;</code>',font:'<code>&lt;span&gt;</code> with a CSS class',nobr:'a proper substitute (depends on context)'};$('font, nobr').each(function(){var $this=$(this);outputError($this,'BadPracticeObsoleteElement','Obsolete element <code>&lt;'+this.tagName+'&gt;</code> used','Please replace it with: '+ObsoleteElement2Replacement[this.tagName.toLowerCase()]+'.');});$('div, span, ul, ol, li, a, h1, h2, h3, h4, h5, input, select').each(function(){var $this=$(this),ID=$this.attr('id')||'';if(ID){if($.inArray(ID,UsedIDs)>0){outputError($this,'BadPracticeMultipleIDUsage','ID used multiple times: '+ID,'Please make sure to use an ID only once!');return true;}
UsedIDs.push($(this).attr('id'));}});function obsoleteClassError(ClassName){return function(){var $this=$(this);outputError($this,'BadPracticeObsoleteClass','Obsolete class <code>"'+ClassName+'"</code> used','Please remove it and replace it with a proper substitute.');};}
$('.mainbody').each(obsoleteClassError('mainbody'));$('.contentkey').each(obsoleteClassError('contentkey'));$('.contentvalue').each(obsoleteClassError('contentvalue'));$('.searchactive').each(obsoleteClassError('searchactive'));$('.searchpassive').each(obsoleteClassError('searchpassive'));$("div").each(function(){var $this=$(this),$Container,Code,Events,Event;if($this.closest('.DevelFredContainer, #NavigationContainer').length){return;}
$Container=$('<div></div>');$Container.append($this.clone());$Container.find('iframe').removeAttr('onload');Code=$Container.html();Events=Code.match(/\s+on\w+=/ig);if(Events!==null){for(Event in Events){if(Events.hasOwnProperty(Event)){Events[Event]=Events[Event].toString().match(/on\w+/);}}
outputError($this,'BadPracticeEvent','Event <code>"'+Events+'"</code> used','Please remove it and replace it with a proper substitute.');}});}
CheckFunctions.push(CheckBadPractice);TargetNS.CheckForStart=function(){if(jQuery){$(document).ready(function(){Core.Fred.HTMLCheck.Run();});}
else{setTimeout(function(){Core.Fred.HTMLCheck.CheckForStart();},250);}};TargetNS.Run=function(){$.each(CheckFunctions,function(){this();});$('#FredHTMLCheckRunning').remove();if(!ErrorsFound){$('#FredHTMLCheckResults').html('<p class="FredJSLintSuccessful">All checks ok.</p>');}};return TargetNS;}(Core.Fred.HTMLCheck||{}));

"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Daemon=(function(TargetNS){TargetNS.Init=function(){$('.DaemonInfo').on('click',function(){Core.Agent.Daemon.OpenDaemonStartDialog();return false;});};function ShowWaitingDialog(){Core.UI.Dialog.ShowContentDialog('<div class="Spacing Center"><span class="AJAXLoader" title="'+Core.Language.Translate('Loading...')+'"></span></div>',Core.Language.Translate('Loading...'),'240px','Center',true);}
TargetNS.OpenDaemonStartDialog=function(){var Data={Action:'AgentDaemonInfo'};ShowWaitingDialog();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowContentDialog(HTML,Core.Language.Translate('Information about the OTRS Daemon'),'240px','Center',true);$('#DaemonFormCancel').on('click',function(){Core.UI.Dialog.CloseDialog($('#DaemonRunDialog'));});},'html');};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(Core.Agent.Daemon||{}));


(function(){function ka(a,e){CKEDITOR.tools.extend(this,e,{editor:a,id:"cke-"+CKEDITOR.tools.getUniqueId(),area:a._.notificationArea});e.type||(this.type="info");this.element=this._createElement();a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(this.element)}function la(a){var e=this;this.editor=a;this.notifications=[];this.element=this._createElement();this._uiBuffer=CKEDITOR.tools.eventsBuffer(10,this._layout,this);this._changeBuffer=CKEDITOR.tools.eventsBuffer(500,this._layout,this);a.on("destroy",function(){e._removeListeners();e.element.remove()})}window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var a=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,e={timestamp:"H5M8",version:"4.7.0",revision:"320013d",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:a},status:"unloaded",basePath:function(){var f=window.CKEDITOR_BASEPATH||"";if(!f)for(var c=document.getElementsByTagName("script"),e=0;e<c.length;e++){var k=c[e].src.match(a);if(k){f=k[1];break}}-1==f.indexOf(":/")&&"//"!=f.slice(0,2)&&(f=0===f.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+f:location.href.match(/^[^\?]*\/(?:)/)[0]+f);if(!f)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return f}(),getUrl:function(a){-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a);this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"\x26":"?")+"t\x3d"+this.timestamp);return a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),f()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),f())}catch(k){}}function f(){for(var k;k=c.shift();)k()}var c=[];return function(k){function d(){try{document.documentElement.doScroll("left")}catch(g){setTimeout(d,1);return}a()}c.push(k);"complete"===document.readyState&&setTimeout(a,1);if(1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a);window.attachEvent("onload",a);k=!1;try{k=!window.frameElement}catch(b){}document.documentElement.doScroll&&k&&d()}}}()},c=window.CKEDITOR_GETURL;if(c){var f=e.getUrl;e.getUrl=function(a){return c.call(e,a)||f.call(e,a)}}return e}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(a){var e=CKEDITOR.event.prototype,c;for(c in e)null==a[c]&&(a[c]=e[c])},CKEDITOR.event.prototype=function(){function a(a){var h=e(this);return h[a]||(h[a]=new c(a))}var e=function(a){a=a.getPrivate&&a.getPrivate()||a._||(a._={});return a.events||(a.events={})},c=function(a){this.name=a;this.listeners=[]};c.prototype={getListenerIndex:function(a){for(var c=0,e=this.listeners;c<e.length;c++)if(e[c].fn==a)return c;return-1}};return{define:function(c,h){var e=a.call(this,c);CKEDITOR.tools.extend(e,h,!0)},on:function(c,h,e,l,k){function d(g,d,k,a){g={name:c,sender:this,editor:g,data:d,listenerData:l,stop:k,cancel:a,removeListener:b};return!1===h.call(e,g)?!1:g.data}function b(){n.removeListener(c,h)}var g=a.call(this,c);if(0>g.getListenerIndex(h)){g=g.listeners;e||(e=this);isNaN(k)&&(k=10);var n=this;d.fn=h;d.priority=k;for(var q=g.length-1;0<=q;q--)if(g[q].priority<=k)return g.splice(q+1,0,d),{removeListener:b};g.unshift(d)}return{removeListener:b}},once:function(){var a=Array.prototype.slice.call(arguments),c=a[1];a[1]=function(a){a.removeListener();return c.apply(this,arguments)};return this.on.apply(this,a)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return a},fire:function(){var a=0,c=function(){a=1},m=0,l=function(){m=1};return function(k,d,b){var g=e(this)[k];k=a;var n=m;a=m=0;if(g){var q=g.listeners;if(q.length)for(var q=q.slice(0),p,w=0;w<q.length;w++){if(g.errorProof)try{p=q[w].call(this,b,d,c,l)}catch(u){}else p=q[w].call(this,b,d,c,l);!1===p?m=1:"undefined"!=typeof p&&(d=p);if(a||m)break}}d=m?!1:"undefined"==typeof d?!0:d;a=k;m=n;return d}}(),fireOnce:function(a,c,m){c=this.fire(a,c,m);delete e(this)[a];return c},removeListener:function(a,c){var m=e(this)[a];if(m){var l=m.getListenerIndex(c);0<=l&&m.listeners.splice(l,1)}},removeAllListeners:function(){var a=e(this),c;for(c in a)delete a[c]},hasListeners:function(a){return(a=e(this)[a])&&0<a.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(a,e){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fire.call(this,a,e,this)},CKEDITOR.editor.prototype.fireOnce=function(a,e){a in{instanceReady:1,loaded:1}&&(this[a]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,a,e,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),e=a.match(/edge[ \/](\d+.?\d*)/),c=-1<a.indexOf("trident/"),c=!(!e&&!c),c={ie:c,edge:!!e,webkit:!c&&-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<a.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(a),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,c=window.location.hostname;return a!=c&&a!="["+c+"]"},secure:"https:"==location.protocol};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.ie;c.webkit&&(-1<a.indexOf("chrome")?c.chrome=!0:c.safari=!0);var f=0;c.ie&&(f=e?parseFloat(e[1]):c.quirks||!document.documentMode?parseFloat(a.match(/msie (\d+)/)[1]):document.documentMode,c.ie9Compat=9==f,c.ie8Compat=8==f,c.ie7Compat=7==f,c.ie6Compat=7>f||c.quirks);c.gecko&&(e=a.match(/rv:([\d\.]+)/))&&(e=e[1].split("."),f=1E4*e[0]+100*(e[1]||0)+1*(e[2]||0));c.air&&(f=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));c.webkit&&(f=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]));c.version=f;c.isCompatible=!(c.ie&&7>f)&&!(c.gecko&&4E4>f)&&!(c.webkit&&534>f);c.hidpi=2<=window.devicePixelRatio;c.needsBrFiller=c.gecko||c.webkit||c.ie&&10<f;c.needsNbspFiller=c.ie&&11>f;c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.webkit?"webkit":"unknown");c.quirks&&(c.cssClass+=" cke_browser_quirks");c.ie&&(c.cssClass+=" cke_browser_ie"+(c.quirks?"6 cke_browser_iequirks":c.version));c.air&&(c.cssClass+=" cke_browser_air");c.iOS&&(c.cssClass+=" cke_browser_ios");c.hidpi&&(c.cssClass+=" cke_hidpi");return c}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var a=document.createElement("script");a.type="text/javascript";a.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(a)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(a){(this._.pending||(this._.pending=[])).push(a)};(function(){CKEDITOR.domReady(function(){var a=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;a&&(CKEDITOR.status="basic_ready",a&&a._load?a():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1E3*e))})})();CKEDITOR.status="basic_loaded"}(),"use strict",CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:a,additionalData:e})},CKEDITOR.error=function(a,e){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:a,additionalData:e})},CKEDITOR.on("log",function(a){if(window.console&&window.console.log){var e=console[a.data.type]?a.data.type:"log",c=a.data.errorCode;if(a=a.data.additionalData)console[e]("[CKEDITOR] Error code: "+c+".",a);else console[e]("[CKEDITOR] Error code: "+c+".");console[e]("[CKEDITOR] For more information about this error go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+
c)}},null,null,999),CKEDITOR.dom={},function(){var a=[],e=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",c=/&/g,f=/>/g,h=/</g,m=/"/g,l=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,k={lt:"\x3c",gt:"\x3e",amp:"\x26",quot:'"',nbsp:"",shy:""},d=function(b,g){return"#"==g[0]?String.fromCharCode(parseInt(g.slice(1),10)):k[g]};CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(b,g){if(!b&&!g)return!0;if(!b||!g||b.length!=g.length)return!1;for(var a=0;a<b.length;a++)if(b[a]!=g[a])return!1;return!0},getIndex:function(b,g){for(var a=0;a<b.length;++a)if(g(b[a]))return a;return-1},clone:function(b){var g;if(b&&b instanceof Array){g=[];for(var a=0;a<b.length;a++)g[a]=CKEDITOR.tools.clone(b[a]);return g}if(null===b||"object"!=typeof b||b instanceof String||b instanceof Number||b instanceof Boolean||b instanceof Date||b instanceof RegExp||b.nodeType||b.window===b)return b;g=new b.constructor;for(a in b)g[a]=CKEDITOR.tools.clone(b[a]);return g},capitalize:function(b,g){return b.charAt(0).toUpperCase()+(g?b.slice(1):b.slice(1).toLowerCase())},extend:function(b){var g=arguments.length,a,d;"boolean"==typeof(a=arguments[g-1])?g--:"boolean"==typeof(a=arguments[g-2])&&(d=arguments[g-1],g-=2);for(var k=1;k<g;k++){var c=arguments[k],f;for(f in c)if(!0===a||null==b[f])if(!d||f in d)b[f]=c[f]}return b},prototypedCopy:function(b){var g=function(){};g.prototype=b;return new g},copy:function(b){var g={},a;for(a in b)g[a]=b[a];return g},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},isEmpty:function(b){for(var g in b)if(b.hasOwnProperty(g))return!1;return!0},cssVendorPrefix:function(b,g,a){if(a)return e+b+":"+g+";"+b+":"+g;a={};a[b]=g;a[e+b]=g;return a},cssStyleToDomStyle:function(){var b=document.createElement("div").style,g="undefined"!=typeof b.cssFloat?"cssFloat":"undefined"!=typeof b.styleFloat?"styleFloat":"float";return function(b){return"float"==b?g:b.replace(/-./g,function(g){return g.substr(1).toUpperCase()})}}(),buildStyleHtml:function(b){b=[].concat(b);for(var g,a=[],d=0;d<b.length;d++)if(g=b[d])/@import|[{}]/.test(g)?a.push("\x3cstyle\x3e"+g+"\x3c/style\x3e"):a.push('\x3clink type\x3d"text/css" rel\x3dstylesheet href\x3d"'+g+'"\x3e');return a.join("")},htmlEncode:function(b){return void 0===b||null===b?"":String(b).replace(c,"\x26amp;").replace(f,"\x26gt;").replace(h,"\x26lt;")},htmlDecode:function(b){return b.replace(l,d)},htmlEncodeAttr:function(b){return CKEDITOR.tools.htmlEncode(b).replace(m,"\x26quot;")},htmlDecodeAttr:function(b){return CKEDITOR.tools.htmlDecode(b)},transformPlainTextToHtml:function(b,g){var a=g==CKEDITOR.ENTER_BR,d=this.htmlEncode(b.replace(/\r\n/g,"\n")),d=d.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;"),k=g==CKEDITOR.ENTER_P?"p":"div";if(!a){var c=/\n{2}/g;if(c.test(d))var f="\x3c"+k+"\x3e",h="\x3c/"+k+"\x3e",d=f+d.replace(c,function(){return h+f})+h}d=d.replace(/\n/g,"\x3cbr\x3e");a||(d=d.replace(new RegExp("\x3cbr\x3e(?\x3d\x3c/"+k+"\x3e)"),function(g){return CKEDITOR.tools.repeat(g,2)}));d=d.replace(/^ | $/g,"\x26nbsp;");return d=d.replace(/(>|\s) /g,function(g,b){return b+"\x26nbsp;"}).replace(/ (?=<)/g,"\x26nbsp;")},getNextNumber:function(){var b=0;return function(){return++b}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var b="e",g=0;8>g;g++)b+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return b},override:function(b,g){var a=g(b);a.prototype=b.prototype;return a},setTimeout:function(b,g,a,d,k){k||(k=window);a||(a=k);return k.setTimeout(function(){d?b.apply(a,[].concat(d)):b.apply(a)},g||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(g){return g.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(g){return g.replace(b,"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(g){return g.replace(b,"")}}(),indexOf:function(b,g){if("function"==typeof g)for(var a=0,d=b.length;a<d;a++){if(g(b[a]))return a}else{if(b.indexOf)return b.indexOf(g);a=0;for(d=b.length;a<d;a++)if(b[a]===g)return a}return-1},search:function(b,g){var a=CKEDITOR.tools.indexOf(b,g);return 0<=a?b[a]:null},bind:function(b,g){return function(){return b.apply(g,arguments)}},createClass:function(b){var g=b.$,a=b.base,d=b.privates||b._,k=b.proto;b=b.statics;!g&&(g=function(){a&&this.base.apply(this,arguments)});if(d)var c=g,g=function(){var g=this._||(this._={}),b;for(b in d){var a=d[b];g[b]="function"==typeof a?CKEDITOR.tools.bind(a,this):a}c.apply(this,arguments)};a&&(g.prototype=this.prototypedCopy(a.prototype),g.prototype.constructor=g,g.base=a,g.baseProto=a.prototype,g.prototype.base=function(){this.base=a.prototype.base;a.apply(this,arguments);this.base=arguments.callee});k&&this.extend(g.prototype,k,!0);b&&this.extend(g,b,!0);return g},addFunction:function(b,g){return a.push(function(){return b.apply(g||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var g=a[b];return g&&g.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var b=/^-?\d+\.?\d*px$/,g;return function(a){g=CKEDITOR.tools.trim(a+"")+"px";return b.test(g)?g:a||""}}(),convertToPx:function(){var b;return function(g){b||(b=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"\x3e\x3c/div\x3e',CKEDITOR.document),CKEDITOR.document.getBody().append(b));return/%$/.test(g)?g:(b.setStyle("width",g),b.$.clientWidth)}}(),repeat:function(b,g){return Array(g+1).join(b)},tryThese:function(){for(var b,g=0,a=arguments.length;g<a;g++){var d=arguments[g];try{b=d();break}catch(k){}}return b},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(b){return function(){var g=arguments,a=this;window.setTimeout(function(){b.apply(a,g)},0)}},normalizeCssText:function(b,g){var a=[],d,k=CKEDITOR.tools.parseCssText(b,!0,g);for(d in k)a.push(d+":"+k[d]);a.sort();return a.length?a.join(";")+";":""},convertRgbToHex:function(b){return b.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(g,b,a,d){g=[b,a,d];for(b=0;3>b;b++)g[b]=("0"+parseInt(g[b],10).toString(16)).slice(-2);return"#"+g.join("")})},normalizeHex:function(b){return b.replace(/#(([0-9a-f]{3}){1,2})($|;|\s+)/gi,function(g,b,a,d){g=b.toLowerCase();3==g.length&&(g=g.split(""),g=[g[0],g[0],g[1],g[1],g[2],g[2]].join(""));return"#"+g+d})},parseCssText:function(b,g,a){var d={};a&&(b=(new CKEDITOR.dom.element("span")).setAttribute("style",b).getAttribute("style")||"");b&&(b=CKEDITOR.tools.normalizeHex(CKEDITOR.tools.convertRgbToHex(b)));if(!b||";"==b)return d;b.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(b,a,k){g&&(a=a.toLowerCase(),"font-family"==a&&(k=k.replace(/\s*,\s*/g,",")),k=CKEDITOR.tools.trim(k));d[a]=k});return d},writeCssText:function(b,g){var a,d=[];for(a in b)d.push(a+":"+b[a]);g&&d.sort();return d.join("; ")},objectCompare:function(b,g,a){var d;if(!b&&!g)return!0;if(!b||!g)return!1;for(d in b)if(b[d]!=g[d])return!1;if(!a)for(d in g)if(b[d]!=g[d])return!1;return!0},objectKeys:function(b){var g=[],a;for(a in b)g.push(a);return g},convertArrayToObject:function(b,g){var a={};1==arguments.length&&(g=!0);for(var d=0,k=b.length;d<k;++d)a[b[d]]=g;return a},fixDomain:function(){for(var b;;)try{b=window.parent.document.domain;break}catch(g){b=b?b.replace(/.+?(?:\.|$)/,""):document.domain;if(!b)break;document.domain=b}return!!b},eventsBuffer:function(b,g,a){function d(){c=(new Date).getTime();k=!1;a?g.call(a):g()}var k,c=0;return{input:function(){if(!k){var g=(new Date).getTime()-c;g<b?k=setTimeout(d,b-g):d()}},reset:function(){k&&clearTimeout(k);k=c=0}}},enableHtml5Elements:function(b,g){for(var a="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),d=a.length,k;d--;)k=b.createElement(a[d]),g&&b.appendChild(k)},checkIfAnyArrayItemMatches:function(b,g){for(var a=0,d=b.length;a<d;++a)if(b[a].match(g))return!0;return!1},checkIfAnyObjectPropertyMatches:function(b,g){for(var a in b)if(a.match(g))return!0;return!1},keystrokeToString:function(b,g){var a=g&16711680,d=g&65535,k=CKEDITOR.env.mac,c=[],f=[];a&CKEDITOR.CTRL&&(c.push(k?"":b[17]),f.push(k?b[224]:b[17]));a&CKEDITOR.ALT&&(c.push(k?"":b[18]),f.push(b[18]));a&CKEDITOR.SHIFT&&(c.push(k?"":b[16]),f.push(b[16]));d&&(b[d]?(c.push(b[d]),f.push(b[d])):(c.push(String.fromCharCode(d)),f.push(String.fromCharCode(d))));return{display:c.join("+"),aria:f.join("+")}},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw\x3d\x3d",getCookie:function(b){b=b.toLowerCase();for(var g=document.cookie.split(";"),a,d,k=0;k<g.length;k++)if(a=g[k].split("\x3d"),d=decodeURIComponent(CKEDITOR.tools.trim(a[0]).toLowerCase()),d===b)return decodeURIComponent(1<a.length?a[1]:"");return null},setCookie:function(b,g){document.cookie=encodeURIComponent(b)+"\x3d"+encodeURIComponent(g)+";path\x3d/"},getCsrfToken:function(){var b=CKEDITOR.tools.getCookie("ckCsrfToken");if(!b||40!=b.length){var b=[],g="";if(window.crypto&&window.crypto.getRandomValues)b=new Uint8Array(40),window.crypto.getRandomValues(b);else for(var a=0;40>a;a++)b.push(Math.floor(256*Math.random()));for(a=0;a<b.length;a++)var d="abcdefghijklmnopqrstuvwxyz0123456789".charAt(b[a]%36),g=g+(.5<Math.random()?d.toUpperCase():d);b=g;CKEDITOR.tools.setCookie("ckCsrfToken",b)}return b},escapeCss:function(b){return b?window.CSS&&CSS.escape?CSS.escape(b):isNaN(parseInt(b.charAt(0),10))?b:"\\3"+b.charAt(0)+" "+b.substring(1,b.length):""},style:{parse:{_colors:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},_rgbaRegExp:/rgba?\(\s*\d+%?\s*,\s*\d+%?\s*,\s*\d+%?\s*(?:,\s*[0-9.]+\s*)?\)/gi,_hslaRegExp:/hsla?\(\s*[0-9.]+\s*,\s*\d+%\s*,\s*\d+%\s*(?:,\s*[0-9.]+\s*)?\)/gi,background:function(b){var g={},a=this._findColor(b);a.length&&(g.color=a[0],CKEDITOR.tools.array.forEach(a,function(g){b=b.replace(g,"")}));if(b=CKEDITOR.tools.trim(b))g.unprocessed=b;return g},margin:function(b){function g(g){a.top=d[g[0]];a.right=d[g[1]];a.bottom=d[g[2]];a.left=d[g[3]]}var a={},d=b.match(/(?:\-?[\.\d]+(?:%|\w*)|auto|inherit|initial|unset)/g)||["0px"];switch(d.length){case 1:g([0,0,0,0]);break;case 2:g([0,1,0,1]);break;case 3:g([0,1,2,1]);break;case 4:g([0,1,2,3])}return a},_findColor:function(b){var g=[],a=CKEDITOR.tools.array,g=g.concat(b.match(this._rgbaRegExp)||[]),g=g.concat(b.match(this._hslaRegExp)||[]);return g=g.concat(a.filter(b.split(/\s+/),function(g){return g.match(/^\#[a-f0-9]{3}(?:[a-f0-9]{3})?$/gi)?!0:g.toLowerCase()in CKEDITOR.tools.style.parse._colors}))}}},array:{filter:function(b,g,a){var d=[];this.forEach(b,function(k,c){g.call(a,k,c,b)&&d.push(k)});return d},forEach:function(b,g,a){var d=b.length,k;for(k=0;k<d;k++)g.call(a,b[k],k,b)},map:function(b,g,a){for(var d=[],k=0;k<b.length;k++)d.push(g.call(a,b[k],k,b));return d},reduce:function(b,g,a,d){for(var k=0;k<b.length;k++)a=g.call(d,a,b[k],k,b);return a}}};CKEDITOR.tools.array.indexOf=CKEDITOR.tools.indexOf;CKEDITOR.tools.array.isArray=CKEDITOR.tools.isArray}(),CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,e=function(b,g){for(var a=CKEDITOR.tools.clone(b),d=1;d<arguments.length;d++){g=arguments[d];for(var k in g)delete a[k]}return a},c={},f={},h={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},m={command:1,link:1,meta:1,noscript:1,script:1,style:1},l={},k={"#":1},d={center:1,dir:1,noframes:1};a(c,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},k,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});a(f,h,c,d);e={a:e(c,{a:1,button:1}),abbr:c,address:f,area:l,article:f,aside:f,audio:a({source:1,track:1},f),b:c,base:l,bdi:c,bdo:c,blockquote:f,body:f,br:l,button:e(c,{a:1,button:1}),canvas:c,caption:f,cite:c,code:c,col:l,colgroup:{col:1},command:l,datalist:a({option:1},c),dd:f,del:c,details:a({summary:1},f),dfn:c,div:f,dl:{dt:1,dd:1},dt:f,em:c,embed:l,fieldset:a({legend:1},f),figcaption:f,figure:a({figcaption:1},f),footer:f,form:f,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:a({title:1,base:1},m),header:f,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:l,html:a({head:1,body:1},f,m),i:c,iframe:k,img:l,input:l,ins:c,kbd:c,keygen:l,label:c,legend:c,li:f,link:l,main:f,map:f,mark:c,menu:a({li:1},f),meta:l,meter:e(c,{meter:1}),nav:f,noscript:a({link:1,meta:1,style:1},c),object:a({param:1},c),ol:{li:1},optgroup:{option:1},option:k,output:c,p:c,param:l,pre:c,progress:e(c,{progress:1}),q:c,rp:c,rt:c,ruby:a({rp:1,rt:1},c),s:c,samp:c,script:k,section:f,select:{optgroup:1,option:1},small:c,source:l,span:c,strong:c,style:k,sub:c,summary:a({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},c),sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:f,textarea:k,tfoot:{tr:1},th:f,thead:{tr:1},time:e(c,{time:1}),title:k,tr:{th:1,td:1},track:l,u:c,ul:{li:1},"var":c,video:a({source:1,track:1},f),wbr:l,acronym:c,applet:a({param:1},f),basefont:l,big:c,center:f,dialog:l,dir:{li:1},font:c,isindex:l,noframes:f,strike:c,tt:c};a(e,{$block:a({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},h,d),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:a({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return e}(),CKEDITOR.dom.event=function(a){this.$=a},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;this.$.shiftKey&&(a+=CKEDITOR.SHIFT);this.$.altKey&&(a+=CKEDITOR.ALT);return a},preventDefault:function(a){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var a=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(a.documentElement.scrollLeft||a.body.scrollLeft),y:this.$.pageY||this.$.clientY+(a.documentElement.scrollTop||a.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(a){a&&(this.$=a)},CKEDITOR.dom.domObject.prototype=function(){var a=function(a,c){return function(f){"undefined"!=typeof CKEDITOR&&a.fire(c,new CKEDITOR.dom.event(f))}};return{getPrivate:function(){var a;(a=this.getCustomData("_"))||this.setCustomData("_",a={});return a},on:function(e){var c=this.getCustomData("_cke_nativeListeners");c||(c={},this.setCustomData("_cke_nativeListeners",c));c[e]||(c=c[e]=a(this,e),this.$.addEventListener?this.$.addEventListener(e,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,c));return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(a){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(a)){var c=this.getCustomData("_cke_nativeListeners"),f=c&&c[a];f&&(this.$.removeEventListener?this.$.removeEventListener(a,f,!1):this.$.detachEvent&&this.$.detachEvent("on"+a,f),delete c[a])}},removeAllListeners:function(){var a=this.getCustomData("_cke_nativeListeners"),c;for(c in a){var f=a[c];this.$.detachEvent?this.$.detachEvent("on"+c,f):this.$.removeEventListener&&this.$.removeEventListener(c,f,!1);delete a[c]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(a){var e={};CKEDITOR.on("reset",function(){e={}});a.equals=function(a){try{return a&&a.$===this.$}catch(f){return!1}};a.setCustomData=function(a,f){var h=this.getUniqueId();(e[h]||(e[h]={}))[a]=f;return this};a.getCustomData=function(a){var f=this.$["data-cke-expando"];return(f=f&&e[f])&&a in f?f[a]:null};a.removeCustomData=function(a){var f=this.$["data-cke-expando"],f=f&&e[f],h,m;f&&(h=f[a],m=a in f,delete f[a]);return m?h:null};a.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete e[a]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(a){return a?new CKEDITOR.dom[a.nodeType==CKEDITOR.NODE_DOCUMENT?"document":a.nodeType==CKEDITOR.NODE_ELEMENT?"element":a.nodeType==CKEDITOR.NODE_TEXT?"text":a.nodeType==CKEDITOR.NODE_COMMENT?"comment":a.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](a):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,e){a.append(this,e);return a},clone:function(a,e){function c(f){f["data-cke-expando"]&&(f["data-cke-expando"]=!1);if(f.nodeType==CKEDITOR.NODE_ELEMENT||f.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)if(e||f.nodeType!=CKEDITOR.NODE_ELEMENT||f.removeAttribute("id",!1),a){f=f.childNodes;for(var h=0;h<f.length;h++)c(f[h])}}function f(c){if(c.type==CKEDITOR.NODE_ELEMENT||c.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(c.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var h=c.getName();":"==h[0]&&c.renameNode(h.substring(1))}if(a)for(h=0;h<c.getChildCount();h++)f(c.getChild(h))}}var h=this.$.cloneNode(a);c(h);h=new CKEDITOR.dom.node(h);CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&f(h);return h},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var e=[],c=this.getDocument().$.documentElement,f=this.$;f&&f!=c;){var h=f.parentNode;h&&e.unshift(this.getIndex.call({$:f},a));f=h}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(a){function e(a,k){var d=k?a.nextSibling:a.previousSibling;return d&&d.nodeType==CKEDITOR.NODE_TEXT?c(d)?e(d,k):d:null}function c(a){return!a.nodeValue||a.nodeValue==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE}var f=this.$,h=-1,m;if(!this.$.parentNode||a&&f.nodeType==CKEDITOR.NODE_TEXT&&c(f)&&!e(f)&&!e(f,!0))return-1;do a&&f!=this.$&&f.nodeType==CKEDITOR.NODE_TEXT&&(m||c(f))||(h++,m=f.nodeType==CKEDITOR.NODE_TEXT);while(f=f.previousSibling);return h},getNextSourceNode:function(a,e,c){if(c&&!c.call){var f=c;c=function(a){return!a.equals(f)}}a=!a&&this.getFirst&&this.getFirst();var h;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null;a=this.getNext()}for(;!a&&(h=(h||this).getParent());){if(c&&!1===c(h,!0))return null;a=h.getNext()}return!a||c&&!1===c(a)?null:e&&e!=a.type?a.getNextSourceNode(!1,e,c):a},getPreviousSourceNode:function(a,e,c){if(c&&!c.call){var f=c;c=function(a){return!a.equals(f)}}a=!a&&this.getLast&&this.getLast();var h;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&!1===c(this,!0))return null;a=this.getPrevious()}for(;!a&&(h=(h||this).getParent());){if(c&&!1===c(h,!0))return null;a=h.getPrevious()}return!a||c&&!1===c(a)?null:e&&a.type!=e?a.getPreviousSourceNode(!1,e,c):a},getPrevious:function(a){var e=this.$,c;do c=(e=e.previousSibling)&&10!=e.nodeType&&new CKEDITOR.dom.node(e);while(c&&a&&!a(c));return c},getNext:function(a){var e=this.$,c;do c=(e=e.nextSibling)&&new CKEDITOR.dom.node(e);while(c&&a&&!a(c));return c},getParent:function(a){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||a&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(a){var e=this,c=[];do c[a?"push":"unshift"](e);while(e=e.getParent());return c},getCommonAncestor:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;var e=this.contains?this:this.getParent();do if(e.contains(a))return e;while(e=e.getParent());return null},getPosition:function(a){var e=this.$,c=a.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(c);if(e==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+
CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return 0>e.sourceIndex||0>c.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}e=this.getAddress();a=a.getAddress();for(var c=Math.min(e.length,a.length),f=0;f<c;f++)if(e[f]!=a[f])return e[f]<a[f]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return e.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,e){var c=this.$,f,h;e||(c=c.parentNode);"function"==typeof a?(h=!0,f=a):(h=!1,f=function(c){c="string"==typeof c.nodeName?c.nodeName.toLowerCase():"";return"string"==typeof a?c==a:c in a});for(;c;){if(f(h?new CKEDITOR.dom.node(c):c))return new CKEDITOR.dom.node(c);try{c=c.parentNode}catch(m){c=null}}return null},hasAscendant:function(a,e){var c=this.$;e||(c=c.parentNode);for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,e){a.append(this.remove(),e)},remove:function(a){var e=this.$,c=e.parentNode;if(c){if(a)for(;a=e.firstChild;)c.insertBefore(e.removeChild(a),e);c.removeChild(e)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(e)e.length<c&&(a.split(c-e.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(a.getText()),c=a.getLength();if(e)e.length<c&&(a.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)},isReadOnly:function(a){var e=this;this.type!=CKEDITOR.NODE_ELEMENT&&(e=this.getParent());CKEDITOR.env.edge&&e&&e.is("textarea","input")&&(a=!0);if(!a&&e&&"undefined"!=typeof e.$.isContentEditable)return!(e.$.isContentEditable||e.data("cke-editable"));for(;e;){if(e.data("cke-editable"))return!1;if(e.hasAttribute("contenteditable"))return"false"==e.getAttribute("contenteditable");e=e.getParent()}return!0}}),CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var a=this.$.document,e="CSS1Compat"==a.compatMode;return{width:(e?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(e?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}},getFrame:function(){var a=this.$.frameElement;return a?new CKEDITOR.dom.element.get(a):null}}),CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(e)}},appendStyleText:function(a){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=a}else{var c=new CKEDITOR.dom.element("style",this);c.append(new CKEDITOR.dom.text(a,this));this.getHead().append(c)}return e||c.$.sheet},createElement:function(a,e){var c=new CKEDITOR.dom.element(a,this);e&&(e.attributes&&c.setAttributes(e.attributes),e.styles&&c.setStyles(e.styles));return c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getActive:function(){var a;try{a=this.$.activeElement}catch(e){return null}return new CKEDITOR.dom.element(a)},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,e){for(var c=this.$.documentElement,f=0;c&&f<a.length;f++){var h=a[f];if(e)for(var m=-1,l=0;l<c.childNodes.length;l++){var k=c.childNodes[l];if(!0!==e||3!=k.nodeType||!k.previousSibling||3!=k.previousSibling.nodeType)if(m++,m==h){c=k;break}}else c=c.childNodes[h]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,e){CKEDITOR.env.ie&&8>=document.documentMode||!e||(a=e+":"+
a);return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.ie&&(a=a.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$\x26\n\x3cscript data-cke-temp\x3d"1"\x3e('+CKEDITOR.tools.fixDomain+")();\x3c/script\x3e"));this.$.write(a);this.$.close()},find:function(a){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(a))},findOne:function(a){return(a=this.$.querySelector(a))?new CKEDITOR.dom.element(a):null},_getHtml5ShivFrag:function(){var a=this.getCustomData("html5ShivFrag");a||(a=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(a,!0),this.setCustomData("html5ShivFrag",a));return a}}),CKEDITOR.dom.nodeList=function(a){this.$=a},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return 0>a||a>=this.$.length?null:(a=this.$[a])?new CKEDITOR.dom.node(a):null}},CKEDITOR.dom.element=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createElement(a));CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.element.get=function(a){return(a="string"==typeof a?document.getElementById(a)||document.getElementsByName(a)[0]:a)&&(a.$?a:new CKEDITOR.dom.element(a))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(a,e){var c=new CKEDITOR.dom.element("div",e);c.setHtml(a);return c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(a,e,c,f){var h=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),m=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[h]=e;m[c]=1;return e.setCustomData(c,f)},CKEDITOR.dom.element.clearAllMarkers=function(a){for(var e in a)CKEDITOR.dom.element.clearMarkers(a,a[e],1)},CKEDITOR.dom.element.clearMarkers=function(a,e,c){var f=e.getCustomData("list_marker_names"),h=e.getCustomData("list_marker_id"),m;for(m in f)e.removeCustomData(m);e.removeCustomData("list_marker_names");c&&(e.removeCustomData("list_marker_id"),delete a[h])},function(){function a(a,d){return-1<(" "+a+" ").replace(m," ").indexOf(" "+d+" ")}function e(a){var d=!0;a.$.id||(a.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),d=!1);return function(){d||a.removeAttribute("id")}}function c(a,d){var b=CKEDITOR.tools.escapeCss(a.$.id);return"#"+b+" "+d.split(/,\s*/).join(", #"+b+" ")}function f(a){for(var d=0,b=0,g=l[a].length;b<g;b++)d+=parseFloat(this.getComputedStyle(l[a][b])||0,10)||0;return d}var h=document.createElement("_").classList,h="undefined"!==typeof h&&null!==String(h.add).match(/\[Native code\]/gi),m=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:h?function(a){this.$.classList.add(a);return this}:function(k){var d=this.$.className;d&&(a(d,k)||(d+=" "+k));this.$.className=d||k;return this},removeClass:h?function(a){var d=this.$;d.classList.remove(a);d.className||d.removeAttribute("class");return this}:function(k){var d=this.getAttribute("class");d&&a(d,k)&&((d=d.replace(new RegExp("(?:^|\\s+)"+k+"(?\x3d\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",d):this.removeAttribute("class"));return this},hasClass:function(k){return a(this.$.className,k)},append:function(a,d){"string"==typeof a&&(a=this.getDocument().createElement(a));d?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var d=new CKEDITOR.dom.element("div",this.getDocument());d.setHtml(a);d.moveChildren(this)}else this.setHtml(a)},appendText:function(a){null!=this.$.text&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=a:this.append(new CKEDITOR.dom.text(a))},appendBogus:function(a){if(a||CKEDITOR.env.needsBrFiller){for(a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();a&&a.is&&a.is("br")||(a=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&a.setAttribute("type","_moz"),this.append(a))}},breakParent:function(a,d){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this);b.setEndAfter(a);var g=b.extractContents(!1,d||!1),c;b.insertNode(this.remove());if(CKEDITOR.env.ie&&!CKEDITOR.env.edge){for(b=new CKEDITOR.dom.element("div");c=g.getFirst();)c.$.style.backgroundColor&&(c.$.style.backgroundColor=c.$.style.backgroundColor),b.append(c);b.insertAfter(this);b.remove(!0)}else g.insertAfterNode(this)},contains:document.compareDocumentPosition?function(a){return!!(this.$.compareDocumentPosition(a.$)&16)}:function(a){var d=this.$;return a.type!=CKEDITOR.NODE_ELEMENT?d.contains(a.getParent().$):d!=a.$&&d.contains(a.$)},focus:function(){function a(){try{this.$.focus()}catch(d){}}return function(d){d?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},getClientRect:function(){var a=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!a.width&&(a.width=a.right-a.left);!a.height&&(a.height=a.bottom-a.top);return a},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(a){try{var d=this.$;if(this.getParent())return d.innerHTML=a;var b=this.getDocument()._getHtml5ShivFrag();b.appendChild(d);d.innerHTML=a;b.removeChild(d);return a}catch(g){this.$.innerHTML="";d=new CKEDITOR.dom.element("body",this.getDocument());d.$.innerHTML=a;for(d=d.getChildren();d.count();)this.append(d.getItem(0));return a}}:function(a){return this.$.innerHTML=a},setText:function(){var a=document.createElement("p");a.innerHTML="x";a=a.textContent;return function(d){this.$[a?"textContent":"innerText"]=d}}(),getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){switch(a){case"class":a="className";break;case"http-equiv":a="httpEquiv";break;case"name":return this.$.name;case"tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case"checked":return a=this.$.attributes.getNamedItem(a),(a.specified?a.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[a];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(a,2)}:a}(),getAttributes:function(a){var d={},b=this.$.attributes,g;a=CKEDITOR.tools.isArray(a)?a:[];for(g=0;g<b.length;g++)-1===CKEDITOR.tools.indexOf(a,b[g].name)&&(d[b[g].name]=b[g].value);return d},getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(a){var d=this.getWindow().$.getComputedStyle(this.$,null);return d?d.getPropertyValue(a):""}:function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var a=this.$.tabIndex;return 0!==a||CKEDITOR.dtd.$tabIndex[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)?a:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var d=this.$.scopeName;"HTML"!=d&&(a=d.toLowerCase()+":"+a)}this.getName=function(){return a};return this.getName()},getValue:function(){return this.$.value},getFirst:function(a){var d=this.$.firstChild;(d=d&&new CKEDITOR.dom.node(d))&&a&&!a(d)&&(d=d.getNext(a));return d},getLast:function(a){var d=this.$.lastChild;(d=d&&new CKEDITOR.dom.node(d))&&a&&!a(d)&&(d=d.getPrevious(a));return d},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();if("object"==typeof arguments[0])return!!arguments[0][a];for(var d=0;d<arguments.length;d++)if(arguments[d]==a)return!0;return!1},isEditable:function(a){var d=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[d]||CKEDITOR.dtd.$empty[d]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==a?(a=CKEDITOR.dtd[d]||CKEDITOR.dtd.span,!(!a||!a["#"])):!0},isIdentical:function(a){var d=this.clone(0,1);a=a.clone(0,1);d.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(d.$.isEqualNode)return d.$.style.cssText=CKEDITOR.tools.normalizeCssText(d.$.style.cssText),a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),d.$.isEqualNode(a.$);d=d.getOuterHtml();a=a.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var b=this.getParent();b.type==CKEDITOR.NODE_ELEMENT&&(b=b.clone(),b.setHtml(d),d=b.getHtml(),b.setHtml(a),a=b.getHtml())}return d==a},isVisible:function(){var a=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),d,b;a&&CKEDITOR.env.webkit&&(d=this.getWindow(),!d.equals(CKEDITOR.document.getWindow())&&(b=d.$.frameElement)&&(a=(new CKEDITOR.dom.element(b)).isVisible()));return!!a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var a=this.getChildren(),d=0,b=a.count();d<b;d++){var g=a.getItem(d);if(g.type!=CKEDITOR.NODE_ELEMENT||!g.data("cke-bookmark"))if(g.type==CKEDITOR.NODE_ELEMENT&&!g.isEmptyInlineRemoveable()||g.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(g.getText()))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var a=this.$.attributes,d=0;d<a.length;d++){var b=a[d];switch(b.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(b.specified)return!0}}return!1}:function(){var a=this.$.attributes,d=a.length,b={"data-cke-expando":1,_moz_dirty:1};return 0<d&&(2<d||!b[a[0].nodeName]||2==d&&!b[a[1].nodeName])},hasAttribute:function(){function a(d){var b=this.$.attributes.getNamedItem(d);if("input"==this.getName())switch(d){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return d=this.getAttribute("type"),"checkbox"==d||"radio"==d?"on"!=this.$.value:!!this.$.value}return b?b.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(d){return"name"==d?!!this.$.name:a.call(this,d)}:a:function(a){return!!this.$.attributes.getNamedItem(a)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(a,d){var b=this.$;a=a.$;if(b!=a){var g;if(d)for(;g=b.lastChild;)a.insertBefore(b.removeChild(g),a.firstChild);else for(;g=b.firstChild;)a.appendChild(b.removeChild(g))}},mergeSiblings:function(){function a(d,b,g){if(b&&b.type==CKEDITOR.NODE_ELEMENT){for(var c=[];b.data("cke-bookmark")||b.isEmptyInlineRemoveable();)if(c.push(b),b=g?b.getNext():b.getPrevious(),!b||b.type!=CKEDITOR.NODE_ELEMENT)return;if(d.isIdentical(b)){for(var k=g?d.getLast():d.getFirst();c.length;)c.shift().move(d,!g);b.moveChildren(d,!g);b.remove();k&&k.type==CKEDITOR.NODE_ELEMENT&&k.mergeSiblings()}}}return function(d){if(!1===d||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))a(this,this.getNext(),!0),a(this,this.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){this.$.setAttribute(a,b);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(d,b){"class"==d?this.$.className=b:"style"==d?this.$.style.cssText=b:"tabindex"==d?this.$.tabIndex=b:"checked"==d?this.$.checked=b:"contenteditable"==d?a.call(this,"contentEditable",b):a.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(d,b){if("src"==d&&b.match(/^http:\/\//))try{a.apply(this,arguments)}catch(g){}else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var d in a)this.setAttribute(d,a[d]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(a){"class"==a?a="className":"tabindex"==a?a="tabIndex":"contenteditable"==a&&(a="contentEditable");this.$.removeAttribute(a)}:a}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var d=0;d<a.length;d++)this.removeAttribute(a[d]);else for(d in a=a||this.getAttributes(),a)a.hasOwnProperty(d)&&this.removeAttribute(d)},removeStyle:function(a){var d=this.$.style;if(d.removeProperty||"border"!=a&&"margin"!=a&&"padding"!=a)d.removeProperty?d.removeProperty(a):d.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a)),this.$.style.cssText||this.removeAttribute("style");else{var b=["top","left","right","bottom"],g;"border"==a&&(g=["color","style","width"]);for(var d=[],c=0;c<b.length;c++)if(g)for(var f=0;f<g.length;f++)d.push([a,b[c],g[f]].join("-"));else d.push([a,b[c]].join("-"));for(a=0;a<d.length;a++)this.removeStyle(d[a])}},setStyle:function(a,d){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=d;return this},setStyles:function(a){for(var d in a)this.setStyle(d,a[d]);return this},setOpacity:function(a){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity\x3d"+a+")")):this.setStyle("opacity",a)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var a,d=this.getElementsByTag("*"),b=0,g=d.count();b<g;b++)a=d.getItem(b),a.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},getDocumentPosition:function(a){var d=0,b=0,g=this.getDocument(),c=g.getBody(),f="BackCompat"==g.$.compatMode;if(document.documentElement.getBoundingClientRect&&(CKEDITOR.env.ie?8!==CKEDITOR.env.version:1)){var h=this.$.getBoundingClientRect(),e=g.$.documentElement,l=e.clientTop||c.$.clientTop||0,t=e.clientLeft||c.$.clientLeft||0,m=!0;CKEDITOR.env.ie&&(m=g.getDocumentElement().contains(this),g=g.getBody().contains(this),m=f&&g||!f&&m);m&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(d=c.$.scrollLeft||e.scrollLeft,b=c.$.scrollTop||e.scrollTop):(b=f?c.$:e,d=b.scrollLeft,b=b.scrollTop),d=h.left+d-t,b=h.top+b-l)}else for(l=this,t=null;l&&"body"!=l.getName()&&"html"!=l.getName();){d+=l.$.offsetLeft-l.$.scrollLeft;b+=l.$.offsetTop-l.$.scrollTop;l.equals(this)||(d+=l.$.clientLeft||0,b+=l.$.clientTop||0);for(;t&&!t.equals(l);)d-=t.$.scrollLeft,b-=t.$.scrollTop,t=t.getParent();t=l;l=(h=l.$.offsetParent)?new CKEDITOR.dom.element(h):null}a&&(h=this.getWindow(),l=a.getWindow(),!h.equals(l)&&h.$.frameElement&&(a=(new CKEDITOR.dom.element(h.$.frameElement)).getDocumentPosition(a),d+=a.x,b+=a.y));document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||f||(d+=this.$.clientLeft?1:0,b+=this.$.clientTop?1:0);return{x:d,y:b}},scrollIntoView:function(a){var d=this.getParent();if(d){do if((d.$.clientWidth&&d.$.clientWidth<d.$.scrollWidth||d.$.clientHeight&&d.$.clientHeight<d.$.scrollHeight)&&!d.is("body")&&this.scrollIntoParent(d,a,1),d.is("html")){var b=d.getWindow();try{var g=b.$.frameElement;g&&(d=new CKEDITOR.dom.element(g))}catch(c){}}while(d=d.getParent())}},scrollIntoParent:function(a,d,b){var g,c,f,h;function e(g,b){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(g,b):(a.$.scrollLeft+=g,a.$.scrollTop+=b)}function l(a,g){var b={x:0,y:0};if(!a.is(m?"body":"html")){var d=a.$.getBoundingClientRect();b.x=d.left;b.y=d.top}d=a.getWindow();d.equals(g)||(d=l(CKEDITOR.dom.element.get(d.$.frameElement),g),b.x+=d.x,b.y+=d.y);return b}function t(a,g){return parseInt(a.getComputedStyle("margin-"+g)||0,10)||0}!a&&(a=this.getWindow());f=a.getDocument();var m="BackCompat"==f.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=m?f.getBody():f.getDocumentElement());CKEDITOR.env.webkit&&(f=this.getEditor(!1))&&(f._.previousScrollTop=null);f=a.getWindow();c=l(this,f);var x=l(a,f),A=this.$.offsetHeight;g=this.$.offsetWidth;var r=a.$.clientHeight,y=a.$.clientWidth;f=c.x-t(this,"left")-x.x||0;h=c.y-t(this,"top")-x.y||0;g=c.x+g+t(this,"right")-(x.x+y)||0;c=c.y+A+t(this,"bottom")-(x.y+r)||0;(0>h||0<c)&&e(0,!0===d?h:!1===d?c:0>h?h:c);b&&(0>f||0<g)&&e(0>f?f:g,0)},setState:function(a,d,b){d=d||"cke";switch(a){case CKEDITOR.TRISTATE_ON:this.addClass(d+"_on");this.removeClass(d+
"_off");this.removeClass(d+"_disabled");b&&this.setAttribute("aria-pressed",!0);b&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(d+"_disabled");this.removeClass(d+"_off");this.removeClass(d+"_on");b&&this.setAttribute("aria-disabled",!0);b&&this.removeAttribute("aria-pressed");break;default:this.addClass(d+"_off"),this.removeClass(d+"_on"),this.removeClass(d+"_disabled"),b&&this.removeAttribute("aria-pressed"),b&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(d){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,d){var b=this.$.attributes;d=d||{};for(var g=0;g<b.length;g++){var c=b[g],f=c.nodeName.toLowerCase(),h;if(!(f in d))if("checked"==f&&(h=this.getAttribute(f)))a.setAttribute(f,h);else if(!CKEDITOR.env.ie||this.hasAttribute(f))h=this.getAttribute(f),null===h&&(h=c.nodeValue),a.setAttribute(f,h)}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var d=this.getDocument();a=new CKEDITOR.dom.element(a,d);this.copyAttributes(a);this.moveChildren(a);this.getParent(!0)&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=a.$;delete this.getName}},getChild:function(){function a(d,b){var g=d.childNodes;if(0<=b&&b<g.length)return g[b]}return function(d){var b=this.$;if(d.slice)for(d=d.slice();0<d.length&&b;)b=a(b,d.shift());else b=a(b,d);return b?new CKEDITOR.dom.node(b):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function a(d){return d.type==CKEDITOR.NODE_ELEMENT&&d.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(d){d.data.getTarget().getAscendant(a,!0)||d.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,d){a="data-"+a;if(void 0===d)return this.getAttribute(a);!1===d?this.removeAttribute(a):this.setAttribute(a,d);return null},getEditor:function(a){var d=CKEDITOR.instances,b,g,c;a=a||void 0===a;for(b in d)if(g=d[b],g.element.equals(this)&&g.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||!a&&(c=g.editable())&&(c.equals(this)||c.contains(this)))return g;return null},find:function(a){var d=e(this);a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(c(this,a)));d();return a},findOne:function(a){var d=e(this);a=this.$.querySelector(c(this,a));d();return a?new CKEDITOR.dom.element(a):null},forEach:function(a,d,b){if(!(b||d&&this.type!=d))var g=a(this);if(!1!==g){b=this.getChildren();for(var c=0;c<b.count();c++)g=b.getItem(c),g.type==CKEDITOR.NODE_ELEMENT?g.forEach(a,d):d&&g.type!=d||a(g)}}});var l={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,d,b){"number"==typeof d&&(!b||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(d-=f.call(this,a)),this.setStyle(a,d+"px"))};CKEDITOR.dom.element.prototype.getSize=function(a,d){var b=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;d&&(b-=f.call(this,a));return b}}(),CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.type==CKEDITOR.NODE_DOCUMENT?a.$.createDocumentFragment():a},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)},getHtml:function(){var a=new CKEDITOR.dom.element("div");this.clone(1,1).appendTo(a);return a.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,g){var b=this.range;if(this._.end)return null;if(!this._.start){this._.start=1;if(b.collapsed)return this.end(),null;b.optimize()}var d,c=b.startContainer;d=b.endContainer;var f=b.startOffset,h=b.endOffset,k,e=this.guard,l=this.type,n=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var m=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),z=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(h):d.getNext();this._.guardLTR=function(a,g){return(!g||!m.equals(a))&&(!z||!a.equals(z))&&(a.type!=CKEDITOR.NODE_ELEMENT||!g||!a.equals(b.root))}}if(a&&!this._.guardRTL){var C=c.type==CKEDITOR.NODE_ELEMENT?c:c.getParent(),F=c.type==CKEDITOR.NODE_ELEMENT?f?c.getChild(f-1):null:c.getPrevious();this._.guardRTL=function(a,g){return(!g||!C.equals(a))&&(!F||!a.equals(F))&&(a.type!=CKEDITOR.NODE_ELEMENT||!g||!a.equals(b.root))}}var E=a?this._.guardRTL:this._.guardLTR;k=e?function(a,g){return!1===E(a,g)?!1:e(a,g)}:E;this.current?d=this.current[n](!1,l,k):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=0<h?d.getChild(h-1):!1===k(d,!0)?null:d.getPreviousSourceNode(!0,l,k)):(d=c,d.type==CKEDITOR.NODE_ELEMENT&&((d=d.getChild(f))||(d=!1===k(c,!0)?null:c.getNextSourceNode(!0,l,k)))),d&&!1===k(d)&&(d=null));for(;d&&!this._.end;){this.current=d;if(!this.evaluator||!1!==this.evaluator(d)){if(!g)return d}else if(g&&this.evaluator)return!1;d=d[n](!1,l,k)}this.end();return this.current=null}function e(g){for(var b,d=null;b=a.call(this,g);)d=b;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a;this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return!1!==a.call(this,0,1)},checkBackward:function(){return!1!==a.call(this,1,1)},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)},reset:function(){delete this.current;this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},f={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(a){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in f||!c[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||a&&this.is(a)):!0};CKEDITOR.dom.walker.blockBoundary=function(a){return function(g){return!(g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary(a))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(a,g){function b(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var c,f;c=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(f=d.getParent())&&b(f);c=a?c:c||b(d);return!!(g^c)}};CKEDITOR.dom.walker.whitespaces=function(a){return function(g){var b;g&&g.type==CKEDITOR.NODE_TEXT&&(b=!CKEDITOR.tools.trim(g.getText())||CKEDITOR.env.webkit&&g.getText()==CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE);return!!(a^b)}};CKEDITOR.dom.walker.invisible=function(a){var g=CKEDITOR.dom.walker.whitespaces(),b=CKEDITOR.env.webkit?1:0;return function(d){g(d)?d=1:(d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent()),d=d.$.offsetWidth<=b);return!!(a^d)}};CKEDITOR.dom.walker.nodeType=function(a,g){return function(b){return!!(g^b.type==a)}};CKEDITOR.dom.walker.bogus=function(a){function g(a){return!m(a)&&!l(a)}return function(b){var d=CKEDITOR.env.needsBrFiller?b.is&&b.is("br"):b.getText&&h.test(b.getText());d&&(d=b.getParent(),b=b.getNext(g),d=d.isBlockBoundary()&&(!b||b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()));return!!(a^d)}};CKEDITOR.dom.walker.temp=function(a){return function(g){g.type!=CKEDITOR.NODE_ELEMENT&&(g=g.getParent());g=g&&g.hasAttribute("data-cke-temp");return!!(a^g)}};var h=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,m=CKEDITOR.dom.walker.whitespaces(),l=CKEDITOR.dom.walker.bookmark(),k=CKEDITOR.dom.walker.temp(),d=function(a){return l(a)||m(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(a){return function(g){g=m(g)||l(g)||k(g);return!!(a^g)}};var b=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(a){return function(g){for(var d=0,c=g.getChildCount();d<c;++d)if(!b(g.getChild(d)))return!!a;return!a}};var g=CKEDITOR.dom.walker.empty(),n=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(a){var g={},b;for(b in a)CKEDITOR.dtd[b]["#"]&&(g[b]=1);return g}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(a){return function(d){d=b(d)?!1:d.type==CKEDITOR.NODE_TEXT||d.type==CKEDITOR.NODE_ELEMENT&&(d.is(CKEDITOR.dtd.$inline)||d.is("hr")||"false"==d.getAttribute("contenteditable")||!CKEDITOR.env.needsBrFiller&&d.is(n)&&g(d))?!0:!1;return!!(a^d)}};CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(d(a));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&h.test(a.getText()))?a:!1}}(),CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var e=a instanceof CKEDITOR.dom.document;this.document=e?a:a.getDocument();this.root=e?a.getBody():a},function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset}function e(a,b,d,c,f){function h(a,g,b,d){var c=b?a.getPrevious():a.getNext();if(d&&l)return c;r||d?g.append(a.clone(!0,f),b):(a.remove(),m&&g.append(a));return c}function k(){var a,g,b,d=Math.min(P.length,I.length);for(a=0;a<d;a++)if(g=P[a],b=I[a],!g.equals(b))return a;return a-1}function e(){var b=T-1,d=E&&H&&!y.equals(D);b<Q-1||b<R-1||d?(d?a.moveToPosition(D,CKEDITOR.POSITION_BEFORE_START):R==b+1&&F?a.moveToPosition(I[b],CKEDITOR.POSITION_BEFORE_END):a.moveToPosition(I[b+1],CKEDITOR.POSITION_BEFORE_START),c&&(b=P[b+1])&&b.type==CKEDITOR.NODE_ELEMENT&&(d=CKEDITOR.dom.element.createFromHtml('\x3cspan data-cke-bookmark\x3d"1" style\x3d"display:none"\x3e\x26nbsp;\x3c/span\x3e',a.document),d.insertAfter(b),b.mergeSiblings(!1),a.moveToBookmark({startNode:d}))):a.collapse(!0)}a.optimizeBookmark();var l=0===b,m=1==b,r=2==b;b=r||m;var y=a.startContainer,D=a.endContainer,B=a.startOffset,z=a.endOffset,C,F,E,H,G,O;if(r&&D.type==CKEDITOR.NODE_TEXT&&y.equals(D))y=a.document.createText(y.substring(B,z)),d.append(y);else{D.type==CKEDITOR.NODE_TEXT?r?O=!0:D=D.split(z):0<D.getChildCount()?z>=D.getChildCount()?(D=D.getChild(z-1),F=!0):D=D.getChild(z):H=F=!0;y.type==CKEDITOR.NODE_TEXT?r?G=!0:y.split(B):0<y.getChildCount()?0===B?(y=y.getChild(B),C=!0):y=y.getChild(B-1):E=C=!0;for(var P=y.getParents(),I=D.getParents(),T=k(),Q=P.length-1,R=I.length-1,M=d,U,W,L,X=-1,N=T;N<=Q;N++){W=P[N];L=W.getNext();for(N!=Q||W.equals(I[N])&&Q<R?b&&(U=M.append(W.clone(0,f))):C?h(W,M,!1,E):G&&M.append(a.document.createText(W.substring(B)));L;){if(L.equals(I[N])){X=N;break}L=h(L,M)}M=U}M=d;for(N=T;N<=R;N++)if(d=I[N],L=d.getPrevious(),d.equals(P[N]))b&&(M=M.getChild(0));else{N!=R||d.equals(P[N])&&R<Q?b&&(U=M.append(d.clone(0,f))):F?h(d,M,!1,H):O&&M.append(a.document.createText(d.substring(0,z)));if(N>X)for(;L;)L=h(L,M,!0);M=U}r||e()}}function c(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(!0),c=CKEDITOR.dom.walker.bogus();return function(f){return d(f)||b(f)?!0:c(f)&&!a?a=!0:f.type==CKEDITOR.NODE_TEXT&&(f.hasAscendant("pre")||CKEDITOR.tools.trim(f.getText()).length)||f.type==CKEDITOR.NODE_ELEMENT&&!f.is(m)?!1:!0}}function f(a){var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(1);return function(c){return d(c)||b(c)?!0:!a&&l(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.is(CKEDITOR.dtd.$removeEmpty)}}function h(a){return function(){var c;return this[a?"getPreviousNode":"getNextNode"](function(a){!c&&b(a)&&(c=a);return d(a)&&!(l(a)&&a.equals(c))})}}var m={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},l=CKEDITOR.dom.walker.bogus(),k=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,d=CKEDITOR.dom.walker.editable(),b=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);a._setStartContainer(this.startContainer);a.startOffset=this.startOffset;a._setEndContainer(this.endContainer);a.endOffset=this.endOffset;a.collapsed=this.collapsed;return a},collapse:function(a){a?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(a){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||e(this,2,b,!1,"undefined"==typeof a?!0:a);return b},deleteContents:function(a){this.collapsed||e(this,0,null,a)},extractContents:function(a,b){var d=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||e(this,1,d,a,"undefined"==typeof b?!0:b);return d},createBookmark:function(a){var b,d,c,f,h=this.collapsed;b=this.document.createElement("span");b.data("cke-bookmark",1);b.setStyle("display","none");b.setHtml("\x26nbsp;");a&&(c="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",c+(h?"C":"S")));h||(d=b.clone(),d.setHtml("\x26nbsp;"),a&&d.setAttribute("id",c+"E"),f=this.clone(),f.collapse(),f.insertNode(d));f=this.clone();f.collapse(!0);f.insertNode(b);d?(this.setStartAfter(b),this.setEndBefore(d)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END);return{startNode:a?c+(h?"C":"S"):b,endNode:a?c+"E":d,serializable:a,collapsed:h}},createBookmark2:function(){function a(g){var b=g.container,c=g.offset,f;f=b;var h=c;f=f.type!=CKEDITOR.NODE_ELEMENT||0===h||h==f.getChildCount()?0:f.getChild(h-1).type==CKEDITOR.NODE_TEXT&&f.getChild(h).type==CKEDITOR.NODE_TEXT;f&&(b=b.getChild(c-1),c=b.getLength());if(b.type==CKEDITOR.NODE_ELEMENT&&0<c){a:{for(f=b;c--;)if(h=f.getChild(c).getIndex(!0),0<=h){c=h;break a}c=-1}c+=1}if(b.type==CKEDITOR.NODE_TEXT){f=b;for(h=0;(f=f.getPrevious())&&f.type==CKEDITOR.NODE_TEXT;)h+=f.getText().replace(CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE,"").length;f=h;b.getText()?c+=f:(h=b.getPrevious(d),f?(c=f,b=h?h.getNext():b.getParent().getFirst()):(b=b.getParent(),c=h?h.getIndex(!0)+1:0))}g.container=b;g.offset=c}function b(a,g){var d=g.getCustomData("cke-fillingChar");if(d){var c=a.container;d.equals(c)&&(a.offset-=CKEDITOR.dom.selection.FILLING_CHAR_SEQUENCE.length,0>=a.offset&&(a.offset=c.getIndex(),a.container=c.getParent()))}}var d=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(d){var c=this.collapsed,f={container:this.startContainer,offset:this.startOffset},h={container:this.endContainer,offset:this.endOffset};d&&(a(f),b(f,this.root),c||(a(h),b(h,this.root)));return{start:f.container.getAddress(d),end:c?null:h.container.getAddress(d),startOffset:f.offset,endOffset:h.offset,normalized:d,collapsed:c,is2:!0}}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),d=a.startOffset,c=a.end&&this.document.getByAddress(a.end,a.normalized);a=a.endOffset;this.setStart(b,d);c?this.setEnd(c,a):this.collapse(!0)}else b=(d=a.serializable)?this.document.getById(a.startNode):a.startNode,a=d?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var a=this.startContainer,b=this.endContainer,d=this.startOffset,c=this.endOffset,f;if(a.type==CKEDITOR.NODE_ELEMENT)if(f=a.getChildCount(),f>d)a=a.getChild(d);else if(1>f)a=a.getPreviousSourceNode();else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a);a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(f=b.getChildCount(),f>c)b=b.getChild(c).getPreviousSourceNode(!0);else if(1>f)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b);return{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var d=this.startContainer,c=this.endContainer,d=d.equals(c)?a&&d.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?d.getChild(this.startOffset):d:d.getCommonAncestor(c);return b&&!d.is?d.getParent():d},optimize:function(){var a=this.startContainer,b=this.startOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a));a=this.endContainer;b=this.endOffset;a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START);b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var d=this.startContainer,c=this.startOffset,f=this.collapsed;if((!a||f)&&d&&d.type==CKEDITOR.NODE_TEXT){if(c)if(c>=d.getLength())c=d.getIndex()+1,d=d.getParent();else{var h=d.split(c),c=d.getIndex()+1,d=d.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(h,this.endOffset-this.startOffset):d.equals(this.endContainer)&&(this.endOffset+=1)}else c=d.getIndex(),d=d.getParent();this.setStart(d,c);if(f){this.collapse(!0);return}}d=this.endContainer;c=this.endOffset;b||f||!d||d.type!=CKEDITOR.NODE_TEXT||(c?(c>=d.getLength()||d.split(c),c=d.getIndex()+1):c=d.getIndex(),d=d.getParent(),this.setEnd(d,c))},enlarge:function(a,b){function d(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var c=new RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var f=1;case CKEDITOR.ENLARGE_ELEMENT:var h=function(a,b){var g=new CKEDITOR.dom.range(e);g.setStart(a,b);g.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);var g=new CKEDITOR.dom.walker(g),d;for(g.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())};d=g.next();){if(d.type!=CKEDITOR.NODE_TEXT)return!1;C=d!=a?d.getText():d.substring(b);if(c.test(C))return!1}return!0};if(this.collapsed)break;var k=this.getCommonAncestor(),e=this.root,l,m,r,y,D,B=!1,z,C;z=this.startContainer;var F=this.startOffset;z.type==CKEDITOR.NODE_TEXT?(F&&(z=!CKEDITOR.tools.trim(z.substring(0,F)).length&&z,B=!!z),z&&((y=z.getPrevious())||(r=z.getParent()))):(F&&(y=z.getChild(F-1)||z.getLast()),y||(r=z));for(r=d(r);r||y;){if(r&&!y){!D&&r.equals(k)&&(D=!0);if(f?r.isBlockBoundary():!e.contains(r))break;B&&"inline"==r.getComputedStyle("display")||(B=!1,D?l=r:this.setStartBefore(r));y=r.getPrevious()}for(;y;)if(z=!1,y.type==CKEDITOR.NODE_COMMENT)y=y.getPrevious();else{if(y.type==CKEDITOR.NODE_TEXT)C=y.getText(),c.test(C)&&(y=null),z=/[\s\ufeff]$/.test(C);else if((y.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||b&&y.is("br"))&&!y.data("cke-bookmark"))if(B&&CKEDITOR.dtd.$removeEmpty[y.getName()]){C=y.getText();if(c.test(C))y=null;else for(var F=y.$.getElementsByTagName("*"),E=0,H;H=F[E++];)if(!CKEDITOR.dtd.$removeEmpty[H.nodeName.toLowerCase()]){y=null;break}y&&(z=!!C.length)}else y=null;z&&(B?D?l=r:r&&this.setStartBefore(r):B=!0);if(y){z=y.getPrevious();if(!r&&!z){r=y;y=null;break}y=z}else r=null}r&&(r=d(r.getParent()))}z=this.endContainer;F=this.endOffset;r=y=null;D=B=!1;z.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(z.substring(F)).length?B=!0:(B=!z.getLength(),F==z.getLength()?(y=z.getNext())||(r=z.getParent()):h(z,F)&&(r=z.getParent())):(y=z.getChild(F))||(r=z);for(;r||y;){if(r&&!y){!D&&r.equals(k)&&(D=!0);if(f?r.isBlockBoundary():!e.contains(r))break;B&&"inline"==r.getComputedStyle("display")||(B=!1,D?m=r:r&&this.setEndAfter(r));y=r.getNext()}for(;y;){z=!1;if(y.type==CKEDITOR.NODE_TEXT)C=y.getText(),h(y,0)||(y=null),z=/^[\s\ufeff]/.test(C);else if(y.type==CKEDITOR.NODE_ELEMENT){if((0<y.$.offsetWidth||b&&y.is("br"))&&!y.data("cke-bookmark"))if(B&&CKEDITOR.dtd.$removeEmpty[y.getName()]){C=y.getText();if(c.test(C))y=null;else for(F=y.$.getElementsByTagName("*"),E=0;H=F[E++];)if(!CKEDITOR.dtd.$removeEmpty[H.nodeName.toLowerCase()]){y=null;break}y&&(z=!!C.length)}else y=null}else z=1;z&&B&&(D?m=r:this.setEndAfter(r));if(y){z=y.getNext();if(!r&&!z){r=y;y=null;break}y=z}else r=null}r&&(r=d(r.getParent()))}l&&m&&(k=l.contains(m)?m:l,this.setStartBefore(k),this.setEndAfter(k));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:r=new CKEDITOR.dom.range(this.root);e=this.root;r.setStartAt(e,CKEDITOR.POSITION_AFTER_START);r.setEnd(this.startContainer,this.startOffset);r=new CKEDITOR.dom.walker(r);var G,O,P=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),I=null,T=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(I){if(I.equals(a)){I=null;return}}else I=a;else if(I)return;var b=P(a);b||(G=a);return b},f=function(a){var b=T(a);!b&&a.is&&a.is("br")&&(O=a);return b};r.guard=T;r=r.lastBackward();G=G||e;this.setStartAt(G,!G.is("br")&&(!r&&this.checkStartOfBlock()||r&&G.contains(r))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){r=this.clone();r=new CKEDITOR.dom.walker(r);var Q=CKEDITOR.dom.walker.whitespaces(),R=CKEDITOR.dom.walker.bookmark();r.evaluator=function(a){return!Q(a)&&!R(a)};if((r=r.previous())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("br"))break}r=this.clone();r.collapse();r.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);r=new CKEDITOR.dom.walker(r);r.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?f:T;G=I=O=null;r=r.lastForward();G=G||e;this.setEndAt(G,!r&&this.checkEndOfBlock()||r&&G.contains(r)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);O&&this.setEndAfter(O)}},shrink:function(a,b,d){var c="boolean"===typeof d?d:d&&"boolean"===typeof d.shrinkOnBlockBoundary?d.shrinkOnBlockBoundary:!0,f=d&&d.skipBogus;if(!this.collapsed){a=a||CKEDITOR.SHRINK_TEXT;var h=this.clone(),k=this.startContainer,e=this.endContainer,l=this.startOffset,m=this.endOffset,r=d=1;k&&k.type==CKEDITOR.NODE_TEXT&&(l?l>=k.getLength()?h.setStartAfter(k):(h.setStartBefore(k),d=0):h.setStartBefore(k));e&&e.type==CKEDITOR.NODE_TEXT&&(m?m>=e.getLength()?h.setEndAfter(e):(h.setEndAfter(e),r=0):h.setEndBefore(e));var h=new CKEDITOR.dom.walker(h),y=CKEDITOR.dom.walker.bookmark(),D=CKEDITOR.dom.walker.bogus();h.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var B;h.guard=function(b,d){if(f&&D(b)||y(b))return!0;if(a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(B)||!1===c&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable"))return!1;d||b.type!=CKEDITOR.NODE_ELEMENT||(B=b);return!0};d&&(k=h[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(k,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);r&&(h.reset(),(h=h[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(h,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return!(!d&&!r)}},insertNode:function(a){this.optimizeBookmark();this.trim(!1,!0);var b=this.startContainer,d=b.getChild(this.startOffset);d?a.insertBefore(d):b.append(a);a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b);this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset);this.setEnd(a.endContainer,a.endOffset)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,d){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(d=b.getIndex(),b=b.getParent());this._setStartContainer(b);this.startOffset=d;this.endContainer||(this._setEndContainer(b),this.endOffset=d);a(this)},setEnd:function(b,d){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(d=b.getIndex()+
1,b=b.getParent());this._setEndContainer(b);this.endOffset=d;this.startContainer||(this._setStartContainer(b),this.startOffset=d);a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,d){switch(d){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,d){switch(d){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var d=this.createBookmark(),c=this.document.createElement(b);this.collapse(a);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(c);c.trim();this.insertNode(c);var f=c.getBogus();f&&f.remove();c.appendBogus();this.moveToBookmark(d);return c},splitBlock:function(a,b){var d=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=new CKEDITOR.dom.elementPath(this.endContainer,this.root),f=d.block,h=c.block,k=null;if(!d.blockLimit.equals(c.blockLimit))return null;"br"!=a&&(f||(f=this.fixBlock(!0,a),h=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),h||(h=this.fixBlock(!1,a)));d=f&&this.checkStartOfBlock();c=h&&this.checkEndOfBlock();this.deleteContents();f&&f.equals(h)&&(c?(k=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(h,CKEDITOR.POSITION_AFTER_END),h=null):d?(k=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f=null):(h=this.splitElement(f,b||!1),f.is("ul","ol")||f.appendBogus()));return{previousBlock:f,nextBlock:h,wasStartOfBlock:d,wasEndOfBlock:c,elementPath:k}},splitElement:function(a,b){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var d=this.extractContents(!1,b||!1),c=a.clone(!1,b||!1);d.appendTo(c);c.insertAfter(a);this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END);return c},removeEmptyBlocksAtEnd:function(){function a(g){return function(a){return b(a)||d(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||g.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var d=this.createBookmark(),c=this[b?"endPath":"startPath"](),f=c.block||c.blockLimit,h;f&&!f.equals(c.root)&&!f.getFirst(a(f));)h=f.getParent(),this[b?"setEndAt":"setStartAt"](f,CKEDITOR.POSITION_AFTER_END),f.remove(1),f=h;this.moveToBookmark(d)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var d=b==CKEDITOR.START,c=this.clone();c.collapse(d);c[d?"setStartAt":"setEndAt"](a,d?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);c=new CKEDITOR.dom.walker(c);c.evaluator=f(d);return c[d?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,b=this.startOffset;CKEDITOR.env.ie&&b&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,b)),k.test(a)&&this.trim(0,1));this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);b=this.clone();b.collapse(!0);b.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(b);a.evaluator=c();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,b=this.endOffset;CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(b)),k.test(a)&&this.trim(1,0));this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);b=this.clone();b.collapse(!1);b.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(b);a.evaluator=c();return a.checkForward()},getPreviousNode:function(a,b,d){var c=this.clone();c.collapse(1);c.setStartAt(d||this.root,CKEDITOR.POSITION_AFTER_START);d=new CKEDITOR.dom.walker(c);d.evaluator=a;d.guard=b;return d.previous()},getNextNode:function(a,b,d){var c=this.clone();c.collapse();c.setEndAt(d||this.root,CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(c);d.evaluator=a;d.guard=b;return d.next()},checkReadOnly:function(){function a(b,d){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(d)||b.equals(d)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,d=this.endContainer;return!(a(b,d)&&a(d,b))}}(),moveToElementEditablePosition:function(a,d){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,d?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){d&&this.endContainer&&this.checkEndOfBlock()&&k.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,d?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);c=1;break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,d?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(d&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var f=a,h=c,e=void 0;f.type==CKEDITOR.NODE_ELEMENT&&f.isEditable(!1)&&(e=f[d?"getLast":"getFirst"](b));h||e||(e=f[d?"getPrevious":"getNext"](b));a=e}return!!c},moveToClosestEditablePosition:function(a,b){var d,c=0,f,h,k=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];a?(d=new CKEDITOR.dom.range(this.root),d.moveToPosition(a,k[b?0:1])):d=this.clone();if(a&&!a.is(CKEDITOR.dtd.$block))c=1;else if(f=d[b?"getNextEditableNode":"getPreviousEditableNode"]())c=1,(h=f.type==CKEDITOR.NODE_ELEMENT)&&f.is(CKEDITOR.dtd.$block)&&"false"==f.getAttribute("contenteditable")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.setEndAt(f,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&h&&f.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(d.setEnd(f,0),d.collapse()):d.moveToPosition(f,k[b?1:0]);c&&this.moveToRange(d);return!!c},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();a.optimize();if(a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),d=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return d(a)&&b(a)};var c=a.next();a.reset();return c&&c.equals(a.previous())?c:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:h(),getPreviousEditableNode:h(1),_getTableElement:function(a){a=a||{td:1,th:1,tr:1,tbody:1,thead:1,tfoot:1,table:1};var b=this.startContainer,d=this.endContainer,c=b.getAscendant("table",!0),f=d.getAscendant("table",!0);return CKEDITOR.env.safari&&c&&d.equals(this.root)?b.getAscendant(a,!0):this.getEnclosedNode()?this.getEnclosedNode().getAscendant(a,!0):c&&f&&(c.equals(f)||c.contains(f)||f.contains(c))?b.getAscendant(a,!0):null},scrollIntoView:function(){var a=new CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",this.document),b,d,c,f=this.clone();f.optimize();(c=f.startContainer.type==CKEDITOR.NODE_TEXT)?(d=f.startContainer.getText(),b=f.startContainer.split(f.startOffset),a.insertAfter(f.startContainer)):f.insertNode(a);a.scrollIntoView();c&&(f.startContainer.setText(d),b.remove());a.remove()},_setStartContainer:function(a){this.startContainer=a},_setEndContainer:function(a){this.endContainer=a},_find:function(a,b){var d=this.getCommonAncestor(),c=this.getBoundaryNodes(),f=[],h,k,e,l;if(d&&d.find)for(k=d.find(a),h=0;h<k.count();h++)if(d=k.getItem(h),b||!d.isReadOnly())e=d.getPosition(c.startNode)&CKEDITOR.POSITION_FOLLOWING||c.startNode.equals(d),l=d.getPosition(c.endNode)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IS_CONTAINED||c.endNode.equals(d),e&&l&&f.push(d);return f}};CKEDITOR.dom.range.mergeRanges=function(a){return CKEDITOR.tools.array.reduce(a,function(a,b){var d=a[a.length-1],g=!1;b=b.clone();b.enlarge(CKEDITOR.ENLARGE_ELEMENT);if(d){var c=new CKEDITOR.dom.range(b.root),g=new CKEDITOR.dom.walker(c),f=CKEDITOR.dom.walker.whitespaces();c.setStart(d.endContainer,d.endOffset);c.setEnd(b.startContainer,b.startOffset);for(c=g.next();f(c)||b.endContainer.equals(c);)c=g.next();g=!c}g?d.setEnd(b.endContainer,b.endOffset):a.push(b);return a},[])}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,"use strict",function(){function a(a){1>arguments.length||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function e(a){var d=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return d.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return d}function c(a,d,f,h){a:{null==h&&(h=e(f));for(var k;k=h.shift();)if(k.getDtd().p){h={element:k,remaining:h};break a}h=null}if(!h)return 0;if((k=CKEDITOR.filter.instances[h.element.data("cke-filter")])&&!k.check(d))return c(a,d,f,h.remaining);d=new CKEDITOR.dom.range(h.element);d.selectNodeContents(h.element);d=d.createIterator();d.enlargeBr=a.enlargeBr;d.enforceRealBlocks=a.enforceRealBlocks;d.activeFilter=d.filter=k;a._.nestedEditable={element:h.element,container:f,remaining:h.remaining,iterator:d};return 1}function f(a,d,c){if(!d)return!1;a=a.clone();a.collapse(!c);return a.checkBoundaryOfElement(d,c?CKEDITOR.START:CKEDITOR.END)}var h=/^[\r\n\t ]+$/,m=CKEDITOR.dom.walker.bookmark(!1,!0),l=CKEDITOR.dom.walker.whitespaces(!0),k=function(a){return m(a)&&l(a)},d={dd:1,dt:1,li:1};a.prototype={getNextParagraph:function(a){var g,e,l,p,w;a=a||"p";if(this._.nestedEditable){if(g=this._.nestedEditable.iterator.getNextParagraph(a))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,g;this.activeFilter=this.filter;if(c(this,a,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(a);this._.nestedEditable=null}if(!this.range.root.getDtd()[a])return null;if(!this._.started){var u=this.range.clone();e=u.startPath();var t=u.endPath(),v=!u.collapsed&&f(u,e.block),x=!u.collapsed&&f(u,t.block,1);u.shrink(CKEDITOR.SHRINK_ELEMENT,!0);v&&u.setStartAt(e.block,CKEDITOR.POSITION_BEFORE_END);x&&u.setEndAt(t.block,CKEDITOR.POSITION_AFTER_START);e=u.endContainer.hasAscendant("pre",!0)||u.startContainer.hasAscendant("pre",!0);u.enlarge(this.forceBrBreak&&!e||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);u.collapsed||(e=new CKEDITOR.dom.walker(u.clone()),t=CKEDITOR.dom.walker.bookmark(!0,!0),e.evaluator=t,this._.nextNode=e.next(),e=new CKEDITOR.dom.walker(u.clone()),e.evaluator=t,e=e.previous(),this._.lastNode=e.getNextSourceNode(!0,null,u.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(t=this.range.clone(),t.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),t.checkEndOfBlock()&&(t=new CKEDITOR.dom.elementPath(t.endContainer,t.root),this._.lastNode=(t.block||t.blockLimit).getNextSourceNode(!0))),this._.lastNode&&u.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=u.document.createText(""),this._.lastNode.insertAfter(e)),u=null);this._.started=1;e=u}t=this._.nextNode;u=this._.lastNode;for(this._.nextNode=null;t;){var v=0,x=t.hasAscendant("pre"),A=t.type!=CKEDITOR.NODE_ELEMENT,r=0;if(A)t.type==CKEDITOR.NODE_TEXT&&h.test(t.getText())&&(A=0);else{var y=t.getName();if(CKEDITOR.dtd.$block[y]&&"false"==t.getAttribute("contenteditable")){g=t;c(this,a,g);break}else if(t.isBlockBoundary(this.forceBrBreak&&!x&&{br:1})){if("br"==y)A=1;else if(!e&&!t.getChildCount()&&"hr"!=y){g=t;l=t.equals(u);break}e&&(e.setEndAt(t,CKEDITOR.POSITION_BEFORE_START),"br"!=y&&(this._.nextNode=t));v=1}else{if(t.getFirst()){e||(e=this.range.clone(),e.setStartAt(t,CKEDITOR.POSITION_BEFORE_START));t=t.getFirst();continue}A=1}}A&&!e&&(e=this.range.clone(),e.setStartAt(t,CKEDITOR.POSITION_BEFORE_START));l=(!v||A)&&t.equals(u);if(e&&!v)for(;!t.getNext(k)&&!l;){y=t.getParent();if(y.isBlockBoundary(this.forceBrBreak&&!x&&{br:1})){v=1;A=0;l||y.equals(u);e.setEndAt(y,CKEDITOR.POSITION_BEFORE_END);break}t=y;A=1;l=t.equals(u);r=1}A&&e.setEndAt(t,CKEDITOR.POSITION_AFTER_END);t=this._getNextSourceNode(t,r,u);if((l=!t)||v&&e)break}if(!g){if(!e)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;g=new CKEDITOR.dom.elementPath(e.startContainer,e.root);t=g.blockLimit;v={div:1,th:1,td:1};g=g.block;!g&&t&&!this.enforceRealBlocks&&v[t.getName()]&&e.checkStartOfBlock()&&e.checkEndOfBlock()&&!t.equals(e.root)?g=t:!g||this.enforceRealBlocks&&g.is(d)?(g=this.range.document.createElement(a),e.extractContents().appendTo(g),g.trim(),e.insertNode(g),p=w=!0):"li"!=g.getName()?e.checkStartOfBlock()&&e.checkEndOfBlock()||(g=g.clone(!1),e.extractContents().appendTo(g),g.trim(),w=e.splitBlock(),p=!w.wasStartOfBlock,w=!w.wasEndOfBlock,e.insertNode(g)):l||(this._.nextNode=g.equals(u)?null:this._getNextSourceNode(e.getBoundaryNodes().endNode,1,u))}p&&(p=g.getPrevious())&&p.type==CKEDITOR.NODE_ELEMENT&&("br"==p.getName()?p.remove():p.getLast()&&"br"==p.getLast().$.nodeName.toLowerCase()&&p.getLast().remove());w&&(p=g.getLast())&&p.type==CKEDITOR.NODE_ELEMENT&&"br"==p.getName()&&(!CKEDITOR.env.needsBrFiller||p.getPrevious(m)||p.getNext(m))&&p.remove();this._.nextNode||(this._.nextNode=l||g.equals(u)||!u?null:this._getNextSourceNode(g,1,u));return g},_getNextSourceNode:function(a,d,c){function f(a){return!(a.equals(c)||a.equals(h))}var h=this.range.root;for(a=a.getNextSourceNode(d,null,f);!m(a);)a=a.getNextSourceNode(d,null,f);return a}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}}(),CKEDITOR.command=function(a,e){this.uiItems=[];this.exec=function(c){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed())return!1;this.editorFocus&&a.focus();return!1===this.fire("exec")?!0:!1!==e.exec.call(this,a,c)};this.refresh=function(a,c){if(!this.readOnly&&a.readOnly)return!0;if(this.context&&!c.isContextFor(this.context)||!this.checkAllowed(!0))return this.disable(),!0;this.startDisabled||this.enable();this.modes&&!this.modes[a.mode]&&this.disable();return!1===this.fire("refresh",{editor:a,path:c})?!0:e.refresh&&!1!==e.refresh.apply(this,arguments)};var c;this.checkAllowed=function(f){return f||"boolean"!=typeof c?c=a.activeFilter.checkFeature(this):c};CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a||a!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed())return!1;this.previousState=this.state;this.state=a;this.fire("state");return!0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"\x3c!DOCTYPE html\x3e",bodyId:"",bodyClass:"",fullPage:!1,height:200,contentsCss:CKEDITOR.getUrl("contents.css"),extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1E4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function a(a,b,d,c,g){var f,h;a=[];for(f in b){h=b[f];h="boolean"==typeof h?{}:"function"==typeof h?{match:h}:E(h);"$"!=f.charAt(0)&&(h.elements=f);d&&(h.featureName=d.toLowerCase());var k=h;k.elements=l(k.elements,/\s+/)||null;k.propertiesOnly=k.propertiesOnly||!0===k.elements;var e=/\s*,\s*/,m=void 0;for(m in O){k[m]=l(k[m],e)||null;var r=k,t=P[m],n=l(k[P[m]],e),y=k[m],x=[],u=!0,I=void 0;n?u=!1:n={};for(I in y)"!"==I.charAt(0)&&(I=I.slice(1),x.push(I),n[I]=!0,u=!1);for(;I=x.pop();)y[I]=y["!"+I],delete y["!"+I];r[t]=(u?!1:n)||null}k.match=k.match||null;c.push(h);a.push(h)}b=g.elements;g=g.generic;var q;d=0;for(c=a.length;d<c;++d){f=E(a[d]);h=!0===f.classes||!0===f.styles||!0===f.attributes;k=f;m=t=e=void 0;for(e in O)k[e]=v(k[e]);r=!0;for(m in P){e=P[m];t=k[e];n=[];y=void 0;for(y in t)-1<y.indexOf("*")?n.push(new RegExp("^"+
y.replace(/\*/g,".*")+"$")):n.push(y);t=n;t.length&&(k[e]=t,r=!1)}k.nothingRequired=r;k.noProperties=!(k.attributes||k.classes||k.styles);if(!0===f.elements||null===f.elements)g[h?"unshift":"push"](f);else for(q in k=f.elements,delete f.elements,k)if(b[q])b[q][h?"unshift":"push"](f);else b[q]=[f]}}function e(a,b,d,g){if(!a.match||a.match(b))if(g||k(a,b))if(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=c(a.attributes,b.attributes,d.validAttributes)),d.allStyles||(d.allStyles=c(a.styles,b.styles,d.validStyles)),!d.allClasses){a=a.classes;b=b.classes;g=d.validClasses;if(a)if(!0===a)a=!0;else{for(var f=0,h=b.length,e;f<h;++f)e=b[f],g[e]||(g[e]=a(e));a=!1}else a=!1;d.allClasses=a}}function c(a,b,d){if(!a)return!1;if(!0===a)return!0;for(var c in b)d[c]||(d[c]=a(c));return!1}function f(a,b,d){if(!a.match||a.match(b)){if(a.noProperties)return!1;d.hadInvalidAttribute=h(a.attributes,b.attributes)||d.hadInvalidAttribute;d.hadInvalidStyle=h(a.styles,b.styles)||d.hadInvalidStyle;a=a.classes;b=b.classes;if(a){for(var c=!1,g=!0===a,f=b.length;f--;)if(g||a(b[f]))b.splice(f,1),c=!0;a=c}else a=!1;d.hadInvalidClass=a||d.hadInvalidClass}}function h(a,b){if(!a)return!1;var d=!1,c=!0===a,g;for(g in b)if(c||a(g))delete b[g],d=!0;return d}function m(a,b,d){if(a.disabled||a.customConfig&&!d||!b)return!1;a._.cachedChecks={};return!0}function l(a,b){if(!a)return!1;if(!0===a)return a;if("string"==typeof a)return a=H(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var d={},c=0,g;for(g in a)d[g]=a[g],c++;return c?d:!1}function k(a,b){if(a.nothingRequired)return!0;var c,g,f,h;if(f=a.requiredClasses)for(h=b.classes,c=0;c<f.length;++c)if(g=f[c],"string"==typeof g){if(-1==CKEDITOR.tools.indexOf(h,g))return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(h,g))return!1;return d(b.styles,a.requiredStyles)&&d(b.attributes,a.requiredAttributes)}function d(a,b){if(!b)return!0;for(var d=0,c;d<b.length;++d)if(c=b[d],"string"==typeof c){if(!(c in a))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(a,c))return!1;return!0}function b(a){if(!a)return{};a=a.split(/\s*,\s*/).sort();for(var b={};a.length;)b[a.shift()]="cke-test";return b}function g(a){var b,d,c,g,f={},h=1;for(a=H(a);b=a.match(I);)(d=b[2])?(c=n(d,"styles"),g=n(d,"attrs"),d=n(d,"classes")):c=g=d=null,f["$"+h++]={elements:b[1],classes:d,styles:c,attributes:g},a=a.slice(b[0].length);return f}function n(a,b){var d=a.match(T[b]);return d?H(d[1]):null}
function q(a){var b=a.styleBackup=a.attributes.style,d=a.classBackup=a.attributes["class"];a.styles||(a.styles=CKEDITOR.tools.parseCssText(b||"",1));a.classes||(a.classes=d?d.split(/\s+/):[])}function p(a,b,d,c){var g=0,h;c.toHtml&&(b.name=b.name.replace(Q,"$1"));if(c.doCallbacks&&a.elementCallbacks){a:{h=a.elementCallbacks;for(var k=0,l=h.length,m;k<l;++k)if(m=h[k](b)){h=m;break a}h=void 0}if(h)return h}if(c.doTransform&&(h=a._.transformations[b.name])){q(b);for(k=0;k<h.length;++k)y(a,b,h[k]);u(b)}if(c.doFilter){a:{k=b.name;l=a._;a=l.allowedRules.elements[k];h=l.allowedRules.generic;k=l.disallowedRules.elements[k];l=l.disallowedRules.generic;m=c.skipRequired;var r={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},n,v;if(a||h){q(b);if(k)for(n=0,v=k.length;n<v;++n)if(!1===f(k[n],b,r)){a=null;break a}if(l)for(n=0,v=l.length;n<v;++n)f(l[n],b,r);if(a)for(n=0,v=a.length;n<v;++n)e(a[n],b,r,m);if(h)for(n=0,v=h.length;n<v;++n)e(h[n],b,r,m);a=r}else a=null}if(!a||!a.valid)return d.push(b),1;v=a.validAttributes;var x=a.validStyles;h=a.validClasses;var k=b.attributes,I=b.styles,l=b.classes;m=b.classBackup;var P=b.styleBackup,C,D,A=[],r=[],p=/^data-cke-/;n=!1;delete k.style;delete k["class"];delete b.classBackup;delete b.styleBackup;if(!a.allAttributes)for(C in k)v[C]||(p.test(C)?C==(D=C.replace(/^data-cke-saved-/,""))||v[D]||(delete k[C],n=!0):(delete k[C],n=!0));if(!a.allStyles||a.hadInvalidStyle){for(C in I)a.allStyles||x[C]?A.push(C+":"+I[C]):n=!0;A.length&&(k.style=A.sort().join("; "))}else P&&(k.style=P);if(!a.allClasses||a.hadInvalidClass){for(C=0;C<l.length;++C)(a.allClasses||h[l[C]])&&r.push(l[C]);r.length&&(k["class"]=r.sort().join(" "));m&&r.length<m.split(/\s+/).length&&(n=!0)}else m&&(k["class"]=m);n&&(g=1);if(!c.skipFinalValidation&&!t(b))return d.push(b),1}c.toHtml&&(b.name=b.name.replace(R,"cke:$1"));return g}function w(a){var b=[],d;for(d in a)-1<d.indexOf("*")&&b.push(d.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function u(a){var b=a.attributes,d;delete b.style;delete b["class"];if(d=CKEDITOR.tools.writeCssText(a.styles,!0))b.style=d;a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function t(a){switch(a.name){case"a":if(!(a.children.length||a.attributes.name||a.attributes.id))return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function v(a){if(!a)return!1;if(!0===a)return!0;var b=w(a);return function(d){return d in a||b&&d.match(b)}}function x(){return new CKEDITOR.htmlParser.element("br")}
function A(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||F.$block[a.name])}function r(a,b,d){var c=a.name;if(F.$empty[c]||!a.children.length)"hr"==c&&"br"==b?a.replaceWith(x()):(a.parent&&d.push({check:"it",el:a.parent}),a.remove());else if(F.$block[c]||"tr"==c)if("br"==b)a.previous&&!A(a.previous)&&(b=x(),b.insertBefore(a)),a.next&&!A(a.next)&&(b=x(),b.insertAfter(a)),a.replaceWithChildren();else{var c=a.children,g;b:{g=F[b];for(var f=0,h=c.length,k;f<h;++f)if(k=c[f],k.type==CKEDITOR.NODE_ELEMENT&&!g[k.name]){g=!1;break b}g=!0}if(g)a.name=b,a.attributes={},d.push({check:"parent-down",el:a});else{g=a.parent;for(var f=g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==g.name,e,l,h=c.length;0<h;)k=c[--h],f&&(k.type==CKEDITOR.NODE_TEXT||k.type==CKEDITOR.NODE_ELEMENT&&F.$inline[k.name])?(e||(e=new CKEDITOR.htmlParser.element(b),e.insertAfter(a),d.push({check:"parent-down",el:e})),e.add(k,0)):(e=null,l=F[g.name]||F.span,k.insertAfter(a),g.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||k.type!=CKEDITOR.NODE_ELEMENT||l[k.name]||d.push({check:"el-up",el:k}));a.remove()}}else c in{style:1,script:1}?a.remove():(a.parent&&d.push({check:"it",el:a.parent}),a.replaceWithChildren())}function y(a,b,d){var c,g;for(c=0;c<d.length;++c)if(g=d[c],!(g.check&&!a.check(g.check,!1)||g.left&&!g.left(b))){g.right(b,M);break}}function D(a,b){var d=b.getDefinition(),c=d.attributes,g=d.styles,f,h,k,e;if(a.name!=d.element)return!1;for(f in c)if("class"==f)for(d=c[f].split(/\s+/),k=a.classes.join("|");e=d.pop();){if(-1==k.indexOf(e))return!1}else if(a.attributes[f]!=c[f])return!1;for(h in g)if(a.styles[h]!=g[h])return!1;return!0}function B(a,b){var d,c;"string"==typeof a?d=a:a instanceof CKEDITOR.style?c=a:(d=a[0],c=a[1]);return[{element:d,left:c,right:function(a,d){d.transform(a,b)}}]}function z(a){return function(b){return D(b,a)}}function C(a){return function(b,d){d[a](b)}}var F=CKEDITOR.dtd,E=CKEDITOR.tools.copy,H=CKEDITOR.tools.trim,G=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(a){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(a instanceof CKEDITOR.editor){a=this.editor=a;this.customConfig=!0;var b=a.config.allowedContent;!0===b?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(G[a.enterMode]+
" "+G[a.shiftEnterMode],"default",1),this.disallow(a.config.disallowedContent))}else this.customConfig=!1,this.allow(a,"default",1)};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(b,d,c){if(!m(this,b,c))return!1;var f,h;if("string"==typeof b)b=g(b);else if(b instanceof CKEDITOR.style){if(b.toAllowedContentRules)return this.allow(b.toAllowedContentRules(this.editor),d,c);f=b.getDefinition();b={};c=f.attributes;b[f.element]=f={styles:f.styles,requiredStyles:f.styles&&CKEDITOR.tools.objectKeys(f.styles)};c&&(c=E(c),f.classes=c["class"]?c["class"].split(/\s+/):null,f.requiredClasses=f.classes,delete c["class"],f.attributes=c,f.requiredAttributes=c&&CKEDITOR.tools.objectKeys(c))}else if(CKEDITOR.tools.isArray(b)){for(f=0;f<b.length;++f)h=this.allow(b[f],d,c);return h}a(this,b,d,this.allowedContent,this._.allowedRules);return!0},applyTo:function(a,b,d,c){if(this.disabled)return!1;var g=this,f=[],h=this.editor&&this.editor.config.protectedSource,k,e=!1,l={doFilter:!d,doTransform:!0,doCallbacks:!0,toHtml:b};a.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;if(!b||"span"!=a.name||!~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-"))if(k=p(g,a,f,l),k&1)e=!0;else if(k&2)return!1}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var d;a:{var c=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));d=[];var m,r,t;if(h)for(r=0;r<h.length;++r)if((t=c.match(h[r]))&&t[0].length==c.length){d=!0;break a}c=CKEDITOR.htmlParser.fragment.fromHtml(c);1==c.children.length&&(m=c.children[0]).type==CKEDITOR.NODE_ELEMENT&&p(g,m,d,l);d=!d.length}d||f.push(a)}},null,!0);f.length&&(e=!0);var m;a=[];c=G[c||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var n;d=f.pop();)d.type==CKEDITOR.NODE_ELEMENT?r(d,c,a):d.remove();for(;m=a.pop();)if(d=m.el,d.parent)switch(n=F[d.parent.name]||F.span,m.check){case"it":F.$removeEmpty[d.name]&&!d.children.length?r(d,c,a):t(d)||r(d,c,a);break;case"el-up":d.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||n[d.name]||r(d,c,a);break;case"parent-down":d.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||n[d.name]||r(d.parent,c,a)}return e},checkFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));return!a.requiredContent||this.check(a.requiredContent)},disable:function(){this.disabled=!0},disallow:function(b){if(!m(this,b,!0))return!1;"string"==typeof b&&(b=g(b));a(this,b,null,this.disallowedContent,this._.disallowedRules);return!0},addContentForms:function(a){if(!this.disabled&&a){var b,d,c=[],g;for(b=0;b<a.length&&!g;++b)d=a[b],("string"==typeof d||d instanceof CKEDITOR.style)&&this.check(d)&&(g=d);if(g){for(b=0;b<a.length;++b)c.push(B(a[b],g));this.addTransformations(c)}}},addElementCallback:function(a){this.elementCallbacks||(this.elementCallbacks=[]);this.elementCallbacks.push(a)},addFeature:function(a){if(this.disabled||!a)return!0;a.toFeature&&(a=a.toFeature(this.editor));this.allow(a.allowedContent,a.name);this.addTransformations(a.contentTransformations);this.addContentForms(a.contentForms);return a.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(a.requiredContent):!0},addTransformations:function(a){var b,d;if(!this.disabled&&a){var c=this._.transformations,g;for(g=0;g<a.length;++g){b=a[g];var f=void 0,h=void 0,k=void 0,e=void 0,l=void 0,m=void 0;d=[];for(h=0;h<b.length;++h)k=b[h],"string"==typeof k?(k=k.split(/\s*:\s*/),e=k[0],l=null,m=k[1]):(e=k.check,l=k.left,m=k.right),f||(f=k,f=f.element?f.element:e?e.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element),l instanceof CKEDITOR.style&&(l=z(l)),d.push({check:e==f?null:e,left:l,right:"string"==typeof m?C(m):m});b=f;c[b]||(c[b]=[]);c[b].push(d)}}},check:function(a,d,c){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(a)){for(var f=a.length;f--;)if(this.check(a[f],d,c))return!0;return!1}var h,k;if("string"==typeof a){k=a+"\x3c"+(!1===d?"0":"1")+(c?"1":"0")+"\x3e";if(k in this._.cachedChecks)return this._.cachedChecks[k];f=g(a).$1;h=f.styles;var e=f.classes;f.name=f.elements;f.classes=e=e?e.split(/\s*,\s*/):[];f.styles=b(h);f.attributes=b(f.attributes);f.children=[];e.length&&(f.attributes["class"]=e.join(" "));h&&(f.attributes.style=CKEDITOR.tools.writeCssText(f.styles));h=f}else f=a.getDefinition(),h=f.styles,e=f.attributes||{},h&&!CKEDITOR.tools.isEmpty(h)?(h=E(h),e.style=CKEDITOR.tools.writeCssText(h,!0)):h={},h={name:f.element,attributes:e,classes:e["class"]?e["class"].split(/\s+/):[],styles:h,children:[]};var e=CKEDITOR.tools.clone(h),l=[],m;if(!1!==d&&(m=this._.transformations[h.name])){for(f=0;f<m.length;++f)y(this,h,m[f]);u(h)}p(this,e,l,{doFilter:!0,doTransform:!1!==d,skipRequired:!c,skipFinalValidation:!c});d=0<l.length?!1:CKEDITOR.tools.objectCompare(h.attributes,e.attributes,!0)?!0:!1;"string"==typeof a&&(this._.cachedChecks[k]=d);return d},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(d,c){var g=a.slice(),f;if(this.check(G[d]))return d;for(c||(g=g.reverse());f=g.pop();)if(this.check(f))return b[f];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id];delete this._;delete this.allowedContent;delete this.disallowedContent}};var O={styles:1,attributes:1,classes:1},P={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},I=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,T={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},Q=/^cke:(object|embed|param)$/,R=/^(object|embed|param)$/,M;M=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width");this.lengthToStyle(a,"height")},sizeToAttribute:function(a){this.lengthToAttribute(a,"width");this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,d){d=d||b;if(!(d in a.styles)){var c=a.attributes[b];c&&(/^\d+$/.test(c)&&(c+="px"),a.styles[d]=c)}delete a.attributes[b]},lengthToAttribute:function(a,b,d){d=d||b;if(!(d in a.attributes)){var c=a.styles[b],g=c&&c.match(/^(\d+)(?:\.\d*)?px$/);g?a.attributes[d]=g[1]:"cke-test"==c&&(a.attributes[d]="cke-test")}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;if("left"==b||"right"==b)a.styles["float"]=b}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];if("left"==b||"right"==b)a.attributes.align=b}delete a.styles["float"]},splitBorderShorthand:function(a){function b(c){a.styles["border-top-width"]=d[c[0]];a.styles["border-right-width"]=d[c[1]];a.styles["border-bottom-width"]=d[c[2]];a.styles["border-left-width"]=d[c[3]]}if(a.styles.border){var d=a.styles.border.match(/([\.\d]+\w+)/g)||["0px"];switch(d.length){case 1:a.styles["border-width"]=d[0];break;case 2:b([0,1,0,1]);break;case 3:b([0,1,2,1]);break;case 4:b([0,1,2,3])}a.styles["border-style"]=a.styles["border-style"]||(a.styles.border.match(/(none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|initial|inherit)/)||[])[0];a.styles["border-style"]||delete a.styles["border-style"];delete a.styles.border}},listTypeToStyle:function(a){if(a.attributes.type)switch(a.attributes.type){case"a":a.styles["list-style-type"]="lower-alpha";break;case"A":a.styles["list-style-type"]="upper-alpha";break;case"i":a.styles["list-style-type"]="lower-roman";break;case"I":a.styles["list-style-type"]="upper-roman";break;case"1":a.styles["list-style-type"]="decimal";break;default:a.styles["list-style-type"]=a.attributes.type}},splitMarginShorthand:function(a){function b(c){a.styles["margin-top"]=d[c[0]];a.styles["margin-right"]=d[c[1]];a.styles["margin-bottom"]=d[c[2]];a.styles["margin-left"]=d[c[3]]}if(a.styles.margin){var d=a.styles.margin.match(/(\-?[\.\d]+\w+)/g)||["0px"];switch(d.length){case 1:a.styles.margin=d[0];break;case 2:b([0,1,0,1]);break;case 3:b([0,1,2,1]);break;case 4:b([0,1,2,3])}delete a.styles.margin}},matchesStyle:D,transform:function(a,b){if("string"==typeof b)a.name=b;else{var d=b.getDefinition(),c=d.styles,g=d.attributes,f,h,k,e;a.name=d.element;for(f in g)if("class"==f)for(d=a.classes.join("|"),k=g[f].split(/\s+/);e=k.pop();)-1==d.indexOf(e)&&a.classes.push(e);else a.attributes[f]=g[f];for(h in c)a.styles[h]=c[h]}}}}(),function(){CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=!1;this.currentActive=null;this._={editor:a};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(a){this._.timer&&clearTimeout(this._.timer);a&&(this.currentActive=a);this.hasFocus||this._.locked||((a=CKEDITOR.currentInstance)&&a.focusManager.blur(1),this.hasFocus=!0,(a=this._.editor.container)&&a.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(a){function e(){var a=this._.editor;this.hasFocus&&(this.hasFocus=!1,CKEDITOR.env.chrome&&a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&a.window.$.getSelection().removeAllRanges(),(a=this._.editor.container)&&a.removeClass("cke_focus"),this._.editor.fire("blur"))}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;a||!c?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;e.call(this)},c,this)}},add:function(a,e){var c=a.getCustomData("focusmanager");if(!c||c!=this){c&&c.remove(a);var c="focus",f="blur";e&&(CKEDITOR.env.ie?(c="focusin",f="focusout"):CKEDITOR.event.useCapture=1);var h={blur:function(){a.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(a)}};a.on(c,h.focus,this);a.on(f,h.blur,this);e&&(CKEDITOR.event.useCapture=0);a.setCustomData("focusmanager",this);a.setCustomData("focusmanager_handlers",h)}},remove:function(a){a.removeCustomData("focusmanager");var e=a.removeCustomData("focusmanager_handlers");a.removeListener("blur",e.blur);a.removeListener("focus",e.focus)}}}(),CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this},function(){var a,e=function(c){c=c.data;var h=c.getKeystroke(),e=this.keystrokes[h],l=this._.editor;a=!1===l.fire("key",{keyCode:h,domEvent:c});a||(e&&(a=!1!==l.execCommand(e,{from:"keystrokeHandler"})),a||(a=!!this.blockedKeystrokes[h]));a&&c.preventDefault(!0);return!a},c=function(c){a&&(a=!1,c.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",e,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac)a.on("keypress",c,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,az:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,oc:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(a,e,c){a&&CKEDITOR.lang.languages[a]||(a=this.detect(e,a));var f=this;e=function(){f[a].dir=f.rtl[a]?"rtl":"ltr";c(a,f[a])};this[a]?e():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+a+".js"),e,this)},detect:function(a,e){var c=this.languages;e=e||navigator.userLanguage||navigator.language||a;var f=e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),h=f[1],f=f[2];c[h+"-"+f]?h=h+"-"+f:c[h]||(h=null);CKEDITOR.lang.detect=h?function(){return h}:function(a){return a};return h||a}}}(),CKEDITOR.scriptLoader=function(){var a={},e={};return{load:function(c,f,h,m){var l="string"==typeof c;l&&(c=[c]);h||(h=CKEDITOR);var k=c.length,d=[],b=[],g=function(a){f&&(l?f.call(h,a):f.call(h,d,b))};if(0===k)g(!0);else{var n=function(a,c){(c?d:b).push(a);0>=--k&&(m&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),g(c))},q=function(b,d){a[b]=1;var c=e[b];delete e[b];for(var g=0;g<c.length;g++)c[g](b,d)},p=function(b){if(a[b])n(b,!0);else{var d=e[b]||(e[b]=[]);d.push(n);if(!(1<d.length)){var c=new CKEDITOR.dom.element("script");c.setAttributes({type:"text/javascript",src:b});f&&(CKEDITOR.env.ie&&(8>=CKEDITOR.env.version||CKEDITOR.env.ie9Compat)?c.$.onreadystatechange=function(){if("loaded"==c.$.readyState||"complete"==c.$.readyState)c.$.onreadystatechange=null,q(b,!0)}:(c.$.onload=function(){setTimeout(function(){q(b,!0)},0)},c.$.onerror=function(){q(b,!1)}));c.appendTo(CKEDITOR.document.getHead())}}};m&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var w=0;w<k;w++)p(c[w])}},queue:function(){function a(){var c;(c=f[0])&&this.load(c.scriptUrl,c.callback,CKEDITOR,0)}var f=[];return function(h,e){var l=this;f.push({scriptUrl:h,callback:function(){e&&e.apply(this,arguments);f.shift();a.call(l)}});1==f.length&&a.call(this)}}()}}(),CKEDITOR.resourceManager=function(a,e){this.basePath=a;this.fileName=e;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(a,e){if(this.registered[a])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.');var c=this.registered[a]=e||{};c.name=a;c.path=this.getPath(a);CKEDITOR.fire(a+
CKEDITOR.tools.capitalize(this.fileName)+"Ready",c);return this.get(a)},get:function(a){return this.registered[a]||null},getPath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(e&&e.dir||this.basePath+a+"/")},getFilePath:function(a){var e=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(e?e.file:this.fileName+".js"))},addExternal:function(a,e,c){a=a.split(",");for(var f=0;f<a.length;f++){var h=a[f];c||(e=e.replace(/[^\/]+$/,function(a){c=a;return""}));this.externals[h]={dir:e,file:c||this.fileName+".js"}}},load:function(a,e,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var f=this.loaded,h=this.registered,m=[],l={},k={},d=0;d<a.length;d++){var b=a[d];if(b)if(f[b]||h[b])k[b]=this.get(b);else{var g=this.getFilePath(b);m.push(g);g in l||(l[g]=[]);l[g].push(b)}}CKEDITOR.scriptLoader.load(m,function(a,b){if(b.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+l[b[0]].join(",")+'" was not found at "'+b[0]+'".');for(var d=0;d<a.length;d++)for(var g=l[a[d]],h=0;h<g.length;h++){var m=g[h];k[m]=this.get(m);f[m]=1}e.call(c,k)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){var e={};return function(c,f,h){var m={},l=function(c){a.call(this,c,function(a){CKEDITOR.tools.extend(m,a);var b=[],c;for(c in a){var k=a[c],q=k&&k.requires;if(!e[c]){if(k.icons)for(var p=k.icons.split(","),w=p.length;w--;)CKEDITOR.skin.addIcon(p[w],k.path+"icons/"+(CKEDITOR.env.hidpi&&k.hidpi?"hidpi/":"")+p[w]+".png");e[c]=1}if(q)for(q.split&&(q=q.split(",")),k=0;k<q.length;k++)m[q[k]]||b.push(q[k])}if(b.length)l.call(this,b);else{for(c in m)k=m[c],k.onLoad&&!k.onLoad._called&&(!1===k.onLoad()&&delete m[c],k.onLoad._called=1);f&&f.call(h||window,m)}},this)};l.call(this,c)}}),CKEDITOR.plugins.setLang=function(a,e,c){var f=this.get(a);a=f.langEntries||(f.langEntries={});f=f.lang||(f.lang=[]);f.split&&(f=f.split(","));-1==CKEDITOR.tools.indexOf(f,e)&&f.push(e);a[e]=c},CKEDITOR.ui=function(a){if(a.ui)return a.ui;this.items={};this.instances={};this.editor=a;this._={handlers:{}};return this},CKEDITOR.ui.prototype={add:function(a,e,c){c.name=a.toLowerCase();var f=this.items[a]={type:e,command:c.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(f,c)},get:function(a){return this.instances[a]},create:function(a){var e=this.items[a],c=e&&this._.handlers[e.type],f=e&&e.command&&this.editor.getCommand(e.command),c=c&&c.create.apply(this,e.args);this.instances[a]=c;f&&f.uiItems.push(c);c&&!c.type&&(c.type=e.type);return c},addHandler:function(a,e){this._.handlers[a]=e},space:function(a){return CKEDITOR.document.getById(this.spaceId(a))},spaceId:function(a){return this.editor.id+"_"+a}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function a(a,b,d){CKEDITOR.event.call(this);a=a&&CKEDITOR.tools.clone(a);if(void 0!==b){if(!(b instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!d)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&d==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!c(b,d))throw Error('The specified element mode is not supported on element: "'+b.getName()+'".');this.element=b;this.elementMode=d;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(b.getId()||b.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={};this.commands={};this.templates={};this.name=this.name||e();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",f);this.on("selectionChange",function(a){m(this,a.data.path)});this.on("activeFilterChange",function(){m(this,this.elementPath(),!0)});this.on("mode",f);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){"destroyed"!==this.status?k(this,a):CKEDITOR.warn("editor-incorrect-destroy")},0,this)}function e(){do var a="editor"+ ++w;while(CKEDITOR.instances[a]);return a}function c(a,b){return b==CKEDITOR.ELEMENT_MODE_INLINE?a.is(CKEDITOR.dtd.$editable)||a.is("textarea"):b==CKEDITOR.ELEMENT_MODE_REPLACE?!a.is(CKEDITOR.dtd.$nonBodyContent):1}function f(){var a=this.commands,b;for(b in a)h(this,a[b])}function h(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function m(a,b,d){if(b){var c,g,f=a.commands;for(g in f)c=f[g],(d||c.contextSensitive)&&c.refresh(a,b)}}function l(a){var b=a.config.customConfig;if(!b)return!1;var b=CKEDITOR.getUrl(b),d=u[b]||(u[b]={});d.fn?(d.fn.call(a,a.config),CKEDITOR.getUrl(a.config.customConfig)!=b&&l(a)||a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){d.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};l(a)});return!0}function k(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0);delete a.config.on}c=a.config;a.readOnly=c.readOnly?!0:a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.element.hasAttribute("disabled")||a.element.hasAttribute("readonly"):!1;a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1;a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0;a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode;a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode;c.skin&&(CKEDITOR.skinName=c.skin);a.fireOnce("configLoaded");a.dataProcessor=new CKEDITOR.htmlDataProcessor(a);a.filter=a.activeFilter=new CKEDITOR.filter(a);d(a)});b&&null!=b.customConfig&&(a.config.customConfig=b.customConfig);l(a)||a.fireOnce("customConfigLoaded")}function d(a){CKEDITOR.skin.loadPart("editor",function(){b(a)})}function b(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,d){var c=a.config.title;a.langCode=b;a.lang=CKEDITOR.tools.prototypedCopy(d);a.title="string"==typeof c||!1===c?c:[a.lang.editor,a.name].join(", ");a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir);a.fire("langLoaded");g(a)})}function g(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})},null,null,1);n(a)})}function n(a){var b=a.config,d=b.plugins,c=b.extraPlugins,g=b.removePlugins;if(c)var f=new RegExp("(?:^|,)(?:"+c.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),d=d.replace(f,""),d=d+(","+c);if(g)var h=new RegExp("(?:^|,)(?:"+g.replace(/\s*,\s*/g,"|")+")(?\x3d,|$)","g"),d=d.replace(h,"");CKEDITOR.env.air&&(d+=",adobeair");CKEDITOR.plugins.load(d.split(","),function(d){var c=[],g=[],f=[];a.plugins=d;for(var k in d){var e=d[k],l=e.lang,m=null,r=e.requires,n;CKEDITOR.tools.isArray(r)&&(r=r.join(","));if(r&&(n=r.match(h)))for(;r=n.pop();)CKEDITOR.error("editor-plugin-required",{plugin:r.replace(",",""),requiredBy:k});l&&!a.lang[k]&&(l.split&&(l=l.split(",")),0<=CKEDITOR.tools.indexOf(l,a.langCode)?m=a.langCode:(m=a.langCode.replace(/-.*/,""),m=m!=a.langCode&&0<=CKEDITOR.tools.indexOf(l,m)?m:0<=CKEDITOR.tools.indexOf(l,"en")?"en":l[0]),e.langEntries&&e.langEntries[m]?(a.lang[k]=e.langEntries[m],m=null):f.push(CKEDITOR.getUrl(e.path+"lang/"+m+".js")));g.push(m);c.push(e)}CKEDITOR.scriptLoader.load(f,function(){for(var d=["beforeInit","init","afterInit"],f=0;f<d.length;f++)for(var h=0;h<c.length;h++){var k=c[h];0===f&&g[h]&&k.lang&&k.langEntries&&(a.lang[k.name]=k.langEntries[g[h]]);if(k[d[f]])k[d[f]](a)}a.fireOnce("pluginsLoaded");b.keystrokes&&a.setKeystroke(a.config.keystrokes);for(h=0;h<a.config.blockedKeystrokes.length;h++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[h]]=1;a.status="loaded";a.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,a)})})}function q(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b));a.is("textarea")?a.setValue(b):a.setHtml(b);return!0}return!1}function p(a,b){function d(a){var b=a.startContainer,c=a.endContainer;return b.is&&(b.is("tr")||b.is("td")&&b.equals(c)&&a.endOffset===b.getChildCount())?!0:!1}function c(a){var b=a.startContainer;return b.is("tr")?a.cloneContents():b.clone(!0)}for(var g=new CKEDITOR.dom.documentFragment,f,h,k,e=0;e<a.length;e++){var l=a[e],m=l.startContainer.getAscendant("tr",!0);d(l)?(f||(f=m.getAscendant("table").clone(),f.append(m.getAscendant({thead:1,tbody:1,tfoot:1}).clone()),g.append(f),f=f.findOne("thead, tbody, tfoot")),h&&h.equals(m)||(h=m,k=m.clone(),f.append(k)),k.append(c(l))):g.append(l.cloneContents())}return f?g:b.getHtmlFromRange(a[0])}a.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=a;var w=0,u={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){b.name=a.toLowerCase();var d=new CKEDITOR.command(this,b);this.mode&&h(this,d);return this.commands[a]=d},_attachToForm:function(){function a(b){d.updateElement();d._.required&&!c.getValue()&&!1===d.fire("required")&&b.data.preventDefault()}function b(a){return!!(a&&a.call&&a.apply)}var d=this,c=d.element,g=new CKEDITOR.dom.element(c.$.form);c.is("textarea")&&g&&(g.on("submit",a),b(g.$.submit)&&(g.$.submit=CKEDITOR.tools.override(g.$.submit,function(b){return function(){a();b.apply?b.apply(this):b()}})),d.on("destroy",function(){g.removeListener("submit",a)}))},destroy:function(a){this.fire("beforeDestroy");!a&&q.call(this);this.editable(null);this.filter&&(this.filter.destroy(),delete this.filter);delete this.activeFilter;this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){a=this.getSelection();if(!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null},execCommand:function(a,b){var d=this.getCommand(a),c={name:a,commandData:b||{},command:d};return d&&d.state!=CKEDITOR.TRISTATE_DISABLED&&!1!==this.fire("beforeCommandExec",c)&&(c.returnValue=d.exec(c.commandData),!d.async&&!1!==this.fire("afterCommandExec",c))?c.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():"");b={dataValue:b};!a&&this.fire("getData",b);return b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");"string"!=typeof a&&(a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"");return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,d){var c=!0,g=b;b&&"object"==typeof b&&(d=b.internal,g=b.callback,c=!b.noSnapshot);!d&&c&&this.fire("saveSnapshot");if(g||!d)this.once("dataReady",function(a){!d&&c&&this.fire("saveSnapshot");g&&g.call(a.editor)});a={dataValue:a};!d&&this.fire("setData",a);this._.data=a.dataValue;!d&&this.fire("afterSetData",a)},setReadOnly:function(a){a=null==a||a;this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b,d){this.fire("insertHtml",{dataValue:a,mode:b,range:d})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},getSelectedHtml:function(a){var b=this.editable(),d=this.getSelection(),d=d&&d.getRanges();if(!b||!d||0===d.length)return null;b=p(d,b);return a?b.getHtml():b},extractSelectedHtml:function(a,b){var d=this.editable(),c=this.getSelection().getRanges(),g=new CKEDITOR.dom.documentFragment,f;if(!d||0===c.length)return null;for(f=0;f<c.length;f++)g.append(d.extractHtmlFromRange(c[f],b));b||this.getSelection().selectRanges([c[0]]);return a?g.getHtml():g},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return q.call(this)},setKeystroke:function(){for(var a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],d,c,g=b.length;g--;)d=b[g],c=0,CKEDITOR.tools.isArray(d)&&(c=d[1],d=d[0]),c?a[d]=c:delete a[d]},getCommandKeystroke:function(a){if(a="string"===typeof a?this.getCommand(a):a){var b=a&&a.name,d=this.keystrokeHandler.keystrokes,c;if(a.fakeKeystroke)return a.fakeKeystroke;for(c in d)if(d.hasOwnProperty(c)&&d[c]==b)return c}return null},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter);this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode;b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode;if(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange")},showNotification:function(a){alert(a)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var f,h,m=0,l;f=this._.htmlPartsRegex.exec(c);){h=f.index;if(h>m)if(m=c.substring(m,h),l)l.push(m);else this.onText(m);m=this._.htmlPartsRegex.lastIndex;if(h=f[1])if(h=h.toLowerCase(),l&&CKEDITOR.dtd.$cdata[h]&&(this.onCDATA(l.join("")),l=null),!l){this.onTagClose(h);continue}if(l)l.push(f[0]);else if(h=f[3]){if(h=h.toLowerCase(),!/="/.test(h)){var k={},d,b=f[4];f=!!f[5];if(b)for(;d=a.exec(b);){var g=d[1].toLowerCase();d=d[2]||d[3]||d[4]||"";k[g]=!d&&e[g]?g:CKEDITOR.tools.htmlDecodeAttr(d)}this.onTagOpen(h,k,f);!l&&CKEDITOR.dtd.$cdata[h]&&(l=[])}}else if(h=f[2])this.onComment(h)}if(c.length>m)this.onText(c.substring(m,c.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("\x3c",a)},openTagClose:function(a,e){e?this._.output.push(" /\x3e"):this._.output.push("\x3e")},attribute:function(a,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e));this._.output.push(" ",a,'\x3d"',e,'"')},closeTag:function(a){this._.output.push("\x3c/",a,"\x3e")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("\x3c!--",a,"--\x3e")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(a){var e=this._.output.join("");a&&this.reset();return e}}}),"use strict",function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var a=this.parent.children,e=CKEDITOR.tools.indexOf(a,this),c=this.previous,f=this.next;c&&(c.next=f);f&&(f.previous=c);a.splice(e,1);this.parent=null},replaceWith:function(a){var e=this.parent.children,c=CKEDITOR.tools.indexOf(e,this),f=a.previous=this.previous,h=a.next=this.next;f&&(f.next=a);h&&(h.previous=a);e[c]=a;a.parent=this.parent;this.parent=null},insertAfter:function(a){var e=a.parent.children,c=CKEDITOR.tools.indexOf(e,a),f=a.next;e.splice(c+1,0,this);this.next=a.next;this.previous=a;a.next=this;f&&(f.previous=this);this.parent=a.parent},insertBefore:function(a){var e=a.parent.children,c=CKEDITOR.tools.indexOf(e,a);e.splice(c,0,this);this.next=a;(this.previous=a.previous)&&(a.previous.next=this);a.previous=this;this.parent=a.parent},getAscendant:function(a){var e="function"==typeof a?a:"string"==typeof a?function(c){return c.name==a}:function(c){return c.name in a},c=this.parent;for(;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(e(c))return c;c=c.parent}return null},wrapWith:function(a){this.replaceWith(a);a.add(this);return a},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(a){return a||{}}}}(),"use strict",CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(a,e){var c=this.value;if(!(c=a.onComment(e,c,this)))return this.remove(),!1;if("string"!=typeof c)return this.replaceWith(c),!1;this.value=c;return!0},writeHtml:function(a,e){e&&this.filter(e);a.comment(this.value)}}),"use strict",function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(a,e){if(!(this.value=a.onText(e,this.value,this)))return this.remove(),!1},writeHtml:function(a,e){e&&this.filter(e);a.text(this.value)}})}(),"use strict",function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(a){a.write(this.value)}})}(),"use strict",CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function a(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}
var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},f=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),h={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(m,l,k){function d(a){var d;if(0<t.length)for(var c=0;c<t.length;c++){var g=t[c],f=g.name,h=CKEDITOR.dtd[f],k=x.name&&CKEDITOR.dtd[x.name];k&&!k[f]||a&&h&&!h[a]&&CKEDITOR.dtd[a]?f==x.name&&(n(x,x.parent,1),c--):(d||(b(),d=1),g=g.clone(),g.parent=x,x=g,t.splice(c,1),c--)}}function b(){for(;v.length;)n(v.shift(),x)}function g(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var b=a.children.length,d=a.children[b-1],c;d&&d.type==CKEDITOR.NODE_TEXT&&((c=CKEDITOR.tools.rtrim(d.value))?d.value=c:a.children.length=b-1)}}function n(b,d,c){d=d||x||u;var f=x;void 0===b.previous&&(q(d,b)&&(x=d,w.onTagOpen(k,{}),b.returnPoint=d=x),g(b),a(b)&&!b.children.length||d.add(b),"pre"==b.name&&(r=!1),"textarea"==b.name&&(A=!1));b.returnPoint?(x=b.returnPoint,delete b.returnPoint):x=c?d:f}function q(a,b){if((a==u||"body"==a.name)&&k&&(!a.name||CKEDITOR.dtd[a.name][k])){var d,c;return(d=b.attributes&&(c=b.attributes["data-cke-real-element-type"])?c:b.name)&&d in CKEDITOR.dtd.$inline&&!(d in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function p(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var w=new CKEDITOR.htmlParser,u=l instanceof CKEDITOR.htmlParser.element?l:"string"==typeof l?new CKEDITOR.htmlParser.element(l):new CKEDITOR.htmlParser.fragment,t=[],v=[],x=u,A="textarea"==u.name,r="pre"==u.name;w.onTagOpen=function(g,h,k,l){h=new CKEDITOR.htmlParser.element(g,h);h.isUnknown&&k&&(h.isEmpty=!0);h.isOptionalClose=l;if(a(h))t.push(h);else{if("pre"==g)r=!0;else{if("br"==g&&r){x.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==g&&(A=!0)}if("br"==g)v.push(h);else{for(;!(l=(k=x.name)?CKEDITOR.dtd[k]||(x._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):f,h.isUnknown||x.isUnknown||l[g]);)if(x.isOptionalClose)w.onTagClose(k);else if(g in c&&k in c)k=x.children,(k=k[k.length-1])&&"li"==k.name||n(k=new CKEDITOR.htmlParser.element("li"),x),!h.returnPoint&&(h.returnPoint=x),x=k;else if(g in CKEDITOR.dtd.$listItem&&!p(g,k))w.onTagOpen("li"==g?"ul":"dl",{},0,1);else if(k in e&&!p(g,k))!h.returnPoint&&(h.returnPoint=x),x=x.parent;else if(k in CKEDITOR.dtd.$inline&&t.unshift(x),x.parent)n(x,x.parent,1);else{h.isOrphan=1;break}d(g);b();h.parent=x;h.isEmpty?n(h):x=h}}};w.onTagClose=function(a){for(var d=t.length-1;0<=d;d--)if(a==t[d].name){t.splice(d,1);return}for(var c=[],g=[],f=x;f!=u&&f.name!=a;)f._.isBlockLike||g.unshift(f),c.push(f),f=f.returnPoint||f.parent;if(f!=u){for(d=0;d<c.length;d++){var h=c[d];n(h,h.parent)}x=f;f._.isBlockLike&&b();n(f,f.parent);f==x&&(x=x.parent);t=t.concat(g)}"body"==a&&(k=!1)};w.onText=function(a){if(!(x._.hasInlineStarted&&!v.length||r||A)&&(a=CKEDITOR.tools.ltrim(a),0===a.length))return;var c=x.name,g=c?CKEDITOR.dtd[c]||(x._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):f;if(!A&&!g["#"]&&c in e)w.onTagOpen(h[c]||""),w.onText(a);else{b();d();r||A||(a=a.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));a=new CKEDITOR.htmlParser.text(a);if(q(x,a))this.onTagOpen(k,{},0,1);x.add(a)}};w.onCDATA=function(a){x.add(new CKEDITOR.htmlParser.cdata(a))};w.onComment=function(a){b();d();x.add(new CKEDITOR.htmlParser.comment(a))};w.parse(m);for(b();x!=u;)n(x,x.parent,1);g(u);return u};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,c){isNaN(c)&&(c=this.children.length);var f=0<c?this.children[c-1]:null;if(f){if(a._.isBlockLike&&f.type==CKEDITOR.NODE_TEXT&&(f.value=CKEDITOR.tools.rtrim(f.value),0===f.value.length)){this.children.pop();this.add(a);return}f.next=a}a.previous=f;a.parent=this;this.children.splice(c,0,a);this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)},filter:function(a,c){c=this.getFilterContext(c);a.onRoot(c,this);this.filterChildren(a,!1,c)},filterChildren:function(a,c,f){if(this.childrenFilteredBy!=a.id){f=this.getFilterContext(f);if(c&&!this.parent)a.onRoot(f,this);this.childrenFilteredBy=a.id;for(c=0;c<this.children.length;c++)!1===this.children[c].filter(a,f)&&c--}},writeHtml:function(a,c){c&&this.filter(c);this.writeChildrenHtml(a)},writeChildrenHtml:function(a,c,f){var d=this.getFilterContext();if(f&&!this.parent&&c)c.onRoot(d,this);c&&this.filterChildren(c,!1,d);c=0;f=this.children;for(d=f.length;c<d;c++)f[c].writeHtml(a)},forEach:function(a,c,f){if(!(f||c&&this.type!=c))var d=a(this);if(!1!==d){f=this.children;for(var b=0;b<f.length;b++)d=f[b],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,c):c&&d.type!=c||a(d)}},getFilterContext:function(a){return a||{}}}}(),"use strict",function(){function a(){this.rules=[]}function e(c,f,h,e){var l,k;for(l in f)(k=c[l])||(k=c[l]=new a),k.add(f[l],h,e)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(c){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new a;this.attributeNameRules=new a;this.elementsRules={};this.attributesRules={};this.textRules=new a;this.commentRules=new a;this.rootRules=new a;c&&this.addRules(c,10)},proto:{addRules:function(a,f){var h;"number"==typeof f?h=f:f&&"priority"in f&&(h=f.priority);"number"!=typeof h&&(h=10);"object"!=typeof f&&(f={});a.elementNames&&this.elementNameRules.addMany(a.elementNames,h,f);a.attributeNames&&this.attributeNameRules.addMany(a.attributeNames,h,f);a.elements&&e(this.elementsRules,a.elements,h,f);a.attributes&&e(this.attributesRules,a.attributes,h,f);a.text&&this.textRules.add(a.text,h,f);a.comment&&this.commentRules.add(a.comment,h,f);a.root&&this.rootRules.add(a.root,h,f)},applyTo:function(a){a.filter(this)},onElementName:function(a,f){return this.elementNameRules.execOnName(a,f)},onAttributeName:function(a,f){return this.attributeNameRules.execOnName(a,f)},onText:function(a,f,h){return this.textRules.exec(a,f,h)},onComment:function(a,f,h){return this.commentRules.exec(a,f,h)},onRoot:function(a,f){return this.rootRules.exec(a,f)},onElement:function(a,f){for(var h=[this.elementsRules["^"],this.elementsRules[f.name],this.elementsRules.$],e,l=0;3>l;l++)if(e=h[l]){e=e.exec(a,f,this);if(!1===e)return null;if(e&&e!=f)return this.onNode(a,e);if(f.parent&&!f.name)break}return f},onNode:function(a,f){var h=f.type;return h==CKEDITOR.NODE_ELEMENT?this.onElement(a,f):h==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(a,f.value)):h==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(a,f.value)):null},onAttribute:function(a,f,h,e){return(h=this.attributesRules[h])?h.exec(a,e,f,this):e}}});CKEDITOR.htmlParser.filterRulesGroup=a;a.prototype={add:function(a,f,h){this.rules.splice(this.findIndex(f),0,{value:a,priority:f,options:h})},addMany:function(a,f,h){for(var e=[this.findIndex(f),0],l=0,k=a.length;l<k;l++)e.push({value:a[l],priority:f,options:h});this.rules.splice.apply(this.rules,e)},findIndex:function(a){for(var f=this.rules,h=f.length-1;0<=h&&a<f[h].priority;)h--;return h+1},exec:function(a,f){var h=f instanceof CKEDITOR.htmlParser.node||f instanceof CKEDITOR.htmlParser.fragment,e=Array.prototype.slice.call(arguments,1),l=this.rules,k=l.length,d,b,g,n;for(n=0;n<k;n++)if(h&&(d=f.type,b=f.name),g=l[n],!(a.nonEditable&&!g.options.applyToAll||a.nestedEditable&&g.options.excludeNestedEditable)){g=g.value.apply(null,e);if(!1===g||h&&g&&(g.name!=b||g.type!=d))return g;null!=g&&(e[0]=f=g)}return f},execOnName:function(a,f){for(var h=0,e=this.rules,l=e.length,k;f&&h<l;h++)k=e[h],a.nonEditable&&!k.options.applyToAll||a.nestedEditable&&k.options.excludeNestedEditable||(f=f.replace(k.value[0],k.value[1]));return f}}}(),function(){function a(a,b){function d(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function g(a,b){return function(g){if(g.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var h=[],e=c(g),l,r;if(e)for(k(e,1)&&h.push(e);e;)m(e)&&(l=f(e))&&k(l)&&((r=f(l))&&!m(r)?h.push(l):(d(n).insertAfter(l),l.remove())),e=e.previous;for(e=0;e<h.length;e++)h[e].remove();if(h=!a||!1!==("function"==typeof b?b(g):b))n||CKEDITOR.env.needsBrFiller||g.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT?n||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||g.name in CKEDITOR.dtd.tr||g.name in CKEDITOR.dtd.$listItem)?(h=c(g),h=!h||"form"==g.name&&"input"==h.name):h=!1:h=!1;h&&g.add(d(a))}}}function k(a,b){if((!n||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var d;return a.type==CKEDITOR.NODE_TEXT&&(d=a.value.match(t))&&(d.index&&((new CKEDITOR.htmlParser.text(a.value.substring(0,d.index))).insertBefore(a),a.value=d[0]),!CKEDITOR.env.needsBrFiller&&n&&(!b||a.parent.name in I)||!n&&((d=a.previous)&&"br"==d.name||!d||m(d)))?!0:!1}var e={elements:{}},n="html"==b,I=CKEDITOR.tools.extend({},r),u;for(u in I)"#"in x[u]||delete I[u];for(u in I)e.elements[u]=g(n,a.config.fillEmptyBlocks);e.root=g(n,!1);e.elements.br=function(a){return function(b){if(b.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var c=b.attributes;if("data-cke-bogus"in c||"data-cke-eol"in c)delete c["data-cke-bogus"];else{for(c=b.next;c&&h(c);)c=c.next;var g=f(b);!c&&m(b.parent)?l(b.parent,d(a)):m(c)&&g&&!m(g)&&d(a).insertBefore(c)}}}}(n);return e}function e(a,b){return a!=CKEDITOR.ENTER_BR&&!1!==b?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function c(a){for(a=a.children[a.children.length-1];a&&h(a);)a=a.previous;return a}function f(a){for(a=a.previous;a&&h(a);)a=a.previous;return a}function h(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function m(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in r||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function l(a,b){var d=a.children[a.children.length-1];a.children.push(b);b.parent=a;d&&(d.next=b,b.previous=d)}function k(a){a=a.attributes;"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1);a.contenteditable="false"}function d(a){a=a.attributes;switch(a["data-cke-editable"]){case"true":a.contenteditable="true";break;case"1":delete a.contenteditable}}function b(a){return a.replace(C,function(a,b,d){return"\x3c"+b+d.replace(F,function(a,b){return E.test(b)&&-1==d.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+"\x3e"})}function g(a,b){return a.replace(b,function(a,b,d){0===a.indexOf("\x3ctextarea")&&(a=b+p(d).replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")+"\x3c/textarea\x3e");return"\x3ccke:encoded\x3e"+encodeURIComponent(a)+"\x3c/cke:encoded\x3e"})}function n(a){return a.replace(O,function(a,b){return decodeURIComponent(b)})}function q(a){return a.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(a){return"\x3c!--"+v+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"--\x3e"})}function p(a){return a.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)})}function w(a,b){var d=b._.dataStore;return a.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return d&&d[b]||""})}function u(a,b){var d=[],c=b.config.protectedSource,g=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,c=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(c);a=a.replace(/\x3c!--[\s\S]*?--\x3e/g,function(a){return"\x3c!--{cke_tempcomment}"+(d.push(a)-
1)+"--\x3e"});for(var h=0;h<c.length;h++)a=a.replace(c[h],function(a){a=a.replace(f,function(a,b,c){return d[c]});return/cke_temp(comment)?/.test(a)?a:"\x3c!--{cke_temp}"+(d.push(a)-1)+"--\x3e"});a=a.replace(f,function(a,b,c){return"\x3c!--"+v+(b?"{C}":"")+encodeURIComponent(d[c]).replace(/--/g,"%2D%2D")+"--\x3e"});a=a.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function(a){return a.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(a,b){g[g.id]=
decodeURIComponent(b);return"{cke_protected_"+g.id++ +"}"})});return a=a.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(a,d,c,g){return"\x3c"+d+c+"\x3e"+w(p(g),b)+"\x3c/"+d+"\x3e"})}CKEDITOR.htmlDataProcessor=function(d){var c,f,h=this;this.editor=d;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=f=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(y);c.addRules(D,{applyToAll:!0});c.addRules(a(d,"data"),{applyToAll:!0});
f.addRules(B);f.addRules(z,{applyToAll:!0});f.addRules(a(d,"html"),{applyToAll:!0});d.on("toHtml",function(a){a=a.data;var c=a.dataValue,f,c=u(c,d),c=g(c,G),c=b(c),c=g(c,H),c=c.replace(P,"$1cke:$2"),c=c.replace(T,"\x3ccke:$1$2\x3e\x3c/cke:$1\x3e"),c=c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");f=a.context||d.editable().getName();var h;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&"pre"==f&&(f="div",c="\x3cpre\x3e"+c+"\x3c/pre\x3e",
h=1);f=d.document.createElement(f);f.setHtml("a"+c);c=f.getHtml().substr(1);c=c.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");h&&(c=c.replace(/^<pre>|<\/pre>$/gi,""));c=c.replace(I,"$1$2");c=n(c);c=p(c);f=!1===a.fixForBody?!1:e(a.enterMode,d.config.autoParagraph);c=CKEDITOR.htmlParser.fragment.fromHtml(c,a.context,f);f&&(h=c,!h.children.length&&CKEDITOR.dtd[h.name][f]&&(f=new CKEDITOR.htmlParser.element(f),h.add(f)));a.dataValue=c},null,null,5);d.on("toHtml",function(a){a.data.filter.applyTo(a.data.dataValue,
!0,a.data.dontFilter,a.data.enterMode)&&d.fire("dataFiltered")},null,null,6);d.on("toHtml",function(a){a.data.dataValue.filterChildren(h.dataFilter,!0)},null,null,10);d.on("toHtml",function(a){a=a.data;var b=a.dataValue,d=new CKEDITOR.htmlParser.basicWriter;b.writeChildrenHtml(d);b=d.getHtml(!0);a.dataValue=q(b)},null,null,15);d.on("toDataFormat",function(a){var b=a.data.dataValue;a.data.enterMode!=CKEDITOR.ENTER_BR&&(b=b.replace(/^<br *\/?>/i,""));a.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(b,
a.data.context,e(a.data.enterMode,d.config.autoParagraph))},null,null,5);d.on("toDataFormat",function(a){a.data.dataValue.filterChildren(h.htmlFilter,!0)},null,null,10);d.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11);d.on("toDataFormat",function(a){var b=a.data.dataValue,c=h.writer;c.reset();b.writeChildrenHtml(c);b=c.getHtml(!0);b=p(b);b=w(b,d);a.data.dataValue=b},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,d,c){var g=this.editor,
f,h,k,e;b&&"object"==typeof b?(f=b.context,d=b.fixForBody,c=b.dontFilter,h=b.filter,k=b.enterMode,e=b.protectedWhitespaces):f=b;f||null===f||(f=g.editable().getName());return g.fire("toHtml",{dataValue:a,context:f,fixForBody:d,dontFilter:c,filter:h||g.filter,enterMode:k||g.enterMode,protectedWhitespaces:e}).dataValue},toDataFormat:function(a,b){var d,c,g;b&&(d=b.context,c=b.filter,g=b.enterMode);d||null===d||(d=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:a,
filter:c||this.editor.filter,context:d,enterMode:g||this.editor.enterMode}).dataValue}};var t=/(?:&nbsp;|\xa0)$/,v="{cke_protected}",x=CKEDITOR.dtd,A="caption colgroup col thead tfoot tbody".split(""),r=CKEDITOR.tools.extend({},x.$blockLimit,x.$block),y={elements:{input:k,textarea:k}},D={attributeNames:[[/^on/,"data-cke-pa-on"],[/^srcdoc/,"data-cke-pa-srcdoc"],[/^data-cke-expando$/,""]],elements:{iframe:function(a){if(a.attributes&&a.attributes.src){var b=a.attributes.src.toLowerCase().replace(/[^a-z]/gi,
"");if(0===b.indexOf("javascript")||0===b.indexOf("data"))a.attributes["data-cke-pa-src"]=a.attributes.src,delete a.attributes.src}}}},B={elements:{embed:function(a){var b=a.parent;if(b&&"object"==b.name){var d=b.attributes.width,b=b.attributes.height;d&&(a.attributes.width=d);b&&(a.attributes.height=b)}},a:function(a){var b=a.attributes;if(!(a.children.length||b.name||b.id||a.attributes["data-cke-saved-name"]))return!1}}},z={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,
""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var d=["name","href","src"],c,g=0;g<d.length;g++)c="data-cke-saved-"+d[g],c in b&&delete b[d[g]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var d,c;a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(d=CKEDITOR.tools.indexOf(A,a.name),c=CKEDITOR.tools.indexOf(A,b.name));-1<d&&-1<c&&d!=c||(d=a.parent?a.getIndex():-1,c=b.parent?b.getIndex():-1);return d>c?
1:-1})},param:function(a){a.children=[];a.isEmpty=!0;return a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable;delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck;delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value));a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&l(a,b=new CKEDITOR.htmlParser.text);
b.value=a.attributes["data-cke-title"]||""},input:d,textarea:d},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(z.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var C=/<(a|area|img|input|source)\b([^>]*)>/gi,F=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,E=/^(href|src|name)$/i,H=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,G=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,O=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,P=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,I=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,T=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),"use strict",CKEDITOR.htmlParser.element=function(a,e){this.name=a;this.attributes=e||{};this.children=[];var c=a||"",f=c.match(/^cke:(.*)/);f&&(c=f[1]);c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c);this.isEmpty=!!CKEDITOR.dtd.$empty[a];this.isUnknown=!CKEDITOR.dtd[a];this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(a){var e={};((a instanceof CKEDITOR.htmlParser.element?a.attributes.style:a)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,f,h){"font-family"==f&&(h=h.replace(/["']/g,""));e[f.toLowerCase()]=h});return{rules:e,populate:function(a){var f=this.toString();f&&(a instanceof CKEDITOR.dom.element?a.setAttribute("style",f):a instanceof CKEDITOR.htmlParser.element?a.attributes.style=f:a.style=f)},toString:function(){var a=[],f;for(f in e)e[f]&&a.push(f,":",e[f],";");return a.join("")}}},function(){function a(a){return function(c){return c.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?c.name==a:c.name in a)}}var e=function(a,c){a=a[0];c=c[0];return a<c?-1:a>c?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,c){var e=this,l,k;c=e.getFilterContext(c);if(c.off)return!0;if(!e.parent)a.onRoot(c,e);for(;;){l=e.name;if(!(k=a.onElementName(c,l)))return this.remove(),!1;e.name=k;if(!(e=a.onElement(c,e)))return this.remove(),!1;if(e!==this)return this.replaceWith(e),!1;if(e.name==l)break;if(e.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(e),!1;if(!e.name)return this.replaceWithChildren(),!1}l=e.attributes;var d,b;for(d in l){for(k=l[d];;)if(b=a.onAttributeName(c,d))if(b!=d)delete l[d],d=b;else break;else{delete l[d];break}b&&(!1===(k=a.onAttribute(c,e,b,k))?delete l[b]:l[b]=k)}e.isEmpty||this.filterChildren(a,!1,c);return!0},filterChildren:c.filterChildren,writeHtml:function(a,c){c&&this.filter(c);var m=this.name,l=[],k=this.attributes,d,b;a.openTag(m,k);for(d in k)l.push([d,k[d]]);a.sortAttributes&&l.sort(e);d=0;for(b=l.length;d<b;d++)k=l[d],a.attribute(k[0],k[1]);a.openTagClose(m,this.isEmpty);this.writeChildrenHtml(a);this.isEmpty||a.closeTag(m)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,c=a.length;c;)a[--c].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(c){if(!c)return this.children.length?this.children[0]:null;"function"!=typeof c&&(c=a(c));for(var h=0,e=this.children.length;h<e;++h)if(c(this.children[h]))return this.children[h];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(a);return a.getHtml()},setHtml:function(a){a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children;for(var c=0,e=a.length;c<e;++c)a[c].parent=this},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(a);return a.getHtml()},split:function(a){for(var c=this.children.splice(a,this.children.length-a),e=this.clone(),l=0;l<c.length;++l)c[l].parent=e;e.children=c;c[0]&&(c[0].previous=null);0<a&&(this.children[a-
1].next=null);this.parent.add(e,this.getIndex()+1);return e},find:function(a,c){void 0===c&&(c=!1);var e=[],l;for(l=0;l<this.children.length;l++){var k=this.children[l];"function"==typeof a&&a(k)?e.push(k):"string"==typeof a&&k.name===a&&e.push(k);c&&k.find&&(e=e.concat(k.find(a,c)))}return e},addClass:function(a){if(!this.hasClass(a)){var c=this.attributes["class"]||"";this.attributes["class"]=c+(c?" ":"")+a}},removeClass:function(a){var c=this.attributes["class"];c&&((c=CKEDITOR.tools.trim(c.replace(new RegExp("(?:\\s+|^)"+
a+"(?:\\s+|$)")," ")))?this.attributes["class"]=c:delete this.attributes["class"])},hasClass:function(a){var c=this.attributes["class"];return c?(new RegExp("(?:^|\\s)"+a+"(?\x3d\\s|$)")).test(c):!1},getFilterContext:function(a){var c=[];a||(a={off:!1,nonEditable:!1,nestedEditable:!1});a.off||"off"!=this.attributes["data-cke-processor"]||c.push("off",!0);a.nonEditable||"false"!=this.attributes.contenteditable?a.nonEditable&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&c.push("nestedEditable",!0):c.push("nonEditable",!0);if(c.length){a=CKEDITOR.tools.copy(a);for(var e=0;e<c.length;e+=2)a[c[e]]=c[e+1]}return a}},!0)}(),function(){var a=/{([^}]+)}/g;CKEDITOR.template=function(a){this.source=String(a)};CKEDITOR.template.prototype.output=function(e,c){var f=this.source.replace(a,function(a,c){return void 0!==e[c]?e[c]:a});return c?c.push(f):f}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){CKEDITOR.currentInstance!=a&&(CKEDITOR.currentInstance=a,CKEDITOR.fire("currentInstance"))});a.on("blur",function(){CKEDITOR.currentInstance==a&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,a)},CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]},function(){var a={};CKEDITOR.addTemplate=function(e,c){var f=a[e];if(f)return f;f={name:e,source:c};CKEDITOR.fire("template",f);return a[e]=new CKEDITOR.template(f.source)};CKEDITOR.getTemplate=function(e){return a[e]}}(),function(){var a=[];CKEDITOR.addCss=function(e){a.push(e)};CKEDITOR.getCss=function(){return a.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(a,e){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+
a.getEditor().name+'" is already attached to the provided element.';var c=new CKEDITOR.editor(e,a,CKEDITOR.ELEMENT_MODE_INLINE),f=a.is("textarea")?a:null;f?(c.setData(f.getValue(),null,!0),a=CKEDITOR.dom.element.createFromHtml('\x3cdiv contenteditable\x3d"'+!!c.readOnly+'" class\x3d"cke_textarea_inline"\x3e'+f.getValue()+"\x3c/div\x3e",CKEDITOR.document),a.insertAfter(f),f.hide(),f.$.form&&c._attachToForm()):c.setData(a.getHtml(),null,!0);c.on("loaded",function(){c.fire("uiReady");c.editable(a);c.container=a;c.ui.contentsElement=a;c.setData(c.getData(1));c.resetDirty();c.fire("contentDom");c.mode="wysiwyg";c.fire("mode");c.status="ready";c.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,c)},null,null,1E4);c.on("destroy",function(){f&&(c.container.clearCustomData(),c.container.remove(),f.show());c.element.clearCustomData();delete c.element});return c};CKEDITOR.inlineAll=function(){var a,e,c;for(c in CKEDITOR.dtd.$editable)for(var f=CKEDITOR.document.getElementsByTag(c),h=0,m=f.count();h<m;h++)a=f.getItem(h),"true"==a.getAttribute("contenteditable")&&(e={element:a,config:{}},!1!==CKEDITOR.fire("inline",e)&&CKEDITOR.inline(a,e.config))};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function a(a,h,m,l){if(!CKEDITOR.env.isCompatible)return null;a=CKEDITOR.dom.element.get(a);if(a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';var k=new CKEDITOR.editor(h,a,l);l==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),k._.required=a.hasAttribute("required"),a.removeAttribute("required"));m&&k.setData(m,null,!0);k.on("loaded",function(){c(k);l==CKEDITOR.ELEMENT_MODE_REPLACE&&k.config.autoUpdateElement&&a.$.form&&k._attachToForm();k.setMode(k.config.startupMode,function(){k.resetDirty();k.status="ready";k.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,k)})});k.on("destroy",e);return k}function e(){var a=this.container,c=this.element;a&&(a.clearCustomData(),a.remove());c&&(c.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(c.show(),this._.required&&c.setAttribute("required","required")),delete this.element)}function c(a){var c=a.name,e=a.element,l=a.elementMode,k=a.fire("uiSpace",{space:"top",html:""}).html,d=a.fire("uiSpace",{space:"bottom",html:""}).html,b=new CKEDITOR.template('\x3c{outerEl} id\x3d"cke_{name}" class\x3d"{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+
'"  dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"application"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':"")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':"")+'\x3c{outerEl} class\x3d"cke_inner cke_reset" role\x3d"presentation"\x3e{topHtml}\x3c{outerEl} id\x3d"{contentId}" class\x3d"cke_contents cke_reset" role\x3d"presentation"\x3e\x3c/{outerEl}\x3e{bottomHtml}\x3c/{outerEl}\x3e\x3c/{outerEl}\x3e'),c=CKEDITOR.dom.element.createFromHtml(b.output({id:a.id,name:c,langDir:a.lang.dir,langCode:a.langCode,voiceLabel:a.title,topHtml:k?'\x3cspan id\x3d"'+a.ui.spaceId("top")+'" class\x3d"cke_top cke_reset_all" role\x3d"presentation" style\x3d"height:auto"\x3e'+k+"\x3c/span\x3e":"",contentId:a.ui.spaceId("contents"),bottomHtml:d?'\x3cspan id\x3d"'+a.ui.spaceId("bottom")+'" class\x3d"cke_bottom cke_reset_all" role\x3d"presentation"\x3e'+d+"\x3c/span\x3e":"",outerEl:CKEDITOR.env.ie?"span":"div"}));l==CKEDITOR.ELEMENT_MODE_REPLACE?(e.hide(),c.insertAfter(e)):e.append(c);a.container=c;a.ui.contentsElement=a.ui.space("contents");k&&a.ui.space("top").unselectable();d&&a.ui.space("bottom").unselectable();e=a.config.width;l=a.config.height;e&&c.setStyle("width",CKEDITOR.tools.cssLength(e));l&&a.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(l));c.disableContextMenu();CKEDITOR.env.webkit&&c.on("focus",function(){a.focus()});a.fireOnce("uiReady")}CKEDITOR.replace=function(c,h){return a(c,h,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(c,h,e){return a(c,h,e,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),c=0;c<a.length;c++){var e=null,l=a[c];if(l.name||l.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)")).test(l.className))continue}else if("function"==typeof arguments[0]&&(e={},!1===arguments[0](l,e)))continue;this.replace(l,e)}}};CKEDITOR.editor.prototype.addMode=function(a,c){(this._.modes||(this._.modes={}))[a]=c};CKEDITOR.editor.prototype.setMode=function(a,c){var e=this,l=this._.modes;if(a!=e.mode&&l&&l[a]){e.fire("beforeSetMode",a);if(e.mode){var k=e.checkDirty(),l=e._.previousModeData,d,b=0;e.fire("beforeModeUnload");e.editable(0);e._.previousMode=e.mode;e._.previousModeData=d=e.getData(1);"source"==e.mode&&l==d&&(e.fire("lockSnapshot",{forceUpdate:!0}),b=1);e.ui.space("contents").setHtml("");e.mode=""}else e._.previousModeData=e.getData(1);this._.modes[a](function(){e.mode=a;void 0!==k&&!k&&e.resetDirty();b?e.fire("unlockSnapshot"):"wysiwyg"==a&&e.fire("saveSnapshot");setTimeout(function(){e.fire("mode");c&&c.call(e)},0)})}};CKEDITOR.editor.prototype.resize=function(a,c,e,l){var k=this.container,d=this.ui.space("contents"),b=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;l=l?this.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}):k;l.setSize("width",a,!0);b&&(b.style.width="1%");var g=(l.$.offsetHeight||0)-(d.$.clientHeight||0),k=Math.max(c-(e?0:g),0);c=e?c+g:c;d.setStyle("height",k+"px");b&&(b.style.width="100%");this.fire("resize",{outerHeight:c,contentsHeight:k,outerWidth:a||l.getSize("width")})};CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function a(a){var b=a.editor,d=a.data.path,c=d.blockLimit,g=a.data.selection,h=g.getRanges()[0],k;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)if(g=e(g,d))g.appendBogus(),k=CKEDITOR.env.ie;l(b,d.block,c)&&h.collapsed&&!h.getCommonAncestor().isReadOnly()&&(d=h.clone(),d.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),c=new CKEDITOR.dom.walker(d),c.guard=function(a){return!f(a)||a.type==CKEDITOR.NODE_COMMENT||a.isReadOnly()},!c.checkForward()||d.checkStartOfBlock()&&d.checkEndOfBlock())&&(b=h.fixBlock(!0,b.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(b=b.getFirst(f))&&b.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(b.getText()).match(/^(?:&nbsp;|\xa0)$/)&&b.remove(),k=1,a.cancel());k&&h.select()}function e(a,b){if(a.isFake)return 0;var d=b.block||b.blockLimit,c=d&&d.getLast(f);if(!(!d||!d.isBlockBoundary()||c&&c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()||d.is("pre")||d.getBogus()))return d}function c(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),"submit"!=b&&"reset"!=b||a.data.preventDefault())}function f(a){return g(a)&&n(a)}function h(a,b){return function(d){var c=d.data.$.toElement||d.data.$.fromElement||d.data.$.relatedTarget;(c=c&&c.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(c):null)&&(b.equals(c)||b.contains(c))||a.call(this,d)}}function m(a){function b(a){return function(b,c){c&&b.type==CKEDITOR.NODE_ELEMENT&&b.is(g)&&(d=b);if(!(c||!f(b)||a&&p(b)))return!1}}var d,c=a.getRanges()[0];a=a.root;var g={table:1,ul:1,ol:1,dl:1};if(c.startPath().contains(g)){var e=c.clone();e.collapse(1);e.setStartAt(a,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(e);a.guard=b();a.checkBackward();if(d)return e=c.clone(),e.collapse(),e.setEndAt(d,CKEDITOR.POSITION_AFTER_END),a=new CKEDITOR.dom.walker(e),a.guard=b(!0),d=!1,a.checkForward(),d}return null}function l(a,b,d){return!1!==a.config.autoParagraph&&a.activeEnterMode!=CKEDITOR.ENTER_BR&&(a.editable().equals(d)&&!b||b&&"true"==b.getAttribute("contenteditable"))}function k(a){return a.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==a.config.autoParagraph?a.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function d(a){var b=a.editor;b.getSelection().scrollIntoView();setTimeout(function(){b.fire("saveSnapshot")},0)}function b(a,b,d){var c=a.getCommonAncestor(b);for(b=a=d?b:a;(a=a.getParent())&&!c.equals(a)&&1==a.getChildCount();)b=a;b.remove()}var g,n,q,p,w,u,t,v,x,A;CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b);this.editor=a;this.status="unloaded";this.hasFocus=!1;this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a))){a.focus();return}CKEDITOR.env.edge&&14<CKEDITOR.env.version&&!this.hasFocus&&this.getDocument().equals(CKEDITOR.document)&&(this.editor._.previousScrollTop=this.$.scrollTop);try{if(!CKEDITOR.env.ie||CKEDITOR.env.edge&&14<CKEDITOR.env.version||!this.getDocument().equals(CKEDITOR.document))if(CKEDITOR.env.chrome){var b=this.$.scrollTop;this.$.focus();this.$.scrollTop=b}else this.$.focus();else this.$.setActive()}catch(d){if(!CKEDITOR.env.ie)throw d;}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(a,b){var d=Array.prototype.slice.call(arguments,0);CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",b=h(b,this),d[0]=a,d[1]=b);return CKEDITOR.dom.element.prototype.on.apply(this,d)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var b=Array.prototype.slice.call(arguments,1),b=a.on.apply(a,b);this._.listeners.push(b);return b},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var a=this._.attrChanges,b,d;for(d in a)a.hasOwnProperty(d)&&(b=a[d],null!==b?this.setAttribute(d,b):this.removeAttribute(d))},attachClass:function(a){var b=this.getCustomData("classes");this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var d=this.getAttribute(a);b!==d&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=d),this.setAttribute(a,b))},insertText:function(a){this.editor.focus();this.insertHtml(this.transformPlainTextToHtml(a),"text")},transformPlainTextToHtml:function(a){var b=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(a,b)},insertHtml:function(a,b,c){var g=this.editor;g.focus();g.fire("saveSnapshot");c||(c=g.getSelection().getRanges()[0]);u(this,b||"html",a,c);c.select();d(this);this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(a,b,d){u(this,d||"html",a,b);this.editor.fire("afterInsertHtml",{intoRange:b})},insertElement:function(a,b){var c=this.editor;c.focus();c.fire("saveSnapshot");var g=c.activeEnterMode,c=c.getSelection(),e=a.getName(),e=CKEDITOR.dtd.$block[e];b||(b=c.getRanges()[0]);this.insertElementIntoRange(a,b)&&(b.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),e&&((e=a.getNext(function(a){return f(a)&&!p(a)}))&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(CKEDITOR.dtd.$block)?e.getDtd()["#"]?b.moveToElementEditStart(e):b.moveToElementEditEnd(a):e||g==CKEDITOR.ENTER_BR||(e=b.fixBlock(!0,g==CKEDITOR.ENTER_DIV?"div":"p"),b.moveToElementEditStart(e))));c.selectRanges([b]);d(this)},insertElementIntoSelection:function(a){this.insertElement(a)},insertElementIntoRange:function(a,b){var d=this.editor,c=d.config.enterMode,g=a.getName(),f=CKEDITOR.dtd.$block[g];if(b.checkReadOnly())return!1;b.deleteContents(1);b.startContainer.type==CKEDITOR.NODE_ELEMENT&&(b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})?t(b):b.startContainer.is(CKEDITOR.dtd.$list)&&v(b));var e,h;if(f)for(;(e=b.getCommonAncestor(0,1))&&(h=CKEDITOR.dtd[e.getName()])&&(!h||!h[g]);)e.getName()in CKEDITOR.dtd.span?b.splitElement(e):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(e),b.collapse(!0),e.remove()):b.splitBlock(c==CKEDITOR.ENTER_DIV?"div":"p",d.editable());b.insertNode(a);return!0},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a));this.setHtml(a);this.fixInitialSelection();"unloaded"==this.status&&(this.status="ready");this.editor.fire("dataReady")},getData:function(a){var b=this.getHtml();a||(b=this.editor.dataProcessor.toDataFormat(b));return b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");this.status="detached";var a=this.editor;this._.detach();delete a.document;delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function a(){var b=d.getDocument().$,c=b.getSelection(),g;a:if(c.anchorNode&&c.anchorNode==d.$)g=!0;else{if(CKEDITOR.env.webkit&&(g=d.getDocument().getActive())&&g.equals(d)&&!c.anchorNode){g=!0;break a}g=void 0}g&&(g=new CKEDITOR.dom.range(d),g.moveToElementEditStart(d),b=b.createRange(),b.setStart(g.startContainer.$,g.startOffset),b.collapse(!0),c.removeAllRanges(),c.addRange(b))}function b(){var a=d.getDocument().$,c=a.selection,g=d.getDocument().getActive();"None"==c.type&&g.equals(d)&&(c=new CKEDITOR.dom.range(d),a=a.body.createTextRange(),c.moveToElementEditStart(d),c=c.startContainer,c.type!=CKEDITOR.NODE_ELEMENT&&(c=c.getParent()),a.moveToElementText(c.$),a.collapse(!0),a.select())}var d=this;if(CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks))this.hasFocus&&(this.focus(),b());else if(this.hasFocus)this.focus(),a();else this.once("focus",function(){a()},null,null,-999)},getHtmlFromRange:function(a){if(a.collapsed)return new CKEDITOR.dom.documentFragment(a.document);a={doc:this.getDocument(),range:a.clone()};x.eol.detect(a,this);x.bogus.exclude(a);x.cell.shrink(a);a.fragment=a.range.cloneContents();x.tree.rebuild(a,this);x.eol.fix(a,this);return new CKEDITOR.dom.documentFragment(a.fragment.$)},extractHtmlFromRange:function(a,b){var d=A,c={range:a,doc:a.document},g=this.getHtmlFromRange(a);if(a.collapsed)return a.optimize(),g;a.enlarge(CKEDITOR.ENLARGE_INLINE,1);d.table.detectPurge(c);c.bookmark=a.createBookmark();delete c.range;var f=this.editor.createRange();f.moveToPosition(c.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START);c.targetBookmark=f.createBookmark();d.list.detectMerge(c,this);d.table.detectRanges(c,this);d.block.detectMerge(c,this);c.tableContentsRanges?(d.table.deleteRanges(c),a.moveToBookmark(c.bookmark),c.range=a):(a.moveToBookmark(c.bookmark),c.range=a,a.extractContents(d.detectExtractMerge(c)));a.moveToBookmark(c.targetBookmark);a.optimize();d.fixUneditableRangePosition(a);d.list.merge(c,this);d.table.purge(c,this);d.block.merge(c,this);if(b){d=a.startPath();if(c=a.checkStartOfBlock()&&a.checkEndOfBlock()&&d.block&&!a.root.equals(d.block)){a:{var c=d.block.getElementsByTag("span"),f=0,e;if(c)for(;e=c.getItem(f++);)if(!n(e)){c=!0;break a}c=!1}c=!c}c&&(a.moveToPosition(d.block,CKEDITOR.POSITION_BEFORE_START),d.block.remove())}else d.autoParagraph(this.editor,a),q(a.startContainer)&&a.startContainer.appendBogus();a.startContainer.mergeSiblings();return g},setup:function(){var a=this.editor;this.attachListener(a,"beforeGetData",function(){var b=this.getData();this.is("textarea")||!1!==a.config.ignoreEmptyParagraph&&(b=b.replace(w,function(a,b){return b}));a.setData(b,null,1)},this);this.attachListener(a,"getSnapshot",function(a){a.data=this.getData(1)},this);this.attachListener(a,"afterSetData",function(){this.setData(a.getData(1))},this);this.attachListener(a,"loadSnapshot",function(a){this.setData(a.data,1)},this);this.attachListener(a,"beforeFocus",function(){var b=a.getSelection();(b=b&&b.getNative())&&"Control"==b.type||this.focus()},this);this.attachListener(a,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode,a.data.range)},this);this.attachListener(a,"insertElement",function(a){this.insertElement(a.data)},this);this.attachListener(a,"insertText",function(a){this.insertText(a.data)},this);this.setReadOnly(a.readOnly);this.attachClass("cke_editable");a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):a.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&a.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed");this.attachClass("cke_contents_"+a.config.contentsLangDirection);a.keystrokeHandler.blockedKeystrokes[8]=+a.readOnly;a.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);if(CKEDITOR.env.webkit)this.on("scroll",function(){a._.previousScrollTop=a.editable().$.scrollTop},null,null,-1);if(CKEDITOR.env.edge&&14<CKEDITOR.env.version){var d=function(){var b=a.editable();null!=a._.previousScrollTop&&b.getDocument().equals(CKEDITOR.document)&&(b.$.scrollTop=a._.previousScrollTop,a._.previousScrollTop=null,this.removeListener("scroll",d))};this.on("scroll",d)}a.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,a.once("contentDom",function(){a.focusManager.focus(this)},this));this.isInline()&&this.changeAttr("tabindex",a.tabIndex);if(!this.is("textarea")){a.document=this.getDocument();a.window=this.getWindow();var e=a.document;this.changeAttr("spellcheck",!a.config.disableNativeSpellChecker);var h=a.config.contentsLangDirection;this.getDirection(1)!=h&&this.changeAttr("dir",h);var k=CKEDITOR.getCss();if(k){var h=e.getHead(),l=h.getCustomData("stylesheet");l?k!=l.getText()&&(CKEDITOR.env.ie&&9>CKEDITOR.env.version?l.$.styleSheet.cssText=k:l.setText(k)):(k=e.appendStyleText(k),k=new CKEDITOR.dom.element(k.ownerNode||k.owningElement),h.setCustomData("stylesheet",k),k.data("cke-temp",1))}h=e.getCustomData("stylesheet_ref")||0;e.setCustomData("stylesheet_ref",h+1);this.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling);this.attachListener(this,"click",function(a){a=a.data;var b=(new CKEDITOR.dom.elementPath(a.getTarget(),this)).contains("a");b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var n={8:1,46:1};this.attachListener(a,"key",function(b){if(a.readOnly)return!0;var d=b.data.domEvent.getKey(),c;if(d in n){b=a.getSelection();var f,e=b.getRanges()[0],h=e.startPath(),k,l,t,d=8==d;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(f=b.getSelectedElement())||(f=m(b))?(a.fire("saveSnapshot"),e.moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),f.remove(),e.select(),a.fire("saveSnapshot"),c=1):e.collapsed&&((k=h.block)&&(t=k[d?"getPrevious":"getNext"](g))&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("table")&&e[d?"checkStartOfBlock":"checkEndOfBlock"]()?(a.fire("saveSnapshot"),e[d?"checkEndOfBlock":"checkStartOfBlock"]()&&k.remove(),e["moveToElementEdit"+(d?"End":"Start")](t),e.select(),a.fire("saveSnapshot"),c=1):h.blockLimit&&h.blockLimit.is("td")&&(l=h.blockLimit.getAscendant("table"))&&e.checkBoundaryOfElement(l,d?CKEDITOR.START:CKEDITOR.END)&&(t=l[d?"getPrevious":"getNext"](g))?(a.fire("saveSnapshot"),e["moveToElementEdit"+(d?"End":"Start")](t),e.checkStartOfBlock()&&e.checkEndOfBlock()?t.remove():e.select(),a.fire("saveSnapshot"),c=1):(l=h.contains(["td","th","caption"]))&&e.checkBoundaryOfElement(l,d?CKEDITOR.START:CKEDITOR.END)&&(c=1))}return!c});a.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(b){b.data.getKeystroke()in n&&!this.getFirst(f)&&(this.appendBogus(),b=a.createRange(),b.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),b.select())});this.attachListener(this,"dblclick",function(b){if(a.readOnly)return!1;b={element:b.data.getTarget()};a.fire("doubleclick",b)});CKEDITOR.env.ie&&this.attachListener(this,"click",c);CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(b){var d=b.data.getTarget();d.is("img","hr","input","textarea","select")&&!d.isReadOnly()&&(a.getSelection().selectElement(d),d.is("input","textarea","select")&&b.data.preventDefault())});CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(b){(b=b.data.getTarget())&&b.is("img")&&a.getSelection().selectElement(b)});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(b){if(2==b.data.$.button&&(b=b.data.getTarget(),!b.getOuterHtml().replace(w,""))){var d=a.createRange();d.moveToElementEditStart(b);d.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));CKEDITOR.env.webkit&&this.attachListener(a,"key",function(d){if(a.readOnly)return!0;d=d.data.domEvent.getKey();if(d in n){var c=8==d,g=a.getSelection().getRanges()[0];d=g.startPath();if(g.collapsed)a:{var f=d.block;if(f&&g[c?"checkStartOfBlock":"checkEndOfBlock"]()&&g.moveToClosestEditablePosition(f,!c)&&g.collapsed){if(g.startContainer.type==CKEDITOR.NODE_ELEMENT){var e=g.startContainer.getChild(g.startOffset-(c?1:0));if(e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("hr")){a.fire("saveSnapshot");e.remove();d=!0;break a}}g=g.startPath().block;if(!g||g&&g.contains(f))d=void 0;else{a.fire("saveSnapshot");var h;(h=(c?g:f).getBogus())&&h.remove();h=a.getSelection();e=h.createBookmarks();(c?f:g).moveChildren(c?g:f,!1);d.lastElement.mergeSiblings();b(f,g,!c);h.selectBookmarks(e);d=!0}}else d=!1}else c=g,h=d.block,g=c.endPath().block,h&&g&&!h.equals(g)?(a.fire("saveSnapshot"),(f=h.getBogus())&&f.remove(),c.enlarge(CKEDITOR.ENLARGE_INLINE),c.deleteContents(),g.getParent()&&(g.moveChildren(h,!1),d.lastElement.mergeSiblings(),b(h,g,!0)),c=a.getSelection().getRanges()[0],c.collapse(1),c.optimize(),""===c.startContainer.getHtml()&&c.startContainer.appendBogus(),c.select(),d=!0):d=!1;if(!d)return;a.getSelection().scrollIntoView();a.fire("saveSnapshot");return!1}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();var b=a.getHead();if(b.getCustomData("stylesheet")){var d=a.getCustomData("stylesheet_ref");--d?a.setCustomData("stylesheet_ref",d):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;if(b&&a)return 0;arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null));return b};CKEDITOR.on("instanceLoaded",function(b){var d=b.editor;d.on("insertElement",function(a){a=a.data;a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))});d.on("selectionChange",function(b){if(!d.readOnly){var c=d.getSelection();c&&!c.isLocked&&(c=d.checkDirty(),d.fire("lockSnapshot"),a(b),d.fire("unlockSnapshot"),!c&&d.resetDirty())}})});CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var d=b.title;a.changeAttr("role","textbox");a.changeAttr("aria-label",d);d&&a.changeAttr("title",d);var c=b.fire("ariaEditorHelpLabel",{}).label;if(c&&(d=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var g=CKEDITOR.tools.getNextId(),c=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+c+"\x3c/span\x3e");d.append(c);a.changeAttr("aria-describedby",g)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");g=CKEDITOR.dom.walker.whitespaces(!0);n=CKEDITOR.dom.walker.bookmark(!1,!0);q=CKEDITOR.dom.walker.empty();p=CKEDITOR.dom.walker.bogus();w=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi;u=function(){function a(b){return b.type==CKEDITOR.NODE_ELEMENT}function b(d,c){var g,f,e,h,k=[],l=c.range.startContainer;g=c.range.startPath();for(var l=n[l.getName()],m=0,t=d.getChildren(),u=t.count(),q=-1,v=-1,x=0,C=g.contains(n.$list);m<u;++m)g=t.getItem(m),a(g)?(e=g.getName(),C&&e in CKEDITOR.dtd.$list?k=k.concat(b(g,c)):(h=!!l[e],"br"!=e||!g.data("cke-eol")||m&&m!=u-1||(x=(f=m?k[m-1].node:t.getItem(m+1))&&(!a(f)||!f.is("br")),f=f&&a(f)&&n.$block[f.getName()]),-1!=q||h||(q=m),h||(v=m),k.push({isElement:1,isLineBreak:x,isBlock:g.isBlockBoundary(),hasBlockSibling:f,node:g,name:e,allowed:h}),f=x=0)):k.push({isElement:0,node:g,allowed:1});-1<q&&(k[q].firstNotAllowed=1);-1<v&&(k[v].lastNotAllowed=1);return k}function d(b,c){var g=[],f=b.getChildren(),e=f.count(),h,k=0,l=n[c],m=!b.is(n.$inline)||b.is("br");for(m&&g.push(" ");k<e;k++)h=f.getItem(k),a(h)&&!h.is(l)?g=g.concat(d(h,c)):g.push(h);m&&g.push(" ");return g}function c(b){return a(b.startContainer)&&b.startContainer.getChild(b.startOffset-1)}function g(b){return b&&a(b)&&(b.is(n.$removeEmpty)||b.is("a")&&!b.isBlockBoundary())}function e(b,d,c,g){var f=b.clone(),h,k;f.setEndAt(d,CKEDITOR.POSITION_BEFORE_END);(h=(new CKEDITOR.dom.walker(f)).next())&&a(h)&&m[h.getName()]&&(k=h.getPrevious())&&a(k)&&!k.getParent().equals(b.startContainer)&&c.contains(k)&&g.contains(h)&&h.isIdentical(k)&&(h.moveChildren(k),h.remove(),e(b,d,c,g))}function h(b,d){function c(b,d){if(d.isBlock&&d.isElement&&!d.node.is("br")&&a(b)&&b.is("br"))return b.remove(),1}var g=d.endContainer.getChild(d.endOffset),f=d.endContainer.getChild(d.endOffset-1);g&&c(g,b[b.length-1]);f&&c(f,b[0])&&(d.setEnd(d.endContainer,d.endOffset-1),d.collapse())}var n=CKEDITOR.dtd,m={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},t={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},u=CKEDITOR.tools.extend({},n.$inline);delete u.br;return function(m,q,v,x){var p=m.editor,w=!1;"unfiltered_html"==q&&(q="html",w=!0);if(!x.checkReadOnly()){var A=(new CKEDITOR.dom.elementPath(x.startContainer,x.root)).blockLimit||x.root;m={type:q,dontFilter:w,editable:m,editor:p,range:x,blockLimit:A,mergeCandidates:[],zombies:[]};q=m.range;x=m.mergeCandidates;var H,L;"text"==m.type&&q.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(H=CKEDITOR.dom.element.createFromHtml("\x3cspan\x3e\x26nbsp;\x3c/span\x3e",q.document),q.insertNode(H),q.setStartAfter(H));w=new CKEDITOR.dom.elementPath(q.startContainer);m.endPath=A=new CKEDITOR.dom.elementPath(q.endContainer);if(!q.collapsed){var p=A.block||A.blockLimit,X=q.getCommonAncestor();p&&!p.equals(X)&&!p.contains(X)&&q.checkEndOfBlock()&&m.zombies.push(p);q.deleteContents()}for(;(L=c(q))&&a(L)&&L.isBlockBoundary()&&w.contains(L);)q.moveToPosition(L,CKEDITOR.POSITION_BEFORE_END);e(q,m.blockLimit,w,A);H&&(q.setEndBefore(H),q.collapse(),H.remove());H=q.startPath();if(p=H.contains(g,!1,1))q.splitElement(p),m.inlineStylesRoot=p,m.inlineStylesPeak=H.lastElement;H=q.createBookmark();(p=H.startNode.getPrevious(f))&&a(p)&&g(p)&&x.push(p);(p=H.startNode.getNext(f))&&a(p)&&g(p)&&x.push(p);for(p=H.startNode;(p=p.getParent())&&g(p);)x.push(p);q.moveToBookmark(H);if(H=v){H=m.range;if("text"==m.type&&m.inlineStylesRoot){L=m.inlineStylesPeak;q=L.getDocument().createText("{cke-peak}");for(x=m.inlineStylesRoot.getParent();!L.equals(x);)q=q.appendTo(L.clone()),L=L.getParent();v=q.getOuterHtml().split("{cke-peak}").join(v)}L=m.blockLimit.getName();if(/^\s+|\s+$/.test(v)&&"span"in CKEDITOR.dtd[L]){var N='\x3cspan data-cke-marker\x3d"1"\x3e\x26nbsp;\x3c/span\x3e';v=N+v+N}v=m.editor.dataProcessor.toHtml(v,{context:null,fixForBody:!1,protectedWhitespaces:!!N,dontFilter:m.dontFilter,filter:m.editor.activeFilter,enterMode:m.editor.activeEnterMode});L=H.document.createElement("body");L.setHtml(v);N&&(L.getFirst().remove(),L.getLast().remove());if((N=H.startPath().block)&&(1!=N.getChildCount()||!N.getBogus()))a:{var J;if(1==L.getChildCount()&&a(J=L.getFirst())&&J.is(t)&&!J.hasAttribute("contenteditable")){N=J.getElementsByTag("*");H=0;for(x=N.count();H<x;H++)if(q=N.getItem(H),!q.is(u))break a;J.moveChildren(J.getParent(1));J.remove()}}m.dataWrapper=L;H=v}if(H){J=m.range;H=J.document;var K;L=m.blockLimit;x=0;var V,N=[],S,aa;v=p=0;var Y,ba;q=J.startContainer;var w=m.endPath.elements[0],ca,A=w.getPosition(q),X=!!w.getCommonAncestor(q)&&A!=CKEDITOR.POSITION_IDENTICAL&&!(A&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);q=b(m.dataWrapper,m);for(h(q,J);x<q.length;x++){A=q[x];if(K=A.isLineBreak){K=J;Y=L;var Z=void 0,da=void 0;A.hasBlockSibling?K=1:(Z=K.startContainer.getAscendant(n.$block,1))&&Z.is({div:1,p:1})?(da=Z.getPosition(Y),da==CKEDITOR.POSITION_IDENTICAL||da==CKEDITOR.POSITION_CONTAINS?K=0:(Y=K.splitElement(Z),K.moveToPosition(Y,CKEDITOR.POSITION_AFTER_START),K=1)):K=0}if(K)v=0<x;else{K=J.startPath();!A.isBlock&&l(m.editor,K.block,K.blockLimit)&&(aa=k(m.editor))&&(aa=H.createElement(aa),aa.appendBogus(),J.insertNode(aa),CKEDITOR.env.needsBrFiller&&(V=aa.getBogus())&&V.remove(),J.moveToPosition(aa,CKEDITOR.POSITION_BEFORE_END));if((K=J.startPath().block)&&!K.equals(S)){if(V=K.getBogus())V.remove(),N.push(K);S=K}A.firstNotAllowed&&(p=1);if(p&&A.isElement){K=J.startContainer;for(Y=null;K&&!n[K.getName()][A.name];){if(K.equals(L)){K=null;break}Y=K;K=K.getParent()}if(K)Y&&(ba=J.splitElement(Y),m.zombies.push(ba),m.zombies.push(Y));else{Y=L.getName();ca=!x;K=x==q.length-1;Y=d(A.node,Y);for(var Z=[],da=Y.length,ea=0,ia=void 0,ja=0,fa=-1;ea<da;ea++)ia=Y[ea]," "==ia?(ja||ca&&!ea||(Z.push(new CKEDITOR.dom.text(" ")),fa=Z.length),ja=1):(Z.push(ia),ja=0);K&&fa==Z.length&&Z.pop();ca=Z}}if(ca){for(;K=ca.pop();)J.insertNode(K);ca=0}else J.insertNode(A.node);A.lastNotAllowed&&x<q.length-1&&((ba=X?w:ba)&&J.setEndAt(ba,CKEDITOR.POSITION_AFTER_START),p=0);J.collapse()}}1!=q.length?V=!1:(V=q[0],V=V.isElement&&"false"==V.node.getAttribute("contenteditable"));V&&(v=!0,K=q[0].node,J.setStartAt(K,CKEDITOR.POSITION_BEFORE_START),J.setEndAt(K,CKEDITOR.POSITION_AFTER_END));m.dontMoveCaret=v;m.bogusNeededBlocks=N}V=m.range;var ga;ba=m.bogusNeededBlocks;for(ca=V.createBookmark();S=m.zombies.pop();)S.getParent()&&(aa=V.clone(),aa.moveToElementEditStart(S),aa.removeEmptyBlocksAtEnd());if(ba)for(;S=ba.pop();)CKEDITOR.env.needsBrFiller?S.appendBogus():S.append(V.document.createText(""));for(;S=m.mergeCandidates.pop();)S.mergeSiblings();V.moveToBookmark(ca);if(!m.dontMoveCaret){for(S=c(V);S&&a(S)&&!S.is(n.$empty);){if(S.isBlockBoundary())V.moveToPosition(S,CKEDITOR.POSITION_BEFORE_END);else{if(g(S)&&S.getHtml().match(/(\s|&nbsp;)$/g)){ga=null;break}ga=V.clone();ga.moveToPosition(S,CKEDITOR.POSITION_BEFORE_END)}S=S.getLast(f)}ga&&V.moveToRange(ga)}}}}();t=function(){function a(b){b=new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$tableContent)};b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT};return b}function b(a,d,c){d=a.getDocument().createElement(d);a.append(d,c);return d}function d(a){var b=a.count(),c;for(b;0<b--;)c=a.getItem(b),CKEDITOR.tools.trim(c.getHtml())||(c.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&c.getChildCount()&&c.getFirst().remove())}
return function(c){var g=c.startContainer,f=g.getAscendant("table",1),e=!1;d(f.getElementsByTag("td"));d(f.getElementsByTag("th"));f=c.clone();f.setStart(g,0);f=a(f).lastBackward();f||(f=c.clone(),f.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),e=!0);f||(f=g);f.is("table")?(c.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),c.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",e)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",e)),(g=f.getBogus())&&g.remove(),c.moveToPosition(f,e?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}();v=function(){function a(b){b=new CKEDITOR.dom.walker(b);b.guard=function(a,b){if(b)return!1;if(a.type==CKEDITOR.NODE_ELEMENT)return a.is(CKEDITOR.dtd.$list)||a.is(CKEDITOR.dtd.$listItem)};b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$listItem)};return b}return function(b){var d=b.startContainer,c=!1,g;g=b.clone();g.setStart(d,0);g=a(g).lastBackward();g||(g=b.clone(),g.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),g=a(g).lastForward(),c=!0);g||(g=d);g.is(CKEDITOR.dtd.$list)?(b.setStartAt(g,CKEDITOR.POSITION_BEFORE_START),b.collapse(!0),g.remove()):((d=g.getBogus())&&d.remove(),b.moveToPosition(g,c?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),b.select())}}();x={eol:{detect:function(a,b){var d=a.range,c=d.clone(),g=d.clone(),f=new CKEDITOR.dom.elementPath(d.startContainer,b),e=new CKEDITOR.dom.elementPath(d.endContainer,b);c.collapse(1);g.collapse();f.block&&c.checkBoundaryOfElement(f.block,CKEDITOR.END)&&(d.setStartAfter(f.block),a.prependEolBr=1);e.block&&g.checkBoundaryOfElement(e.block,CKEDITOR.START)&&(d.setEndBefore(e.block),a.appendEolBr=1)},fix:function(a,b){var d=b.getDocument(),c;a.appendEolBr&&(c=this.createEolBr(d),a.fragment.append(c));!a.prependEolBr||c&&!c.getPrevious()||a.fragment.append(this.createEolBr(d),1)},createEolBr:function(a){return a.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(a){var b=a.range.getBoundaryNodes(),d=b.startNode,b=b.endNode;!b||!p(b)||d&&d.equals(b)||a.range.setEndBefore(b)}},tree:{rebuild:function(a,b){var d=a.range,c=d.getCommonAncestor(),g=new CKEDITOR.dom.elementPath(c,b),f=new CKEDITOR.dom.elementPath(d.startContainer,b),d=new CKEDITOR.dom.elementPath(d.endContainer,b),e;c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent());if(g.blockLimit.is({tr:1,table:1})){var h=g.contains("table").getParent();e=function(a){return!a.equals(h)}}else if(g.block&&g.block.is(CKEDITOR.dtd.$listItem)&&(f=f.contains(CKEDITOR.dtd.$list),d=d.contains(CKEDITOR.dtd.$list),!f.equals(d))){var k=g.contains(CKEDITOR.dtd.$list).getParent();e=function(a){return!a.equals(k)}}e||(e=function(a){return!a.equals(g.block)&&!a.equals(g.blockLimit)});this.rebuildFragment(a,b,c,e)},rebuildFragment:function(a,b,d,c){for(var g;d&&!d.equals(b)&&c(d);)g=d.clone(0,1),a.fragment.appendTo(g),a.fragment=g,d=d.getParent()}},cell:{shrink:function(a){a=a.range;var b=a.startContainer,d=a.endContainer,c=a.startOffset,g=a.endOffset;b.type==CKEDITOR.NODE_ELEMENT&&b.equals(d)&&b.is("tr")&&++c==g&&a.shrink(CKEDITOR.SHRINK_TEXT)}}};A=function(){function a(b,d){var c=b.getParent();if(c.is(CKEDITOR.dtd.$inline))b[d?"insertBefore":"insertAfter"](c)}function b(d,c,g){a(c);a(g,1);for(var f;f=g.getNext();)f.insertAfter(c),c=f;q(d)&&d.remove()}function d(a,b){var c=new CKEDITOR.dom.range(a);c.setStartAfter(b.startNode);c.setEndBefore(b.endNode);return c}return{list:{detectMerge:function(a,b){var c=d(b,a.bookmark),g=c.startPath(),f=c.endPath(),e=g.contains(CKEDITOR.dtd.$list),h=f.contains(CKEDITOR.dtd.$list);a.mergeList=e&&h&&e.getParent().equals(h.getParent())&&!e.equals(h);a.mergeListItems=g.block&&f.block&&g.block.is(CKEDITOR.dtd.$listItem)&&f.block.is(CKEDITOR.dtd.$listItem);if(a.mergeList||a.mergeListItems)c=c.clone(),c.setStartBefore(a.bookmark.startNode),c.setEndAfter(a.bookmark.endNode),a.mergeListBookmark=c.createBookmark()},merge:function(a,d){if(a.mergeListBookmark){var c=a.mergeListBookmark.startNode,g=a.mergeListBookmark.endNode,f=new CKEDITOR.dom.elementPath(c,d),e=new CKEDITOR.dom.elementPath(g,d);if(a.mergeList){var h=f.contains(CKEDITOR.dtd.$list),k=e.contains(CKEDITOR.dtd.$list);h.equals(k)||(k.moveChildren(h),k.remove())}a.mergeListItems&&(f=f.contains(CKEDITOR.dtd.$listItem),e=e.contains(CKEDITOR.dtd.$listItem),f.equals(e)||b(e,c,g));c.remove();g.remove()}}},block:{detectMerge:function(a,b){if(!a.tableContentsRanges&&!a.mergeListBookmark){var d=new CKEDITOR.dom.range(b);d.setStartBefore(a.bookmark.startNode);d.setEndAfter(a.bookmark.endNode);a.mergeBlockBookmark=d.createBookmark()}},merge:function(a,d){if(a.mergeBlockBookmark&&!a.purgeTableBookmark){var c=a.mergeBlockBookmark.startNode,g=a.mergeBlockBookmark.endNode,f=new CKEDITOR.dom.elementPath(c,d),e=new CKEDITOR.dom.elementPath(g,d),f=f.block,e=e.block;f&&e&&!f.equals(e)&&b(e,c,g);c.remove();g.remove()}}},table:function(){function a(d){var g=[],f,e=new CKEDITOR.dom.walker(d),h=d.startPath().contains(c),k=d.endPath().contains(c),l={};e.guard=function(a,e){if(a.type==CKEDITOR.NODE_ELEMENT){var m="visited_"+
(e?"out":"in");if(a.getCustomData(m))return;CKEDITOR.dom.element.setMarker(l,a,m,1)}if(e&&h&&a.equals(h))f=d.clone(),f.setEndAt(h,CKEDITOR.POSITION_BEFORE_END),g.push(f);else if(!e&&k&&a.equals(k))f=d.clone(),f.setStartAt(k,CKEDITOR.POSITION_AFTER_START),g.push(f);else{if(m=!e)m=a.type==CKEDITOR.NODE_ELEMENT&&a.is(c)&&(!h||b(a,h))&&(!k||b(a,k));m&&(f=d.clone(),f.selectNodeContents(a),g.push(f))}};e.lastForward();CKEDITOR.dom.element.clearAllMarkers(l);return g}function b(a,d){var c=CKEDITOR.POSITION_CONTAINS+
CKEDITOR.POSITION_IS_CONTAINED,g=a.getPosition(d);return g===CKEDITOR.POSITION_IDENTICAL?!1:0===(g&c)}var c={td:1,th:1,caption:1};return{detectPurge:function(a){var b=a.range,d=b.clone();d.enlarge(CKEDITOR.ENLARGE_ELEMENT);var d=new CKEDITOR.dom.walker(d),g=0;d.evaluator=function(a){a.type==CKEDITOR.NODE_ELEMENT&&a.is(c)&&++g};d.checkForward();if(1<g){var d=b.startPath().contains("table"),f=b.endPath().contains("table");d&&f&&b.checkBoundaryOfElement(d,CKEDITOR.START)&&b.checkBoundaryOfElement(f,CKEDITOR.END)&&(b=a.range.clone(),b.setStartBefore(d),b.setEndAfter(f),a.purgeTableBookmark=b.createBookmark())}},detectRanges:function(g,f){var e=d(f,g.bookmark),h=e.clone(),k,l,m=e.getCommonAncestor();m.is(CKEDITOR.dtd.$tableContent)&&!m.is(c)&&(m=m.getAscendant("table",!0));l=m;m=new CKEDITOR.dom.elementPath(e.startContainer,l);l=new CKEDITOR.dom.elementPath(e.endContainer,l);m=m.contains("table");l=l.contains("table");if(m||l)m&&l&&b(m,l)?(g.tableSurroundingRange=h,h.setStartAt(m,CKEDITOR.POSITION_AFTER_END),h.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),h=e.clone(),h.setEndAt(m,CKEDITOR.POSITION_AFTER_END),k=e.clone(),k.setStartAt(l,CKEDITOR.POSITION_BEFORE_START),k=a(h).concat(a(k))):m?l||(g.tableSurroundingRange=h,h.setStartAt(m,CKEDITOR.POSITION_AFTER_END),e.setEndAt(m,CKEDITOR.POSITION_AFTER_END)):(g.tableSurroundingRange=h,h.setEndAt(l,CKEDITOR.POSITION_BEFORE_START),e.setStartAt(l,CKEDITOR.POSITION_AFTER_START)),g.tableContentsRanges=k?k:a(e)},deleteRanges:function(a){for(var b;b=a.tableContentsRanges.pop();)b.extractContents(),q(b.startContainer)&&b.startContainer.appendBogus();a.tableSurroundingRange&&a.tableSurroundingRange.extractContents()},purge:function(a){if(a.purgeTableBookmark){var b=a.doc,d=a.range.clone(),b=b.createElement("p");b.insertBefore(a.purgeTableBookmark.startNode);d.moveToBookmark(a.purgeTableBookmark);d.deleteContents();a.range.moveToPosition(b,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(a){return!(a.range.startPath().contains(CKEDITOR.dtd.$listItem)&&a.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(a){a.startContainer.getDtd()["#"]||a.moveToClosestEditablePosition(null,!0)},autoParagraph:function(a,b){var d=b.startPath(),c;l(a,d.block,d.blockLimit)&&(c=k(a))&&(c=b.document.createElement(c),c.appendBogus(),b.insertNode(c),b.moveToPosition(c,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function a(a,b){if(0===a.length)return!1;var d,c;if((d=!b&&1===a.length)&&!(d=a[0].collapsed)){var g=a[0];d=g.startContainer.getAscendant({td:1,th:1},!0);var f=g.endContainer.getAscendant({td:1,th:1},!0);c=CKEDITOR.tools.trim;d&&d.equals(f)&&!d.findOne("td, th, tr, tbody, table")?(g=g.cloneContents(),d=g.getFirst()?c(g.getFirst().getText())!==c(d.getText()):!0):d=!1}if(d)return!1;for(c=0;c<a.length;c++)if(d=a[c]._getTableElement(),!d)return!1;return!0}function e(a){function b(a){a=a.find("td, th");var d=[],c;for(c=0;c<a.count();c++)d.push(a.getItem(c));return d}var d=[],c,g;for(g=0;g<a.length;g++)c=a[g]._getTableElement(),c.is&&c.is({td:1,th:1})?d.push(c):d=d.concat(b(c));return d}function c(a){a=e(a);var b="",d=[],c,g;for(g=0;g<a.length;g++)c&&!c.equals(a[g].getAscendant("tr"))?(b+=d.join("\t")+"\n",c=a[g].getAscendant("tr"),d=[]):0===g&&(c=a[g].getAscendant("tr")),d.push(a[g].getText());return b+=d.join("\t")}function f(a){var b=this.root.editor,d=b.getSelection(1);this.reset();A=!0;d.root.once("selectionchange",function(a){a.cancel()},null,null,0);d.selectRanges([a[0]]);d=this._.cache;d.ranges=new CKEDITOR.dom.rangeList(a);d.type=CKEDITOR.SELECTION_TEXT;d.selectedElement=a[0]._getTableElement();d.selectedText=c(a);d.nativeSel=null;this.isFake=1;this.rev=t++;b._.fakeSelection=this;A=!1;this.root.fire("selectionchange")}function h(){var b=this._.fakeSelection,d;if(b){d=this.getSelection(1);var c;if(!(c=!d)&&(c=!d.isHidden())){c=b;var g=d.getRanges(),f=c.getRanges(),e=g.length&&g[0]._getTableElement()&&g[0]._getTableElement().getAscendant("table",!0),h=f.length&&f[0]._getTableElement()&&f[0]._getTableElement().getAscendant("table",!0),k=1===g.length&&g[0]._getTableElement()&&g[0]._getTableElement().is("table"),l=1===f.length&&f[0]._getTableElement()&&f[0]._getTableElement().is("table"),m=1===g.length&&g[0].collapsed,f=a(g,!!CKEDITOR.env.webkit)&&a(f);e=e&&h?e.equals(h)||h.contains(e):!1;e&&(m||f)?(k&&!l&&c.selectRanges(g),c=!0):c=!1;c=!c}c&&(b.reset(),b=0)}if(!b&&(b=d||this.getSelection(1),!b||b.getType()==CKEDITOR.SELECTION_NONE))return;this.fire("selectionCheck",b);d=this.elementPath();d.compare(this._.selectionPreviousPath)||(c=this._.selectionPreviousPath&&this._.selectionPreviousPath.blockLimit.equals(d.blockLimit),CKEDITOR.env.webkit&&!c&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=d,this.fire("selectionChange",{selection:b,path:d}))}function m(){y=!0;r||(l.call(this),r=CKEDITOR.tools.setTimeout(l,200,this))}function l(){r=null;y&&(CKEDITOR.tools.setTimeout(h,0,this),y=!1)}function k(a){return D(a)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(CKEDITOR.dtd.$empty)?!0:!1}function d(a){function b(d,c){return d&&d.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(c?"End":"Start")](d):!1}if(!(a.root instanceof CKEDITOR.editable))return!1;var d=a.startContainer,c=a.getPreviousNode(k,null,d),g=a.getNextNode(k,null,d);return b(c)||b(g,1)||!(c||g||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()&&d.getBogus())?!0:!1}function b(a){g(a,!1);var b=a.getDocument().createText(v);a.setCustomData("cke-fillingChar",b);return b}function g(a,b){var d=a&&a.removeCustomData("cke-fillingChar");if(d){if(!1!==b){var c=a.getDocument().getSelection().getNative(),g=c&&"None"!=c.type&&c.getRangeAt(0),f=v.length;if(d.getLength()>f&&g&&g.intersectsNode(d.$)){var e=[{node:c.anchorNode,offset:c.anchorOffset},{node:c.focusNode,offset:c.focusOffset}];c.anchorNode==d.$&&c.anchorOffset>f&&(e[0].offset-=f);c.focusNode==d.$&&c.focusOffset>f&&(e[1].offset-=f)}}d.setText(n(d.getText(),1));e&&(d=a.getDocument().$,c=d.getSelection(),d=d.createRange(),d.setStart(e[0].node,e[0].offset),d.collapse(!0),c.removeAllRanges(),c.addRange(d),c.extend(e[1].node,e[1].offset))}}function n(a,b){return b?a.replace(x,function(a,b){return b?"":""}):a.replace(v,"")}function q(a,b){var d=CKEDITOR.dom.element.createFromHtml('\x3cdiv data-cke-hidden-sel\x3d"1" data-cke-temp\x3d"1" style\x3d"'+(CKEDITOR.env.ie&&14>CKEDITOR.env.version?"display:none":"position:fixed;top:0;left:-1000px")+'"\x3e'+(b||"\x26nbsp;")+"\x3c/div\x3e",a.document);a.fire("lockSnapshot");a.editable().append(d);var c=a.getSelection(1),g=a.createRange(),f=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);g.setStartAt(d,CKEDITOR.POSITION_AFTER_START);g.setEndAt(d,CKEDITOR.POSITION_BEFORE_END);c.selectRanges([g]);f.removeListener();a.fire("unlockSnapshot");a._.hiddenSelectionContainer=d}function p(a){var b={37:1,39:1,8:1,46:1};return function(d){var c=d.data.getKeystroke();if(b[c]){var g=a.getSelection().getRanges(),f=g[0];1==g.length&&f.collapsed&&(c=f[38>c?"getPreviousEditableNode":"getNextEditableNode"]())&&c.type==CKEDITOR.NODE_ELEMENT&&"false"==c.getAttribute("contenteditable")&&(a.getSelection().fake(c),d.data.preventDefault(),d.cancel())}}}
function w(a){for(var b=0;b<a.length;b++){var d=a[b];d.getCommonAncestor().isReadOnly()&&a.splice(b,1);if(!d.collapsed){if(d.startContainer.isReadOnly())for(var c=d.startContainer,g;c&&!((g=c.type==CKEDITOR.NODE_ELEMENT)&&c.is("body")||!c.isReadOnly());)g&&"false"==c.getAttribute("contentEditable")&&d.setStartAfter(c),c=c.getParent();c=d.startContainer;g=d.endContainer;var f=d.startOffset,e=d.endOffset,h=d.clone();c&&c.type==CKEDITOR.NODE_TEXT&&(f>=c.getLength()?h.setStartAfter(c):h.setStartBefore(c));g&&g.type==CKEDITOR.NODE_TEXT&&(e?h.setEndAfter(g):h.setEndBefore(g));c=new CKEDITOR.dom.walker(h);c.evaluator=function(c){if(c.type==CKEDITOR.NODE_ELEMENT&&c.isReadOnly()){var g=d.clone();d.setEndBefore(c);d.collapsed&&a.splice(b--,1);c.getPosition(h.endContainer)&CKEDITOR.POSITION_CONTAINS||(g.setStartAfter(c),g.collapsed||a.splice(b+1,0,g));return!0}return!1};c.next()}}return a}var u="function"!=typeof window.getSelection,t=1,v=CKEDITOR.tools.repeat("",7),x=new RegExp(v+"( )?","g"),A,r,y,D=CKEDITOR.dom.walker.invisible(1),B=function(){function a(b){return function(a){var d=a.editor.createRange();d.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([d]);return!1}}function b(a){return function(b){var d=b.editor,c=d.createRange(),g;(g=c.moveToClosestEditablePosition(b.selected,a))||(g=c.moveToClosestEditablePosition(b.selected,!a));g&&d.getSelection().selectRanges([c]);d.fire("saveSnapshot");b.selected.remove();g||(c.moveToElementEditablePosition(d.editable()),d.getSelection().selectRanges([c]));d.fire("saveSnapshot");return!1}}var d=a(),c=a(1);return{37:d,38:d,39:c,40:c,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(a){function b(){var a=d.getSelection();a&&a.removeAllRanges()}var d=a.editor;d.on("contentDom",function(){function a(){v=new CKEDITOR.dom.selection(d.getSelection());v.lock()}function b(){e.removeListener("mouseup",b);n.removeListener("mouseup",b);var a=CKEDITOR.document.$.selection,d=a.createRange();"None"!=a.type&&d.parentElement().ownerDocument==f.$&&d.select()}
function c(a){if(CKEDITOR.env.ie){var b=(a=a.getRanges()[0])?a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&("false"==a.getAttribute("contenteditable")||"true"==a.getAttribute("contenteditable"))},!0):null;return a&&"false"==b.getAttribute("contenteditable")&&b}}var f=d.document,e=CKEDITOR.document,k=d.editable(),l=f.getBody(),n=f.getDocumentElement(),t=k.isInline(),q,v;CKEDITOR.env.gecko&&k.attachListener(k,"focus",function(a){a.removeListener();0!==q&&(a=d.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==k.$&&(a=d.createRange(),a.moveToElementEditStart(k),a.select())},null,null,-2);k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){q&&CKEDITOR.env.webkit&&(q=d._.previousActive&&d._.previousActive.equals(f.getActive()))&&null!=d._.previousScrollTop&&d._.previousScrollTop!=k.$.scrollTop&&(k.$.scrollTop=d._.previousScrollTop);d.unlockSelection(q);q=0},null,null,-1);k.attachListener(k,"mousedown",function(){q=0});if(CKEDITOR.env.ie||t)u?k.attachListener(k,"beforedeactivate",a,null,null,-1):k.attachListener(d,"selectionCheck",a,null,null,-1),k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){d.lockSelection(v);q=1},null,null,-1),k.attachListener(k,"mousedown",function(){q=0});if(CKEDITOR.env.ie&&!t){var x;k.attachListener(k,"mousedown",function(a){2==a.data.$.button&&((a=d.document.getSelection())&&a.getType()!=CKEDITOR.SELECTION_NONE||(x=d.window.getScrollPosition()))});k.attachListener(k,"mouseup",function(a){2==a.data.$.button&&x&&(d.document.$.documentElement.scrollLeft=x.x,d.document.$.documentElement.scrollTop=x.y);x=null});if("BackCompat"!=f.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){var r,A;n.on("mousedown",function(a){function b(a){a=a.data.$;if(r){var d=l.$.createTextRange();try{d.moveToPoint(a.clientX,a.clientY)}catch(c){}r.setEndPoint(0>A.compareEndPoints("StartToStart",d)?"EndToEnd":"StartToStart",d);r.select()}}function d(){n.removeListener("mousemove",b);e.removeListener("mouseup",d);n.removeListener("mouseup",d);r.select()}a=a.data;if(a.getTarget().is("html")&&a.$.y<n.$.clientHeight&&a.$.x<n.$.clientWidth){r=l.$.createTextRange();try{r.moveToPoint(a.$.clientX,a.$.clientY)}catch(c){}A=r.duplicate();n.on("mousemove",b);e.on("mouseup",d);n.on("mouseup",d)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version)n.on("mousedown",function(a){a.data.getTarget().is("html")&&(e.on("mouseup",b),n.on("mouseup",b))})}}k.attachListener(k,"selectionchange",h,d);k.attachListener(k,"keyup",m,d);k.attachListener(k,"keydown",function(a){var b=this.getSelection(1);c(b)&&(b.selectElement(c(b)),a.data.preventDefault())},d);k.attachListener(k,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){d.forceNextSelectionCheck();d.selectionChange(1)});if(t&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var w;k.attachListener(k,"mousedown",function(){w=1});k.attachListener(f.getDocumentElement(),"mouseup",function(){w&&m.call(d);w=0})}else k.attachListener(CKEDITOR.env.ie?k:f.getDocumentElement(),"mouseup",m,d);CKEDITOR.env.webkit&&k.attachListener(f,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:k.hasFocus&&g(k)}},null,null,-1);k.attachListener(k,"keydown",p(d),null,null,-1)});d.on("setData",function(){d.unlockSelection();CKEDITOR.env.webkit&&b()});d.on("contentDomUnload",function(){d.unlockSelection()});if(CKEDITOR.env.ie9Compat)d.on("beforeDestroy",b,null,null,9);d.on("dataReady",function(){delete d._.fakeSelection;delete d._.hiddenSelectionContainer;d.selectionChange(1)});d.on("loadSnapshot",function(){var a=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),b=d.editable().getLast(a);b&&b.hasAttribute("data-cke-hidden-sel")&&(b.remove(),CKEDITOR.env.gecko&&(a=d.editable().getFirst(a))&&a.is("br")&&a.getAttribute("_moz_editor_bogus_node")&&a.remove())},null,null,100);d.on("key",function(a){if("wysiwyg"==d.mode){var b=d.getSelection();if(b.isFake){var c=B[a.data.keyCode];if(c)return c({editor:d,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})});if(CKEDITOR.env.webkit)CKEDITOR.on("instanceReady",function(a){var b=a.editor;b.on("selectionChange",function(){var a=b.editable(),d=a.getCustomData("cke-fillingChar");d&&(d.getCustomData("ready")?(g(a),a.editor.fire("selectionCheck")):d.setCustomData("ready",1))},null,null,-1);b.on("beforeSetMode",function(){g(b.editable())},null,null,-1);b.on("getSnapshot",function(a){a.data&&(a.data=n(a.data))},b,null,20);b.on("toDataFormat",function(a){a.data.dataValue=n(a.data.dataValue)},null,null,0)});CKEDITOR.editor.prototype.selectionChange=function(a){(a?h:m).call(this)};CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection};CKEDITOR.editor.prototype.lockSelection=function(a){a=a||this.getSelection(1);return a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);a.selectRanges([this]);return a};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection){var b=a;a=a.root}var d=a instanceof CKEDITOR.dom.element;this.rev=b?b.rev:t++;this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument();this.root=d?a:this.document.getBody();this.isLocked=0;this._={cache:{}};if(b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;a=this.getNative();var c,g;if(a)if(a.getRangeAt)c=(g=a.rangeCount&&a.getRangeAt(0))&&new CKEDITOR.dom.node(g.commonAncestorContainer);else{try{g=a.createRange()}catch(f){}c=g&&CKEDITOR.dom.element.get(g.item&&g.item(0)||g.parentElement())}if(!c||c.type!=CKEDITOR.NODE_ELEMENT&&c.type!=CKEDITOR.NODE_TEXT||!this.root.equals(c)&&!this.root.contains(c))this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList;return this};var z={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.tools.extend(CKEDITOR.dom.selection,{_removeFillingCharSequenceString:n,_createFillingCharSequenceNode:b,FILLING_CHAR_SEQUENCE:v});CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=u?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:u?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var d=this.getNative(),c=d.type;"Text"==c&&(b=CKEDITOR.SELECTION_TEXT);"Control"==c&&(b=CKEDITOR.SELECTION_ELEMENT);d.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(g){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,d=this.getNative();if(!d||!d.rangeCount)b=CKEDITOR.SELECTION_NONE;else if(1==d.rangeCount){var d=d.getRangeAt(0),c=d.startContainer;c==d.endContainer&&1==c.nodeType&&1==d.endOffset-
d.startOffset&&z[c.childNodes[d.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}return a.type=b},getRanges:function(){var a=u?function(){function a(b){return(new CKEDITOR.dom.node(b)).getIndex()}var b=function(b,d){b=b.duplicate();b.collapse(d);var c=b.parentElement();if(!c.hasChildNodes())return{container:c,offset:0};for(var g=c.children,f,e,h=b.duplicate(),k=0,l=g.length-1,m=-1,n,q;k<=l;)if(m=Math.floor((k+l)/2),f=g[m],h.moveToElementText(f),n=h.compareEndPoints("StartToStart",b),0<n)l=m-1;else if(0>n)k=m+1;else return{container:c,offset:a(f)};if(-1==m||m==g.length-1&&0>n){h.moveToElementText(c);h.setEndPoint("StartToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;g=c.childNodes;if(!h)return f=g[g.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:c,offset:g.length}:{container:f,offset:f.nodeValue.length};for(c=g.length;0<h&&0<c;)e=g[--c],e.nodeType==CKEDITOR.NODE_TEXT&&(q=e,h-=e.nodeValue.length);return{container:q,offset:-h}}h.collapse(0<n?!0:!1);h.setEndPoint(0<n?"StartToStart":"EndToStart",b);h=h.text.replace(/(\r\n|\r)/g,"\n").length;if(!h)return{container:c,offset:a(f)+(0<n?0:1)};for(;0<h;)try{e=f[0<n?"previousSibling":"nextSibling"],e.nodeType==CKEDITOR.NODE_TEXT&&(h-=e.nodeValue.length,q=e),f=e}catch(t){return{container:c,offset:a(f)}}return{container:q,offset:0<n?-h:q.nodeValue.length+h}};return function(){var a=this.getNative(),d=a&&a.createRange(),c=this.getType();if(!a)return[];if(c==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),c=b(d,!0),a.setStart(new CKEDITOR.dom.node(c.container),c.offset),c=b(d),a.setEnd(new CKEDITOR.dom.node(c.container),c.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(c==CKEDITOR.SELECTION_ELEMENT){for(var c=[],g=0;g<d.length;g++){for(var f=d.item(g),e=f.parentNode,h=0,a=new CKEDITOR.dom.range(this.root);h<e.childNodes.length&&e.childNodes[h]!=f;h++);a.setStart(new CKEDITOR.dom.node(e),h);a.setEnd(new CKEDITOR.dom.node(e),h+1);c.push(a)}return c}return[]}}():function(){var a=[],b,d=this.getNative();if(!d)return a;for(var c=0;c<d.rangeCount;c++){var g=d.getRangeAt(c);b=new CKEDITOR.dom.range(this.root);b.setStart(new CKEDITOR.dom.node(g.startContainer),g.startOffset);b.setEnd(new CKEDITOR.dom.node(g.endContainer),g.endOffset);a.push(b)}return a};return function(b){var d=this._.cache,c=d.ranges;c||(d.ranges=c=new CKEDITOR.dom.rangeList(a.call(this)));return b?w(new CKEDITOR.dom.rangeList(c.slice())):c}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var d=this.getRanges()[0];if(d){if(d.collapsed)b=d.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(d.optimize();b=d.startContainer,d.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)d.setStartAfter(b);b=d.startContainer;if(b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if((b=b.getChild(d.startOffset))&&b.type==CKEDITOR.NODE_ELEMENT)for(d=b.getFirst();d&&d.type==CKEDITOR.NODE_ELEMENT;)b=d,d=d.getFirst();else b=d.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,d=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)},function(){for(var a=b.getRanges()[0].clone(),d,c,g=2;g&&!((d=a.getEnclosedNode())&&d.type==CKEDITOR.NODE_ELEMENT&&z[d.getName()]&&(c=d));g--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return c&&c.$});return a.selectedElement=d?new CKEDITOR.dom.element(d):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=u?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(b){if(this.isLocked){if(b)var d=this.getSelectedElement(),c=this.getRanges(),g=this.isFake;this.isLocked=0;this.reset();b&&(b=d||c[0]&&c[0].getCommonAncestor())&&b.getAscendant("body",1)&&(a(c)?f.call(this,c):g?this.fake(d):d?this.selectElement(d):this.selectRanges(c))}},reset:function(){this._.cache={};this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection)if(this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;if(b){var d=a.checkDirty();a.fire("lockSnapshot");b.remove();a.fire("unlockSnapshot");!d&&a.resetDirty()}delete a._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=t++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a);b.setEndAfter(a);this.selectRanges([b])},selectRanges:function(c){var e=this.root.editor,h=e&&e._.hiddenSelectionContainer;this.reset();if(h)for(var h=this.root,k,l=0;l<c.length;++l)k=c[l],k.endContainer.equals(h)&&(k.endOffset=Math.min(k.endOffset,h.getChildCount()));if(c.length)if(this.isLocked){var m=CKEDITOR.document.getActive();this.unlock();this.selectRanges(c);this.lock();m&&!m.equals(this.root)&&m.focus()}else{var n;a:{var q,t;if(1==c.length&&!(t=c[0]).collapsed&&(n=t.getEnclosedNode())&&n.type==CKEDITOR.NODE_ELEMENT&&(t=t.clone(),t.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(q=t.getEnclosedNode())&&q.type==CKEDITOR.NODE_ELEMENT&&(n=q),"false"==n.getAttribute("contenteditable")))break a;n=void 0}if(n)this.fake(n);else if(e&&e.plugins.tableselection&&CKEDITOR.plugins.tableselection.isSupportedEnvironment&&a(c)&&!A)f.call(this,c);else{if(u){q=CKEDITOR.dom.walker.whitespaces(!0);n=/\ufeff|\u00a0/;t={table:1,tbody:1,tr:1};1<c.length&&(e=c[c.length-1],c[0].setEnd(e.endContainer,e.endOffset));e=c[0];c=e.collapsed;var v,x,r;if((h=e.getEnclosedNode())&&h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in z&&(!h.is("a")||!h.getText()))try{r=h.$.createControlRange();r.addElement(h.$);r.select();return}catch(p){}if(e.startContainer.type==CKEDITOR.NODE_ELEMENT&&e.startContainer.getName()in t||e.endContainer.type==CKEDITOR.NODE_ELEMENT&&e.endContainer.getName()in t)e.shrink(CKEDITOR.NODE_ELEMENT,!0),c=e.collapsed;r=e.createBookmark();t=r.startNode;c||(m=r.endNode);r=e.document.$.body.createTextRange();r.moveToElementText(t.$);r.moveStart("character",1);m?(n=e.document.$.body.createTextRange(),n.moveToElementText(m.$),r.setEndPoint("EndToEnd",n),r.moveEnd("character",-1)):(v=t.getNext(q),x=t.hasAscendant("pre"),v=!(v&&v.getText&&v.getText().match(n))&&(x||!t.hasPrevious()||t.getPrevious().is&&t.getPrevious().is("br")),x=e.document.createElement("span"),x.setHtml("\x26#65279;"),x.insertBefore(t),v&&e.document.createText("").insertBefore(t));e.setStartBefore(t);t.remove();c?(v?(r.moveStart("character",-1),r.select(),e.document.$.selection.clear()):r.select(),e.moveToPosition(x,CKEDITOR.POSITION_BEFORE_START),x.remove()):(e.setEndBefore(m),m.remove(),r.select())}else{m=this.getNative();if(!m)return;this.removeAllRanges();for(r=0;r<c.length;r++){if(r<c.length-1&&(v=c[r],x=c[r+1],n=v.clone(),n.setStart(v.endContainer,v.endOffset),n.setEnd(x.startContainer,x.startOffset),!n.collapsed&&(n.shrink(CKEDITOR.NODE_ELEMENT,!0),e=n.getCommonAncestor(),n=n.getEnclosedNode(),e.isReadOnly()||n&&n.isReadOnly()))){x.setStart(v.startContainer,v.startOffset);c.splice(r--,1);continue}e=c[r];x=this.document.$.createRange();e.collapsed&&CKEDITOR.env.webkit&&d(e)&&(n=b(this.root),e.insertNode(n),(v=n.getNext())&&!n.getPrevious()&&v.type==CKEDITOR.NODE_ELEMENT&&"br"==v.getName()?(g(this.root),e.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START)):e.moveToPosition(n,CKEDITOR.POSITION_AFTER_END));x.setStart(e.startContainer.$,e.startOffset);try{x.setEnd(e.endContainer.$,e.endOffset)}catch(w){if(0<=w.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))e.collapse(1),x.setEnd(e.endContainer.$,e.endOffset);else throw w;}m.addRange(x)}}this.reset();this.root.fire("selectionchange")}}},fake:function(a,b){var d=this.root.editor;void 0===b&&a.hasAttribute("aria-label")&&(b=a.getAttribute("aria-label"));this.reset();q(d,b);var c=this._.cache,g=new CKEDITOR.dom.range(this.root);g.setStartBefore(a);g.setEndAfter(a);c.ranges=new CKEDITOR.dom.rangeList(g);c.selectedElement=c.startElement=a;c.type=CKEDITOR.SELECTION_ELEMENT;c.selectedText=c.nativeSel=null;this.isFake=1;this.rev=t++;d._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());return!(!a||!a.data("cke-hidden-sel"))},isInTable:function(){return a(this.getRanges())},createBookmarks:function(a){a=this.getRanges().createBookmarks(a);this.isFake&&(a.isFake=1);return a},createBookmarks2:function(a){a=this.getRanges().createBookmarks2(a);this.isFake&&(a.isFake=1);return a},selectBookmarks:function(b){for(var d=[],c,g=0;g<b.length;g++){var f=new CKEDITOR.dom.range(this.root);f.moveToBookmark(b[g]);d.push(f)}b.isFake&&(c=a(d)?d[0]._getTableElement():d[0].getEnclosedNode(),c&&c.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),b.isFake=0));b.isFake&&!a(d)?this.fake(c):this.selectRanges(d);return this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();try{a&&a[u?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),"use strict",CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function a(a,b){for(var d,c;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))d=a;else if(!c){var g=a.getAttribute("contentEditable");"false"==g?d=a:"true"==g&&(c=1)}return d}function e(a,b,d,c){return(a.getPosition(b)|c)==c&&(!d.childRule||d.childRule(a))}function c(b){var d=b.document;if(b.collapsed)d=v(this,d),b.insertNode(d),b.moveToPosition(d,CKEDITOR.POSITION_BEFORE_END);else{var g=this.element,f=this._.definition,k,l=f.ignoreReadonly,m=l||f.includeReadonly;null==m&&(m=b.root.getCustomData("cke_includeReadonly"));var n=CKEDITOR.dtd[g];n||(k=!0,n=CKEDITOR.dtd.span);b.enlarge(CKEDITOR.ENLARGE_INLINE,1);b.trim();var t=b.createBookmark(),q=t.startNode,x=t.endNode,r=q,u;if(!l){var p=b.getCommonAncestor(),l=a(q,p),p=a(x,p);l&&(r=l.getNextSourceNode(!0));p&&(x=p)}for(r.getPosition(x)==CKEDITOR.POSITION_FOLLOWING&&(r=0);r;){l=!1;if(r.equals(x))r=null,l=!0;else{var A=r.type==CKEDITOR.NODE_ELEMENT?r.getName():null,p=A&&"false"==r.getAttribute("contentEditable"),y=A&&r.getAttribute("data-nostyle");if(A&&r.data("cke-bookmark")){r=r.getNextSourceNode(!0);continue}if(p&&m&&CKEDITOR.dtd.$block[A])for(var D=r,z=h(D),B=void 0,C=z.length,ea=0,D=C&&new CKEDITOR.dom.range(D.getDocument());ea<C;++ea){var B=z[ea],F=CKEDITOR.filter.instances[B.data("cke-filter")];if(F?F.check(this):1)D.selectNodeContents(B),c.call(this,D)}z=A?!n[A]||y?0:p&&!m?0:e(r,x,f,O):1;if(z)if(B=r.getParent(),z=f,C=g,ea=k,!B||!(B.getDtd()||CKEDITOR.dtd.span)[C]&&!ea||z.parentRule&&!z.parentRule(B))l=!0;else{if(u||A&&CKEDITOR.dtd.$removeEmpty[A]&&(r.getPosition(x)|O)!=O||(u=b.clone(),u.setStartBefore(r)),A=r.type,A==CKEDITOR.NODE_TEXT||p||A==CKEDITOR.NODE_ELEMENT&&!r.getChildCount()){for(var A=r,G;(l=!A.getNext(H))&&(G=A.getParent(),n[G.getName()])&&e(G,q,f,P);)A=G;u.setEndAfter(A)}}else l=!0;r=r.getNextSourceNode(y||p)}if(l&&u&&!u.collapsed){for(var l=v(this,d),p=l.hasAttributes(),y=u.getCommonAncestor(),A={},z={},B={},C={},fa,E,ha;l&&y;){if(y.getName()==g){for(fa in f.attributes)!C[fa]&&(ha=y.getAttribute(E))&&(l.getAttribute(fa)==ha?z[fa]=1:C[fa]=1);for(E in f.styles)!B[E]&&(ha=y.getStyle(E))&&(l.getStyle(E)==ha?A[E]=1:B[E]=1)}y=y.getParent()}for(fa in z)l.removeAttribute(fa);for(E in A)l.removeStyle(E);p&&!l.hasAttributes()&&(l=null);l?(u.extractContents().appendTo(l),u.insertNode(l),w.call(this,l),l.mergeSiblings(),CKEDITOR.env.ie||l.$.normalize()):(l=new CKEDITOR.dom.element("span"),u.extractContents().appendTo(l),u.insertNode(l),w.call(this,l),l.remove(!0));u=null}}b.moveToBookmark(t);b.shrink(CKEDITOR.SHRINK_TEXT);b.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function f(a){function b(){for(var a=new CKEDITOR.dom.elementPath(c.getParent()),d=new CKEDITOR.dom.elementPath(m.getParent()),g=null,f=null,e=0;e<a.elements.length;e++){var h=a.elements[e];if(h==a.block||h==a.blockLimit)break;n.checkElementRemovable(h,!0)&&(g=h)}for(e=0;e<d.elements.length;e++){h=d.elements[e];if(h==d.block||h==d.blockLimit)break;n.checkElementRemovable(h,!0)&&(f=h)}f&&m.breakParent(f);g&&c.breakParent(g)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var d=a.createBookmark(),c=d.startNode,g=this._.definition.alwaysRemoveElement;if(a.collapsed){for(var f=new CKEDITOR.dom.elementPath(c.getParent(),a.root),e,h=0,k;h<f.elements.length&&(k=f.elements[h])&&k!=f.block&&k!=f.blockLimit;h++)if(this.checkElementRemovable(k)){var l;!g&&a.collapsed&&(a.checkBoundaryOfElement(k,CKEDITOR.END)||(l=a.checkBoundaryOfElement(k,CKEDITOR.START)))?(e=k,e.match=l?"start":"end"):(k.mergeSiblings(),k.is(this.element)?p.call(this,k):u(k,r(this)[k.getName()]))}if(e){g=c;for(h=0;;h++){k=f.elements[h];if(k.equals(e))break;else if(k.match)continue;else k=k.clone();k.append(g);g=k}g["start"==e.match?"insertBefore":"insertAfter"](e)}}else{var m=d.endNode,n=this;b();for(f=c;!f.equals(m);)e=f.getNextSourceNode(),f.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(f)&&(f.getName()==this.element?p.call(this,f):u(f,r(this)[f.getName()]),e.type==CKEDITOR.NODE_ELEMENT&&e.contains(c)&&(b(),e=c.getNext())),f=e}a.moveToBookmark(d);a.shrink(CKEDITOR.NODE_ELEMENT,!0)}function h(a){var b=[];a.forEach(function(a){if("true"==a.getAttribute("contenteditable"))return b.push(a),!1},CKEDITOR.NODE_ELEMENT,!0);return b}function m(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1))&&!a.isReadOnly()&&x(a,this)}function l(a){var b=a.getCommonAncestor(!0,!0);if(a=(new CKEDITOR.dom.elementPath(b,a.root)).contains(this.element,1)){var b=this._.definition,d=b.attributes;if(d)for(var c in d)a.removeAttribute(c,d[c]);if(b.styles)for(var g in b.styles)b.styles.hasOwnProperty(g)&&a.removeStyle(g)}}function k(a){var d=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0;this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var g,f=a.document,e;g=c.getNextParagraph();)!g.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(e=v(this,f,g),b(g,e));a.moveToBookmark(d)}function d(a){var d=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0;c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var g,f;g=c.getNextParagraph();)this.checkElementRemovable(g)&&(g.is("pre")?((f=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&g.copyAttributes(f),b(g,f)):p.call(this,g));a.moveToBookmark(d)}function b(a,b){var d=!b;d&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var c=b&&b.is("pre"),f=a.is("pre"),e=!c&&f;if(c&&!f){f=b;(e=a.getBogus())&&e.remove();e=a.getHtml();e=n(e,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");e=e.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");e=e.replace(/([ \t\n\r]+|&nbsp;)/g," ");e=e.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var h=a.getDocument().createElement("div");h.append(f);f.$.outerHTML="\x3cpre\x3e"+e+"\x3c/pre\x3e";f.copyAttributes(h.getFirst());f=h.getFirst().remove()}else f.setHtml(e);b=f}else e?b=q(d?[a.getHtml()]:g(a),b):a.moveChildren(b);b.replace(a);if(c){var d=b,k;(k=d.getPrevious(G))&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("pre")&&(c=n(k.getHtml(),/\n$/,"")+"\n\n"+n(d.getHtml(),/^\n/,""),CKEDITOR.env.ie?d.$.outerHTML="\x3cpre\x3e"+c+"\x3c/pre\x3e":d.setHtml(c),k.remove())}else d&&t(b)}function g(a){var b=[];n(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,d){return b+"\x3c/pre\x3e"+d+"\x3cpre\x3e"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,d){b.push(d)});return b}function n(a,b,d){var c="",g="";a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,d){b&&(c=b);d&&(g=d);return""});return c+a.replace(b,d)+g}function q(a,b){var d;1<a.length&&(d=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var c=0;c<a.length;c++){var g=a[c],g=g.replace(/(\r\n|\r)/g,"\n"),g=n(g,/^[ \t]*\n/,""),g=n(g,/\n$/,""),g=n(g,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"\x26nbsp;":b?" "+CKEDITOR.tools.repeat("\x26nbsp;",a.length-1):CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "}),g=g.replace(/\n/g,"\x3cbr\x3e"),g=g.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("\x26nbsp;",a.length-1)+" "});if(d){var f=b.clone();f.setHtml(g);d.append(f)}else b.setHtml(g)}return d||b}function p(a,b){var d=this._.definition,c=d.attributes,d=d.styles,g=r(this)[a.getName()],f=CKEDITOR.tools.isEmpty(c)&&CKEDITOR.tools.isEmpty(d),e;for(e in c)if("class"!=e&&!this._.definition.fullMatch||a.getAttribute(e)==y(e,c[e]))b&&"data-"==e.slice(0,5)||(f=a.hasAttribute(e),a.removeAttribute(e));for(var h in d)this._.definition.fullMatch&&a.getStyle(h)!=y(h,d[h],!0)||(f=f||!!a.getStyle(h),a.removeStyle(h));u(a,g,z[a.getName()]);f&&(this._.definition.alwaysRemoveElement?t(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?t(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function w(a){for(var b=r(this),d=a.getElementsByTag(this.element),c,g=d.count();0<=--g;)c=d.getItem(g),c.isReadOnly()||p.call(this,c,!0);for(var f in b)if(f!=this.element)for(d=a.getElementsByTag(f),g=d.count()-1;0<=g;g--)c=d.getItem(g),c.isReadOnly()||u(c,b[f])}function u(a,b,d){if(b=b&&b.attributes)for(var c=0;c<b.length;c++){var g=b[c][0],f;if(f=a.getAttribute(g)){var e=b[c][1];(null===e||e.test&&e.test(f)||"string"==typeof e&&f==e)&&a.removeAttribute(g)}}d||t(a)}function t(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var d=a.getPrevious(G),c=a.getNext(G);!d||d.type!=CKEDITOR.NODE_TEXT&&d.isBlockBoundary({br:1})||a.append("br",1);!c||c.type!=CKEDITOR.NODE_TEXT&&c.isBlockBoundary({br:1})||a.append("br");a.remove(!0)}else d=a.getFirst(),c=a.getLast(),a.remove(!0),d&&(d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings(),c&&!d.equals(c)&&c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings())}function v(a,b,d){var c;c=a.element;"*"==c&&(c="span");c=new CKEDITOR.dom.element(c,b);d&&d.copyAttributes(c);c=x(c,a);b.getCustomData("doc_processing_style")&&c.hasAttribute("id")?c.removeAttribute("id"):b.setCustomData("doc_processing_style",1);return c}function x(a,b){var d=b._.definition,c=d.attributes,d=CKEDITOR.style.getStyleText(d);if(c)for(var g in c)a.setAttribute(g,c[g]);d&&a.setAttribute("style",d);return a}function A(a,b){for(var d in a)a[d]=a[d].replace(E,function(a,d){return b[d]})}function r(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},d=a._.definition.overrides;if(d){CKEDITOR.tools.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var g=d[c],f,e;"string"==typeof g?f=g.toLowerCase():(f=g.element?g.element.toLowerCase():a.element,e=g.attributes);g=b[f]||(b[f]={});if(e){var g=g.attributes=g.attributes||[],h;for(h in e)g.push([h.toLowerCase(),e[h]])}}}return b}function y(a,b,d){var c=new CKEDITOR.dom.element("span");c[d?"setStyle":"setAttribute"](a,b);return c[d?"getStyle":"getAttribute"](a)}function D(a,b){function d(a,b){return"font-family"==b.toLowerCase()?a.replace(/["']/g,""):a}"string"==typeof a&&(a=CKEDITOR.tools.parseCssText(a));"string"==typeof b&&(b=CKEDITOR.tools.parseCssText(b,!0));for(var c in a)if(!(c in b)||d(b[c],c)!=d(a[c],c)&&"inherit"!=a[c]&&"inherit"!=b[c])return!1;return!0}function B(a,b,d){var c=a.document,g=a.getRanges();b=b?this.removeFromRange:this.applyToRange;var f,e;if(a.isFake&&a.isInTable())for(f=[],e=0;e<g.length;e++)f.push(g[e].clone());for(var h=g.createIterator();e=h.getNextRange();)b.call(this,e,d);a.selectRanges(f||g);c.removeCustomData("doc_processing_style")}var z={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},C={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},F=/\s*(?:;\s*|$)/,E=/#\((.+?)\)/g,H=CKEDITOR.dom.walker.bookmark(0,1),G=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){if("string"==typeof a.type)return new CKEDITOR.style.customHandlers[a.type](a);var d=a.attributes;d&&d.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(d.style)),delete d.style);b&&(a=CKEDITOR.tools.clone(a),A(a.attributes,b),A(a.styles,b));d=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*";this.type=a.type||(z[d]?CKEDITOR.STYLE_BLOCK:C[d]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:a}};CKEDITOR.style.prototype={apply:function(a){if(a instanceof CKEDITOR.dom.document)return B.call(this,a.getSelection());if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);B.call(this,a.getSelection(),0,a);this._.enterMode=b}},remove:function(a){if(a instanceof
CKEDITOR.dom.document)return B.call(this,a.getSelection(),1);if(this.checkApplicable(a.elementPath(),a)){var b=this._.enterMode;b||(this._.enterMode=a.activeEnterMode);B.call(this,a.getSelection(),1,a);this._.enterMode=b}},applyToRange:function(a){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?k:this.type==CKEDITOR.STYLE_OBJECT?m:null;return this.applyToRange(a)},removeFromRange:function(a){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?f:this.type==CKEDITOR.STYLE_BLOCK?d:this.type==CKEDITOR.STYLE_OBJECT?l:null;return this.removeFromRange(a)},applyToObject:function(a){x(a,this)},checkActive:function(a,b){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0,b);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var d=a.elements,c=0,g;c<d.length;c++)if(g=d[c],this.type!=CKEDITOR.STYLE_INLINE||g!=a.block&&g!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var f=g.getName();if(!("string"==typeof this.element?f==this.element:f in this.element))continue}if(this.checkElementRemovable(g,!0,b))return!0}}return!1},checkApplicable:function(a,b,d){b&&b instanceof CKEDITOR.filter&&(d=b);if(d&&!d.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(a,b){var d=this._.definition;if(!a||!d.ignoreReadonly&&a.isReadOnly())return!1;var c=a.getName();if("string"==typeof this.element?c==this.element:c in this.element){if(!b&&!a.hasAttributes())return!0;if(c=d._AC)d=c;else{var c={},g=0,f=d.attributes;if(f)for(var e in f)g++,c[e]=f[e];if(e=CKEDITOR.style.getStyleText(d))c.style||g++,c.style=e;c._length=g;d=d._AC=c}if(d._length){for(var h in d)if("_length"!=h)if(c=a.getAttribute(h)||"","style"==h?D(d[h],c):d[h]==c){if(!b)return!0}else if(b)return!1;if(b)return!0}else return!0}return!1},checkElementRemovable:function(a,b,d){if(this.checkElementMatch(a,b,d))return!0;if(b=r(this)[a.getName()]){var c;if(!(b=b.attributes))return!0;for(d=0;d<b.length;d++)if(c=b[d][0],c=a.getAttribute(c)){var g=b[d][1];if(null===g)return!0;if("string"==typeof g){if(c==g)return!0}else if(g.test(c))return!0}}return!1},buildPreview:function(a){var b=this._.definition,d=[],c=b.element;"bdo"==c&&(c="span");var d=["\x3c",c],g=b.attributes;if(g)for(var f in g)d.push(" ",f,'\x3d"',g[f],'"');(g=CKEDITOR.style.getStyleText(b))&&d.push(' style\x3d"',g,'"');d.push("\x3e",a||b.name,"\x3c/",c,"\x3e");return d.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,d=a.attributes&&a.attributes.style||"",c="";d.length&&(d=d.replace(F,";"));for(var g in b){var f=b[g],e=(g+":"+f).replace(F,";");"inherit"==f?c+=e:d+=e}d.length&&(d=CKEDITOR.tools.normalizeCssText(d,!0));return a._ST=d+c};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(a){var b=function(a){this._={definition:a};this.setup&&this.setup(a)};b.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},a,!0);return this.customHandlers[a.type]=b};var O=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,P=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(a,e){this.requiredContent=this.allowedContent=this.style=a;CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();this.state==CKEDITOR.TRISTATE_OFF?a.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&a.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(a,e,c){CKEDITOR.stylesSet.addExternal(a,e,"");CKEDITOR.stylesSet.load(a,c)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(a,e){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var e=0;e<c.length;e++){var m=c[e],l=m.style.checkActive(a.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;m.fn.call(this,l)}}));c.push({style:a,fn:e})},applyStyle:function(a){a.apply(this)},removeStyle:function(a){a.remove(this)},getStylesSet:function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var e=this,c=e.config.stylesCombo_stylesSet||e.config.stylesSet;if(!1===c)a(null);else if(c instanceof Array)e._.stylesDefinitions=c,a(c);else{c||(c="default");var c=c.split(":"),f=c[0];CKEDITOR.stylesSet.addExternal(f,c[1]?c.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(f,function(c){e._.stylesDefinitions=c[f];a(e._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createComment(a));CKEDITOR.dom.domObject.call(this,a)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+
this.$.nodeValue+"--\x3e"}}),"use strict",function(){var a={},e={},c;for(c in CKEDITOR.dtd.$blockLimit)c in CKEDITOR.dtd.$list||(a[c]=1);for(c in CKEDITOR.dtd.$block)c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(e[c]=1);CKEDITOR.dom.elementPath=function(c,h){var m=null,l=null,k=[],d=c,b;h=h||c.getDocument().getBody();do if(d.type==CKEDITOR.NODE_ELEMENT){k.push(d);if(!this.lastElement&&(this.lastElement=d,d.is(CKEDITOR.dtd.$object)||"false"==d.getAttribute("contenteditable")))continue;if(d.equals(h))break;if(!l&&(b=d.getName(),"true"==d.getAttribute("contenteditable")?l=d:!m&&e[b]&&(m=d),a[b])){if(b=!m&&"div"==b){a:{b=d.getChildren();for(var g=0,n=b.count();g<n;g++){var q=b.getItem(g);if(q.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[q.getName()]){b=!0;break a}}b=!1}b=!b}b?m=d:l=d}}while(d=d.getParent());l||(l=h);this.block=m;this.blockLimit=l;this.root=h;this.elements=k}}(),CKEDITOR.dom.elementPath.prototype={compare:function(a){var e=this.elements;a=a&&a.elements;if(!a||e.length!=a.length)return!1;for(var c=0;c<e.length;c++)if(!e[c].equals(a[c]))return!1;return!0},contains:function(a,e,c){var f;"string"==typeof a&&(f=function(c){return c.getName()==a});a instanceof CKEDITOR.dom.element?f=function(c){return c.equals(a)}:CKEDITOR.tools.isArray(a)?f=function(c){return-1<CKEDITOR.tools.indexOf(a,c.getName())}:"function"==typeof a?f=a:"object"==typeof a&&(f=function(c){return c.getName()in a});var h=this.elements,m=h.length;e&&m--;c&&(h=Array.prototype.slice.call(h,0),h.reverse());for(e=0;e<m;e++)if(f(h[e]))return h[e];return null},isContextFor:function(a){var e;return a in CKEDITOR.dtd.$block?(e=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!e.getDtd()[a]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(a,e){"string"==typeof a&&(a=(e?e.$:document).createTextNode(a));this.$=a},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(a){this.$.nodeValue=a},split:function(a){var e=this.$.parentNode,c=e.childNodes.length,f=this.getLength(),h=this.getDocument(),m=new CKEDITOR.dom.text(this.$.splitText(a),h);e.childNodes.length==c&&(a>=f?(m=h.createText(""),m.insertAfter(this)):(a=h.createText(""),a.insertAfter(m),a.remove()));return m},substring:function(a,e){return"number"!=typeof e?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,e)}}),function(){function a(a,f,e){var m=a.serializable,l=f[e?"endContainer":"startContainer"],k=e?"endOffset":"startOffset",d=m?f.document.getById(a.startNode):a.startNode;a=m?f.document.getById(a.endNode):a.endNode;l.equals(d.getPrevious())?(f.startOffset=f.startOffset-l.getLength()-a.getPrevious().getLength(),l=a.getNext()):l.equals(a.getPrevious())&&(f.startOffset-=l.getLength(),l=a.getNext());l.equals(d.getParent())&&f[k]++;l.equals(a.getParent())&&f[k]++;f[e?"endContainer":"startContainer"]=l;return f}CKEDITOR.dom.rangeList=function(a){if(a instanceof CKEDITOR.dom.rangeList)return a;a?a instanceof CKEDITOR.dom.range&&(a=[a]):a=[];return CKEDITOR.tools.extend(a,e)};var e={createIterator:function(){var a=this,f=CKEDITOR.dom.walker.bookmark(),e=[],m;return{getNextRange:function(l){m=void 0===m?0:m+1;var k=a[m];if(k&&1<a.length){if(!m)for(var d=a.length-1;0<=d;d--)e.unshift(a[d].createBookmark(!0));if(l)for(var b=0;a[m+b+1];){var g=k.document;l=0;d=g.getById(e[b].endNode);for(g=g.getById(e[b+1].startNode);;){d=d.getNextSourceNode(!1);if(g.equals(d))l=1;else if(f(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary())continue;break}if(!l)break;b++}for(k.moveToBookmark(e.shift());b--;)d=a[++m],d.moveToBookmark(e.shift()),k.setEnd(d.endContainer,d.endOffset)}return k}}},createBookmarks:function(c){for(var f=[],e,m=0;m<this.length;m++){f.push(e=this[m].createBookmark(c,!0));for(var l=m+1;l<this.length;l++)this[l]=a(e,this[l]),this[l]=a(e,this[l],!0)}return f},createBookmarks2:function(a){for(var f=[],e=0;e<this.length;e++)f.push(this[e].createBookmark2(a));return f},moveToBookmarks:function(a){for(var f=0;f<this.length;f++)this[f].moveToBookmark(a[f])}}}(),function(){function a(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function e(b){var d=CKEDITOR.skin["ua_"+b],c=CKEDITOR.env;if(d)for(var d=d.split(",").sort(function(a,b){return a>b?-1:1}),f=0,e;f<d.length;f++)if(e=d[f],c.ie&&(e.replace(/^ie/,"")==c.version||c.quirks&&"iequirks"==e)&&(e="ie"),c[e]){b+="_"+d[f];break}return CKEDITOR.getUrl(a()+b+".css")}function c(a,d){m[a]||(CKEDITOR.document.appendStyleSheet(e(a)),m[a]=1);d&&d()}function f(a){var d=a.getById(l);d||(d=a.getHead().append("style"),d.setAttribute("id",l),d.setAttribute("type","text/css"));return d}function h(a,d,c){var f,e,h;if(CKEDITOR.env.webkit)for(d=d.split("}").slice(0,-1),e=0;e<d.length;e++)d[e]=d[e].split("{");for(var k=0;k<a.length;k++)if(CKEDITOR.env.webkit)for(e=0;e<d.length;e++){h=d[e][1];for(f=0;f<c.length;f++)h=h.replace(c[f][0],c[f][1]);a[k].$.sheet.addRule(d[e][0],h)}else{h=d;for(f=0;f<c.length;f++)h=h.replace(c[f][0],c[f][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?a[k].$.styleSheet.cssText+=h:a[k].$.innerHTML+=h}}var m={};CKEDITOR.skin={path:a,loadPart:function(b,d){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(a()+"skin.js"),function(){c(b,d)}):c(b,d)},getPath:function(a){return CKEDITOR.getUrl(e(a))},icons:{},addIcon:function(a,d,c,f){a=a.toLowerCase();this.icons[a]||(this.icons[a]={path:d,offset:c||0,bgsize:f||"16px"})},getIconStyle:function(a,d,c,f,e){var h;a&&(a=a.toLowerCase(),d&&(h=this.icons[a+"-rtl"]),h||(h=this.icons[a]));a=c||h&&h.path||"";f=f||h&&h.offset;e=e||h&&h.bgsize||"16px";a&&(a=a.replace(/'/g,"\\'"));return a&&"background-image:url('"+CKEDITOR.getUrl(a)+"');background-position:0 "+f+"px;background-size:"+e+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(a){var c=f(CKEDITOR.document);return(this.setUiColor=function(a){this.uiColor=a;var b=CKEDITOR.skin.chameleon,f="",e="";"function"==typeof b&&(f=b(this,"editor"),e=b(this,"panel"));a=[[d,a]];h([c],f,a);h(k,e,a)}).call(this,a)}});var l="cke_ui_color",k=[],d=/\$color/g;CKEDITOR.on("instanceLoaded",function(a){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var c=a.editor;a=function(a){a=(a.data[0]||a.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!a.getById("cke_ui_color")){a=f(a);k.push(a);var b=c.getUiColor();b&&h([a],CKEDITOR.skin.chameleon(c,"panel"),[[d,b]])}};c.on("panelShow",a);c.on("menuShow",a);c.config.uiColor&&c.setUiColor(c.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var a=CKEDITOR.dom.element.createFromHtml('\x3cdiv style\x3d"width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"\x3e\x3c/div\x3e',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{var e=a.getComputedStyle("border-top-color"),c=a.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=c)}catch(f){CKEDITOR.env.hc=!1}a.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(a=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<a.length;e++)CKEDITOR.editor.prototype.constructor.apply(a[e][0],a[e][1]),CKEDITOR.add(a[e][0])}(),CKEDITOR.skin.name="moono-lisa",CKEDITOR.skin.ua_editor="ie,iequirks,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie8",CKEDITOR.skin.chameleon=function(){var a=function(){return function(a,f){for(var e=a.match(/[^#]./g),m=0;3>m;m++){var l=m,k;k=parseInt(e[m],16);k=("0"+(0>f?0|k*(1+f):0|k+(255-k)*f).toString(16)).slice(-2);e[l]=k}return"#"+e.join("")}}(),e={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_bottom [background-color:{defaultBackground};border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [background-color:{defaultBackground};border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [background-color:{defaultBackground};outline-color:{defaultBorder};] {id} .cke_dialog_tab [background-color:{dialogTab};border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [background-color:{lightBackground};] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} a.cke_button_off:hover,{id} a.cke_button_off:focus,{id} a.cke_button_off:active [background-color:{darkBackground};border-color:{toolbarElementsBorder};] {id} .cke_button_on [background-color:{ckeButtonOn};border-color:{toolbarElementsBorder};] {id} .cke_toolbar_separator,{id} .cke_toolgroup a.cke_button:last-child:after,{id} .cke_toolgroup a.cke_button.cke_button_disabled:hover:last-child:after [background-color: {toolbarElementsBorder};border-color: {toolbarElementsBorder};] {id} a.cke_combo_button:hover,{id} a.cke_combo_button:focus,{id} .cke_combo_on a.cke_combo_button [border-color:{toolbarElementsBorder};background-color:{darkBackground};] {id} .cke_combo:after [border-color:{toolbarElementsBorder};] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover,{id} a.cke_path_item:focus,{id} a.cke_path_item:active [background-color:{darkBackground};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [background-color:{lightBackground};border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover,.cke_menubutton:focus,.cke_menubutton:active [background-color:{menubuttonHover};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menubutton_disabled:hover .cke_menubutton_icon,.cke_menubutton_disabled:focus .cke_menubutton_icon,.cke_menubutton_disabled:active .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(c,f){var h=a(c.uiColor,.4),h={id:"."+c.id,defaultBorder:a(h,-.2),toolbarElementsBorder:a(h,-.25),defaultBackground:h,lightBackground:a(h,.8),darkBackground:a(h,-.15),ckeButtonOn:a(h,.4),ckeResizer:a(h,-.4),ckeColorauto:a(h,.8),dialogBody:a(h,.7),dialogTab:a(h,.65),dialogTabSelected:"#FFF",dialogTabSelectedBorder:"#FFF",elementsPathColor:a(h,-.6),menubuttonHover:a(h,.1),menubuttonIcon:a(h,.5),menubuttonIconHover:a(h,.3)};return e[f].output(h).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(a){this._||(this._={});this._["default"]=this._.initValue=a["default"]||"";this._.required=a.required||!1;for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);b.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,b);return this._},e={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},c={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},f={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},h=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",b)}},!0),m=/^on([A-Z]\w+)/,l=function(a){for(var b in a)(m.test(b)||"title"==b||"type"==b)&&delete a[b];return a},k=function(a){a=a.data.getKeystroke();a==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):a==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(d,b,c,f){if(!(4>arguments.length)){var e=a.call(this,b);e.labelId=CKEDITOR.tools.getNextId()+
"_label";this._.children=[];var h={role:b.role||"presentation"};b.includeLabel&&(h["aria-labelledby"]=e.labelId);CKEDITOR.ui.dialog.uiElement.call(this,d,b,c,"div",null,h,function(){var a=[],c=b.required?" cke_required":"";"horizontal"!=b.labelLayout?a.push('\x3clabel class\x3d"cke_dialog_ui_labeled_label'+c+'" ',' id\x3d"'+e.labelId+'"',e.inputId?' for\x3d"'+e.inputId+'"':"",(b.labelStyle?' style\x3d"'+b.labelStyle+'"':"")+"\x3e",b.label,"\x3c/label\x3e",'\x3cdiv class\x3d"cke_dialog_ui_labeled_content"',b.controlStyle?' style\x3d"'+b.controlStyle+'"':"",' role\x3d"presentation"\x3e',f.call(this,d,b),"\x3c/div\x3e"):(c={type:"hbox",widths:b.widths,padding:0,children:[{type:"html",html:'\x3clabel class\x3d"cke_dialog_ui_labeled_label'+c+'" id\x3d"'+e.labelId+'" for\x3d"'+e.inputId+'"'+(b.labelStyle?' style\x3d"'+b.labelStyle+'"':"")+"\x3e"+CKEDITOR.tools.htmlEncode(b.label)+"\x3c/label\x3e"},{type:"html",html:'\x3cspan class\x3d"cke_dialog_ui_labeled_content"'+(b.controlStyle?' style\x3d"'+b.controlStyle+
'"':"")+"\x3e"+f.call(this,d,b)+"\x3c/span\x3e"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(d,c,a));return a.join("")})}},textInput:function(d,b,c){if(!(3>arguments.length)){a.call(this,b);var f=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",e={"class":"cke_dialog_ui_input_"+b.type,id:f,type:b.type};b.validate&&(this.validate=b.validate);b.maxLength&&(e.maxlength=b.maxLength);b.size&&(e.size=b.size);b.inputStyle&&(e.style=b.inputStyle);var h=this,l=!1;d.on("load",function(){h.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(l=!0)});h.getInputElement().on("keyup",function(a){13==a.data.getKeystroke()&&l&&(d.getButton("ok")&&setTimeout(function(){d.getButton("ok").click()},0),l=!1);h.bidi&&k.call(h,a)},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,d,b,c,function(){var a=['\x3cdiv class\x3d"cke_dialog_ui_input_',b.type,'" role\x3d"presentation"'];b.width&&a.push('style\x3d"width:'+b.width+'" ');a.push("\x3e\x3cinput ");e["aria-labelledby"]=this._.labelId;this._.required&&(e["aria-required"]=this._.required);for(var d in e)a.push(d+'\x3d"'+e[d]+'" ');a.push(" /\x3e\x3c/div\x3e");return a.join("")})}},textarea:function(d,b,c){if(!(3>arguments.length)){a.call(this,b);var f=this,e=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",h={};b.validate&&(this.validate=b.validate);h.rows=b.rows||5;h.cols=b.cols||20;h["class"]="cke_dialog_ui_input_textarea "+(b["class"]||"");"undefined"!=typeof b.inputStyle&&(h.style=b.inputStyle);b.dir&&(h.dir=b.dir);if(f.bidi)d.on("load",function(){f.getInputElement().on("keyup",k)},f);CKEDITOR.ui.dialog.labeledElement.call(this,d,b,c,function(){h["aria-labelledby"]=this._.labelId;this._.required&&(h["aria-required"]=this._.required);var a=['\x3cdiv class\x3d"cke_dialog_ui_input_textarea" role\x3d"presentation"\x3e\x3ctextarea id\x3d"',e,'" '],b;for(b in h)a.push(b+'\x3d"'+CKEDITOR.tools.htmlEncode(h[b])+'" ');a.push("\x3e",CKEDITOR.tools.htmlEncode(f._["default"]),"\x3c/textarea\x3e\x3c/div\x3e");return a.join("")})}},checkbox:function(d,b,c){if(!(3>arguments.length)){var f=a.call(this,b,{"default":!!b["default"]});b.validate&&(this.validate=b.validate);CKEDITOR.ui.dialog.uiElement.call(this,d,b,c,"span",null,null,function(){var a=CKEDITOR.tools.extend({},b,{id:b.id?b.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),c=[],g=CKEDITOR.tools.getNextId()+"_label",e={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};l(a);b["default"]&&(e.checked="checked");"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle);f.checkbox=new CKEDITOR.ui.dialog.uiElement(d,a,c,"input",null,e);c.push(' \x3clabel id\x3d"',g,'" for\x3d"',e.id,'"'+(b.labelStyle?' style\x3d"'+b.labelStyle+'"':"")+"\x3e",CKEDITOR.tools.htmlEncode(b.label),"\x3c/label\x3e");return c.join("")})}},radio:function(d,b,c){if(!(3>arguments.length)){a.call(this,b);this._["default"]||(this._["default"]=this._.initValue=b.items[0][1]);b.validate&&(this.validate=b.validate);var f=[],e=this;b.role="radiogroup";b.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,d,b,c,function(){for(var a=[],c=[],g=(b.id?b.id:CKEDITOR.tools.getNextId())+"_radio",h=0;h<b.items.length;h++){var k=b.items[h],m=void 0!==k[2]?k[2]:k[0],A=void 0!==k[1]?k[1]:k[0],r=CKEDITOR.tools.getNextId()+"_radio_input",y=r+"_label",r=CKEDITOR.tools.extend({},b,{id:r,title:null,type:null},!0),m=CKEDITOR.tools.extend({},r,{title:m},!0),D={type:"radio","class":"cke_dialog_ui_radio_input",name:g,value:A,"aria-labelledby":y},B=[];e._["default"]==A&&(D.checked="checked");l(r);l(m);"undefined"!=typeof r.inputStyle&&(r.style=r.inputStyle);r.keyboardFocusable=!0;f.push(new CKEDITOR.ui.dialog.uiElement(d,r,B,"input",null,D));B.push(" ");new CKEDITOR.ui.dialog.uiElement(d,m,B,"label",null,{id:y,"for":D.id},k[0]);a.push(B.join(""))}new CKEDITOR.ui.dialog.hbox(d,f,a,c);return c.join("")});this._.children=f}},button:function(d,b,c){if(arguments.length){"function"==typeof b&&(b=b(d.getParentEditor()));a.call(this,b,{disabled:b.disabled||!1});CKEDITOR.event.implementOn(this);var f=this;d.on("load",function(){var a=this.getElement();(function(){a.on("click",function(a){f.click();a.data.preventDefault()});a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(f.click(),a.data.preventDefault())})})();a.unselectable()},this);var e=CKEDITOR.tools.extend({},b);delete e.style;var h=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,d,e,c,"a",null,{style:b.style,href:"javascript:void(0)",title:b.label,hidefocus:"true","class":b["class"],role:"button","aria-labelledby":h},'\x3cspan id\x3d"'+h+'" class\x3d"cke_dialog_ui_button"\x3e'+
CKEDITOR.tools.htmlEncode(b.label)+"\x3c/span\x3e")}},select:function(d,b,c){if(!(3>arguments.length)){var f=a.call(this,b);b.validate&&(this.validate=b.validate);f.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,d,b,c,function(){var a=CKEDITOR.tools.extend({},b,{id:b.id?b.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),c=[],g=[],e={id:f.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};c.push('\x3cdiv class\x3d"cke_dialog_ui_input_',b.type,'" role\x3d"presentation"');b.width&&c.push('style\x3d"width:'+b.width+'" ');c.push("\x3e");void 0!==b.size&&(e.size=b.size);void 0!==b.multiple&&(e.multiple=b.multiple);l(a);for(var h=0,k;h<b.items.length&&(k=b.items[h]);h++)g.push('\x3coption value\x3d"',CKEDITOR.tools.htmlEncode(void 0!==k[1]?k[1]:k[0]).replace(/"/g,"\x26quot;"),'" /\x3e ',CKEDITOR.tools.htmlEncode(k[0]));"undefined"!=typeof a.inputStyle&&(a.style=a.inputStyle);f.select=new CKEDITOR.ui.dialog.uiElement(d,a,c,"select",null,e,g.join(""));c.push("\x3c/div\x3e");return c.join("")})}},file:function(d,b,c){if(!(3>arguments.length)){void 0===b["default"]&&(b["default"]="");var f=CKEDITOR.tools.extend(a.call(this,b),{definition:b,buttons:[]});b.validate&&(this.validate=b.validate);d.on("load",function(){CKEDITOR.document.getById(f.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,d,b,c,function(){f.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['\x3ciframe frameborder\x3d"0" allowtransparency\x3d"0" class\x3d"cke_dialog_ui_input_file" role\x3d"presentation" id\x3d"',f.frameId,'" title\x3d"',b.label,'" src\x3d"javascript:void('];a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");a.push(')"\x3e\x3c/iframe\x3e');return a.join("")})}},fileButton:function(d,b,c){var f=this;if(!(3>arguments.length)){a.call(this,b);b.validate&&(this.validate=b.validate);var e=CKEDITOR.tools.extend({},b),h=e.onClick;e.className=(e.className?e.className+" ":"")+"cke_dialog_ui_button";e.onClick=function(a){var c=b["for"];h&&!1===h.call(this,a)||(d.getContentElement(c[0],c[1]).submit(),this.disable())};d.on("load",function(){d.getContentElement(b["for"][0],b["for"][1])._.buttons.push(f)});CKEDITOR.ui.dialog.button.call(this,d,e,c)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(f,e,h){if(!(3>arguments.length)){var k=[],l=e.html;"\x3c"!=l.charAt(0)&&(l="\x3cspan\x3e"+l+"\x3c/span\x3e");var m=e.focus;if(m){var v=this.focus;this.focus=function(){("function"==typeof m?m:v).call(this);this.fire("focus")};e.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,f,e,k,"span",null,null,"");k=k.join("").match(a);l=l.match(b)||["","",""];c.test(l[1])&&(l[1]=l[1].slice(0,-1),l[2]="/"+l[2]);h.push([l[1]," ",k[1]||"",l[2]].join(""))}}}(),fieldset:function(a,b,c,f,e){var h=e.label;this._={children:b};CKEDITOR.ui.dialog.uiElement.call(this,a,e,f,"fieldset",null,null,function(){var a=[];h&&a.push("\x3clegend"+
(e.labelStyle?' style\x3d"'+e.labelStyle+'"':"")+"\x3e"+h+"\x3c/legend\x3e");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);1>b.getChildCount()?(new CKEDITOR.dom.text(a,CKEDITOR.document)).appendTo(b):b.getChild(0).$.nodeValue=a;return this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||1>a.getChildCount()?"":a.getChild(0).getText()},eventProcessors:h},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){if(this.bidi){var b=a&&a.charAt(0);(b=""==b?"ltr":""==b?"rtl":null)&&(a=a.slice(1));this.setDirectionMarker(b)}a||(a="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var a=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&a){var b=this.getDirectionMarker();b&&(a=("ltr"==b?"":"")+a)}return a},setDirectionMarker:function(a){var b=this.getInputElement();a?b.setAttributes({dir:a,"data-cke-dir-marker":a}):this.getDirectionMarker()&&b.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},f,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var f=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),e=this.getInputElement().$;f.$.text=a;f.$.value=void 0===b||null===b?a:b;void 0===c||null===c?CKEDITOR.env.ie?e.add(f.$):e.add(f.$,null):e.add(f.$,c);return this},remove:function(a){this.getInputElement().$.remove(a);return this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},keyboardFocusable:!0},f,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a;!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return h.onChange.apply(this,arguments);a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this);this.on("change",b);return null}},keyboardFocusable:!0},f,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var c=this._.children,f,e=0;e<c.length&&(f=c[e]);e++)f.getElement().$.checked=f.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a=this._.children,b;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked){a[b].getElement().focus();return}a[0].getElement().focus()},eventProcessors:{onChange:function(a,b){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version)return h.onChange.apply(this,arguments);a.on("load",function(){for(var a=this._.children,b=this,d=0;d<a.length;d++)a[d].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",b);return null}}},f,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,f,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<a.$.forms.length?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,f=function(a,b,d,c){a.on("formLoaded",function(){a.getInputElement().on(d,c,a)})},e;for(e in a)if(c=e.match(b))this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):f(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},reset:function(){function a(){c.$.open();var d="";e.size&&(d=e.size-(CKEDITOR.env.ie?7:0));var x=b.frameId+"_input";c.$.write(['\x3chtml dir\x3d"'+l+'" lang\x3d"'+m+'"\x3e\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e\x3cbody style\x3d"margin: 0; overflow: hidden; background: transparent;"\x3e','\x3cform enctype\x3d"multipart/form-data" method\x3d"POST" dir\x3d"'+l+'" lang\x3d"'+m+'" action\x3d"',CKEDITOR.tools.htmlEncode(e.action),'"\x3e\x3clabel id\x3d"',b.labelId,'" for\x3d"',x,'" style\x3d"display:none"\x3e',CKEDITOR.tools.htmlEncode(e.label),'\x3c/label\x3e\x3cinput style\x3d"width:100%" id\x3d"',x,'" aria-labelledby\x3d"',b.labelId,'" type\x3d"file" name\x3d"',CKEDITOR.tools.htmlEncode(e.id||"cke_upload"),'" size\x3d"',CKEDITOR.tools.htmlEncode(0<d?d:""),'" /\x3e\x3c/form\x3e\x3c/body\x3e\x3c/html\x3e\x3cscript\x3e',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+h+");","window.onbeforeunload \x3d function() {window.parent.CKEDITOR.tools.callFunction("+k+")}","\x3c/script\x3e"].join(""));c.$.close();for(d=0;d<f.length;d++)f[d].enable()}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),e=b.definition,f=b.buttons,h=this.formLoadedNumber,k=this.formUnloadNumber,l=b.dialog._.editor.lang.dir,m=b.dialog._.editor.langCode;h||(h=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),k=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(h);CKEDITOR.tools.removeFunction(k)}));CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",b)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",e);CKEDITOR.dialog.addUIElement("password",e);CKEDITOR.dialog.addUIElement("textarea",c);CKEDITOR.dialog.addUIElement("checkbox",c);CKEDITOR.dialog.addUIElement("radio",c);CKEDITOR.dialog.addUIElement("button",c);CKEDITOR.dialog.addUIElement("select",c);CKEDITOR.dialog.addUIElement("file",c);CKEDITOR.dialog.addUIElement("fileButton",c);CKEDITOR.dialog.addUIElement("html",c);CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var e=b.children,f,h=[],k=[],l=0;l<e.length&&(f=e[l]);l++){var m=[];h.push(m);k.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(a,f,m))}return new CKEDITOR.ui.dialog[b.type](a,k,h,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function a(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,d=b-1;d>b-a;d--)if(this._.tabs[this._.tabIdList[d%a]][0].$.offsetHeight)return this._.tabIdList[d%a];return null}function e(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),d=b+1;d<b+a;d++)if(this._.tabs[this._.tabIdList[d%a]][0].$.offsetHeight)return this._.tabIdList[d%a];return null}function c(a,b){for(var d=a.$.getElementsByTagName("input"),c=0,g=d.length;c<g;c++){var e=new CKEDITOR.dom.element(d[c]);"text"==e.getAttribute("type").toLowerCase()&&(b?(e.setAttribute("value",e.getCustomData("fake_value")||""),e.removeCustomData("fake_value")):(e.setCustomData("fake_value",e.getAttribute("value")),e.setAttribute("value","")))}}function f(a,b){var d=this.getInputElement();d&&(a?d.removeAttribute("aria-invalid"):d.setAttribute("aria-invalid",!0));a||(this.select?this.select():this.focus());b&&alert(b);this.fire("validated",{valid:a,msg:b})}function h(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}
function m(a){var b=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",u).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),d=b.getChild([0,0,0,0,0]),c=d.getChild(0),g=d.getChild(1);a.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(d);!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(a="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('\x3ciframe frameBorder\x3d"0" class\x3d"cke_iframe_shim" src\x3d"'+a+'" tabIndex\x3d"-1"\x3e\x3c/iframe\x3e').appendTo(d.getParent()));c.unselectable();g.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:c,close:g,tabs:d.getChild(2),contents:d.getChild([3,0,0,0]),footer:d.getChild([3,0,1,0])}}}function l(a,b,d){this.element=b;this.focusIndex=d;this.tabIndex=0;this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.currentFocusIndex=this.focusIndex;this.element.focus()};b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});b.on("focus",function(){this.fire("mouseover")});b.on("blur",function(){this.fire("mouseout")})}function k(a){function b(){a.layout()}var d=CKEDITOR.document.getWindow();d.on("resize",b);a.on("hide",function(){d.removeListener("resize",b)})}function d(a,b){this._={dialog:a};CKEDITOR.tools.extend(this,b)}function b(a){function b(d){var k=a.getSize(),l=CKEDITOR.document.getWindow().getViewPaneSize(),m=d.data.$.screenX,n=d.data.$.screenY,t=m-c.x,r=n-c.y;c={x:m,y:n};g.x+=t;g.y+=r;a.move(g.x+h[3]<f?-h[3]:g.x-h[1]>l.width-k.width-f?l.width-k.width+("rtl"==e.lang.dir?0:h[1]):g.x,g.y+h[0]<f?-h[0]:g.y-h[2]>l.height-k.height-f?l.height-k.height+h[2]:g.y,1);d.data.preventDefault()}function d(){CKEDITOR.document.removeListener("mousemove",b);CKEDITOR.document.removeListener("mouseup",d);if(CKEDITOR.env.ie6Compat){var a=B.getChild(0).getFrameDocument();a.removeListener("mousemove",b);a.removeListener("mouseup",d)}}var c=null,g=null,e=a.getParentEditor(),f=e.config.dialog_magnetDistance,h=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof f&&(f=20);a.parts.title.on("mousedown",function(e){c={x:e.data.$.screenX,y:e.data.$.screenY};CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",d);g=a.getPosition();if(CKEDITOR.env.ie6Compat){var f=B.getChild(0).getFrameDocument();f.on("mousemove",b);f.on("mouseup",d)}e.data.preventDefault()},a)}function g(a){function b(d){var n="rtl"==e.lang.dir,t=m.width,r=m.height,x=t+(d.data.$.screenX-l.x)*(n?-1:1)*(a._.moved?1:2),v=r+(d.data.$.screenY-l.y)*(a._.moved?1:2),q=a._.element.getFirst(),q=n&&q.getComputedStyle("right"),u=a.getPosition();u.y+v>k.height&&(v=k.height-u.y);(n?q:u.x)+x>k.width&&(x=k.width-(n?q:u.x));if(g==CKEDITOR.DIALOG_RESIZE_WIDTH||g==CKEDITOR.DIALOG_RESIZE_BOTH)t=Math.max(c.minWidth||0,x-f);if(g==CKEDITOR.DIALOG_RESIZE_HEIGHT||g==CKEDITOR.DIALOG_RESIZE_BOTH)r=Math.max(c.minHeight||0,v-h);a.resize(t,r);a._.moved||a.layout();d.data.preventDefault()}function d(){CKEDITOR.document.removeListener("mouseup",d);CKEDITOR.document.removeListener("mousemove",b);n&&(n.remove(),n=null);if(CKEDITOR.env.ie6Compat){var a=B.getChild(0).getFrameDocument();a.removeListener("mouseup",d);a.removeListener("mousemove",b)}}var c=a.definition,g=c.resizable;if(g!=CKEDITOR.DIALOG_RESIZE_NONE){var e=a.getParentEditor(),f,h,k,l,m,n,t=CKEDITOR.tools.addFunction(function(c){m=a.getSize();var g=a.parts.contents;g.$.getElementsByTagName("iframe").length&&(n=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_dialog_resize_cover" style\x3d"height: 100%; position: absolute; width: 100%;"\x3e\x3c/div\x3e'),g.append(n));h=m.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));f=m.width-a.parts.contents.getSize("width",1);l={x:c.screenX,y:c.screenY};k=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",b);CKEDITOR.document.on("mouseup",d);CKEDITOR.env.ie6Compat&&(g=B.getChild(0).getFrameDocument(),g.on("mousemove",b),g.on("mouseup",d));c.preventDefault&&c.preventDefault()});a.on("load",function(){var b="";g==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":g==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_resizer'+b+" cke_resizer_"+e.lang.dir+'" title\x3d"'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+
'" onmousedown\x3d"CKEDITOR.tools.callFunction('+t+', event )"\x3e'+("ltr"==e.lang.dir?"":"")+"\x3c/div\x3e");a.parts.footer.append(b,1)});e.on("destroy",function(){CKEDITOR.tools.removeFunction(t)})}}function n(a){a.data.preventDefault(1)}function q(a){var b=CKEDITOR.document.getWindow(),d=a.config,c=CKEDITOR.skinName||a.config.skin,g=d.dialog_backgroundCoverColor||("moono-lisa"==c?"black":"white"),c=d.dialog_backgroundCoverOpacity,e=d.baseFloatZIndex,d=CKEDITOR.tools.genKey(g,c,e),f=D[d];f?f.show():(e=['\x3cdiv tabIndex\x3d"-1" style\x3d"position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",e,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+g,'" class\x3d"cke_dialog_background_cover"\x3e'],CKEDITOR.env.ie6Compat&&(g="\x3chtml\x3e\x3cbody style\x3d\\'background-color:"+g+";\\'\x3e\x3c/body\x3e\x3c/html\x3e",e.push('\x3ciframe hidefocus\x3d"true" frameborder\x3d"0" id\x3d"cke_dialog_background_iframe" src\x3d"javascript:'),e.push("void((function(){"+encodeURIComponent("document.open();("+
CKEDITOR.tools.fixDomain+")();document.write( '"+g+"' );document.close();")+"})())"),e.push('" style\x3d"position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity\x3d0)"\x3e\x3c/iframe\x3e')),e.push("\x3c/div\x3e"),f=CKEDITOR.dom.element.createFromHtml(e.join("")),f.setOpacity(void 0!==c?c:.5),f.on("keydown",n),f.on("keypress",n),f.on("keyup",n),f.appendTo(CKEDITOR.document.getBody()),D[d]=f);a.focusManager.add(f);B=f;a=function(){var a=b.getViewPaneSize();f.setStyles({width:a.width+"px",height:a.height+"px"})};var h=function(){var a=b.getScrollPosition(),d=CKEDITOR.dialog._.currentTop;f.setStyles({left:a.x+"px",top:a.y+"px"});if(d){do a=d.getPosition(),d.move(a.x,a.y);while(d=d._.parentDialog)}};y=a;b.on("resize",a);a();CKEDITOR.env.mac&&CKEDITOR.env.webkit||f.focus();if(CKEDITOR.env.ie6Compat){var k=function(){h();arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){k.prevScrollHandler=window.onscroll||function(){};window.onscroll=k},0);h()}}function p(a){B&&(a.focusManager.remove(B),a=CKEDITOR.document.getWindow(),B.hide(),a.removeListener("resize",y),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),y=null)}var w=CKEDITOR.tools.cssLength,u='\x3cdiv class\x3d"cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir\x3d"{langDir}" lang\x3d"{langCode}" role\x3d"dialog" aria-labelledby\x3d"cke_dialog_title_{id}"\x3e\x3ctable class\x3d"cke_dialog '+
CKEDITOR.env.cssClass+' cke_{langDir}" style\x3d"position:absolute" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd role\x3d"presentation"\x3e\x3cdiv class\x3d"cke_dialog_body" role\x3d"presentation"\x3e\x3cdiv id\x3d"cke_dialog_title_{id}" class\x3d"cke_dialog_title" role\x3d"presentation"\x3e\x3c/div\x3e\x3ca id\x3d"cke_dialog_close_button_{id}" class\x3d"cke_dialog_close_button" href\x3d"javascript:void(0)" title\x3d"{closeTitle}" role\x3d"button"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e\x3cdiv id\x3d"cke_dialog_tabs_{id}" class\x3d"cke_dialog_tabs" role\x3d"tablist"\x3e\x3c/div\x3e\x3ctable class\x3d"cke_dialog_contents" role\x3d"presentation"\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_contents_{id}" class\x3d"cke_dialog_contents_body" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd id\x3d"cke_dialog_footer_{id}" class\x3d"cke_dialog_footer" role\x3d"presentation"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e';CKEDITOR.dialog=function(d,c){function k(){var a=z._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,d=0;d<b;d++)a[d].focusIndex=d}function l(a){var b=z._.focusList;a=a||0;if(!(1>b.length)){var d=z._.currentFocusIndex;z._.tabBarMode&&0>a&&(d=0);try{b[d].getInputElement().$.blur()}catch(c){}var g=d,e=1<z._.pageCount;do{g+=a;if(e&&!z._.tabBarMode&&(g==b.length||-1==g)){z._.tabBarMode=!0;z._.tabs[z._.currentTabId][0].focus();z._.currentFocusIndex=-1;return}g=(g+b.length)%b.length;if(g==d)break}while(a&&!b[g].isFocusable());b[g].focus();"text"==b[g].type&&b[g].select()}}function n(b){if(z==CKEDITOR.dialog._.currentTop){var c=b.data.getKeystroke(),g="rtl"==d.lang.dir,f=[37,38,39,40];y=w=0;if(9==c||c==CKEDITOR.SHIFT+9)l(c==CKEDITOR.SHIFT+9?-1:1),y=1;else if(c==CKEDITOR.ALT+121&&!z._.tabBarMode&&1<z.getPageCount())z._.tabBarMode=!0,z._.tabs[z._.currentTabId][0].focus(),z._.currentFocusIndex=-1,y=1;else if(-1!=CKEDITOR.tools.indexOf(f,c)&&z._.tabBarMode)c=-1!=CKEDITOR.tools.indexOf([g?39:37,38],c)?a.call(z):e.call(z),z.selectPage(c),z._.tabs[c][0].focus(),y=1;else if(13!=c&&32!=c||!z._.tabBarMode)if(13==c)c=b.data.getTarget(),c.is("a","button","select","textarea")||c.is("input")&&"button"==c.$.type||((c=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(c.click,0,c),y=1),w=1;else if(27==c)(c=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(c.click,0,c):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),w=1;else return;else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1),y=1;x(b)}}function x(a){y?a.data.preventDefault(1):w&&a.data.stopPropagation()}var v=CKEDITOR.dialog._.dialogDefinitions[c],q=CKEDITOR.tools.clone(t),u=d.config.dialog_buttonsOrder||"OS",A=d.lang.dir,p={},y,w;("OS"==u&&CKEDITOR.env.mac||"rtl"==u&&"ltr"==A||"ltr"==u&&"rtl"==A)&&q.buttons.reverse();v=CKEDITOR.tools.extend(v(d),q);v=CKEDITOR.tools.clone(v);v=new r(this,v);q=m(d);this._={editor:d,element:q.element,name:c,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=q.parts;CKEDITOR.tools.setTimeout(function(){d.fire("ariaWidget",this.parts.contents)},0,this);q={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};q["rtl"==A?"right":"left"]=0;this.parts.dialog.setStyles(q);CKEDITOR.event.call(this);this.definition=v=CKEDITOR.fire("dialogDefinition",{name:c,definition:v},d).definition;if(!("removeDialogTabs"in d._)&&d.config.removeDialogTabs){q=d.config.removeDialogTabs.split(";");for(A=0;A<q.length;A++)if(u=q[A].split(":"),2==u.length){var D=u[0];p[D]||(p[D]=[]);p[D].push(u[1])}d._.removeDialogTabs=p}if(d._.removeDialogTabs&&(p=d._.removeDialogTabs[c]))for(A=0;A<p.length;A++)v.removeContents(p[A]);if(v.onLoad)this.on("load",v.onLoad);if(v.onShow)this.on("show",v.onShow);if(v.onHide)this.on("hide",v.onHide);if(v.onOk)this.on("ok",function(a){d.fire("saveSnapshot");setTimeout(function(){d.fire("saveSnapshot")},0);!1===v.onOk.call(this,a)&&(a.data.hide=!1)});this.state=CKEDITOR.DIALOG_STATE_IDLE;if(v.onCancel)this.on("cancel",function(a){!1===v.onCancel.call(this,a)&&(a.data.hide=!1)});var z=this,B=function(a){var b=z._.contents,d=!1,c;for(c in b)for(var g in b[c])if(d=a.call(this,b[c][g]))return};this.on("ok",function(a){B(function(b){if(b.validate){var d=b.validate(this),c="string"==typeof d||!1===d;c&&(a.data.hide=!1,a.stop());f.call(b,!c,"string"==typeof d?d:void 0);return c}})},this,null,0);this.on("cancel",function(a){B(function(b){if(b.isChanged())return d.config.dialog_noConfirmCancel||confirm(d.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0);this.parts.close.on("click",function(a){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();a.data.preventDefault()},this);this.changeFocus=l;var C=this._.element;d.focusManager.add(C,1);this.on("show",function(){C.on("keydown",n,this);if(CKEDITOR.env.gecko)C.on("keypress",x,this)});this.on("hide",function(){C.removeListener("keydown",n);CKEDITOR.env.gecko&&C.removeListener("keypress",x);B(function(a){h.apply(a)})});this.on("iframeAdded",function(a){(new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document)).on("keydown",n,this,null,0)});this.on("show",function(){k();var a=1<z._.pageCount;d.config.dialog_startupFocusTab&&a?(z._.tabBarMode=!0,z._.tabs[z._.currentTabId][0].focus(),z._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=a?-1:this._.focusList.length-1,v.onFocus?(a=v.onFocus.call(this))&&a.focus():l(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove();b.appendTo(a)},this);b(this);g(this);(new CKEDITOR.dom.text(v.title,CKEDITOR.document)).appendTo(this.parts.title);for(A=0;A<v.contents.length;A++)(p=v.contents[A])&&this.addPage(p);this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,l(1)),a.data.preventDefault())},this);A=[];p=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:v.buttons},A).getChild();this.parts.footer.setHtml(A.join(""));for(A=0;A<p.length;A++)this._.buttons[p[A].id]=p[A]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,d){var c=this._.element.getFirst(),g="rtl"==this._.editor.lang.dir,e="fixed"==c.getComputedStyle("position");CKEDITOR.env.ie&&c.setStyle("zoom","100%");e&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},e||(e=CKEDITOR.document.getWindow().getScrollPosition(),a+=e.x,b+=e.y),g&&(e=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-e.width-a),b={top:(0<b?b:0)+"px"},b[g?"right":"left"]=(0<a?a:0)+"px",c.setStyles(b),d&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody());this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,q(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);a.on("keydown",C);a.on("keyup",F);this._.hasFocus=!1;for(var d in b.contents)if(b.contents[d]){var a=b.contents[d],c=this._.tabs[a.id],g=a.requiredContent,e=0;if(c){for(var f in this._.contents[a.id]){var h=this._.contents[a.id][f];"hbox"!=h.type&&"vbox"!=h.type&&h.getInputElement()&&(h.requiredContent&&!this._.editor.activeFilter.check(h.requiredContent)?h.disable():(h.enable(),e++))}!e||g&&!this._.editor.activeFilter.check(g)?c[0].addClass("cke_dialog_tab_disabled"):c[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout();k(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),d=CKEDITOR.document.getWindow().getViewPaneSize(),c=(d.width-b.width)/2,g=(d.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(0<g?g:0)>d.height||b.width+(0<c?c:0)>d.width?a.setStyle("position","absolute"):a.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:c,this._.moved?this._.position.y:g)},foreach:function(a){for(var b in this._.contents)for(var d in this._.contents[b])a.call(this,this._.contents[b][d]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){this.foreach(a);return this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur();b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var a=this._.element;a.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(H(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;a.removeListener("keydown",C);a.removeListener("keyup",F);var d=this._.editor;d.focus();setTimeout(function(){d.focusManager.unlock();CKEDITOR.env.iOS&&d.window.focus()},0)}delete this._.parentDialog;this.foreach(function(a){a.resetInitValue&&a.resetInitValue()});this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],d=a.label?' title\x3d"'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",c=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),g=this._.contents[a.id]={},e=c.getChild(),f=0;c=e.shift();)c.notAllowed||"hbox"==c.type||"vbox"==c.type||f++,g[c.id]=c,"function"==typeof c.getChild&&e.push.apply(e,c.getChild());f||(a.hidden=!0);b=CKEDITOR.dom.element.createFromHtml(b.join(""));b.setAttribute("role","tabpanel");c=CKEDITOR.env;g="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber();d=CKEDITOR.dom.element.createFromHtml(['\x3ca class\x3d"cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",d,a.hidden?' style\x3d"display:none"':"",' id\x3d"',g,'"',c.gecko&&!c.hc?"":' href\x3d"javascript:void(0)"',' tabIndex\x3d"-1" hidefocus\x3d"true" role\x3d"tab"\x3e',a.label,"\x3c/a\x3e"].join(""));b.setAttribute("aria-labelledby",g);this._.tabs[a.id]=[d,b];this._.tabIdList.push(a.id);!a.hidden&&this._.pageCount++;this._.lastTab=d;this.updateStyle();b.setAttribute("name",a.id);b.appendTo(this.parts.contents);d.unselectable();this.parts.tabs.append(d);a.accessKey&&(E(this,this,"CTRL+"+a.accessKey,O,G),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:a,currentPage:this._.currentTabId})){for(var b in this._.tabs){var d=this._.tabs[b][0],g=this._.tabs[b][1];b!=a&&(d.removeClass("cke_dialog_tab_selected"),g.hide());g.setAttribute("aria-hidden",b!=a)}var e=this._.tabs[a];e[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(c(e[1]),e[1].show(),setTimeout(function(){c(e[1],1)},0)):e[1].show();this._.currentTabId=a;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(b){var d=this._.tabs[b]&&this._.tabs[b][0];d&&1!=this._.pageCount&&d.isVisible()&&(b==this._.currentTabId&&this.selectPage(a.call(this)),d.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){if(a=this._.tabs[a]&&this._.tabs[a][0])a.show(),this._.pageCount++,this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var d=this._.contents[a];return d&&d[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,d){return this.getContentElement(a,b).setValue(d)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new l(this,a,b));else{this._.focusList.splice(b,0,new l(this,a,b));for(var d=b+1;d<this._.focusList.length;d++)this._.focusList[d].focusIndex++}},setState:function(a){if(this.state!=a){this.state=a;if(a==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var b=this.getParentEditor().lang.dir,d={attributes:{"class":"cke_dialog_spinner"},styles:{"float":"rtl"==b?"right":"left"}};d.styles["margin-"+("rtl"==b?"left":"right")]="8px";this.parts.spinner=CKEDITOR.document.createElement("div",d);this.parts.spinner.setHtml("\x26#8987;");this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show();this.getButton("ok").disable()}else a==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",a)}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,d){a=a.config.removeDialogTabs;return!(a&&a.match(new RegExp("(?:^|;)"+b+":"+d+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){b=b||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.fire("ok",{hide:!0}).hide&&a.hide()}},b,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(d){return a(d,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,b){b=b||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.fire("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};a.type="button";a.override=function(b){return CKEDITOR.tools.extend(function(d){return a(d,b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var t={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},v=function(a,b,d){for(var c=0,g;g=a[c];c++)if(g.id==b||d&&g[d]&&(g=v(g[d],b,d)))return g;return null},x=function(a,b,d,c,g){if(d){for(var e=0,f;f=a[e];e++){if(f.id==d)return a.splice(e,0,b),b;if(c&&f[c]&&(f=x(f[c],b,d,c,!0)))return f}if(g)return null}a.push(b);return b},A=function(a,b,d){for(var c=0,g;g=a[c];c++){if(g.id==b)return a.splice(c,1);if(d&&g[d]&&(g=A(g[d],b,d)))return g}return null},r=function(a,b){this.dialog=a;for(var c=b.contents,g=0,e;e=c[g];g++)c[g]=e&&new d(a,e);CKEDITOR.tools.extend(this,b)};r.prototype={getContents:function(a){return v(this.contents,a)},getButton:function(a){return v(this.buttons,a)},addContents:function(a,b){return x(this.contents,a,b)},addButton:function(a,b){return x(this.buttons,a,b)},removeContents:function(a){A(this.contents,a)},removeButton:function(a){A(this.buttons,a)}};d.prototype={get:function(a){return v(this.elements,a,"children")},add:function(a,b){return x(this.elements,a,b,"children")},remove:function(a){A(this.elements,a,"children")}};var y,D={},B,z={},C=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,d=a.data.$.altKey,c=a.data.$.shiftKey,g=String.fromCharCode(a.data.$.keyCode);(b=z[(b?"CTRL+":"")+(d?"ALT+":"")+(c?"SHIFT+":"")+g])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},F=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,d=a.data.$.altKey,c=a.data.$.shiftKey,g=String.fromCharCode(a.data.$.keyCode);(b=z[(b?"CTRL+":"")+(d?"ALT+":"")+(c?"SHIFT+":"")+g])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))},E=function(a,b,d,c,g){(z[d]||(z[d]=[])).push({uiElement:a,dialog:b,key:d,keyup:g||a.accessKeyUp,keydown:c||a.accessKeyDown})},H=function(a){for(var b in z){for(var d=z[b],c=d.length-1;0<=c;c--)d[c].dialog!=a&&d[c].uiElement!=a||d.splice(c,1);0===d.length&&delete z[b]}},G=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},O=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(a,b,d,c,g,e,f){if(!(4>arguments.length)){var h=(c.call?c(b):c)||"div",k=["\x3c",h," "],l=(g&&g.call?g(b):g)||{},m=(e&&e.call?e(b):e)||{},n=(f&&f.call?f.call(this,a,b):f)||"",t=this.domId=m.id||CKEDITOR.tools.getNextId()+"_uiElement";b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(l.display="none",this.notAllowed=!0);m.id=t;var r={};b.type&&(r["cke_dialog_ui_"+b.type]=1);b.className&&(r[b.className]=1);b.disabled&&(r.cke_disabled=1);for(var v=m["class"]&&m["class"].split?m["class"].split(" "):[],t=0;t<v.length;t++)v[t]&&(r[v[t]]=1);v=[];for(t in r)v.push(t);m["class"]=v.join(" ");b.title&&(m.title=b.title);r=(b.style||"").split(";");b.align&&(v=b.align,l["margin-left"]="left"==v?0:"auto",l["margin-right"]="right"==v?0:"auto");for(t in l)r.push(t+":"+l[t]);b.hidden&&r.push("display:none");for(t=r.length-1;0<=t;t--)""===r[t]&&r.splice(t,1);0<r.length&&(m.style=(m.style?m.style+"; ":"")+r.join("; "));for(t in m)k.push(t+'\x3d"'+CKEDITOR.tools.htmlEncode(m[t])+'" ');k.push("\x3e",n,"\x3c/",h,"\x3e");d.push(k.join(""));(this._||(this._={})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(d){a.call(this,b.setValue.call(this,d))}}));"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(b);this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&E(this,a,"CTRL+"+b.accessKey);var x=this;a.on("load",function(){var b=x.getInputElement();if(b){var d=x.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";b.on("focus",function(){a._.tabBarMode=!1;a._.hasFocus=!0;x.fire("focus");d&&this.addClass(d)});b.on("blur",function(){x.fire("blur");d&&this.removeClass(d)})}});CKEDITOR.tools.extend(this,b);this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=x.focusIndex}))}},hbox:function(a,b,d,c,g){if(!(4>arguments.length)){this._||(this._={});var e=this._.children=b,f=g&&g.widths||null,h=g&&g.height||null,k,l={role:"presentation"};g&&g.align&&(l.align=g.align);CKEDITOR.ui.dialog.uiElement.call(this,a,g||{type:"hbox"},c,"table",{},l,function(){var a=['\x3ctbody\x3e\x3ctr class\x3d"cke_dialog_ui_hbox"\x3e'];for(k=0;k<d.length;k++){var b="cke_dialog_ui_hbox_child",c=[];0===k&&(b="cke_dialog_ui_hbox_first");k==d.length-1&&(b="cke_dialog_ui_hbox_last");a.push('\x3ctd class\x3d"',b,'" role\x3d"presentation" ');f?f[k]&&c.push("width:"+w(f[k])):c.push("width:"+Math.floor(100/d.length)+"%");h&&c.push("height:"+w(h));g&&void 0!==g.padding&&c.push("padding:"+w(g.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e[k].align&&c.push("text-align:"+e[k].align);0<c.length&&a.push('style\x3d"'+c.join("; ")+'" ');a.push("\x3e",d[k],"\x3c/td\x3e")}a.push("\x3c/tr\x3e\x3c/tbody\x3e");return a.join("")})}},vbox:function(a,b,d,c,g){if(!(3>arguments.length)){this._||(this._={});var e=this._.children=b,f=g&&g.width||null,h=g&&g.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,a,g||{type:"vbox"},c,"div",null,{role:"presentation"},function(){var b=['\x3ctable role\x3d"presentation" cellspacing\x3d"0" border\x3d"0" '];b.push('style\x3d"');g&&g.expand&&b.push("height:100%;");b.push("width:"+w(f||"100%"),";");CKEDITOR.env.webkit&&b.push("float:none;");b.push('"');b.push('align\x3d"',CKEDITOR.tools.htmlEncode(g&&g.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" ');b.push("\x3e\x3ctbody\x3e");for(var c=0;c<d.length;c++){var k=[];b.push('\x3ctr\x3e\x3ctd role\x3d"presentation" ');f&&k.push("width:"+w(f||"100%"));h?k.push("height:"+w(h[c])):g&&g.expand&&k.push("height:"+Math.floor(100/d.length)+"%");g&&void 0!==g.padding&&k.push("padding:"+w(g.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&e[c].align&&k.push("text-align:"+e[c].align);0<k.length&&b.push('style\x3d"',k.join("; "),'" ');b.push(' class\x3d"cke_dialog_ui_vbox_child"\x3e',d[c],"\x3c/td\x3e\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e");return b.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){this.getInputElement().setValue(a);!b&&this.fire("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,d,c=function(a,b,d,c){b.on("load",function(){a.getInputElement().on(d,c,a)})},g;for(g in a)if(d=g.match(b))this.eventProcessors[g]?this.eventProcessors[g].call(this,this._.dialog,a[g]):c(this,this._.dialog,d[1].toLowerCase(),a[g]);return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var a={build:function(a,b,d){for(var c=b.children,g,e=[],f=[],h=0;h<c.length&&(g=c[h]);h++){var k=[];e.push(k);f.push(CKEDITOR.dialog._.uiElementBuilders[g.type].build(a,g,k))}return new CKEDITOR.ui.dialog[b.type](a,f,e,d,b)}};CKEDITOR.dialog.addUIElement("hbox",a);CKEDITOR.dialog.addUIElement("vbox",a)})();CKEDITOR.dialogCommand=function(a,b){this.dialogName=a;CKEDITOR.tools.extend(this,b,!0)};CKEDITOR.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,d=/^\d*(?:\.\d+)?$/,c=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,g=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,e=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var b=this&&this.getValue?this.getValue():a[0],d,c=CKEDITOR.VALIDATE_AND,g=[],e;for(e=0;e<a.length;e++)if("function"==typeof a[e])g.push(a[e]);else break;e<a.length&&"string"==typeof a[e]&&(d=a[e],e++);e<a.length&&"number"==typeof a[e]&&(c=a[e]);var f=c==CKEDITOR.VALIDATE_AND?!0:!1;for(e=0;e<g.length;e++)f=c==CKEDITOR.VALIDATE_AND?f&&g[e](b):f||g[e](b);return f?!0:d}},regex:function(a,b){return function(d){d=this&&this.getValue?this.getValue():d;return a.test(d)?!0:b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(d,a)},cssLength:function(a){return this.functions(function(a){return g.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return c.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}};CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var d in D)D[d].remove();D={}}a=a.editor._.storedDialogs;for(var c in a)a[c].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var d=null,c=CKEDITOR.dialog._.dialogDefinitions[a];null===CKEDITOR.dialog._.currentTop&&q(this);if("function"==typeof c)d=this._.storedDialogs||(this._.storedDialogs={}),d=d[a]||(d[a]=new CKEDITOR.dialog(this,a)),b&&b.call(d,d),d.show();else{if("failed"==c)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof c&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed");this.openDialog(a,b)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return d}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",function(e){e.data.dialog&&a.openDialog(e.data.dialog)},null,null,999)}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var e=this;a.addCommand("a11yHelp",{exec:function(){var c=a.langCode,c=e.availableLangs[c]?c:e.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+c+".js"),function(){a.lang.a11yhelp=e.langEntries[c];a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");a.on("ariaEditorHelpLabel",function(c){c.data.label=a.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(a){var e=a.addCommand("about",new CKEDITOR.dialogCommand("about"));e.modes={wysiwyg:1,source:1};e.canUndo=!1;e.readOnly=1;a.ui.addButton&&a.ui.addButton("About",{label:a.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),CKEDITOR.plugins.add("basicstyles",{init:function(a){var e=0,c=function(c,h,d,b){if(b){b=new CKEDITOR.style(b);var g=f[d];g.unshift(b);a.attachStyleStateChange(b,function(b){!a.readOnly&&a.getCommand(d).setState(b)});a.addCommand(d,new CKEDITOR.styleCommand(b,{contentForms:g}));a.ui.addButton&&a.ui.addButton(c,{label:h,command:d,toolbar:"basicstyles,"+(e+=10)})}},f={bold:["strong","b",["span",function(a){a=a.styles["font-weight"];return"bold"==a||700<=+a}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},h=a.config,m=a.lang.basicstyles;c("Bold",m.bold,"bold",h.coreStyles_bold);c("Italic",m.italic,"italic",h.coreStyles_italic);c("Underline",m.underline,"underline",h.coreStyles_underline);c("Strike",m.strike,"strike",h.coreStyles_strike);c("Subscript",m.subscript,"subscript",h.coreStyles_subscript);c("Superscript",m.superscript,"superscript",h.coreStyles_superscript);a.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){function a(a,b,d,c){if(!a.isReadOnly()&&!a.equals(d.editable())){CKEDITOR.dom.element.setMarker(c,a,"bidi_processed",1);c=a;for(var e=d.editable();(c=c.getParent())&&!c.equals(e);)if(c.getCustomData("bidi_processed")){a.removeStyle("direction");a.removeAttribute("dir");return}c="useComputedState"in d.config?d.config.useComputedState:1;(c?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir"))!=b&&(a.removeStyle("direction"),c?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction")&&a.setAttribute("dir",b)):a.setAttribute("dir",b),d.forceNextSelectionCheck())}}function e(a,b,d){var c=a.getCommonAncestor(!1,!0);a=a.clone();a.enlarge(d==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(a.checkBoundaryOfElement(c,CKEDITOR.START)&&a.checkBoundaryOfElement(c,CKEDITOR.END)){for(var e;c&&c.type==CKEDITOR.NODE_ELEMENT&&(e=c.getParent())&&1==e.getChildCount()&&!(c.getName()in b);)c=e;return c.type==CKEDITOR.NODE_ELEMENT&&c.getName()in b&&c}}function c(b){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(a,b){var d=a.config.useComputedState,c,d=void 0===d||d;if(!d){c=b.lastElement;for(var g=a.editable();c&&!(c.getName()in l||c.equals(g));){var e=c.getParent();if(!e)break;c=e}}c=c||b.block||b.blockLimit;c.equals(a.editable())&&(g=a.getSelection().getRanges()[0].getEnclosedNode())&&g.type==CKEDITOR.NODE_ELEMENT&&(c=g);c&&(d=d?c.getComputedStyle("direction"):c.getStyle("direction")||c.getAttribute("dir"),a.getCommand("bidirtl").setState("rtl"==d?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),a.getCommand("bidiltr").setState("ltr"==d?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));d=(b.block||b.blockLimit||a.editable()).getDirection(1);d!=(a._.selDir||a.lang.dir)&&(a._.selDir=d,a.fire("contentDirChanged",d))},exec:function(d){var c=d.getSelection(),f=d.config.enterMode,k=c.getRanges();if(k&&k.length){for(var l={},t=c.createBookmarks(),k=k.createIterator(),v,x=0;v=k.getNextRange(1);){var A=v.getEnclosedNode();A&&(!A||A.type==CKEDITOR.NODE_ELEMENT&&A.getName()in m)||(A=e(v,h,f));A&&a(A,b,d,l);var r=new CKEDITOR.dom.walker(v),y=t[x].startNode,D=t[x++].endNode;r.evaluator=function(a){var b=f==CKEDITOR.ENTER_P?"p":"div",d;if(d=(a?a.type==CKEDITOR.NODE_ELEMENT:!1)&&a.getName()in h){if(b=a.is(b))b=(b=a.getParent())?b.type==CKEDITOR.NODE_ELEMENT:!1;d=!(b&&a.getParent().is("blockquote"))}return!!(d&&a.getPosition(y)&CKEDITOR.POSITION_FOLLOWING&&(a.getPosition(D)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;A=r.next();)a(A,b,d,l);v=v.createIterator();for(v.enlargeBr=f!=CKEDITOR.ENTER_BR;A=v.getNextParagraph(f==CKEDITOR.ENTER_P?"p":"div");)a(A,b,d,l)}CKEDITOR.dom.element.clearAllMarkers(l);d.forceNextSelectionCheck();c.selectBookmarks(t);d.focus()}}}}function f(a){var b=a==k.setAttribute,d=a==k.removeAttribute,c=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(e,f){if(!this.isReadOnly()){var h;if(h=e==(b||d?"dir":"direction")||"style"==e&&(d||c.test(f))){a:{h=this;for(var k=h.getDocument().getBody().getParent();h;){if(h.equals(k)){h=!1;break a}h=h.getParent()}h=!0}h=!h}if(h&&(h=this.getDirection(1),k=a.apply(this,arguments),h!=this.getDirection(1)))return this.getDocument().fire("dirChanged",this),k}return a.apply(this,arguments)}}var h={table:1,ul:1,ol:1,blockquote:1,div:1},m={},l={};CKEDITOR.tools.extend(m,h,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(l,m,{td:1});CKEDITOR.plugins.add("bidi",{init:function(a){function b(d,c,e,f,h){a.addCommand(e,new CKEDITOR.command(a,f));a.ui.addButton&&a.ui.addButton(d,{label:c,command:e,toolbar:"bidi,"+h})}if(!a.blockless){var d=a.lang.bidi;b("BidiLtr",d.ltr,"bidiltr",c("ltr"),10);b("BidiRtl",d.rtl,"bidirtl",c("rtl"),20);a.on("contentDom",function(){a.document.on("dirChanged",function(b){a.fire("dirChanged",{node:b.data,dir:b.data.getDirection(1)})})});a.on("contentDirChanged",function(b){b=(a.lang.dir!=b.data?"add":"remove")+"Class";var d=a.ui.space(a.config.toolbarLocation);if(d)d[b]("cke_mixed_dir_content")})}}});for(var k=CKEDITOR.dom.element.prototype,d=["setStyle","removeStyle","setAttribute","removeAttribute"],b=0;b<d.length;b++)k[d[b]]=CKEDITOR.tools.override(k[d[b]],f)}(),function(){var a={exec:function(a){var c=a.getCommand("blockquote").state,f=a.getSelection(),h=f&&f.getRanges()[0];if(h){var m=f.createBookmarks();if(CKEDITOR.env.ie){var l=m[0].startNode,k=m[0].endNode,d;if(l&&"blockquote"==l.getParent().getName())for(d=l;d=d.getNext();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){l.move(d,!0);break}if(k&&"blockquote"==k.getParent().getName())for(d=k;d=d.getPrevious();)if(d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary()){k.move(d);break}}var b=h.createIterator();b.enlargeBr=a.config.enterMode!=CKEDITOR.ENTER_BR;if(c==CKEDITOR.TRISTATE_OFF){for(l=[];c=b.getNextParagraph();)l.push(c);1>l.length&&(c=a.document.createElement(a.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),k=m.shift(),h.insertNode(c),c.append(new CKEDITOR.dom.text("",a.document)),h.moveToBookmark(k),h.selectNodeContents(c),h.collapse(!0),k=h.createBookmark(),l.push(c),m.unshift(k));d=l[0].getParent();h=[];for(k=0;k<l.length;k++)c=l[k],d=d.getCommonAncestor(c.getParent());for(c={table:1,tbody:1,tr:1,ol:1,ul:1};c[d.getName()];)d=d.getParent();for(k=null;0<l.length;){for(c=l.shift();!c.getParent().equals(d);)c=c.getParent();c.equals(k)||h.push(c);k=c}for(;0<h.length;)if(c=h.shift(),"blockquote"==c.getName()){for(k=new CKEDITOR.dom.documentFragment(a.document);c.getFirst();)k.append(c.getFirst().remove()),l.push(k.getLast());k.replace(c)}else l.push(c);h=a.document.createElement("blockquote");for(h.insertBefore(l[0]);0<l.length;)c=l.shift(),h.append(c)}else if(c==CKEDITOR.TRISTATE_ON){k=[];for(d={};c=b.getNextParagraph();){for(l=h=null;c.getParent();){if("blockquote"==c.getParent().getName()){h=c.getParent();l=c;break}c=c.getParent()}h&&l&&!l.getCustomData("blockquote_moveout")&&(k.push(l),CKEDITOR.dom.element.setMarker(d,l,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(d);c=[];l=[];for(d={};0<k.length;)b=k.shift(),h=b.getParent(),b.getPrevious()?b.getNext()?(b.breakParent(b.getParent()),l.push(b.getNext())):b.remove().insertAfter(h):b.remove().insertBefore(h),h.getCustomData("blockquote_processed")||(l.push(h),CKEDITOR.dom.element.setMarker(d,h,"blockquote_processed",!0)),c.push(b);CKEDITOR.dom.element.clearAllMarkers(d);for(k=l.length-1;0<=k;k--){h=l[k];a:{d=h;for(var b=0,g=d.getChildCount(),n=void 0;b<g&&(n=d.getChild(b));b++)if(n.type==CKEDITOR.NODE_ELEMENT&&n.isBlockBoundary()){d=!1;break a}d=!0}d&&h.remove()}if(a.config.enterMode==CKEDITOR.ENTER_BR)for(h=!0;c.length;)if(b=c.shift(),"div"==b.getName()){k=new CKEDITOR.dom.documentFragment(a.document);!h||!b.getPrevious()||b.getPrevious().type==CKEDITOR.NODE_ELEMENT&&b.getPrevious().isBlockBoundary()||k.append(a.document.createElement("br"));for(h=b.getNext()&&!(b.getNext().type==CKEDITOR.NODE_ELEMENT&&b.getNext().isBlockBoundary());b.getFirst();)b.getFirst().remove().appendTo(k);h&&k.append(a.document.createElement("br"));k.replace(b);h=!1}}f.selectBookmarks(m);a.focus()}},refresh:function(a,c){this.setState(a.elementPath(c.block||c.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",a),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){var a='\x3ca id\x3d"{id}" class\x3d"cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+
' title\x3d"{title}" tabindex\x3d"-1" hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-describedby\x3d"{id}_description" aria-haspopup\x3d"{hasArrow}" aria-disabled\x3d"{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(a+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var a=a+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+
(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{style}"'),a=a+'\x3e\x26nbsp;\x3c/span\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_button_label cke_button__{name}_label" aria-hidden\x3d"false"\x3e{label}\x3c/span\x3e\x3cspan id\x3d"{id}_description" class\x3d"cke_button_label" aria-hidden\x3d"false"\x3e{ariaShortcut}\x3c/span\x3e{arrowHtml}\x3c/a\x3e',e=CKEDITOR.addTemplate("buttonArrow",'\x3cspan class\x3d"cke_button_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":"")+"\x3c/span\x3e"),c=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(c){c.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};CKEDITOR.ui.button.prototype={render:function(a,h){function m(){var b=a.mode;b&&(b=this.modes[b]?void 0!==v[b]?v[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())}var l=CKEDITOR.env,k=this._.id=CKEDITOR.tools.getNextId(),d="",b=this.command,g,n,q;this._.editor=a;var p={id:k,button:this,editor:a,focus:function(){CKEDITOR.document.getById(k).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)}},w=CKEDITOR.tools.addFunction(function(a){if(p.onkey)return a=new CKEDITOR.dom.event(a),!1!==p.onkey(p,a.getKeystroke())}),u=CKEDITOR.tools.addFunction(function(a){var b;p.onfocus&&(b=!1!==p.onfocus(p,new CKEDITOR.dom.event(a)));return b}),t=0;p.clickFn=g=CKEDITOR.tools.addFunction(function(){t&&(a.unlockSelection(1),t=0);p.execute();l.iOS&&a.focus()});if(this.modes){var v={};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(v[a.mode]=this._.state)},this);a.on("activeFilterChange",m,this);a.on("mode",m,this);!this.readOnly&&a.on("readOnly",m,this)}else b&&(b=a.getCommand(b))&&(b.on("state",function(){this.setState(b.state)},this),d+=b.state==CKEDITOR.TRISTATE_ON?"on":b.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");if(this.directional)a.on("contentDirChanged",function(b){var d=CKEDITOR.document.getById(this._.id),c=d.getFirst();b=b.data;b!=a.lang.dir?d.addClass("cke_"+b):d.removeClass("cke_ltr").removeClass("cke_rtl");c.setAttribute("style",CKEDITOR.skin.getIconStyle(x,"rtl"==b,this.icon,this.iconOffset))},this);b?(n=a.getCommandKeystroke(b))&&(q=CKEDITOR.tools.keystrokeToString(a.lang.common.keyboard,n)):d+="off";var x=n=this.name||this.command;this.icon&&!/\./.test(this.icon)&&(x=this.icon,this.icon=null);d={id:k,name:n,iconName:x,label:this.label,cls:this.className||"",state:d,ariaDisabled:"disabled"==d?"true":"false",title:this.title+(q?" ("+q.display+")":""),ariaShortcut:q?a.lang.common.keyboardShortcut+" "+q.aria:"",titleJs:l.gecko&&!l.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:w,focusFn:u,clickFn:g,style:CKEDITOR.skin.getIconStyle(x,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?e.output():""};c.output(d,h);if(this.onRender)this.onRender();return p},setState:function(a){if(this._.state==a)return!1;this._.state=a;var c=CKEDITOR.document.getById(this._.id);return c?(c.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var c=this;this.allowedContent||this.requiredContent||!this.command||(c=a.getCommand(this.command)||c);return this._.feature=c}};CKEDITOR.ui.prototype.addButton=function(a,c){this.add(a,CKEDITOR.UI_BUTTON,c)}}(),function(){function a(a){function c(){for(var b=f(),d=CKEDITOR.tools.clone(a.config.toolbarGroups)||e(a),g=0;g<d.length;g++){var m=d[g];if("/"!=m){"string"==typeof m&&(m=d[g]={name:m});var u,t=m.groups;if(t)for(var v=0;v<t.length;v++)u=t[v],(u=b[u])&&k(m,u);(u=b[m.name])&&k(m,u)}}return d}function f(){var b={},d,c,g;for(d in a.ui.items)c=a.ui.items[d],g=c.toolbar||"others",g=g.split(","),c=g[0],g=parseInt(g[1]||-1,10),b[c]||(b[c]=[]),b[c].push({name:d,order:g});for(c in b)b[c]=b[c].sort(function(a,b){return a.order==b.order?0:0>b.order?-1:0>a.order?1:a.order<b.order?-1:1});return b}function k(d,c){if(c.length){d.items?d.items.push(a.ui.create("-")):d.items=[];for(var g;g=c.shift();)g="string"==typeof g?g:g.name,b&&-1!=CKEDITOR.tools.indexOf(b,g)||(g=a.ui.create(g))&&a.addFeature(g)&&d.items.push(g)}}function d(a){var b=[],d,c,g;for(d=0;d<a.length;++d)c=a[d],g={},"/"==c?b.push(c):CKEDITOR.tools.isArray(c)?(k(g,CKEDITOR.tools.clone(c)),b.push(g)):c.items&&(k(g,CKEDITOR.tools.clone(c.items)),g.name=c.name,b.push(g));return b}var b=a.config.removeButtons,b=b&&b.split(","),g=a.config.toolbar;"string"==typeof g&&(g=a.config["toolbar_"+g]);return a.toolbar=g?d(g):c()}function e(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var c=function(){this.toolbars=[];this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var a=0,c;c=this.toolbars[a++];)for(var e=0,f;f=c.items[e++];)if(f.focus){f.focus();return}};var f={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(e){var m,l=function(a,d){var b,c="rtl"==e.lang.dir,f=e.config.toolbarGroupCycling,q=c?37:39,c=c?39:37,f=void 0===f||f;switch(d){case 9:case CKEDITOR.SHIFT+9:for(;!b||!b.items.length;)if(b=9==d?(b?b.next:a.toolbar.next)||e.toolbox.toolbars[0]:(b?b.previous:a.toolbar.previous)||e.toolbox.toolbars[e.toolbox.toolbars.length-1],b.items.length)for(a=b.items[m?b.items.length-1:0];a&&!a.focus;)(a=m?a.previous:a.next)||(b=0);a&&a.focus();return!1;case q:b=a;do b=b.next,!b&&f&&(b=a.toolbar.items[0]);while(b&&!b.focus);b?b.focus():l(a,9);return!1;case 40:return a.button&&a.button.hasArrow?a.execute():l(a,40==d?q:c),!1;case c:case 38:b=a;do b=b.previous,!b&&f&&(b=a.toolbar.items[a.toolbar.items.length-1]);while(b&&!b.focus);b?b.focus():(m=1,l(a,CKEDITOR.SHIFT+9),m=0);return!1;case 27:return e.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};e.on("uiSpace",function(f){if(f.data.space==e.config.toolbarLocation){f.removeListener();e.toolbox=new c;var d=CKEDITOR.tools.getNextId(),b=['\x3cspan id\x3d"',d,'" class\x3d"cke_voice_label"\x3e',e.lang.toolbar.toolbars,"\x3c/span\x3e",'\x3cspan id\x3d"'+e.ui.spaceId("toolbox")+'" class\x3d"cke_toolbox" role\x3d"group" aria-labelledby\x3d"',d,'" onmousedown\x3d"return false;"\x3e'],d=!1!==e.config.toolbarStartupExpanded,g,m;e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&b.push('\x3cspan class\x3d"cke_toolbox_main"'+(d?"\x3e":' style\x3d"display:none"\x3e'));for(var q=e.toolbox.toolbars,p=a(e),w=p.length,u=0;u<w;u++){var t,v=0,x,A=p[u],r="/"!==A&&("/"===p[u+1]||u==w-1),y;if(A)if(g&&(b.push("\x3c/span\x3e"),m=g=0),"/"===A)b.push('\x3cspan class\x3d"cke_toolbar_break"\x3e\x3c/span\x3e');else{y=A.items||A;for(var D=0;D<y.length;D++){var B=y[D],z;if(B){var C=function(a){a=a.render(e,b);F=v.items.push(a)-1;0<F&&(a.previous=v.items[F-1],a.previous.next=a);a.toolbar=v;a.onkey=l;a.onfocus=function(){e.toolbox.focusCommandExecuted||e.focus()}};if(B.type==CKEDITOR.UI_SEPARATOR)m=g&&B;else{z=!1!==B.canGroup;if(!v){t=CKEDITOR.tools.getNextId();v={id:t,items:[]};x=A.name&&(e.lang.toolbar.toolbarGroups[A.name]||A.name);b.push('\x3cspan id\x3d"',t,'" class\x3d"cke_toolbar'+(r?' cke_toolbar_last"':'"'),x?' aria-labelledby\x3d"'+t+'_label"':"",' role\x3d"toolbar"\x3e');x&&b.push('\x3cspan id\x3d"',t,'_label" class\x3d"cke_voice_label"\x3e',x,"\x3c/span\x3e");b.push('\x3cspan class\x3d"cke_toolbar_start"\x3e\x3c/span\x3e');var F=q.push(v)-1;0<F&&(v.previous=q[F-1],v.previous.next=v)}z?g||(b.push('\x3cspan class\x3d"cke_toolgroup" role\x3d"presentation"\x3e'),g=1):g&&(b.push("\x3c/span\x3e"),g=0);m&&(C(m),m=0);C(B)}}}g&&(b.push("\x3c/span\x3e"),m=g=0);v&&b.push('\x3cspan class\x3d"cke_toolbar_end"\x3e\x3c/span\x3e\x3c/span\x3e')}}e.config.toolbarCanCollapse&&b.push("\x3c/span\x3e");if(e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var E=CKEDITOR.tools.addFunction(function(){e.execCommand("toolbarCollapse")});e.on("destroy",function(){CKEDITOR.tools.removeFunction(E)});e.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),d=b.getPrevious(),c=a.ui.space("contents"),g=d.getParent(),e=parseInt(c.$.style.height,10),f=g.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(d.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(d.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand));b.getFirst().setText(h?"":"");c.setStyle("height",e-(g.$.offsetHeight-f)+"px");a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:c.$.offsetHeight,outerWidth:a.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}});e.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");b.push('\x3ca title\x3d"'+(d?e.lang.toolbar.toolbarCollapse:e.lang.toolbar.toolbarExpand)+'" id\x3d"'+e.ui.spaceId("toolbar_collapser")+'" tabIndex\x3d"-1" class\x3d"cke_toolbox_collapser');d||b.push(" cke_toolbox_collapser_min");b.push('" onclick\x3d"CKEDITOR.tools.callFunction('+E+')"\x3e','\x3cspan class\x3d"cke_arrow"\x3e\x26#9650;\x3c/span\x3e',"\x3c/a\x3e")}b.push("\x3c/span\x3e");f.data.html+=b.join("")}});e.on("destroy",function(){if(this.toolbox){var a,d=0,b,c,e;for(a=this.toolbox.toolbars;d<a.length;d++)for(c=a[d].items,b=0;b<c.length;b++)e=c[b],e.clickFn&&CKEDITOR.tools.removeFunction(e.clickFn),e.keyDownFn&&CKEDITOR.tools.removeFunction(e.keyDownFn)}});e.on("uiReady",function(){var a=e.ui.space("toolbox");a&&e.focusManager.add(a,1)});e.addCommand("toolbarFocus",f);e.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");e.ui.add("-",CKEDITOR.UI_SEPARATOR,{});e.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,d){d.push('\x3cspan class\x3d"cke_toolbar_separator" role\x3d"separator"\x3e\x3c/span\x3e');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(a,c,f){var k=e(this.editor),d=0===c,b={name:a};if(f){if(f=CKEDITOR.tools.search(k,function(a){return a.name==f})){!f.groups&&(f.groups=[]);if(c&&(c=CKEDITOR.tools.indexOf(f.groups,c),0<=c)){f.groups.splice(c+1,0,a);return}d?f.groups.splice(0,0,a):f.groups.push(a);return}c=null}c&&(c=CKEDITOR.tools.indexOf(k,function(a){return a.name==c}));d?k.splice(0,0,a):"number"==typeof c?k.splice(c+1,0,b):k.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top","use strict",CKEDITOR.plugins.add("notification",{requires:"toolbar",init:function(a){function e(a){var e=new CKEDITOR.dom.element("div");e.setStyles({position:"fixed","margin-left":"-9999px"});e.setAttributes({"aria-live":"assertive","aria-atomic":"true"});e.setText(a);CKEDITOR.document.getBody().append(e);setTimeout(function(){e.remove()},100)}a._.notificationArea=new la(a);a.showNotification=function(c,e,h){var m,l;"progress"==e?m=h:l=h;c=new CKEDITOR.plugins.notification(a,{message:c,type:e,progress:m,duration:l});c.show();return c};a.on("key",function(c){if(27==c.data.keyCode){var f=a._.notificationArea.notifications;f.length&&(e(a.lang.notification.closed),f[f.length-1].hide(),c.cancel())}})}}),ka.prototype={show:function(){!1!==this.editor.fire("notificationShow",{notification:this})&&(this.area.add(this),this._hideAfterTimeout())},update:function(a){var e=!0;!1===this.editor.fire("notificationUpdate",{notification:this,options:a})&&(e=!1);var c=this.element,f=c.findOne(".cke_notification_message"),h=c.findOne(".cke_notification_progress"),m=a.type;c.removeAttribute("role");a.progress&&"progress"!=this.type&&(m="progress");m&&(c.removeClass(this._getClass()),c.removeAttribute("aria-label"),this.type=m,c.addClass(this._getClass()),c.setAttribute("aria-label",this.type),"progress"!=this.type||h?"progress"!=this.type&&h&&h.remove():(h=this._createProgressElement(),h.insertBefore(f)));void 0!==a.message&&(this.message=a.message,f.setHtml(this.message));void 0!==a.progress&&(this.progress=a.progress,h&&h.setStyle("width",this._getPercentageProgress()));e&&a.important&&(c.setAttribute("role","alert"),this.isVisible()||this.area.add(this));this.duration=a.duration;this._hideAfterTimeout()},hide:function(){!1!==this.editor.fire("notificationHide",{notification:this})&&this.area.remove(this)},isVisible:function(){return 0<=CKEDITOR.tools.indexOf(this.area.notifications,this)},_createElement:function(){var a=this,e,c,f=this.editor.lang.common.close;e=new CKEDITOR.dom.element("div");e.addClass("cke_notification");e.addClass(this._getClass());e.setAttributes({id:this.id,role:"alert","aria-label":this.type});"progress"==this.type&&e.append(this._createProgressElement());c=new CKEDITOR.dom.element("p");c.addClass("cke_notification_message");c.setHtml(this.message);e.append(c);c=CKEDITOR.dom.element.createFromHtml('\x3ca class\x3d"cke_notification_close" href\x3d"javascript:void(0)" title\x3d"'+f+'" role\x3d"button" tabindex\x3d"-1"\x3e\x3cspan class\x3d"cke_label"\x3eX\x3c/span\x3e\x3c/a\x3e');e.append(c);c.on("click",function(){a.editor.focus();a.hide()});return e},_getClass:function(){return"progress"==this.type?"cke_notification_info":"cke_notification_"+this.type},_createProgressElement:function(){var a=new CKEDITOR.dom.element("span");a.addClass("cke_notification_progress");a.setStyle("width",this._getPercentageProgress());return a},_getPercentageProgress:function(){return Math.round(100*(this.progress||0))+"%"},_hideAfterTimeout:function(){var a=this,e;this._hideTimeoutId&&clearTimeout(this._hideTimeoutId);if("number"==typeof this.duration)e=this.duration;else if("info"==this.type||"success"==this.type)e="number"==typeof this.editor.config.notification_duration?this.editor.config.notification_duration:5E3;e&&(a._hideTimeoutId=setTimeout(function(){a.hide()},e))}},la.prototype={add:function(a){this.notifications.push(a);this.element.append(a.element);1==this.element.getChildCount()&&(CKEDITOR.document.getBody().append(this.element),this._attachListeners());this._layout()},remove:function(a){var e=CKEDITOR.tools.indexOf(this.notifications,a);0>e||(this.notifications.splice(e,1),a.element.remove(),this.element.getChildCount()||(this._removeListeners(),this.element.remove()))},_createElement:function(){var a=this.editor,e=a.config,c=new CKEDITOR.dom.element("div");c.addClass("cke_notifications_area");c.setAttribute("id","cke_notifications_area_"+a.name);c.setStyle("z-index",e.baseFloatZIndex-2);return c},_attachListeners:function(){var a=CKEDITOR.document.getWindow(),e=this.editor;a.on("scroll",this._uiBuffer.input);a.on("resize",this._uiBuffer.input);e.on("change",this._changeBuffer.input);e.on("floatingSpaceLayout",this._layout,this,null,20);e.on("blur",this._layout,this,null,20)},_removeListeners:function(){var a=CKEDITOR.document.getWindow(),e=this.editor;a.removeListener("scroll",this._uiBuffer.input);a.removeListener("resize",this._uiBuffer.input);e.removeListener("change",this._changeBuffer.input);e.removeListener("floatingSpaceLayout",this._layout);e.removeListener("blur",this._layout)},_layout:function(){function a(){e.setStyle("left",w(u+f.width-d-b))}var e=this.element,c=this.editor,f=c.ui.contentsElement.getClientRect(),h=c.ui.contentsElement.getDocumentPosition(),c=c.ui.space("top"),m=c.getClientRect(),l=e.getClientRect(),k,d=this._notificationWidth,b=this._notificationMargin;k=CKEDITOR.document.getWindow();var g=k.getScrollPosition(),n=k.getViewPaneSize(),q=CKEDITOR.document.getBody(),p=q.getDocumentPosition(),w=CKEDITOR.tools.cssLength;d&&b||(k=this.element.getChild(0),d=this._notificationWidth=k.getClientRect().width,b=this._notificationMargin=parseInt(k.getComputedStyle("margin-left"),10)+parseInt(k.getComputedStyle("margin-right"),10));c.isVisible()&&m.bottom>f.top&&m.bottom<f.bottom-l.height?e.setStyles({position:"fixed",top:w(m.bottom)}):0<f.top?e.setStyles({position:"absolute",top:w(h.y)}):h.y+f.height-l.height>g.y?e.setStyles({position:"fixed",top:0}):e.setStyles({position:"absolute",top:w(h.y+f.height-l.height)});var u="fixed"==e.getStyle("position")?f.left:"static"!=q.getComputedStyle("position")?h.x-p.x:h.x;f.width<d+b?h.x+d+b>g.x+n.width?a():e.setStyle("left",w(u)):h.x+d+b>g.x+n.width?e.setStyle("left",w(u)):h.x+f.width/2+d/2+b>g.x+n.width?e.setStyle("left",w(u-h.x+g.x+n.width-d-b)):0>f.left+f.width-d-b?a():0>f.left+f.width/2-d/2?e.setStyle("left",w(u-h.x+g.x)):e.setStyle("left",w(u+f.width/2-d/2-b/2))}},CKEDITOR.plugins.notification=ka,"use strict",function(){function a(a,b,d){b.type||(b.type="auto");if(d&&!1===a.fire("beforePaste",b)||!b.dataValue&&b.dataTransfer.isEmpty())return!1;b.dataValue||(b.dataValue="");if(CKEDITOR.env.gecko&&"drop"==b.method&&a.toolbox)a.once("afterPaste",function(){a.toolbox.focus()});return a.fire("paste",b)}function e(b){function d(){var a=b.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var c=function(a){b.readOnly&&"cut"==a.name||z.initPasteDataTransfer(a,b);a.data.preventDefault()};a.on("copy",c);a.on("cut",c);a.on("cut",function(){b.readOnly||b.extractSelectedHtml()},null,null,999)}a.on(z.mainPasteEvent,function(a){"beforepaste"==z.mainPasteEvent&&C||y(a)});"beforepaste"==z.mainPasteEvent&&(a.on("paste",function(a){F||(f(),a.data.preventDefault(),y(a),k("paste"))}),a.on("contextmenu",h,null,null,0),a.on("beforepaste",function(a){!a.data||a.data.$.ctrlKey||a.data.$.shiftKey||h()},null,null,0));a.on("beforecut",function(){!C&&l(b)});var e;a.attachListener(CKEDITOR.env.ie?a:b.document.getDocumentElement(),"mouseup",function(){e=setTimeout(function(){D()},0)});b.on("destroy",function(){clearTimeout(e)});a.on("keyup",D)}function c(a){return{type:a,canUndo:"cut"==a,startDisabled:!0,fakeKeystroke:"cut"==a?CKEDITOR.CTRL+88:CKEDITOR.CTRL+67,exec:function(){"cut"==this.type&&l();var a;var d=this.type;if(CKEDITOR.env.ie)a=k(d);else try{a=b.document.$.execCommand(d,!1,null)}catch(c){a=!1}a||b.showNotification(b.lang.clipboard[this.type+"Error"]);return a}}}function e(){return{canUndo:!1,async:!0,fakeKeystroke:CKEDITOR.CTRL+86,exec:function(b,d){function c(d,f){f="undefined"!==typeof f?f:!0;d?(d.method="paste",d.dataTransfer||(d.dataTransfer=z.initPasteDataTransfer()),a(b,d,f)):e&&b.showNotification(k,"info",b.config.clipboard_notificationDuration);b.fire("afterCommandExec",{name:"paste",command:g,returnValue:!!d})}d="undefined"!==typeof d&&null!==d?d:{};var g=this,e="undefined"!==typeof d.notification?d.notification:!0,f=d.type,h=CKEDITOR.tools.keystrokeToString(b.lang.common.keyboard,b.getCommandKeystroke(this)),k="string"===typeof e?e:b.lang.clipboard.pasteNotification.replace(/%1/,'\x3ckbd aria-label\x3d"'+h.aria+'"\x3e'+h.display+"\x3c/kbd\x3e"),h="string"===typeof d?d:d.dataValue;f?b._.nextPasteType=f:delete b._.nextPasteType;"string"===typeof h?c({dataValue:h}):b.getClipboardData(c)}}}
function f(){F=1;setTimeout(function(){F=0},100)}function h(){C=1;setTimeout(function(){C=0},10)}function k(a){var d=b.document,c=d.getBody(),e=!1,f=function(){e=!0};c.on(a,f);7<CKEDITOR.env.version?d.$.execCommand(a):d.$.selection.createRange().execCommand(a);c.removeListener(a,f);return e}function l(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var a=b.getSelection(),d,c,e;a.getType()==CKEDITOR.SELECTION_ELEMENT&&(d=a.getSelectedElement())&&(c=a.getRanges()[0],e=b.document.createText(""),e.insertBefore(d),c.setStartBefore(e),c.setEndAfter(d),a.selectRanges([c]),setTimeout(function(){d.getParent()&&(e.remove(),a.selectElement(d))},0))}}function m(a,d){var c=b.document,e=b.editable(),f=function(a){a.cancel()},h;if(!c.getById("cke_pastebin")){var k=b.getSelection(),l=k.createBookmarks();CKEDITOR.env.ie&&k.root.fire("selectionchange");var n=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie?"div":"body",c);n.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var r=0,c=c.getWindow();CKEDITOR.env.webkit?(e.append(n),n.addClass("cke_editable"),e.is("body")||(r="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),r=r.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(n);n.setStyles({position:"absolute",top:c.getScrollPosition().y-r+10+"px",width:"1px",height:Math.max(1,c.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});CKEDITOR.env.safari&&n.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text"));(r=n.getParent().isReadOnly())?(n.setOpacity(0),n.setAttribute("contenteditable",!0)):n.setStyle("ltr"==b.config.contentsLangDirection?"left":"right","-10000px");b.on("selectionChange",f,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)h=e.once("blur",f,null,null,-100);r&&n.focus();r=new CKEDITOR.dom.range(n);r.selectNodeContents(n);var t=r.select();CKEDITOR.env.ie&&(h=e.once("blur",function(){b.lockSelection(t)}));var v=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=v);h&&h.removeListener();CKEDITOR.env.ie&&e.focus();k.selectBookmarks(l);n.remove();var a;CKEDITOR.env.webkit&&(a=n.getFirst())&&a.is&&a.hasClass("Apple-style-span")&&(n=a);b.removeListener("selectionChange",f);d(n.getHtml())},0)}}function A(){if("paste"==z.mainPasteEvent)return b.fire("beforePaste",{type:"auto",method:"paste"}),!1;b.focus();f();var a=b.focusManager;a.lock();if(b.editable().fire(z.mainPasteEvent)&&!k("paste"))return a.unlock(),!1;a.unlock();return!0}function r(a){if("wysiwyg"==b.mode)switch(a.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:a=b.editable();f();"paste"==z.mainPasteEvent&&a.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:b.fire("saveSnapshot"),setTimeout(function(){b.fire("saveSnapshot")},50)}}function y(d){var c={type:"auto",method:"paste",dataTransfer:z.initPasteDataTransfer(d)};c.dataTransfer.cacheData();var e=!1!==b.fire("beforePaste",c);e&&z.canClipboardApiBeTrusted(c.dataTransfer,b)?(d.data.preventDefault(),setTimeout(function(){a(b,c)},0)):m(d,function(d){c.dataValue=d.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");e&&a(b,c)})}function D(){if("wysiwyg"==b.mode){var a=B("paste");b.getCommand("cut").setState(B("cut"));b.getCommand("copy").setState(B("copy"));b.getCommand("paste").setState(a);b.fire("pasteState",a)}}function B(a){if(E&&a in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==a)return CKEDITOR.TRISTATE_OFF;a=b.getSelection();var d=a.getRanges();return a.getType()==CKEDITOR.SELECTION_NONE||1==d.length&&d[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var z=CKEDITOR.plugins.clipboard,C=0,F=0,E=0;(function(){b.on("key",r);b.on("contentDom",d);b.on("selectionChange",function(a){E=a.data.selection.getRanges()[0].checkReadOnly();D()});b.contextMenu&&b.contextMenu.addListener(function(a,b){E=b.getRanges()[0].checkReadOnly();return{cut:B("cut"),copy:B("copy"),paste:B("paste")}})})();(function(){function a(d,c,e,f,h){var k=b.lang.clipboard[c];b.addCommand(c,e);b.ui.addButton&&b.ui.addButton(d,{label:k,command:c,toolbar:"clipboard,"+f});b.addMenuItems&&b.addMenuItem(c,{label:k,command:c,group:"clipboard",order:h})}a("Cut","cut",c("cut"),10,1);a("Copy","copy",c("copy"),20,4);a("Paste","paste",e(),30,8)})();b.getClipboardData=function(a,d){function c(a){a.removeListener();a.cancel();d(a.data)}d||(d=a,a=null);b.on("paste",c,null,null,0);!1===A()&&(b.removeListener("paste",c),d(null))}}function c(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}function f(a,b){function d(a){return CKEDITOR.tools.repeat("\x3c/p\x3e\x3cp\x3e",~~(a/2))+(1==a%2?"\x3cbr\x3e":"")}b=b.replace(/\s+/g," ").replace(/> +</g,"\x3e\x3c").replace(/<br ?\/>/gi,"\x3cbr\x3e");b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()});if(b.match(/^[^<]$/))return b;CKEDITOR.env.webkit&&-1<b.indexOf("\x3cdiv\x3e")&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"\x3cbr\x3e").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"\x3cdiv\x3e\x3c/div\x3e"),b.match(/<div>(<br>|)<\/div>/)&&(b="\x3cp\x3e"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return d(a.split("\x3c/div\x3e\x3cdiv\x3e").length+1)})+"\x3c/p\x3e"),b=b.replace(/<\/div><div>/g,"\x3cbr\x3e"),b=b.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"\x3cbr\x3e")),-1<b.indexOf("\x3cbr\x3e\x3cbr\x3e")&&(b="\x3cp\x3e"+b.replace(/(<br>){2,}/g,function(a){return d(a.length/4)})+"\x3c/p\x3e"));return l(a,b)}function h(){function a(){var b={},d;for(d in CKEDITOR.dtd)"$"!=d.charAt(0)&&"div"!=d&&"span"!=d&&(b[d]=1);return b}var b={};return{get:function(d){return"plain-text"==d?b.plainText||(b.plainText=new CKEDITOR.filter("br")):"semantic-content"==d?((d=b.semanticContent)||(d=new CKEDITOR.filter,d.allow({$1:{elements:a(),attributes:!0,styles:!1,classes:!1}}),d=b.semanticContent=d),d):d?new CKEDITOR.filter(d):null}}}function m(a,b,d){b=CKEDITOR.htmlParser.fragment.fromHtml(b);var c=new CKEDITOR.htmlParser.basicWriter;d.applyTo(b,!0,!1,a.activeEnterMode);b.writeHtml(c);return c.getHtml()}function l(a,b){a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("\x3cbr\x3e",a.length/
7*2)}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"\x3c$1div\x3e"));return b}function k(a){a.data.preventDefault();a.data.$.dataTransfer.dropEffect="none"}function d(b){var d=CKEDITOR.plugins.clipboard;b.on("contentDom",function(){function c(d,e,f){e.select();a(b,{dataTransfer:f,method:"drop"},1);f.sourceEditor.fire("saveSnapshot");f.sourceEditor.editable().extractHtmlFromRange(d);f.sourceEditor.getSelection().selectRanges([d]);f.sourceEditor.fire("saveSnapshot")}
function e(c,f){c.select();a(b,{dataTransfer:f,method:"drop"},1);d.resetDragDataTransfer()}function f(a,d,c){var e={$:a.data.$,target:a.data.getTarget()};d&&(e.dragRange=d);c&&(e.dropRange=c);!1===b.fire(a.name,e)&&a.data.preventDefault()}function h(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());return a.getChildCount()}var k=b.editable(),l=CKEDITOR.plugins.clipboard.getDropTarget(b),m=b.ui.space("top"),A=b.ui.space("bottom");d.preventDefaultDropOnElement(m);d.preventDefaultDropOnElement(A);k.attachListener(l,"dragstart",f);k.attachListener(b,"dragstart",d.resetDragDataTransfer,d,null,1);k.attachListener(b,"dragstart",function(a){d.initDragDataTransfer(a,b)},null,null,2);k.attachListener(b,"dragstart",function(){var a=d.dragRange=b.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(d.dragStartContainerChildCount=a?h(a.startContainer):null,d.dragEndContainerChildCount=a?h(a.endContainer):null)},null,null,100);k.attachListener(l,"dragend",f);k.attachListener(b,"dragend",d.initDragDataTransfer,d,null,1);k.attachListener(b,"dragend",d.resetDragDataTransfer,d,null,100);k.attachListener(l,"dragover",function(a){if(CKEDITOR.env.edge)a.data.preventDefault();else{var b=a.data.getTarget();b&&b.is&&b.is("html")?a.data.preventDefault():CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&a.data.$.dataTransfer.types.contains("Files")&&a.data.preventDefault()}});k.attachListener(l,"drop",function(a){if(!a.data.$.defaultPrevented){a.data.preventDefault();var c=a.data.getTarget();if(!c.isReadOnly()||c.type==CKEDITOR.NODE_ELEMENT&&c.is("html")){var c=d.getRangeAtDropPosition(a,b),e=d.dragRange;c&&f(a,e,c)}}},null,null,9999);k.attachListener(b,"drop",d.initDragDataTransfer,d,null,1);k.attachListener(b,"drop",function(a){if(a=a.data){var f=a.dropRange,h=a.dragRange,k=a.dataTransfer;k.getTransferType(b)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){d.internalDrop(h,f,k,b)},0):k.getTransferType(b)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c(h,f,k):e(f,k)}},null,null,9999)})}
CKEDITOR.plugins.add("clipboard",{requires:"notification",init:function(a){var b,k=h();a.config.forcePasteAsPlainText?b="plain-text":a.config.pasteFilter?b=a.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in a.config||(b="semantic-content");a.pasteFilter=k.get(b);e(a);d(a);if(CKEDITOR.env.gecko){var l=["image/png","image/jpeg","image/gif"],w;a.on("paste",function(b){var d=b.data,c=d.dataTransfer;if(!d.dataValue&&"paste"==d.method&&c&&1==c.getFilesCount()&&w!=c.id&&(c=c.getFile(0),-1!=CKEDITOR.tools.indexOf(l,c.type))){var e=new FileReader;e.addEventListener("load",function(){b.data.dataValue='\x3cimg src\x3d"'+e.result+'" /\x3e';a.fire("paste",b.data)},!1);e.addEventListener("abort",function(){a.fire("paste",b.data)},!1);e.addEventListener("error",function(){a.fire("paste",b.data)},!1);e.readAsDataURL(c);w=d.dataTransfer.id;b.stop()}},null,null,1)}a.on("paste",function(b){b.data.dataTransfer||(b.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer);if(!b.data.dataValue){var d=b.data.dataTransfer,c=d.getData("text/html");if(c)b.data.dataValue=c,b.data.type="html";else if(c=d.getData("text/plain"))b.data.dataValue=a.editable().transformPlainTextToHtml(c),b.data.type="text"}},null,null,1);a.on("paste",function(a){var b=a.data.dataValue,d=CKEDITOR.dtd.$block;-1<b.indexOf("Apple-")&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"\x26nbsp;\x26nbsp; \x26nbsp;")})),-1<b.indexOf('\x3cbr class\x3d"Apple-interchange-newline"\x3e')&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(b.match(/^<[^<]+cke_(editable|contents)/i)){var c,e,g=new CKEDITOR.dom.element("div");for(g.setHtml(b);1==g.getChildCount()&&(c=g.getFirst())&&c.type==CKEDITOR.NODE_ELEMENT&&(c.hasClass("cke_editable")||c.hasClass("cke_contents"));)g=e=c;e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,c){return c.toLowerCase()in d?(a.data.preSniffing="html","\x3c"+c):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,c){return c in d?(a.data.endsWithEOL=1,"\x3c/"+c+"\x3e"):b}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1"));a.data.dataValue=b},null,null,3);a.on("paste",function(b){b=b.data;var d=a._.nextPasteType||b.type,e=b.dataValue,h,l=a.config.clipboard_defaultContentType||"html",n=b.dataTransfer.getTransferType(a);h="html"==d||"html"==b.preSniffing?"html":c(e);delete a._.nextPasteType;"htmlifiedtext"==h&&(e=f(a.config,e));"text"==d&&"html"==h?e=m(a,e,k.get("plain-text")):n==CKEDITOR.DATA_TRANSFER_EXTERNAL&&a.pasteFilter&&!b.dontFilter&&(e=m(a,e,a.pasteFilter));b.startsWithEOL&&(e='\x3cbr data-cke-eol\x3d"1"\x3e'+e);b.endsWithEOL&&(e+='\x3cbr data-cke-eol\x3d"1"\x3e');"auto"==d&&(d="html"==h||"html"==l?"html":"text");b.type=d;b.dataValue=e;delete b.preSniffing;delete b.startsWithEOL;delete b.endsWithEOL},null,null,6);a.on("paste",function(b){b=b.data;b.dataValue&&(a.insertHtml(b.dataValue,b.type,b.range),setTimeout(function(){a.fire("afterPaste")},0))},null,null,1E3)}});CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(a,b){return a.getTransferType(b)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!a.isEmpty()||CKEDITOR.env.gecko&&(a.getData("text/html")||a.getFilesCount())||CKEDITOR.env.safari&&603<=CKEDITOR.env.version&&!CKEDITOR.env.iOS?!0:!1},getDropTarget:function(a){var b=a.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||b.isInline()?b:a.document},fixSplitNodesAfterDrop:function(a,b,d,c){function e(a,d,c){var g=a;g.type==CKEDITOR.NODE_TEXT&&(g=a.getParent());if(g.equals(d)&&c!=d.getChildCount())return a=b.startContainer.getChild(b.startOffset-1),d=b.startContainer.getChild(b.startOffset),a&&a.type==CKEDITOR.NODE_TEXT&&d&&d.type==CKEDITOR.NODE_TEXT&&(c=a.getLength(),a.setText(a.getText()+d.getText()),d.remove(),b.setStart(a,c),b.collapse(!0)),!0}var f=b.startContainer;"number"==typeof c&&"number"==typeof d&&f.type==CKEDITOR.NODE_ELEMENT&&(e(a.startContainer,f,d)||e(a.endContainer,f,c))},isDropRangeAffectedByDragRange:function(a,b){var d=b.startContainer,c=b.endOffset;return a.endContainer.equals(d)&&a.endOffset<=c||a.startContainer.getParent().equals(d)&&a.startContainer.getIndex()<c||a.endContainer.getParent().equals(d)&&a.endContainer.getIndex()<c?!0:!1},internalDrop:function(b,d,c,e){var f=CKEDITOR.plugins.clipboard,h=e.editable(),k,l;e.fire("saveSnapshot");e.fire("lockSnapshot",{dontUpdate:1});CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(b,d,f.dragStartContainerChildCount,f.dragEndContainerChildCount);(l=this.isDropRangeAffectedByDragRange(b,d))||(k=b.createBookmark(!1));f=d.clone().createBookmark(!1);l&&(k=b.createBookmark(!1));b=k.startNode;d=k.endNode;l=f.startNode;d&&b.getPosition(l)&CKEDITOR.POSITION_PRECEDING&&d.getPosition(l)&CKEDITOR.POSITION_FOLLOWING&&l.insertBefore(b);b=e.createRange();b.moveToBookmark(k);h.extractHtmlFromRange(b,1);d=e.createRange();d.moveToBookmark(f);a(e,{dataTransfer:c,method:"drop",range:d},1);e.fire("unlockSnapshot")},getRangeAtDropPosition:function(a,b){var d=a.data.$,c=d.clientX,e=d.clientY,f=b.getSelection(!0).getRanges()[0],h=b.createRange();if(a.data.testRange)return a.data.testRange;if(document.caretRangeFromPoint&&b.document.$.caretRangeFromPoint(c,e))d=b.document.$.caretRangeFromPoint(c,e),h.setStart(CKEDITOR.dom.node(d.startContainer),d.startOffset),h.collapse(!0);else if(d.rangeParent)h.setStart(CKEDITOR.dom.node(d.rangeParent),d.rangeOffset),h.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&f&&b.editable().hasFocus)return f;if(document.body.createTextRange){b.focus();d=b.document.getBody().$.createTextRange();try{for(var k=!1,l=0;20>l&&!k;l++){if(!k)try{d.moveToPoint(c,e-l),k=!0}catch(m){}if(!k)try{d.moveToPoint(c,e+l),k=!0}catch(r){}}if(k){var y="cke-temp-"+(new Date).getTime();d.pasteHTML('\x3cspan id\x3d"'+y+'"\x3e\x3c/span\x3e');var D=b.document.getById(y);h.moveToPosition(D,CKEDITOR.POSITION_BEFORE_START);D.remove()}else{var B=b.document.$.elementFromPoint(c,e),z=new CKEDITOR.dom.element(B),C;if(z.equals(b.editable())||"html"==z.getName())return f&&f.startContainer&&!f.startContainer.equals(b.editable())?f:null;C=z.getClientRect();c<C.left?h.setStartAt(z,CKEDITOR.POSITION_AFTER_START):h.setStartAt(z,CKEDITOR.POSITION_BEFORE_END);h.collapse(!0)}}catch(F){return null}}else return null}return h},initDragDataTransfer:function(a,b){var d=a.data.$?a.data.$.dataTransfer:null,c=new this.dataTransfer(d,b);d?this.dragData&&c.id==this.dragData.id?c=this.dragData:this.dragData=c:this.dragData?c=this.dragData:this.dragData=c;a.data.dataTransfer=c},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(a,b){if(this.isCustomCopyCutSupported){if(a&&a.data&&a.data.$){var d=new this.dataTransfer(a.data.$.clipboardData,b);this.copyCutData&&d.id==this.copyCutData.id?(d=this.copyCutData,d.$=a.data.$.clipboardData):this.copyCutData=d;return d}return new this.dataTransfer(null,b)}return new this.dataTransfer(CKEDITOR.env.edge&&a&&a.data.$&&a.data.$.clipboardData||null,b)},preventDefaultDropOnElement:function(a){a&&a.on("dragover",k)}};var b=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(a,d){a&&(this.$=a);this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(a){a=a.toLowerCase();return"text"==a||"text/plain"==a?"Text":"url"==a?"URL":a}};this.id=this.getData(b);this.id||(this.id="Text"==b?"":"cke-"+CKEDITOR.tools.getUniqueId());if("Text"!=b)try{this.$.setData(b,this.id)}catch(c){}d&&(this.sourceEditor=d,this.setData("text/html",d.getSelectedHtml(1)),"Text"==b||this.getData("text/plain")||this.setData("text/plain",d.getSelection().getSelectedText()))};CKEDITOR.DATA_TRANSFER_INTERNAL=1;CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2;CKEDITOR.DATA_TRANSFER_EXTERNAL=3;CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(a,b){a=this._.normalizeType(a);var d=this._.data[a],c;if(void 0===d||null===d||""===d)try{d=this.$.getData(a)}catch(e){}if(void 0===d||null===d||""===d)d="";"text/html"!=a||b?"Text"==a&&CKEDITOR.env.gecko&&this.getFilesCount()&&"file://"==d.substring(0,7)&&(d=""):(d=d.replace(this._.metaRegExp,""),(c=this._.bodyRegExp.exec(d))&&c.length&&(d=c[1],d=d.replace(this._.fragmentRegExp,"")));"string"===typeof d&&(c=d.indexOf("\x3c/html\x3e"),d=-1!==c?d.substring(0,c+7):d);return d},setData:function(a,d){a=this._.normalizeType(a);this._.data[a]=d;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"URL"==a||"Text"==a){"Text"==b&&"Text"==a&&(this.id=d);try{this.$.setData(a,d)}catch(c){}}},getTransferType:function(a){return this.sourceEditor?this.sourceEditor==a?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function a(d){d=b._.normalizeType(d);var c=b.getData(d,!0);c&&(b._.data[d]=c)}if(this.$){var b=this,d,c;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(d=0;d<this.$.types.length;d++)a(this.$.types[d])}else a("Text"),a("URL");c=this._getImageFromClipboard();if(this.$&&this.$.files||c){this._.files=[];if(this.$.files&&this.$.files.length)for(d=0;d<this.$.files.length;d++)this._.files.push(this.$.files[d]);0===this._.files.length&&c&&this._.files.push(c)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(a){return this._.files.length?this._.files[a]:this.$&&this.$.files&&this.$.files.length?this.$.files[a]:0===a?this._getImageFromClipboard():void 0},isEmpty:function(){var a={},d;if(this.getFilesCount())return!1;for(d in this._.data)a[d]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var c=0;c<this.$.types.length;c++)a[this.$.types[c]]=1}else a.Text=1,a.URL=1;"Text"!=b&&(a[b]=0);for(d in a)if(a[d]&&""!==this.getData(d))return!1;return!0},_getImageFromClipboard:function(){var a;if(this.$&&this.$.items&&this.$.items[0])try{if((a=this.$.items[0].getAsFile())&&a.type)return a}catch(b){}}}}(),CKEDITOR.config.clipboard_notificationDuration=1E4,CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function a(a){var c=this._;c.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(a),c.on?c.panel.hide():c.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(e){var c=e.panel||{};delete e.panel;this.base(e);this.document=c.parent&&c.parent.getDocument()||CKEDITOR.document;c.block={attributes:c.attributes};this.hasArrow=c.toolbarRelated=!0;this.click=a;this._={panelDefinition:c}},statics:{handler:{create:function(a){return new CKEDITOR.ui.panelButton(a)}}},proto:{createPanel:function(a){var c=this._;if(!c.panel){var f=this._.panelDefinition,h=this._.panelDefinition.block,m=f.parent||CKEDITOR.document.getBody(),l=this._.panel=new CKEDITOR.ui.floatPanel(a,m,f),f=l.addBlock(c.id,h),k=this;l.onShow=function(){k.className&&this.element.addClass(k.className+"_panel");k.setState(CKEDITOR.TRISTATE_ON);c.on=1;k.editorFocus&&a.focus();if(k.onOpen)k.onOpen()};l.onHide=function(d){k.className&&this.element.getFirst().removeClass(k.className+"_panel");k.setState(k.modes&&k.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c.on=0;if(!d&&k.onClose)k.onClose()};l.onEscape=function(){l.hide(1);k.document.getById(c.id).focus()};if(this.onBlock)this.onBlock(l,f);f.onHide=function(){c.on=0;k.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}}),CKEDITOR.UI_PANELBUTTON="panelbutton",function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(a,c){c&&CKEDITOR.tools.extend(this,c);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var a=CKEDITOR.addTemplate("panel",'\x3cdiv lang\x3d"{langCode}" id\x3d"{id}" dir\x3d{dir} class\x3d"cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style\x3d"z-index:{z-index}" role\x3d"presentation"\x3e{frame}\x3c/div\x3e'),e=CKEDITOR.addTemplate("panel-frame",'\x3ciframe id\x3d"{id}" class\x3d"cke_panel_frame" role\x3d"presentation" frameborder\x3d"0" src\x3d"{src}"\x3e\x3c/iframe\x3e'),c=CKEDITOR.addTemplate("panel-frame-inner",'\x3c!DOCTYPE html\x3e\x3chtml class\x3d"cke_panel_container {env}" dir\x3d"{dir}" lang\x3d"{langCode}"\x3e\x3chead\x3e{css}\x3c/head\x3e\x3cbody class\x3d"cke_{dir}" style\x3d"margin:0;padding:0" onload\x3d"{onload}"\x3e\x3c/body\x3e\x3c/html\x3e');CKEDITOR.ui.panel.prototype={render:function(f,h){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),d=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&d.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});d=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad)this.onLoad()},this));a.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+
d+");"},m)));a.getWindow().$.CKEDITOR=CKEDITOR;a.on("keydown",function(a){var d=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(d)?a.data.preventDefault():(27==d||d==("rtl"==c?39:37))&&this.onEscape&&!1===this.onEscape(d)&&a.data.preventDefault()},this);a=a.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(d)}else a=this.document.getById(this.id);this._.holder=a}return a};var m={editorId:f.id,id:this.id,langCode:f.langCode,dir:f.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":f.config.baseFloatZIndex+1};if(this.isFramed){var l=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";m.frame=e.output({id:this.id+"_frame",src:l})}l=a.output(m);h&&h.push(l);return l},addBlock:function(a,c){c=this._.blocks[a]=c instanceof CKEDITOR.ui.panel.block?c:new CKEDITOR.ui.panel.block(this.getHolderElement(),c);this._.currentBlock||this.showBlock(a);return c},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var c=this._.currentBlock,e=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");c&&c.hide();this._.currentBlock=a;CKEDITOR.fire("ariaWidget",e);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.show();return a},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,c){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));c&&CKEDITOR.tools.extend(this,c);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),CKEDITOR.env.webkit&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))},markFirstDisplayed:function(a){for(var c=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"none"==a.getStyle("display")},e=this._.getItems(),l,k,d=e.count()-1;0<=d;d--)if(l=e.getItem(d),l.getAscendant(c)||(k=l,this._.focusIndex=d),"true"==l.getAttribute("aria-selected")){k=l;this._.focusIndex=d;break}k&&(a&&a(),CKEDITOR.env.webkit&&k.getDocument().getWindow().focus(),k.focus(),this.onMark&&this.onMark(k))},getItems:function(){return this.element.getElementsByTag("a")}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a,c){var e=this.keys[a];switch(e){case"next":for(var l=this._.focusIndex,e=this.element.getElementsByTag("a"),k;k=e.getItem(++l);)if(k.getAttribute("_cke_focus")&&k.$.offsetWidth){this._.focusIndex=l;k.focus();break}return k||c?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":l=this._.focusIndex;for(e=this.element.getElementsByTag("a");0<l&&(k=e.getItem(--l));){if(k.getAttribute("_cke_focus")&&k.$.offsetWidth){this._.focusIndex=l;k.focus();break}k=null}return k||c?!1:(this._.focusIndex=e.count(),this.onKeyDown(a,1));case"click":case"mouseup":return l=this._.focusIndex,(k=0<=l&&this.element.getElementsByTag("a").getItem(l))&&(k.$[e]?k.$[e]():k.$["on"+e]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function a(a,f,h,m,l){l=CKEDITOR.tools.genKey(f.getUniqueId(),h.getUniqueId(),a.lang.dir,a.uiColor||"",m.css||"",l||"");var k=e[l];k||(k=e[l]=new CKEDITOR.ui.panel(f,m),k.element=h.append(CKEDITOR.dom.element.createFromHtml(k.render(a),f)),k.element.setStyles({display:"none",position:"absolute"}));return k}var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(c,e,h,m){function l(){g.hide()}h.forceIFrame=1;h.toolbarRelated&&c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e=CKEDITOR.document.getById("cke_"+
c.name));var k=e.getDocument();m=a(c,k,e,h,m||0);var d=m.element,b=d.getFirst(),g=this;d.disableContextMenu();this.element=d;this._={editor:c,panel:m,parentElement:e,definition:h,document:k,iframe:b,children:[],dir:c.lang.dir,showBlockParams:null};c.on("mode",l);c.on("resize",l);k.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(a,e){return this._.panel.addBlock(a,e)},addListBlock:function(a,e){return this._.panel.addListBlock(a,e)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(a,e,h,m,l,k){var d=this._.panel,b=d.showBlock(a);this._.showBlockParams=[].slice.call(arguments);this.allowBlur(!1);var g=this._.editor.editable();this._.returnFocus=g.hasFocus?g:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var n=this.element,g=this._.iframe,g=CKEDITOR.env.ie&&!CKEDITOR.env.edge?g:new CKEDITOR.dom.window(g.$.contentWindow),q=n.getDocument(),p=this._.parentElement.getPositionedAncestor(),w=e.getDocumentPosition(q),q=p?p.getDocumentPosition(q):{x:0,y:0},u="rtl"==this._.dir,t=w.x+(m||0)-q.x,v=w.y+(l||0)-q.y;!u||1!=h&&4!=h?u||2!=h&&3!=h||(t+=e.$.offsetWidth-1):t+=e.$.offsetWidth;if(3==h||4==h)v+=e.$.offsetHeight-1;this._.panel._.offsetParentId=e.getId();n.setStyles({top:v+"px",left:0,display:""});n.setOpacity(0);n.getFirst().removeStyle("width");this._.editor.focusManager.add(g);this._.blurSet||(CKEDITOR.event.useCapture=!0,g.on("blur",function(a){function b(){delete this._.returnFocus;this.hide()}this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(b,0,this)):b.call(this))},this),g.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(g.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),g.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);d.onEscape=CKEDITOR.tools.bind(function(a){if(this.onEscape&&!1===this.onEscape(a))return!1},this);CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){var a=n;a.removeStyle("width");if(b.autoSize){var c=b.element.getDocument(),c=(CKEDITOR.env.webkit||CKEDITOR.env.edge?b.element:c.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<c&&(c+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)+3);a.setStyle("width",c+10+"px");c=b.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<c&&(c+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)+3);a.setStyle("height",c+"px");d._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");u&&(t-=n.$.offsetWidth);n.setStyle("left",t+"px");var c=d.element.getWindow(),a=n.$.getBoundingClientRect(),c=c.getViewPaneSize(),e=a.width||a.right-a.left,g=a.height||a.bottom-a.top,f=u?a.right:c.width-a.left,h=u?c.width-a.right:a.left;u?f<e&&(t=h>e?t+e:c.width>e?t-a.left:t-a.right+c.width):f<e&&(t=h>e?t-e:c.width>e?t-a.right+c.width:t-a.left);e=a.top;c.height-
a.top<g&&(v=e>g?v-g:c.height>g?v-a.bottom+c.height:v-a.top);CKEDITOR.env.ie&&(c=a=new CKEDITOR.dom.element(n.$.offsetParent),"html"==c.getName()&&(c=c.getDocument().getBody()),"rtl"==c.getComputedStyle("direction")&&(t=CKEDITOR.env.ie8Compat?t-2*n.getDocument().getDocumentElement().$.scrollLeft:t-(a.$.scrollWidth-a.$.clientWidth)));var a=n.getFirst(),l;(l=a.getCustomData("activePanel"))&&l.onHide&&l.onHide.call(this,1);a.setCustomData("activePanel",this);n.setStyles({top:v+"px",left:t+"px"});n.setOpacity(1);k&&k()},this);d.isLoaded?a():d.onLoad=a;CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();b.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a);this.allowBlur(!0);CKEDITOR.env.ie?CKEDITOR.tools.setTimeout(function(){b.markFirstDisplayed?b.markFirstDisplayed():b._.markFirstDisplayed()},0):b.markFirstDisplayed?b.markFirstDisplayed():b._.markFirstDisplayed();this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},reposition:function(){var a=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,a))},focus:function(){if(CKEDITOR.env.webkit){var a=CKEDITOR.document.getActive();a&&!a.equals(this._.iframe)&&a.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var a=this._.iframe.getFrameDocument().getActive();a&&a.is("a")&&(this._.lastFocused=a)},hide:function(a){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(a=a&&this._.returnFocus)CKEDITOR.env.webkit&&a.type&&a.getWindow().$.focus(),a.focus();delete this._.lastFocused;this._.showBlockParams=null;this._.editor.fire("panelHide",this)}},allowBlur:function(a){var e=this._.panel;void 0!==a&&(e.allowBlur=a);return e.allowBlur},showAsChild:function(a,e,h,m,l,k){if(this._.activeChild!=a||a._.panel._.offsetParentId!=h.getId())this.hideChild(),a.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(e,h,m,l,k),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(a){var e=this._.activeChild;e&&(delete e.onHide,delete this._.activeChild,e.hide(),a&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var a=CKEDITOR.tools.isEmpty(CKEDITOR.instances),f;for(f in e){var h=e[f];a?h.destroy():h.element.hide()}a&&(e={})})}(),CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(a){function e(b,d,e,f,k){var w=new CKEDITOR.style(m["colorButton_"+d+"Style"]),u=CKEDITOR.tools.getNextId()+"_colorBox",t;k=k||{};a.ui.add(b,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+f,allowedContent:w,requiredContent:w,contentTransformations:k.contentTransformations,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":l.panelTitle}},onBlock:function(b,e){t=e;e.autoSize=!0;e.element.addClass("cke_colorblock");e.element.setHtml(c(b,d,u));e.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var f=e.keys,h="rtl"==a.lang.dir;f[h?37:39]="next";f[40]="next";f[9]="next";f[h?39:37]="prev";f[38]="prev";f[CKEDITOR.SHIFT+9]="prev";f[32]="click"},refresh:function(){a.activeFilter.check(w)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var b=a.getSelection(),c=b&&b.getStartElement(),e=a.elementPath(c);if(e){c=e.block||e.blockLimit||a.document.getBody();do e=c&&c.getComputedStyle("back"==d?"background-color":"color")||"transparent";while("back"==d&&"transparent"==e&&c&&(c=c.getParent()));e&&"transparent"!=e||(e="#ffffff");!1!==m.colorButton_enableAutomatic&&this._.panel._.iframe.getFrameDocument().getById(u).setStyle("background-color",e);if(c=b&&b.getRanges()[0]){for(var b=new CKEDITOR.dom.walker(c),f=c.collapsed?c.startContainer:b.next(),c="";f;){f.type===CKEDITOR.NODE_TEXT&&(f=f.getParent());f=h(f.getComputedStyle("back"==d?"background-color":"color"));c=c||f;if(c!==f){c="";break}f=b.next()}b=c;c=t._.getItems();for(f=0;f<c.count();f++){var k=c.getItem(f);k.removeAttribute("aria-selected");b&&b==h(k.getAttribute("data-value"))&&k.setAttribute("aria-selected",!0)}}return e}}})}function c(b,d,c){var e=[],h=m.colorButton_colors.split(","),k=m.colorButton_colorsPerRow||6,u=a.plugins.colordialog&&!1!==m.colorButton_enableMore,t=h.length+(u?2:1),v=CKEDITOR.tools.addFunction(function D(d,c){function e(a){this.removeListener("ok",e);this.removeListener("cancel",e);"ok"==a.name&&D(this.getContentElement("picker","selectedColor").getValue(),c)}if("?"==d)a.openDialog("colordialog",function(){this.on("ok",e);this.on("cancel",e)});else{a.focus();b.hide();a.fire("saveSnapshot");a.removeStyle(new CKEDITOR.style(m["colorButton_"+c+"Style"],{color:"inherit"}));if(d){var g=m["colorButton_"+c+"Style"];g.childRule="back"==c?function(a){return f(a)}:function(a){return!(a.is("a")||a.getElementsByTag("a").count())||f(a)};a.applyStyle(new CKEDITOR.style(g,{color:d}))}a.fire("saveSnapshot")}});!1!==m.colorButton_enableAutomatic&&e.push('\x3ca class\x3d"cke_colorauto" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',l.auto,'" onclick\x3d"CKEDITOR.tools.callFunction(',v,",null,'",d,"');return false;\" href\x3d\"javascript:void('",l.auto,'\')" role\x3d"option" aria-posinset\x3d"1" aria-setsize\x3d"',t,'"\x3e\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e\x3ctr\x3e\x3ctd colspan\x3d"'+k+'" align\x3d"center"\x3e\x3cspan class\x3d"cke_colorbox" id\x3d"',c,'"\x3e\x3c/span\x3e',l.auto,"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/a\x3e");e.push('\x3ctable role\x3d"presentation" cellspacing\x3d0 cellpadding\x3d0 width\x3d"100%"\x3e');for(c=0;c<h.length;c++){0===c%k&&e.push("\x3c/tr\x3e\x3ctr\x3e");var x=h[c].split("/"),A=x[0],r=x[1]||A;x[1]||(A="#"+A.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));x=a.lang.colorbutton.colors[r]||r;e.push('\x3ctd\x3e\x3ca class\x3d"cke_colorbox" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',x,'" onclick\x3d"CKEDITOR.tools.callFunction(',v,",'",A,"','",d,"'); return false;\" href\x3d\"javascript:void('",x,'\')" data-value\x3d"'+r+'" role\x3d"option" aria-posinset\x3d"',c+2,'" aria-setsize\x3d"',t,'"\x3e\x3cspan class\x3d"cke_colorbox" style\x3d"background-color:#',r,'"\x3e\x3c/span\x3e\x3c/a\x3e\x3c/td\x3e')}u&&e.push('\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d"'+k+'" align\x3d"center"\x3e\x3ca class\x3d"cke_colormore" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"',l.more,'" onclick\x3d"CKEDITOR.tools.callFunction(',v,",'?','",d,"');return false;\" href\x3d\"javascript:void('",l.more,"')\"",' role\x3d"option" aria-posinset\x3d"',t,'" aria-setsize\x3d"',t,'"\x3e',l.more,"\x3c/a\x3e\x3c/td\x3e");e.push("\x3c/tr\x3e\x3c/table\x3e");return e.join("")}function f(a){return"false"==a.getAttribute("contentEditable")||a.getAttribute("data-nostyle")}function h(a){return CKEDITOR.tools.convertRgbToHex(a||"").replace(/#/,"").toLowerCase()}var m=a.config,l=a.lang.colorbutton;if(!CKEDITOR.env.hc){e("TextColor","fore",l.textColorTitle,10,{contentTransformations:[[{element:"font",check:"span{color}",left:function(a){return!!a.attributes.color},right:function(a){a.name="span";a.attributes.color&&(a.styles.color=a.attributes.color);delete a.attributes.color}}]]});var k={},d=a.config.colorButton_normalizeBackground;if(void 0===d||d)k.contentTransformations=[[{element:"span",left:function(a){var d=CKEDITOR.tools;if("span"!=a.name||!a.styles||!a.styles.background)return!1;a=d.style.parse.background(a.styles.background);return a.color&&1===d.objectKeys(a).length},right:function(b){var d=(new CKEDITOR.style(a.config.colorButton_backStyle,{color:b.styles.background})).getDefinition();b.name=d.element;b.styles=d.styles;b.attributes=d.attributes||{};return b}}]];e("BGColor","back",l.bgColorTitle,20,k)}}}),CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.plugins.colordialog={requires:"dialog",init:function(a){var e=new CKEDITOR.dialogCommand("colordialog");e.editorFocus=!1;a.addCommand("colordialog",e);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");a.getColorFromDialog=function(c,e){var h=function(a){this.removeListener("ok",h);this.removeListener("cancel",h);a="ok"==a.name?this.getValueOf("picker","selectedColor"):null;c.call(e,a)},m=function(a){a.on("ok",h);a.on("cancel",h)};a.execCommand("colordialog");if(a._.storedDialogs&&a._.storedDialogs.colordialog)m(a._.storedDialogs.colordialog);else CKEDITOR.on("dialogDefinition",function(a){if("colordialog"==a.data.name){var c=a.data.definition;a.removeListener();c.onLoad=CKEDITOR.tools.override(c.onLoad,function(a){return function(){m(this);c.onLoad=a;"function"==typeof a&&a.call(this)}})}})}}},CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog),function(){function a(a){var c=(a=a.data)&&a.$;return a&&c?CKEDITOR.env.ie&&9>CKEDITOR.env.version?1===c.button:0===c.button:!1}function e(a,c,d,b){var e=new CKEDITOR.dom.walker(a);if(a=a.startContainer.getAscendant(c,!0)||a.endContainer.getAscendant(c,!0))if(d(a),b)return;for(;a=e.next();)if(a=a.getAscendant(c,!0))if(d(a),b)break}function c(a,c){var d={ul:"ol",ol:"ul"};return-1!==h(c,function(b){return b.element===a||b.element===d[a]})}function f(a){this.styles=null;this.sticky=!1;this.editor=a;this.filter=new CKEDITOR.filter(a.config.copyFormatting_allowRules);!0===a.config.copyFormatting_allowRules&&(this.filter.disabled=!0);a.config.copyFormatting_disallowRules&&this.filter.disallow(a.config.copyFormatting_disallowRules)}var h=CKEDITOR.tools.indexOf,m=!1;CKEDITOR.plugins.add("copyformatting",{lang:"az,de,en,it,ja,nb,nl,oc,pl,pt-br,ru,sv,tr,zh,zh-cn",icons:"copyformatting",hidpi:!0,init:function(e){var f=CKEDITOR.plugins.copyformatting;f._addScreenReaderContainer();m||(CKEDITOR.document.appendStyleSheet(this.path+"styles/copyformatting.css"),m=!0);e.addContentsCss&&e.addContentsCss(this.path+"styles/copyformatting.css");e.copyFormatting=new f.state(e);e.addCommand("copyFormatting",f.commands.copyFormatting);e.addCommand("applyFormatting",f.commands.applyFormatting);e.ui.addButton("CopyFormatting",{label:e.lang.copyformatting.label,command:"copyFormatting",toolbar:"cleanup,0"});e.on("contentDom",function(){var d=e.editable(),b=d.isInline()?d:e.document,c=e.ui.get("CopyFormatting");d.attachListener(b,"mouseup",function(b){a(b)&&e.execCommand("applyFormatting")});d.attachListener(CKEDITOR.document,"mouseup",function(b){var c=e.getCommand("copyFormatting");a(b)&&c.state===CKEDITOR.TRISTATE_ON&&!d.contains(b.data.getTarget())&&e.execCommand("copyFormatting")});c&&(b=CKEDITOR.document.getById(c._.id),d.attachListener(b,"dblclick",function(){e.execCommand("copyFormatting",{sticky:!0})}),d.attachListener(b,"mouseup",function(a){a.data.stopPropagation()}))});e.config.copyFormatting_keystrokeCopy&&e.setKeystroke(e.config.copyFormatting_keystrokeCopy,"copyFormatting");e.on("key",function(a){var b=e.getCommand("copyFormatting");a=a.data.domEvent;a.getKeystroke&&27===a.getKeystroke()&&b.state===CKEDITOR.TRISTATE_ON&&e.execCommand("copyFormatting")});e.copyFormatting.on("extractFormatting",function(a){var b=a.data.element;if(b.contains(e.editable())||b.equals(e.editable()))return a.cancel();b=f._convertElementToStyleDef(b);if(!e.copyFormatting.filter.check(new CKEDITOR.style(b),!0,!0))return a.cancel();a.data.styleDef=b});e.copyFormatting.on("applyFormatting",function(a){if(!a.data.preventFormatStripping){var b=a.data.range,g=f._extractStylesFromRange(e,b),m=f._determineContext(b),q,p;if(e.copyFormatting._isContextAllowed(m))for(p=0;p<g.length;p++)m=g[p],q=b.createBookmark(),-1===h(f.preservedElements,m.element)?CKEDITOR.env.webkit&&!CKEDITOR.env.chrome?g[p].removeFromRange(a.data.range,a.editor):g[p].remove(a.editor):c(m.element,a.data.styles)&&f._removeStylesFromElementInRange(b,m.element),b.moveToBookmark(q)}});e.copyFormatting.on("applyFormatting",function(a){var b=CKEDITOR.plugins.copyformatting,c=b._determineContext(a.data.range);"list"===c&&e.copyFormatting._isContextAllowed("list")?b._applyStylesToListContext(a.editor,a.data.range,a.data.styles):"table"===c&&e.copyFormatting._isContextAllowed("table")?b._applyStylesToTableContext(a.editor,a.data.range,a.data.styles):e.copyFormatting._isContextAllowed("text")&&b._applyStylesToTextContext(a.editor,a.data.range,a.data.styles)},null,null,999)}});f.prototype._isContextAllowed=function(a){var c=this.editor.config.copyFormatting_allowedContexts;return!0===c||-1!==h(c,a)};CKEDITOR.event.implementOn(f.prototype);CKEDITOR.plugins.copyformatting={state:f,inlineBoundary:"h1 h2 h3 h4 h5 h6 p div".split(" "),excludedAttributes:["id","style","href","data-cke-saved-href","dir"],elementsForInlineTransform:["li"],excludedElementsFromInlineTransform:["table","thead","tbody","ul","ol"],excludedAttributesFromInlineTransform:["value","type"],preservedElements:"ul ol li td th tr thead tbody table".split(" "),breakOnElements:["ul","ol","table"],_initialKeystrokePasteCommand:null,commands:{copyFormatting:{exec:function(a,c){var d=CKEDITOR.plugins.copyformatting,b=a.copyFormatting,e=c?"keystrokeHandler"==c.from:!1,f=c?c.sticky||e:!1,h=d._getCursorContainer(a),m=CKEDITOR.document.getDocumentElement();if(this.state===CKEDITOR.TRISTATE_ON)return b.styles=null,b.sticky=!1,h.removeClass("cke_copyformatting_active"),m.removeClass("cke_copyformatting_disabled"),m.removeClass("cke_copyformatting_tableresize_cursor"),d._putScreenReaderMessage(a,"canceled"),d._detachPasteKeystrokeHandler(a),this.setState(CKEDITOR.TRISTATE_OFF);b.styles=d._extractStylesFromElement(a,a.elementPath().lastElement);this.setState(CKEDITOR.TRISTATE_ON);e||(h.addClass("cke_copyformatting_active"),m.addClass("cke_copyformatting_tableresize_cursor"),a.config.copyFormatting_outerCursor&&m.addClass("cke_copyformatting_disabled"));b.sticky=f;d._putScreenReaderMessage(a,"copied");d._attachPasteKeystrokeHandler(a)}},applyFormatting:{editorFocus:!1,exec:function(a,c){var d=a.getCommand("copyFormatting"),b=c?"keystrokeHandler"==c.from:!1,e=CKEDITOR.plugins.copyformatting,f=a.copyFormatting,h=e._getCursorContainer(a),m=CKEDITOR.document.getDocumentElement();if(b||d.state===CKEDITOR.TRISTATE_ON){if(b&&!f.styles)return e._putScreenReaderMessage(a,"failed"),e._detachPasteKeystrokeHandler(a),!1;b=e._applyFormat(a,f.styles);f.sticky||(f.styles=null,h.removeClass("cke_copyformatting_active"),m.removeClass("cke_copyformatting_disabled"),m.removeClass("cke_copyformatting_tableresize_cursor"),d.setState(CKEDITOR.TRISTATE_OFF),e._detachPasteKeystrokeHandler(a));e._putScreenReaderMessage(a,b?"applied":"canceled")}}}},_getCursorContainer:function(a){return a.elementMode===CKEDITOR.ELEMENT_MODE_INLINE?a.editable():a.editable().getParent()},_convertElementToStyleDef:function(a){var c=CKEDITOR.tools,d=a.getAttributes(CKEDITOR.plugins.copyformatting.excludedAttributes),c=c.parseCssText(a.getAttribute("style"),!0,!0);return{element:a.getName(),type:CKEDITOR.STYLE_INLINE,attributes:d,styles:c}},_extractStylesFromElement:function(a,c){var d={},b=[];do if(c.type===CKEDITOR.NODE_ELEMENT&&!c.hasAttribute("data-cke-bookmark")&&(d.element=c,a.copyFormatting.fire("extractFormatting",d,a)&&d.styleDef&&b.push(new CKEDITOR.style(d.styleDef)),c.getName&&-1!==h(CKEDITOR.plugins.copyformatting.breakOnElements,c.getName())))break;while((c=c.getParent())&&c.type===CKEDITOR.NODE_ELEMENT);return b},_extractStylesFromRange:function(a,c){for(var d=[],b=new CKEDITOR.dom.walker(c),e;e=b.next();)d=d.concat(CKEDITOR.plugins.copyformatting._extractStylesFromElement(a,e));return d},_removeStylesFromElementInRange:function(a,c){for(var d=-1!==h(["ol","ul","table"],c),b=new CKEDITOR.dom.walker(a),e;e=b.next();)if(e=e.getAscendant(c,!0))if(e.removeAttributes(e.getAttributes()),d)break},_getSelectedWordOffset:function(a){function c(a,b){return a[b?"getPrevious":"getNext"](function(a){return a.type!==CKEDITOR.NODE_COMMENT})}function d(a){return a.type==CKEDITOR.NODE_ELEMENT?(a=a.getHtml().replace(/<span.*?>&nbsp;<\/span>/g,""),a.replace(/<.*?>/g,"")):a.getText()}function b(a,e){var f=a,g=/\s/g,l="p br ol ul li td th div caption body".split(" "),m=!1,n=!1,u,q;do{for(u=c(f,e);!u&&f.getParent();){f=f.getParent();if(-1!==h(l,f.getName())){n=m=!0;break}u=c(f,e)}if(u&&u.getName&&-1!==h(l,u.getName())){m=!0;break}f=u}while(f&&f.getStyle&&("none"==f.getStyle("display")||!f.getText()));for(f||(f=a);f.type!==CKEDITOR.NODE_TEXT;)f=!m||e||n?f.getChild(0):f.getChild(f.getChildCount()-1);for(l=d(f);null!=(n=g.exec(l))&&(q=n.index,e););if("number"!==typeof q&&!m)return b(f,e);if(m)e?q=0:(g=/([\.\b]*$)/,q=(n=g.exec(l))?n.index:l.length);else if(e&&(q+=1,q>l.length))return b(f);return{node:f,offset:q}}var e=/\b\w+\b/ig,f,m,p,w,u;p=w=u=a.startContainer;for(f=d(p);null!=(m=e.exec(f));)if(m.index+m[0].length>=a.startOffset)return a=m.index,e=m.index+m[0].length,0===m.index&&(m=b(p,!0),w=m.node,a=m.offset),e>=f.length&&(f=b(p),u=f.node,e=f.offset),{startNode:w,startOffset:a,endNode:u,endOffset:e};return null},_filterStyles:function(a){var c=CKEDITOR.tools.isEmpty,d=[],b,e;for(e=0;e<a.length;e++)b=a[e]._.definition,-1!==CKEDITOR.tools.indexOf(CKEDITOR.plugins.copyformatting.inlineBoundary,b.element)&&(b.element=a[e].element="span"),"span"===b.element&&c(b.attributes)&&c(b.styles)||d.push(a[e]);return d},_determineContext:function(a){function c(d){var b=new CKEDITOR.dom.walker(a),e;if(a.startContainer.getAscendant(d,!0)||a.endContainer.getAscendant(d,!0))return!0;for(;e=b.next();)if(e.getAscendant(d,!0))return!0}return c({ul:1,ol:1})?"list":c("table")?"table":"text"},_applyStylesToTextContext:function(a,c,d){var b=CKEDITOR.plugins.copyformatting,e=b.excludedAttributesFromInlineTransform,f,m;CKEDITOR.env.webkit&&!CKEDITOR.env.chrome&&a.getSelection().selectRanges([c]);for(f=0;f<d.length;f++)if(c=d[f],-1===h(b.excludedElementsFromInlineTransform,c.element)){if(-1!==h(b.elementsForInlineTransform,c.element))for(c.element=c._.definition.element="span",m=0;m<e.length;m++)c._.definition.attributes[e[m]]&&delete c._.definition.attributes[e[m]];c.apply(a)}},_applyStylesToListContext:function(a,c,d){var b,f,h;for(h=0;h<d.length;h++)b=d[h],f=c.createBookmark(),"ol"===b.element||"ul"===b.element?e(c,{ul:1,ol:1},function(a){var d=b;a.getName()!==d.element&&a.renameNode(d.element);d.applyToObject(a)},!0):"li"===b.element?e(c,"li",function(a){b.applyToObject(a)}):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(a,c,[b]),c.moveToBookmark(f)},_applyStylesToTableContext:function(a,c,d){function b(a,b){a.getName()!==b.element&&(b=b.getDefinition(),b.element=a.getName(),b=new CKEDITOR.style(b));b.applyToObject(a)}var f,m,q;for(q=0;q<d.length;q++)f=d[q],m=c.createBookmark(),-1!==h(["table","tr"],f.element)?e(c,f.element,function(a){f.applyToObject(a)}):-1!==h(["td","th"],f.element)?e(c,{td:1,th:1},function(a){b(a,f)}):-1!==h(["thead","tbody"],f.element)?e(c,{thead:1,tbody:1},function(a){b(a,f)}):CKEDITOR.plugins.copyformatting._applyStylesToTextContext(a,c,[f]),c.moveToBookmark(m)},_applyFormat:function(a,c){var d=a.getSelection().getRanges()[0],b=CKEDITOR.plugins.copyformatting,e,f;if(!d)return!1;if(d.collapsed){f=a.getSelection().createBookmarks();if(!(e=b._getSelectedWordOffset(d)))return;d=a.createRange();d.setStart(e.startNode,e.startOffset);d.setEnd(e.endNode,e.endOffset);d.select()}c=b._filterStyles(c);if(!a.copyFormatting.fire("applyFormatting",{styles:c,range:d,preventFormatStripping:!1},a))return!1;f&&a.getSelection().selectBookmarks(f);return!0},_putScreenReaderMessage:function(a,c){var d=this._getScreenReaderContainer();d&&d.setText(a.lang.copyformatting.notification[c])},_addScreenReaderContainer:function(){if(this._getScreenReaderContainer())return this._getScreenReaderContainer();if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml('\x3cdiv class\x3d"cke_screen_reader_only cke_copyformatting_notification"\x3e\x3cdiv aria-live\x3d"polite"\x3e\x3c/div\x3e\x3c/div\x3e')).getChild(0)},_getScreenReaderContainer:function(){if(!CKEDITOR.env.ie6Compat&&!CKEDITOR.env.ie7Compat)return CKEDITOR.document.getBody().findOne(".cke_copyformatting_notification div[aria-live]")},_attachPasteKeystrokeHandler:function(a){var c=a.config.copyFormatting_keystrokePaste;c&&(this._initialKeystrokePasteCommand=a.keystrokeHandler.keystrokes[c],a.setKeystroke(c,"applyFormatting"))},_detachPasteKeystrokeHandler:function(a){var c=a.config.copyFormatting_keystrokePaste;c&&a.setKeystroke(c,this._initialKeystrokePasteCommand||!1)}};CKEDITOR.config.copyFormatting_outerCursor=!0;CKEDITOR.config.copyFormatting_allowRules="b s u i em strong span p div td th ol ul li(*)[*]{*}";CKEDITOR.config.copyFormatting_disallowRules="*[data-cke-widget*,data-widget*,data-cke-realelement](cke_widget*)";CKEDITOR.config.copyFormatting_allowedContexts=!0;CKEDITOR.config.copyFormatting_keystrokeCopy=CKEDITOR.CTRL+CKEDITOR.SHIFT+67;CKEDITOR.config.copyFormatting_keystrokePaste=CKEDITOR.CTRL+CKEDITOR.SHIFT+86}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(a){for(var e=a.config.menu_groups.split(","),c=a._.menuGroups={},f=a._.menuItems={},h=0;h<e.length;h++)c[e[h]]=h+1;a.addMenuGroup=function(a,e){c[a]=e||100};a.addMenuItem=function(a,e){c[e.group]&&(f[a]=new CKEDITOR.menuItem(this,a,e))};a.addMenuItems=function(a){for(var c in a)this.addMenuItem(c,a[c])};a.getMenuItem=function(a){return f[a]};a.removeMenuItem=function(a){delete f[a]}}}),function(){function a(a){a.sort(function(a,c){return a.group<c.group?-1:a.group>c.group?1:a.order<c.order?-1:a.order>c.order?1:0})}var e='\x3cspan class\x3d"cke_menuitem"\x3e\x3ca id\x3d"{id}" class\x3d"cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href\x3d"{href}" title\x3d"{title}" tabindex\x3d"-1" _cke_focus\x3d1 hidefocus\x3d"true" role\x3d"{role}" aria-label\x3d"{label}" aria-describedby\x3d"{id}_description" aria-haspopup\x3d"{hasPopup}" aria-disabled\x3d"{disabled}" {ariaChecked} draggable\x3d"false"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(e+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;" ondragstart\x3d"return false;"');var e=e+(' onmouseover\x3d"CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout\x3d"CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},{index}); return false;"\x3e'),c=CKEDITOR.addTemplate("menuItem",e+'\x3cspan class\x3d"cke_menubutton_inner"\x3e\x3cspan class\x3d"cke_menubutton_icon"\x3e\x3cspan class\x3d"cke_button_icon cke_button__{iconName}_icon" style\x3d"{iconStyle}"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"cke_menubutton_label"\x3e{label}\x3c/span\x3e{shortcutHtml}{arrowHtml}\x3c/span\x3e\x3c/a\x3e\x3cspan id\x3d"{id}_description" class\x3d"cke_voice_label" aria-hidden\x3d"false"\x3e{ariaShortcut}\x3c/span\x3e\x3c/span\x3e'),f=CKEDITOR.addTemplate("menuArrow",'\x3cspan class\x3d"cke_menuarrow"\x3e\x3cspan\x3e{label}\x3c/span\x3e\x3c/span\x3e'),h=CKEDITOR.addTemplate("menuShortcut",'\x3cspan class\x3d"cke_menubutton_label cke_menubutton_shortcut"\x3e{shortcut}\x3c/span\x3e');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,c){c=this._.definition=c||{};this.id=CKEDITOR.tools.getNextId();this.editor=a;this.items=[];this._.listeners=[];this._.level=c.level||1;var e=CKEDITOR.tools.extend({},c.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),d=e.block.attributes=e.attributes||{};!d.role&&(d.role="menu");this._.panelDefinition=e},_:{onShow:function(){var a=this.editor.getSelection(),c=a&&a.getStartElement(),e=this.editor.elementPath(),d=this._.listeners;this.removeAll();for(var b=0;b<d.length;b++){var f=d[b](c,a,e);if(f)for(var h in f){var q=this.editor.getMenuItem(h);!q||q.command&&!this.editor.getCommand(q.command).state||(q.state=f[h],this.add(q))}}},onClick:function(a){this.hide();if(a.onClick)a.onClick();else a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var c=this.parent;c?c._.panel.hideChild(1):27==a&&this.hide(1);return!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var c=this._.subMenu,e=this.items[a];if(e=e.getItems&&e.getItems()){c?c.removeAll():(c=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),c.parent=this,c._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var d in e){var b=this.editor.getMenuItem(d);b&&(b.state=e[d],c.add(b))}var f=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(a));setTimeout(function(){c.show(f,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length);this.items.push(a)},removeAll:function(){this.items=[]},show:function(c,e,f,d){if(!this.parent&&(this._.onShow(),!this.items.length))return;e=e||("rtl"==this.editor.lang.dir?2:1);var b=this.items,g=this.editor,h=this._.panel,q=this._.element;if(!h){h=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);h.onEscape=CKEDITOR.tools.bind(function(a){if(!1===this._.onEscape(a))return!1},this);h.onShow=function(){h._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")};h.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);q=h.addBlock(this.id,this._.panelDefinition.block);q.autoSize=!0;var p=q.keys;p[40]="next";p[9]="next";p[38]="prev";p[CKEDITOR.SHIFT+9]="prev";p["rtl"==g.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";p[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(p[13]="mouseup");q=this._.element=q.element;p=q.getDocument();p.getBody().setStyle("overflow","hidden");p.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,g.config.menu_subMenuDelay||400,this,[a])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];if(b.state==CKEDITOR.TRISTATE_DISABLED)this.hide(1);else if(b.getItems)this._.showSubMenu(a);else this._.onClick(b)},this)}a(b);for(var p=g.elementPath(),p=['\x3cdiv class\x3d"cke_menu'+(p&&p.direction()!=g.lang.dir?" cke_mixed_dir_content":"")+'" role\x3d"presentation"\x3e'],w=b.length,u=w&&b[0].group,t=0;t<w;t++){var v=b[t];u!=v.group&&(p.push('\x3cdiv class\x3d"cke_menuseparator" role\x3d"separator"\x3e\x3c/div\x3e'),u=v.group);v.render(this,t,p)}p.push("\x3c/div\x3e");q.setHtml(p.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(h,this.id,c,e,f,d):h.showBlock(this.id,c,e,f,d);g.fire("menuShow",[h])},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(a)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,c,e){CKEDITOR.tools.extend(this,e,{order:0,className:"cke_menubutton__"+c});this.group=a._.menuGroups[this.group];this.editor=a;this.name=c},proto:{render:function(a,e,k){var d=a.id+String(e),b="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,g="",n=this.editor,q,p,w=b==CKEDITOR.TRISTATE_ON?"on":b==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(g=' aria-checked\x3d"'+(b==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var u=this.getItems,t="\x26#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",v=this.name;this.icon&&!/\./.test(this.icon)&&(v=this.icon);this.command&&(q=n.getCommand(this.command),(q=n.getCommandKeystroke(q))&&(p=CKEDITOR.tools.keystrokeToString(n.lang.common.keyboard,q)));a={id:d,name:this.name,iconName:v,label:this.label,cls:this.className||"",state:w,hasPopup:u?"true":"false",disabled:b==CKEDITOR.TRISTATE_DISABLED,title:this.label+(p?" ("+p.display+")":""),ariaShortcut:p?n.lang.common.keyboardShortcut+" "+p.aria:"",href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:e,iconStyle:CKEDITOR.skin.getIconStyle(v,"rtl"==this.editor.lang.dir,v==this.icon?null:this.icon,this.iconOffset),shortcutHtml:p?h.output({shortcut:p.display}):"",arrowHtml:u?f.output({label:t}):"",role:this.role?this.role:"menuitem",ariaChecked:g};c.output(a,k)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:"cke_menu_panel",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,e){a.on("contextmenu",function(a){a=a.data;var f=CKEDITOR.env.webkit?c:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!f){a.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var f=this.editor,l=(new CKEDITOR.dom.elementPath(a.getTarget(),f.editable())).contains(function(a){return a.hasAttribute("contenteditable")},!0);l&&"false"==l.getAttribute("contenteditable")&&f.getSelection().fake(l)}var l=a.getTarget().getDocument(),k=a.getTarget().getDocument().getDocumentElement(),f=!l.equals(CKEDITOR.document),l=l.getWindow().getScrollPosition(),d=f?a.$.clientX:a.$.pageX||l.x+a.$.clientX,b=f?a.$.clientY:a.$.pageY||l.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(k,null,d,b)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var c,f=function(){c=0};a.on("keydown",function(a){c=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey});a.on("keyup",f);a.on("contextmenu",f)}},open:function(a,e,c,f){!1!==this.editor.config.enableContextMenu&&(this.editor.focus(),a=a||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(a,e,c,f))}}})},beforeInit:function(a){var e=a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.on("contentDom",function(){e.addTarget(a.editable(),!1!==a.config.browserContextMenuOnCtrl)});a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});a.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");a.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),function(){function a(a){var c=this.att;a=a&&a.hasAttribute(c)&&a.getAttribute(c)||"";void 0!==a&&this.setValue(a)}function e(){for(var a,c=0;c<arguments.length;c++)if(arguments[c]instanceof CKEDITOR.dom.element){a=arguments[c];break}if(a){var c=this.att,e=this.getValue();e?a.setAttribute(c,e):a.removeAttribute(c,e)}}var c={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(a){a||(a=c);var e=[];a.id&&e.push("id");a.dir&&e.push("dir");var m="";e.length&&(m+="["+e.join(",")+"]");a.classes&&(m+="(*)");a.styles&&(m+="{*}");return m},createAdvancedTab:function(f,h,m){h||(h=c);var l=f.lang.common,k={id:"advanced",label:l.advancedTab,title:l.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},d=[];if(h.id||h.dir)h.id&&d.push({id:"advId",att:"id",type:"text",requiredContent:m?m+"[id]":null,label:l.id,setup:a,commit:e}),h.dir&&d.push({id:"advLangDir",att:"dir",type:"select",requiredContent:m?m+"[dir]":null,label:l.langDir,"default":"",style:"width:100%",items:[[l.notSet,""],[l.langDirLTR,"ltr"],[l.langDirRTL,"rtl"]],setup:a,commit:e}),k.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(d)});if(h.styles||h.classes)d=[],h.styles&&d.push({id:"advStyles",att:"style",type:"text",requiredContent:m?m+"{cke-xyz}":null,label:l.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(l.invalidInlineStyle),onChange:function(){},getStyle:function(a,d){var c=this.getValue().match(new RegExp("(?:^|;)\\s*"+a+"\\s*:\\s*([^;]*)","i"));return c?c[1]:d},updateStyle:function(a,d){var c=this.getValue(),e=f.document.createElement("span");e.setAttribute("style",c);e.setStyle(a,d);c=CKEDITOR.tools.normalizeCssText(e.getAttribute("style"));this.setValue(c,1)},setup:a,commit:e}),h.classes&&d.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:m?m+"(cke-xyz)":null,label:l.cssClasses,"default":"",setup:a,commit:e}]}),k.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(d)});return k}})}(),function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(a){if(!a.blockless){var e=a.lang.div,c="div(*)";CKEDITOR.dialog.isTabEnabled(a,"editdiv","advanced")&&(c+=";div[dir,id,lang,title]{*}");a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:c,requiredContent:"div",contextSensitive:!0,contentTransformations:[["div: alignmentToStyle"]],refresh:function(a,c){this.setState("div"in(a.config.div_wrapTable?c.root:c.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));a.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));a.addCommand("removediv",{requiredContent:"div",exec:function(a){function c(d){(d=CKEDITOR.plugins.div.getSurroundDiv(a,d))&&!d.data("cke-div-added")&&(b.push(d),d.data("cke-div-added"))}for(var e=a.getSelection(),l=e&&e.getRanges(),k,d=e.createBookmarks(),b=[],g=0;g<l.length;g++)k=l[g],k.collapsed?c(e.getStartElement()):(k=new CKEDITOR.dom.walker(k),k.evaluator=c,k.lastForward());for(g=0;g<b.length;g++)b[g].remove(!0);e.selectBookmarks(d)}});a.ui.addButton&&a.ui.addButton("CreateDiv",{label:e.toolbar,command:"creatediv",toolbar:"blocks,50"});a.addMenuItems&&(a.addMenuItems({editdiv:{label:e.edit,command:"editdiv",group:"div",order:1},removediv:{label:e.remove,command:"removediv",group:"div",order:5}}),a.contextMenu&&a.contextMenu.addListener(function(c){return!c||c.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(a)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(a,e){var c=a.elementPath(e);return a.elementPath(c.blockLimit).contains(function(a){return a.is("div")&&!a.isReadOnly()},1)}}}(),function(){function a(a,d,c){c=a.config.forceEnterMode||c;"wysiwyg"==a.mode&&(d||(d=a.activeEnterMode),a.elementPath().isContextFor("p")||(d=CKEDITOR.ENTER_BR,c=1),a.fire("saveSnapshot"),d==CKEDITOR.ENTER_BR?l(a,d,null,c):k(a,d,null,c),a.fire("saveSnapshot"))}function e(a){a=a.getSelection().getRanges(!0);for(var d=a.length-1;0<d;d--)a[d].deleteContents();return a[0]}function c(a){var d=a.startContainer.getAscendant(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&"true"==a.getAttribute("contenteditable")},!0);if(a.root.equals(d))return a;d=new CKEDITOR.dom.range(d);d.moveToRange(a);return d}CKEDITOR.plugins.add("enterkey",{init:function(b){b.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b)}});b.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(b){a(b,b.activeShiftEnterMode,1)}});b.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var f=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(a,g,k,m){if(k=k||e(a)){k=c(k);var p=k.document,w=k.checkStartOfBlock(),u=k.checkEndOfBlock(),t=a.elementPath(k.startContainer),v=t.block,x=g==CKEDITOR.ENTER_DIV?"div":"p",A;if(w&&u){if(v&&(v.is("li")||v.getParent().is("li"))){v.is("li")||(v=v.getParent());k=v.getParent();A=k.getParent();m=!v.hasPrevious();var r=!v.hasNext(),x=a.getSelection(),y=x.createBookmarks(),w=v.getDirection(1),u=v.getAttribute("class"),D=v.getAttribute("style"),B=A.getDirection(1)!=w;a=a.enterMode!=CKEDITOR.ENTER_BR||B||D||u;if(A.is("li"))m||r?(m&&r&&k.remove(),v[r?"insertAfter":"insertBefore"](A)):v.breakParent(A);else{if(a)if(t.block.is("li")?(A=p.createElement(g==CKEDITOR.ENTER_P?"p":"div"),B&&A.setAttribute("dir",w),D&&A.setAttribute("style",D),u&&A.setAttribute("class",u),v.moveChildren(A)):A=t.block,m||r)A[m?"insertBefore":"insertAfter"](k);else v.breakParent(k),A.insertAfter(k);else if(v.appendBogus(!0),m||r)for(;p=v[m?"getFirst":"getLast"]();)p[m?"insertBefore":"insertAfter"](k);else for(v.breakParent(k);p=v.getLast();)p.insertAfter(k);v.remove()}x.selectBookmarks(y);return}if(v&&v.getParent().is("blockquote")){v.breakParent(v.getParent());v.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||v.getPrevious().remove();v.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||v.getNext().remove();k.moveToElementEditStart(v);k.select();return}}else if(v&&v.is("pre")&&!u){l(a,g,k,m);return}if(w=k.splitBlock(x)){g=w.previousBlock;v=w.nextBlock;t=w.wasStartOfBlock;a=w.wasEndOfBlock;v?(y=v.getParent(),y.is("li")&&(v.breakParent(y),v.move(v.getNext(),1))):g&&(y=g.getParent())&&y.is("li")&&(g.breakParent(y),y=g.getNext(),k.moveToElementEditStart(y),g.move(g.getPrevious()));if(t||a){if(g){if(g.is("li")||!d.test(g.getName())&&!g.is("pre"))A=g.clone()}else v&&(A=v.clone());A?m&&!A.is("li")&&A.renameNode(x):y&&y.is("li")?A=y:(A=p.createElement(x),g&&(r=g.getDirection())&&A.setAttribute("dir",r));if(p=w.elementPath)for(m=0,x=p.elements.length;m<x;m++){y=p.elements[m];if(y.equals(p.block)||y.equals(p.blockLimit))break;CKEDITOR.dtd.$removeEmpty[y.getName()]&&(y=y.clone(),A.moveChildren(y),A.append(y))}A.appendBogus();A.getParent()||k.insertNode(A);A.is("li")&&A.removeAttribute("value");!CKEDITOR.env.ie||!t||a&&g.getChildCount()||(k.moveToElementEditStart(a?g:A),k.select());k.moveToElementEditStart(t&&!a?v:A)}else v.is("li")&&(A=k.clone(),A.selectNodeContents(v),A=new CKEDITOR.dom.walker(A),A.evaluator=function(a){return!(h(a)||f(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in CKEDITOR.dtd.$inline&&!(a.getName()in CKEDITOR.dtd.$empty))},(y=A.next())&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?p.createElement("br"):p.createText("")).insertBefore(y)),v&&k.moveToElementEditStart(v);k.select();k.scrollIntoView()}}},enterBr:function(a,c,f,h){if(f=f||e(a)){var l=f.document,m=f.checkEndOfBlock(),u=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),t=u.block,v=t&&u.block.getName();h||"li"!=v?(!h&&m&&d.test(v)?(m=t.getDirection())?(l=l.createElement("div"),l.setAttribute("dir",m),l.insertAfter(t),f.setStart(l,0)):(l.createElement("br").insertAfter(t),CKEDITOR.env.gecko&&l.createText("").insertAfter(t),f.setStartAt(t.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(a="pre"==v&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?l.createText("\r"):l.createElement("br"),f.deleteContents(),f.insertNode(a),CKEDITOR.env.needsBrFiller?(l.createText("").insertAfter(a),m&&(t||u.blockLimit).appendBogus(),a.getNext().$.nodeValue="",f.setStartAt(a.getNext(),CKEDITOR.POSITION_AFTER_START)):f.setStartAt(a,CKEDITOR.POSITION_AFTER_END)),f.collapse(!0),f.select(),f.scrollIntoView()):k(a,c,f,h)}}};var m=CKEDITOR.plugins.enterkey,l=m.enterBr,k=m.enterBlock,d=/^h[1-6]$/}(),function(){function a(a,c){var f={},h=[],m={nbsp:"",shy:"",gt:"\x3e",lt:"\x3c",amp:"\x26",apos:"'",quot:'"'};a=a.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(a,d){var e=c?"\x26"+d+";":m[d];f[e]=c?m[d]:"\x26"+d+";";h.push(e);return""});if(!c&&a){a=a.split(",");var l=document.createElement("div"),k;l.innerHTML="\x26"+a.join(";\x26")+";";k=l.innerHTML;l=null;for(l=0;l<k.length;l++){var d=k.charAt(l);f[d]="\x26"+a[l]+";";h.push(d)}}f.regex=h.join(c?"|":"");return f}CKEDITOR.plugins.add("entities",{afterInit:function(e){function c(a){return d[a]}function f(a){return"force"!=h.entities_processNumerical&&l[a]?l[a]:"\x26#"+a.charCodeAt(0)+";"}var h=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var m=[];!1!==h.basicEntities&&m.push("nbsp,gt,lt,amp");h.entities&&(m.length&&m.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),h.entities_latin&&m.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),h.entities_greek&&m.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),h.entities_additional&&m.push(h.entities_additional));var l=a(m.join(",")),k=l.regex?"["+l.regex+"]":"a^";delete l.regex;h.entities&&h.entities_processNumerical&&(k="[^ -~]|"+k);var k=new RegExp(k,"g"),d=a("nbsp,gt,lt,amp,shy",!0),b=new RegExp(d.regex,"g");e.addRules({text:function(a){return a.replace(b,c).replace(k,f)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,e,c,f){e=e||"80%";c=c||"70%";"string"==typeof e&&1<e.length&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e,10)/100,10));"string"==typeof c&&1<c.length&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10));640>e&&(e=640);420>c&&(c=420);var h=parseInt((window.screen.height-c)/2,10),m=parseInt((window.screen.width-
e)/2,10);f=(f||"location\x3dno,menubar\x3dno,toolbar\x3dno,dependent\x3dyes,minimizable\x3dno,modal\x3dyes,alwaysRaised\x3dyes,resizable\x3dyes,scrollbars\x3dyes")+",width\x3d"+e+",height\x3d"+c+",top\x3d"+h+",left\x3d"+m;var l=window.open("",null,f,!0);if(!l)return!1;try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(l.moveTo(m,h),l.resizeTo(e,c)),l.focus(),l.location.href=a}catch(k){window.open(a,null,f,!0)}return!0}}),function(){function a(a,b){var c=[];if(b)for(var e in b)c.push(e+
"\x3d"+encodeURIComponent(b[e]));else return a;return a+(-1!=a.indexOf("?")?"\x26":"?")+c.join("\x26")}function e(a){a+="";return a.charAt(0).toUpperCase()+a.substr(1)}function c(){var d=this.getDialog(),b=d.getParentEditor();b._.filebrowserSe=this;var c=b.config["filebrowser"+e(d.getName())+"WindowWidth"]||b.config.filebrowserWindowWidth||"80%",d=b.config["filebrowser"+e(d.getName())+"WindowHeight"]||b.config.filebrowserWindowHeight||"70%",f=this.filebrowser.params||{};f.CKEditor=b.name;f.CKEditorFuncNum=b._.filebrowserFn;f.langCode||(f.langCode=b.langCode);f=a(this.filebrowser.url,f);b.popup(f,c,d,b.config.filebrowserWindowFeatures||b.config.fileBrowserWindowFeatures)}function f(){var a=this.getDialog();a.getParentEditor()._.filebrowserSe=this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).getAction()?!0:!1}function h(d,b,c){var e=c.params||{};e.CKEditor=d.name;e.CKEditorFuncNum=d._.filebrowserFn;e.langCode||(e.langCode=d.langCode);b.action=a(c.url,e);b.filebrowser=c}function m(a,b,g,k){if(k&&k.length)for(var l,p=k.length;p--;)if(l=k[p],"hbox"!=l.type&&"vbox"!=l.type&&"fieldset"!=l.type||m(a,b,g,l.children),l.filebrowser)if("string"==typeof l.filebrowser&&(l.filebrowser={action:"fileButton"==l.type?"QuickUpload":"Browse",target:l.filebrowser}),"Browse"==l.filebrowser.action){var w=l.filebrowser.url;void 0===w&&(w=a.config["filebrowser"+e(b)+"BrowseUrl"],void 0===w&&(w=a.config.filebrowserBrowseUrl));w&&(l.onClick=c,l.filebrowser.url=w,l.hidden=!1)}else if("QuickUpload"==l.filebrowser.action&&l["for"]&&(w=l.filebrowser.url,void 0===w&&(w=a.config["filebrowser"+e(b)+"UploadUrl"],void 0===w&&(w=a.config.filebrowserUploadUrl)),w)){var u=l.onClick;l.onClick=function(a){var b=a.sender;if(u&&!1===u.call(b,a))return!1;if(f.call(b,a)){a=b.getDialog().getContentElement(this["for"][0],this["for"][1]).getInputElement();if(b=new CKEDITOR.dom.element(a.$.form))(a=b.$.elements.ckCsrfToken)?a=new CKEDITOR.dom.element(a):(a=new CKEDITOR.dom.element("input"),a.setAttributes({name:"ckCsrfToken",type:"hidden"}),b.append(a)),a.setAttribute("value",CKEDITOR.tools.getCsrfToken());return!0}return!1};l.filebrowser.url=w;l.hidden=!1;h(a,g.getContents(l["for"][0]).get(l["for"][1]),l.filebrowser)}}function l(a,b,c){if(-1!==c.indexOf(";")){c=c.split(";");for(var e=0;e<c.length;e++)if(l(a,b,c[e]))return!0;return!1}return(a=a.getContents(b).get(c).filebrowser)&&a.url}function k(a,b){var c=this._.filebrowserSe.getDialog(),e=this._.filebrowserSe["for"],f=this._.filebrowserSe.filebrowser.onSelect;e&&c.getContentElement(e[0],e[1]).reset();if("function"!=typeof b||!1!==b.call(this._.filebrowserSe))if(!f||!1!==f.call(this._.filebrowserSe,a,b))if("string"==typeof b&&b&&alert(b),a&&(e=this._.filebrowserSe,c=e.getDialog(),e=e.filebrowser.target||null))if(e=e.split(":"),f=c.getContentElement(e[0],e[1]))f.setValue(a),c.selectPage(e[0])}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(a){a._.filebrowserFn=CKEDITOR.tools.addFunction(k,a);a.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(a){if(a.editor.plugins.filebrowser)for(var b=a.data.definition,c,e=0;e<b.contents.length;++e)if(c=b.contents[e])m(a.editor,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!l(b,c.id,c.filebrowser))})}(),CKEDITOR.plugins.add("find",{requires:"dialog",init:function(a){var e=a.addCommand("find",new CKEDITOR.dialogCommand("find"));e.canUndo=!1;e.readOnly=1;a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;a.ui.addButton&&(a.ui.addButton("Find",{label:a.lang.find.find,command:"find",toolbar:"find,10"}),a.ui.addButton("Replace",{label:a.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}}),CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function a(a,c){var e=f.exec(a),d=f.exec(c);if(e){if(!e[2]&&"px"==d[2])return d[1];if("px"==e[2]&&!d[2])return d[1]+"px"}return c}var e=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,f=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,h={elements:{$:function(c){var f=c.attributes;if((f=(f=(f=f&&f["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(f)))&&f.children[0])&&c.attributes["data-cke-resizable"]){var h=(new e(c)).rules;c=f.attributes;var d=h.width,h=h.height;d&&(c.width=a(c.width,d));h&&(c.height=a(c.height,h))}return f}}};CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(h,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(a,f,h,d){var b=this.lang.fakeobjects,b=b[h]||b.unknown;f={"class":f,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:b,title:b,align:a.getAttribute("align")||""};CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData);h&&(f["data-cke-real-element-type"]=h);d&&(f["data-cke-resizable"]=d,h=new e,d=a.getAttribute("width"),a=a.getAttribute("height"),d&&(h.rules.width=c(d)),a&&(h.rules.height=c(a)),h.populate(f));return this.document.createElement("img",{attributes:f})};CKEDITOR.editor.prototype.createFakeParserElement=function(a,f,h,d){var b=this.lang.fakeobjects,b=b[h]||b.unknown,g;g=new CKEDITOR.htmlParser.basicWriter;a.writeHtml(g);g=g.getHtml();f={"class":f,"data-cke-realelement":encodeURIComponent(g),"data-cke-real-node-type":a.type,alt:b,title:b,align:a.attributes.align||""};CKEDITOR.env.hc||(f.src=CKEDITOR.tools.transparentImageData);h&&(f["data-cke-real-element-type"]=h);d&&(f["data-cke-resizable"]=d,d=a.attributes,a=new e,h=d.width,d=d.height,void 0!==h&&(a.rules.width=c(h)),void 0!==d&&(a.rules.height=c(d)),a.populate(f));return new CKEDITOR.htmlParser.element("img",f)};CKEDITOR.editor.prototype.restoreRealElement=function(c){if(c.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var e=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(c.data("cke-realelement")),this.document);if(c.data("cke-resizable")){var f=c.getStyle("width");c=c.getStyle("height");f&&e.setAttribute("width",a(e.getAttribute("width"),f));c&&e.setAttribute("height",a(e.getAttribute("height"),c))}return e}}(),function(){function a(a){a=a.attributes;return"application/x-shockwave-flash"==a.type||c.test(a.src||"")}function e(a,c){return a.createFakeParserElement(c,"cke_flash","flash",!0)}var c=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var c="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(a,"flash","properties")&&(c+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(a,"flash","advanced")&&(c+=";object[id]{*}; embed[bgcolor]{*}(*)");a.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:c,requiredContent:"embed"}));a.ui.addButton&&a.ui.addButton("Flash",{label:a.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");a.addMenuItems&&a.addMenuItems({flash:{label:a.lang.flash.properties,command:"flash",group:"flash"}});a.on("doubleclick",function(a){var c=a.data.element;c.is("img")&&"flash"==c.data("cke-real-element-type")&&(a.data.dialog="flash")});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&!a.isReadOnly()&&"flash"==a.data("cke-real-element-type"))return{flash:CKEDITOR.TRISTATE_OFF}})},afterInit:function(c){var h=c.dataProcessor;(h=h&&h.dataFilter)&&h.addRules({elements:{"cke:object":function(h){var l=h.attributes;if(!(l.classid&&String(l.classid).toLowerCase()||a(h))){for(l=0;l<h.children.length;l++)if("cke:embed"==h.children[l].name){if(!a(h.children[l]))break;return e(c,h)}return null}return e(c,h)},"cke:embed":function(h){return a(h)?e(c,h):null}}},5)}})}(),CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function a(a){var h=a.config,m=a.fire("uiSpace",{space:"top",html:""}).html,l=function(){function b(a,e,f){d.setStyle(e,c(f));d.setStyle("position",a)}function g(a){var d=m.getDocumentPosition();switch(a){case"top":b("absolute","top",d.y-x-y);break;case"pin":b("fixed","top",B);break;case"bottom":b("absolute","top",d.y+(t.height||t.bottom-t.top)+y)}k=a}var k,m,u,t,v,x,A,r=h.floatSpaceDockedOffsetX||0,y=h.floatSpaceDockedOffsetY||0,D=h.floatSpacePinnedOffsetX||0,B=h.floatSpacePinnedOffsetY||0;return function(b){if(m=a.editable()){var n=b&&"focus"==b.name;n&&d.show();a.fire("floatingSpaceLayout",{show:n});d.removeStyle("left");d.removeStyle("right");u=d.getClientRect();t=m.getClientRect();v=e.getViewPaneSize();x=u.height;A="pageXOffset"in e.$?e.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft;k?(x+y<=t.top?g("top"):x+y>v.height-t.bottom?g("pin"):g("bottom"),b=v.width/2,b=h.floatSpacePreferRight?"right":0<t.left&&t.right<v.width&&t.width>u.width?"rtl"==h.contentsLangDirection?"right":"left":b-t.left>t.right-b?"left":"right",u.width>v.width?(b="left",n=0):(n="left"==b?0<t.left?t.left:0:t.right<v.width?v.width-t.right:0,n+u.width>v.width&&(b="left"==b?"right":"left",n=0)),d.setStyle(b,c(("pin"==k?D:r)+n+("pin"==k?0:"left"==b?A:-A)))):(k="pin",g("pin"),l(b))}}}();if(m){var k=new CKEDITOR.template('\x3cdiv id\x3d"cke_{name}" class\x3d"cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir\x3d"{langDir}" title\x3d"'+(CKEDITOR.env.gecko?" ":"")+'" lang\x3d"{langCode}" role\x3d"application" style\x3d"{style}"'+(a.title?' aria-labelledby\x3d"cke_{name}_arialbl"':" ")+"\x3e"+(a.title?'\x3cspan id\x3d"cke_{name}_arialbl" class\x3d"cke_voice_label"\x3e{voiceLabel}\x3c/span\x3e':" ")+'\x3cdiv class\x3d"cke_inner"\x3e\x3cdiv id\x3d"{topId}" class\x3d"cke_top" role\x3d"presentation"\x3e{content}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),d=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(k.output({content:m,id:a.id,langDir:a.lang.dir,langCode:a.langCode,name:a.name,style:"display:none;z-index:"+(h.baseFloatZIndex-1),topId:a.ui.spaceId("top"),voiceLabel:a.title}))),b=CKEDITOR.tools.eventsBuffer(500,l),g=CKEDITOR.tools.eventsBuffer(100,l);d.unselectable();d.on("mousedown",function(a){a=a.data;a.getTarget().hasAscendant("a",1)||a.preventDefault()});a.on("focus",function(d){l(d);a.on("change",b.input);e.on("scroll",g.input);e.on("resize",g.input)});a.on("blur",function(){d.hide();a.removeListener("change",b.input);e.removeListener("scroll",g.input);e.removeListener("resize",g.input)});a.on("destroy",function(){e.removeListener("scroll",g.input);e.removeListener("resize",g.input);d.clearCustomData();d.remove()});a.focusManager.hasFocus&&d.show();a.focusManager.add(d,1)}}var e=CKEDITOR.document.getWindow(),c=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(c){c.on("loaded",function(){a(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'\x3cul role\x3d"presentation" class\x3d"cke_panel_list"\x3e{items}\x3c/ul\x3e'),e=CKEDITOR.addTemplate("panel-list-item",'\x3cli id\x3d"{id}" class\x3d"cke_panel_listItem" role\x3dpresentation\x3e\x3ca id\x3d"{id}_option" _cke_focus\x3d1 hidefocus\x3dtrue title\x3d"{title}" href\x3d"javascript:void(\'{val}\')"  {onclick}\x3d"CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role\x3d"option"\x3e{text}\x3c/a\x3e\x3c/li\x3e'),c=CKEDITOR.addTemplate("panel-list-group",'\x3ch1 id\x3d"{id}" class\x3d"cke_panel_grouptitle" role\x3d"presentation" \x3e{label}\x3c/h1\x3e'),f=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,c){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),c))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,c){c=c||{};var e=c.attributes||(c.attributes={});(this.multiSelect=!!c.multiSelect)&&(e["aria-multiselectable"]=!0);!e.role&&(e.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",e.role);e=this.keys;e[40]="next";e[9]="next";e[38]="prev";e[CKEDITOR.SHIFT+9]="prev";e[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(e[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var c=a.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(c);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var c=this.toggle(a);if(this.onClick)this.onClick(a,c)},this));return this._.click}},proto:{add:function(a,c,l){var k=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[a]=k;var d;d=CKEDITOR.tools.htmlEncodeAttr(a).replace(f,"\\'");a={id:k,val:d,onclick:CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(l||a),text:c||a};this._.pendingList.push(e.output(a))},startGroup:function(a){this._.close();var e=CKEDITOR.tools.getNextId();this._.groups[a]=e;this._.pendingHtml.push(c.output({id:e,label:a}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(a){var c=this.isMarked(a);c?this.unmark(a):this.mark(a);return!c},hideGroup:function(a){var c=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),c&&"ul"==c.getName()&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,c=this._.groups,e=this.element.getDocument(),f;for(f in a)e.getById(a[f]).setStyle("display","");for(var d in c)a=e.getById(c[d]),f=a.getNext(),a.setStyle("display",""),f&&"ul"==f.getName()&&f.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var c=this.element.getDocument().getById(a);c.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(c)},markFirstDisplayed:function(){var a=this;this._.markFirstDisplayed(function(){a.multiSelect||a.unmarkAll()})},unmark:function(a){var c=this.element.getDocument();a=this._.items[a];var e=c.getById(a);e.removeClass("cke_selected");c.getById(a+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(e)},unmarkAll:function(){var a=this._.items,c=this.element.getDocument(),e;for(e in a){var f=a[e];c.getById(f).removeClass("cke_selected");c.getById(f+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var c=this.element.getElementsByTag("a"),e,f=-1;if(a)for(e=this.element.getDocument().getById(this._.items[a]).getFirst();a=c.getItem(++f);){if(a.equals(e)){this._.focusIndex=f;break}}else this.element.focus();e&&setTimeout(function(){e.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var a='\x3cspan id\x3d"{id}" class\x3d"cke_combo cke_combo__{name} {cls}" role\x3d"presentation"\x3e\x3cspan id\x3d"{id}_label" class\x3d"cke_combo_label"\x3e{label}\x3c/span\x3e\x3ca class\x3d"cke_combo_button" title\x3d"{title}" tabindex\x3d"-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href\x3d\"javascript:void('{titleJs}')\"")+' hidefocus\x3d"true" role\x3d"button" aria-labelledby\x3d"{id}_label" aria-haspopup\x3d"true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress\x3d"return false;"');CKEDITOR.env.gecko&&(a+=' onblur\x3d"this.style.cssText \x3d this.style.cssText;"');var a=a+(' onkeydown\x3d"return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus\x3d"return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick\x3d"return false;" onmouseup':"onclick")+'\x3d"CKEDITOR.tools.callFunction({clickFn},this);return false;"\x3e\x3cspan id\x3d"{id}_text" class\x3d"cke_combo_text cke_combo_inlinelabel"\x3e{label}\x3c/span\x3e\x3cspan class\x3d"cke_combo_open"\x3e\x3cspan class\x3d"cke_combo_arrow"\x3e'+(CKEDITOR.env.hc?"\x26#9660;":CKEDITOR.env.air?"\x26nbsp;":"")+"\x3c/span\x3e\x3c/span\x3e\x3c/a\x3e\x3c/span\x3e"),e=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{canGroup:!1,title:a.label,modes:{wysiwyg:1},editorFocus:1});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className="cke_combopanel";a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.toolbarRelated=!0;this._={panelDefinition:a,items:{}}},proto:{renderHtml:function(a){var e=[];this.render(a,e);return e.join("")},render:function(a,f){function h(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var b=this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;a.readOnly&&!this.readOnly&&(b=CKEDITOR.TRISTATE_DISABLED);this.setState(b);this.setValue("");b!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var m=CKEDITOR.env,l="cke_"+this.id,k=CKEDITOR.tools.addFunction(function(d){q&&(a.unlockSelection(1),q=0);b.execute(d)},this),d=this,b={id:l,combo:this,focus:function(){CKEDITOR.document.getById(l).getChild(1).focus()},execute:function(b){var e=d._;if(e.state!=CKEDITOR.TRISTATE_DISABLED)if(d.createPanel(a),e.on)e.panel.hide();else{d.commit();var f=d.getValue();f?e.list.mark(f):e.list.unmarkAll();e.panel.showBlock(d.id,new CKEDITOR.dom.element(b),4)}},clickFn:k};a.on("activeFilterChange",h,this);a.on("mode",h,this);a.on("selectionChange",h,this);!this.readOnly&&a.on("readOnly",h,this);var g=CKEDITOR.tools.addFunction(function(a,d){a=new CKEDITOR.dom.event(a);var c=a.getKeystroke();switch(c){case 13:case 32:case 40:CKEDITOR.tools.callFunction(k,d);break;default:b.onkey(b,c)}a.preventDefault()}),n=CKEDITOR.tools.addFunction(function(){b.onfocus&&b.onfocus()}),q=0;b.keyDownFn=g;m={id:l,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:m.gecko&&!m.hc?"":(this.title||"").replace("'",""),keydownFn:g,focusFn:n,clickFn:k};e.output(m,f);if(this.onRender)this.onRender();return b},createPanel:function(a){if(!this._.panel){var e=this._.panelDefinition,h=this._.panelDefinition.block,m=e.parent||CKEDITOR.document.getBody(),l="cke_combopanel__"+this.name,k=new CKEDITOR.ui.floatPanel(a,m,e),e=k.addListBlock(this.id,h),d=this;k.onShow=function(){this.element.addClass(l);d.setState(CKEDITOR.TRISTATE_ON);d._.on=1;d.editorFocus&&!a.focusManager.hasFocus&&a.focus();if(d.onOpen)d.onOpen()};k.onHide=function(b){this.element.removeClass(l);d.setState(d.modes&&d.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);d._.on=0;if(!b&&d.onClose)d.onClose()};k.onEscape=function(){k.hide(1)};e.onClick=function(a,c){d.onClick&&d.onClick.call(d,a,c);k.hide()};this._.panel=k;this._.list=e;k.getBlock(this.id).onHide=function(){d._.on=0;d.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(a,e){this._.value=a;var h=this.document.getById("cke_"+this.id+"_text");h&&(a||e?h.removeClass("cke_combo_inlinelabel"):(e=this.label,h.addClass("cke_combo_inlinelabel")),h.setText("undefined"!=typeof e?e:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,e,h){this._.items[a]=h||a;this._.list.add(a,e,h)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(a){if(this._.state!=a){var e=this.document.getById("cke_"+this.id);e.setState(a,"cke_combo");a==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled");this._.state=a}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,e){this.add(a,CKEDITOR.UI_RICHCOMBO,e)}}(),function(){function a(a,f,h,m,l,k,d,b){var g=a.config,n=new CKEDITOR.style(d),q=l.split(";");l=[];for(var p={},w=0;w<q.length;w++){var u=q[w];if(u){var u=u.split("/"),t={},v=q[w]=u[0];t[h]=l[w]=u[1]||v;p[v]=new CKEDITOR.style(d,t);p[v]._.definition.name=v}else q.splice(w--,1)}a.ui.addRichCombo(f,{label:m.label,title:m.panelTitle,toolbar:"styles,"+b,allowedContent:n,requiredContent:n,contentTransformations:[[{element:"font",check:"span",left:function(a){return!!a.attributes.size||!!a.attributes.align||!!a.attributes.face},right:function(a){var b=" x-small small medium large x-large xx-large 48px".split(" ");a.name="span";a.attributes.size&&(a.styles["font-size"]=b[a.attributes.size],delete a.attributes.size);a.attributes.align&&(a.styles["text-align"]=a.attributes.align,delete a.attributes.align);a.attributes.face&&(a.styles["font-family"]=a.attributes.face,delete a.attributes.face)}}]],panel:{css:[CKEDITOR.skin.getPath("editor")].concat(g.contentsCss),multiSelect:!1,attributes:{"aria-label":m.panelTitle}},init:function(){this.startGroup(m.panelTitle);for(var a=0;a<q.length;a++){var b=q[a];this.add(b,p[b].buildPreview(),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");var d=this.getValue(),f=p[b];if(d&&b!=d){var g=p[d],h=a.getSelection().getRanges()[0];if(h.collapsed){var k=a.elementPath(),l=k.contains(function(a){return g.checkElementRemovable(a)});if(l){var m=h.checkBoundaryOfElement(l,CKEDITOR.START),v=h.checkBoundaryOfElement(l,CKEDITOR.END);if(m&&v){for(m=h.createBookmark();k=l.getFirst();)k.insertBefore(l);l.remove();h.moveToBookmark(m)}else m||v?h.moveToPosition(l,m?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_END):(h.splitElement(l),h.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)),e(h,k.elements.slice(),l);a.getSelection().selectRanges([h])}}else a.removeStyle(g)}a[d==b?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(b){var d=this.getValue();b=b.data.path.elements;for(var e=0,f;e<b.length;e++){f=b[e];for(var g in p)if(p[g].checkElementMatch(f,!0,a)){g!=d&&this.setValue(g);return}}this.setValue("",k)},this)},refresh:function(){a.activeFilter.check(n)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}function e(a,f,h){var m=f.pop();if(m){if(h)return e(a,f,m.equals(h)?null:h);h=m.clone();a.insertNode(h);a.moveToPosition(h,CKEDITOR.POSITION_AFTER_START);e(a,f)}}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(c){var e=c.config;a(c,"Font","family",c.lang.font,e.font_names,e.font_defaultLabel,e.font_style,30);a(c,"FontSize","size",c.lang.font.fontSize,e.fontSize_sizes,e.fontSize_defaultLabel,e.fontSize_style,40)}})}(),CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",CKEDITOR.config.font_defaultLabel="",CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",CKEDITOR.config.fontSize_defaultLabel="",CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(a){if(!a.blockless){for(var e=a.config,c=a.lang.format,f=e.format_tags.split(";"),h={},m=0,l=[],k=0;k<f.length;k++){var d=f[k],b=new CKEDITOR.style(e["format_"+d]);if(!a.filter.customConfig||a.filter.check(b))m++,h[d]=b,h[d]._.enterMode=a.config.enterMode,l.push(b)}0!==m&&a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);for(var a in h){var b=c["tag_"+a];this.add(a,h[a].buildPreview(b),b)}},onClick:function(b){a.focus();a.fire("saveSnapshot");b=h[b];var d=a.elementPath();a[b.checkActive(d,a)?"removeStyle":"applyStyle"](b);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(b){var d=this.getValue();b=b.data.path;this.refresh();for(var c in h)if(h[c].checkActive(b,a)){c!=d&&this.setValue(c,a.lang.format["tag_"+c]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var b in h)a.activeFilter.check(h[b])||this.hideItem(b)},refresh:function(){var b=a.elementPath();if(b){if(b.isContextFor("p"))for(var d in h)if(a.activeFilter.check(h[d]))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(a){var e=a.lang,c=0,f={email:1,password:1,search:1,tel:1,text:1,url:1},h={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},m={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},l=function(b,d,f){var k={allowedContent:h[d],requiredContent:m[d]};"form"==d&&(k.context="form");a.addCommand(d,new CKEDITOR.dialogCommand(d,k));a.ui.addButton&&a.ui.addButton(b,{label:e.common[b.charAt(0).toLowerCase()+b.slice(1)],command:d,toolbar:"forms,"+(c+=10)});CKEDITOR.dialog.add(d,f)},k=this.path+"dialogs/";!a.blockless&&l("Form","form",k+"form.js");l("Checkbox","checkbox",k+"checkbox.js");l("Radio","radio",k+"radio.js");l("TextField","textfield",k+"textfield.js");l("Textarea","textarea",k+"textarea.js");l("Select","select",k+"select.js");l("Button","button",k+"button.js");var d=a.plugins.image;d&&!a.plugins.image2&&l("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");l("HiddenField","hiddenfield",k+"hiddenfield.js");a.addMenuItems&&(l={checkbox:{label:e.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:e.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:e.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:e.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:e.forms.button.title,command:"button",group:"button"},select:{label:e.forms.select.title,command:"select",group:"select"},textarea:{label:e.forms.textarea.title,command:"textarea",group:"textarea"}},d&&(l.imagebutton={label:e.image.titleButton,command:"imagebutton",group:"imagebutton"}),!a.blockless&&(l.form={label:e.forms.form.menu,command:"form",group:"form"}),a.addMenuItems(l));a.contextMenu&&(!a.blockless&&a.contextMenu.addListener(function(a,d,c){if((a=c.contains("form",1))&&!a.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),a.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var c=a.getName();if("select"==c)return{select:CKEDITOR.TRISTATE_OFF};if("textarea"==c)return{textarea:CKEDITOR.TRISTATE_OFF};if("input"==c){var e=a.getAttribute("type")||"text";switch(e){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return d?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(f[e])return{textfield:CKEDITOR.TRISTATE_OFF}}if("img"==c&&"hiddenfield"==a.data("cke-real-element-type"))return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}));a.on("doubleclick",function(b){var d=b.data.element;if(!a.blockless&&d.is("form"))b.data.dialog="form";else if(d.is("select"))b.data.dialog="select";else if(d.is("textarea"))b.data.dialog="textarea";else if(d.is("img")&&"hiddenfield"==d.data("cke-real-element-type"))b.data.dialog="hiddenfield";else if(d.is("input")){d=d.getAttribute("type")||"text";switch(d){case"button":case"submit":case"reset":b.data.dialog="button";break;case"checkbox":b.data.dialog="checkbox";break;case"radio":b.data.dialog="radio";break;case"image":b.data.dialog="imagebutton"}f[d]&&(b.data.dialog="textfield")}})},afterInit:function(a){var e=a.dataProcessor,c=e&&e.htmlFilter,e=e&&e.dataFilter;CKEDITOR.env.ie&&c&&c.addRules({elements:{input:function(a){a=a.attributes;var c=a.type;c||(a.type="text");"checkbox"!=c&&"radio"!=c||"on"!=a.value||delete a.value}}},{applyToAll:!0});e&&e.addRules({elements:{input:function(c){if("hidden"==c.attributes.type)return a.createFakeParserElement(c,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),function(){var a={canUndo:!1,exec:function(a){var c=a.document.createElement("hr");a.insertElement(c)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",a),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(a){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=a.config.forceSimpleAmpersand;e.indentationChars=a.config.dataIndentationChars||"\t";a.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" /\x3e";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var a=CKEDITOR.dtd,e;for(e in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(e,{indent:!a[e]["#"],breakBeforeOpen:1,breakBeforeClose:!a[e]["#"],breakAfterClose:1,needsSpace:e in
a.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(a){var e=this._.rules[a];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n");this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("\x3c",a);this._.afterCloser=0},openTagClose:function(a,e){var c=this._.rules[a];e?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push("\x3e"),c&&c.indent&&(this._.indentation+=this.indentationChars));c&&c.breakAfterOpen&&this.lineBreak();"pre"==a&&(this._.inPre=1)},attribute:function(a,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"\x26")),e=CKEDITOR.tools.htmlEncodeAttr(e));this._.output.push(" ",a,'\x3d"',e,'"')},closeTag:function(a){var e=this._.rules[a];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("\x3c/",a,"\x3e");"pre"==a&&(this._.inPre=0);e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace);this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a)));this._.output.push(a)},comment:function(a){this._.indent&&this.indentation();this._.output.push("\x3c!--",a,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0;this._.needsSpace=0},setRules:function(a,e){var c=this._.rules[a];c?CKEDITOR.tools.extend(c,e,!0):this._.rules[a]=e}}}),function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(a){var e=a.lang.iframe,c="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";a.plugins.dialogadvtab&&(c+=";iframe"+a.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:c,requiredContent:"iframe"}));a.ui.addButton&&a.ui.addButton("Iframe",{label:e.toolbar,command:"iframe",toolbar:"insert,80"});a.on("doubleclick",function(a){var c=a.data.element;c.is("img")&&"iframe"==c.data("cke-real-element-type")&&(a.data.dialog="iframe")});a.addMenuItems&&a.addMenuItems({iframe:{label:e.title,command:"iframe",group:"image"}});a.contextMenu&&a.contextMenu.addListener(function(a){if(a&&a.is("img")&&"iframe"==a.data("cke-real-element-type"))return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var e=a.dataProcessor;(e=e&&e.dataFilter)&&e.addRules({elements:{iframe:function(c){return a.createFakeParserElement(c,"cke_iframe","iframe",!0)}}})}})}(),function(){function a(a,h){var m,l;h.on("refresh",function(a){var d=[e],b;for(b in a.data.states)d.push(a.data.states[b]);this.setState(CKEDITOR.tools.search(d,c)?c:e)},h,null,100);h.on("exec",function(c){m=a.getSelection();l=m.createBookmarks(1);c.data||(c.data={});c.data.done=!1},h,null,0);h.on("exec",function(){a.forceNextSelectionCheck();m.selectBookmarks(l)},h,null,100)}var e=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(c){var e=CKEDITOR.plugins.indent.genericDefinition;a(c,c.addCommand("indent",new e(!0)));a(c,c.addCommand("outdent",new e));c.ui.addButton&&(c.ui.addButton("Indent",{label:c.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),c.ui.addButton("Outdent",{label:c.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));c.on("dirChanged",function(a){var e=c.createRange(),h=a.data.node;e.setStartBefore(h);e.setEndAfter(h);for(var d=new CKEDITOR.dom.walker(e),b;b=d.next();)if(b.type==CKEDITOR.NODE_ELEMENT)if(!b.equals(h)&&b.getDirection())e.setStartAfter(b),d=new CKEDITOR.dom.walker(e);else{var g=c.config.indentClasses;if(g)for(var n="ltr"==a.data.dir?["_rtl",""]:["","_rtl"],q=0;q<g.length;q++)b.hasClass(g[q]+n[0])&&(b.removeClass(g[q]+n[0]),b.addClass(g[q]+n[1]));g=b.getStyle("margin-right");n=b.getStyle("margin-left");g?b.setStyle("margin-left",g):b.removeStyle("margin-left");n?b.setStyle("margin-right",n):b.removeStyle("margin-right")}})}});CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a;this.startDisabled=!this.isIndent},specificDefinition:function(a,c,e){this.name=c;this.editor=a;this.jobs={};this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!e;this.relatedGlobal=e?"indent":"outdent";this.indentKey=e?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(a,c){a.on("pluginsLoaded",function(){for(var a in c)(function(a,c){var d=a.getCommand(c.relatedGlobal),b;for(b in c.jobs)d.on("exec",function(d){d.data.done||(a.fire("lockSnapshot"),c.execJob(a,b)&&(d.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(c.database))},this,null,b),d.on("refresh",function(d){d.data.states||(d.data.states={});d.data.states[c.name+"@"+b]=c.refreshJob(a,b,d.data.path)},this,null,b);a.addFeature(c)})(this,c[a])})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,c){var m=this.jobs[c];if(m.state!=e)return m.exec.call(this,a)},refreshJob:function(a,c,m){c=this.jobs[c];a.activeFilter.checkFeature(this)?c.state=c.refresh.call(this,a,m):c.state=e;return c.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function a(a){function d(d){for(var e=m.startContainer,l=m.endContainer;e&&!e.getParent().equals(d);)e=e.getParent();for(;l&&!l.getParent().equals(d);)l=l.getParent();if(!e||!l)return!1;for(var u=e,e=[],r=!1;!r;)u.equals(l)&&(r=!0),e.push(u),u=u.getNext();if(1>e.length)return!1;u=d.getParents(!0);for(l=0;l<u.length;l++)if(u[l].getName&&h[u[l].getName()]){d=u[l];break}for(var u=b.isIndent?1:-1,l=e[0],e=e[e.length-1],r=CKEDITOR.plugins.list.listToArray(d,f),y=r[e.getCustomData("listarray_index")].indent,l=l.getCustomData("listarray_index");l<=e.getCustomData("listarray_index");l++)if(r[l].indent+=u,0<u){var q=r[l].parent;r[l].parent=new CKEDITOR.dom.element(q.getName(),q.getDocument())}for(l=e.getCustomData("listarray_index")+1;l<r.length&&r[l].indent>y;l++)r[l].indent+=u;e=CKEDITOR.plugins.list.arrayToList(r,f,null,a.config.enterMode,d.getDirection());if(!b.isIndent){var w;if((w=d.getParent())&&w.is("li"))for(var u=e.listNode.getChildren(),z=[],C,l=u.count()-1;0<=l;l--)(C=u.getItem(l))&&C.is&&C.is("li")&&z.push(C)}e&&e.listNode.replace(d);if(z&&z.length)for(l=0;l<z.length;l++){for(C=d=z[l];(C=C.getNext())&&C.is&&C.getName()in h;)CKEDITOR.env.needsNbspFiller&&!d.getFirst(c)&&d.append(m.document.createText("")),d.append(C);d.insertAfter(w)}e&&a.fire("contentDomInvalidated");return!0}for(var b=this,f=this.database,h=this.context,l=a.getSelection(),l=(l&&l.getRanges()).createIterator(),m;m=l.getNextRange();){for(var w=m.getCommonAncestor();w&&(w.type!=CKEDITOR.NODE_ELEMENT||!h[w.getName()]);){if(a.editable().equals(w)){w=!1;break}w=w.getParent()}w||(w=m.startPath().contains(h))&&m.setEndAt(w,CKEDITOR.POSITION_BEFORE_END);if(!w){var u=m.getEnclosedNode();u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in h&&(m.setStartAt(u,CKEDITOR.POSITION_AFTER_START),m.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),w=u)}w&&m.startContainer.type==CKEDITOR.NODE_ELEMENT&&m.startContainer.getName()in h&&(u=new CKEDITOR.dom.walker(m),u.evaluator=e,m.startContainer=u.next());w&&m.endContainer.type==CKEDITOR.NODE_ELEMENT&&m.endContainer.getName()in
h&&(u=new CKEDITOR.dom.walker(m),u.evaluator=e,m.endContainer=u.previous());if(w)return d(w)}return 0}function e(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function c(a){return f(a)&&h(a)}var f=CKEDITOR.dom.walker.whitespaces(!0),h=CKEDITOR.dom.walker.bookmark(!1,!0),m=CKEDITOR.TRISTATE_DISABLED,l=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(c){function d(d){b.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];d.on("key",function(a){if("wysiwyg"==d.mode&&a.data.keyCode==this.indentKey){var b=this.getContext(d.elementPath());!b||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,d.elementPath(),b)||(d.execCommand(this.relatedGlobal),a.cancel())}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var d=this.getContext(b),c=CKEDITOR.plugins.indentList.firstItemInPath(this.context,b,d);return d&&this.isIndent&&!c?l:m}:function(a,b){return!this.getContext(b)||this.isIndent?m:l},exec:CKEDITOR.tools.bind(a,this)}}var b=CKEDITOR.plugins.indent;b.registerCommands(c,{indentlist:new d(c,"indentlist",!0),outdentlist:new d(c,"outdentlist")});CKEDITOR.tools.extend(d.prototype,b.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.indentList={};CKEDITOR.plugins.indentList.firstItemInPath=function(a,d,b){var c=d.contains(e);b||(b=d.contains(a));return b&&c&&c.equals(b.getFirst(e))}}(),function(){function a(a,c,d){if(!a.getCustomData("indent_processed")){var b=this.editor,f=this.isIndent;if(c){b=a.$.className.match(this.classNameRegex);d=0;b&&(b=b[1],d=CKEDITOR.tools.indexOf(c,b)+1);if(0>(d+=f?1:-1))return;d=Math.min(d,c.length);d=Math.max(d,0);a.$.className=CKEDITOR.tools.ltrim(a.$.className.replace(this.classNameRegex,""));0<d&&a.addClass(c[d-1])}else{c=e(a,d);d=parseInt(a.getStyle(c),10);var h=b.config.indentOffset||40;isNaN(d)&&(d=0);d+=(f?1:-1)*h;if(0>d)return;d=Math.max(d,0);d=Math.ceil(d/h)*h;a.setStyle(c,d?d+(b.config.indentUnit||"px"):"");""===a.getAttribute("style")&&a.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,a,"indent_processed",1)}}function e(a,c){return"ltr"==(c||a.getComputedStyle("direction"))?"margin-left":"margin-right"}var c=CKEDITOR.dtd.$listItem,f=CKEDITOR.dtd.$list,h=CKEDITOR.TRISTATE_DISABLED,m=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(l){function k(){d.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:b?null:"margin-left,margin-right",classes:b||null}};this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]];this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(b?"("+b.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(a,d){var f=d.block||d.blockLimit;if(!f.is(c))var k=f.getAscendant(c),f=k&&d.contains(k)||f;f.is(c)&&(f=f.getParent());if(this.enterBr||this.getContext(d)){if(b){var k=b,f=f.$.className.match(this.classNameRegex),l=this.isIndent,k=f?l?f[1]!=k.slice(-1):!0:l;return k?m:h}return this.isIndent?m:f?CKEDITOR[0>=(parseInt(f.getStyle(e(f)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:h}return h},exec:function(d){var c=d.getSelection(),c=c&&c.getRanges()[0],e;if(e=d.elementPath().contains(f))a.call(this,e,b);else for(c=c.createIterator(),d=d.config.enterMode,c.enforceRealBlocks=!0,c.enlargeBr=d!=CKEDITOR.ENTER_BR;e=c.getNextParagraph(d==CKEDITOR.ENTER_P?"p":"div");)e.isReadOnly()||a.call(this,e,b);return!0}}}}var d=CKEDITOR.plugins.indent,b=l.config.indentClasses;d.registerCommands(l,{indentblock:new k(l,"indentblock",!0),outdentblock:new k(l,"outdentblock")});CKEDITOR.tools.extend(k.prototype,d.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:b?new RegExp("(?:^|\\s+)("+b.join("|")+")(?\x3d$|\\s)"):null})}})}(),function(){function a(a,c){c=void 0===c||c;var e;if(c)e=a.getComputedStyle("text-align");else{for(;!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align");){e=a.getParent();if(!e)break;a=e}e=a.getStyle("text-align")||a.getAttribute("align")||""}e&&(e=e.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!e&&c&&(e="rtl"==a.getComputedStyle("direction")?"right":"left");return e}function e(a,c,e){this.editor=a;this.name=c;this.value=e;this.context="p";c=a.config.justifyClasses;var l=a.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(c){switch(e){case"left":this.cssClassName=c[0];break;case"center":this.cssClassName=c[1];break;case"right":this.cssClassName=c[2];break;case"justify":this.cssClassName=c[3]}this.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+c.join("|")+")(?\x3d$|\\s)");this.requiredContent=l+"("+this.cssClassName+")"}else this.requiredContent=l+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function c(a){var c=a.editor,e=c.createRange();e.setStartBefore(a.data.node);e.setEndAfter(a.data.node);for(var l=new CKEDITOR.dom.walker(e),k;k=l.next();)if(k.type==CKEDITOR.NODE_ELEMENT)if(!k.equals(a.data.node)&&k.getDirection())e.setStartAfter(k),l=new CKEDITOR.dom.walker(e);else{var d=c.config.justifyClasses;d&&(k.hasClass(d[0])?(k.removeClass(d[0]),k.addClass(d[2])):k.hasClass(d[2])&&(k.removeClass(d[2]),k.addClass(d[0])));d=k.getStyle("text-align");"left"==d?k.setStyle("text-align","right"):"right"==d&&k.setStyle("text-align","left")}}e.prototype={exec:function(c){var e=c.getSelection(),m=c.config.enterMode;if(e){for(var l=e.createBookmarks(),k=e.getRanges(),d=this.cssClassName,b,g,n=c.config.useComputedState,n=void 0===n||n,q=k.length-1;0<=q;q--)for(b=k[q].createIterator(),b.enlargeBr=m!=CKEDITOR.ENTER_BR;g=b.getNextParagraph(m==CKEDITOR.ENTER_P?"p":"div");)if(!g.isReadOnly()){g.removeAttribute("align");g.removeStyle("text-align");var p=d&&(g.$.className=CKEDITOR.tools.ltrim(g.$.className.replace(this.cssClassRegex,""))),w=this.state==CKEDITOR.TRISTATE_OFF&&(!n||a(g,!0)!=this.value);d?w?g.addClass(d):p||g.removeAttribute("class"):w&&g.setStyle("text-align",this.value)}c.focus();c.forceNextSelectionCheck();e.selectBookmarks(l)}},refresh:function(c,e){var m=e.block||e.blockLimit;this.setState("body"!=m.getName()&&a(m,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var h=new e(a,"justifyleft","left"),m=new e(a,"justifycenter","center"),l=new e(a,"justifyright","right"),k=new e(a,"justifyblock","justify");a.addCommand("justifyleft",h);a.addCommand("justifycenter",m);a.addCommand("justifyright",l);a.addCommand("justifyblock",k);a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));a.on("dirChanged",c)}}})}(),"use strict",function(){function a(a){return a.replace(/'/g,"\\$\x26")}
function e(a){for(var b,d=a.length,c=[],e=0;e<d;e++)b=a.charCodeAt(e),c.push(b);return"String.fromCharCode("+c.join(",")+")"}function c(b,d){var c=b.plugins.link,e=c.compiledProtectionFunction.params,f,g;g=[c.compiledProtectionFunction.name,"("];for(var h=0;h<e.length;h++)c=e[h].toLowerCase(),f=d[c],0<h&&g.push(","),g.push("'",f?a(encodeURIComponent(d[c])):"","'");g.push(")");return g.join("")}function f(a){a=a.config.emailProtection||"";var b;a&&"encode"!=a&&(b={},a.replace(/^([^(]+)\(([^)]+)\)$/,function(a,d,c){b.name=d;b.params=[];c.replace(/[^,\s]+/g,function(a){b.params.push(a)})}));return b}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function a(b){return d.replace(/%1/g,"rtl"==b?"right":"left").replace(/%2/g,"cke_contents_"+b)}var b="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",d=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+
b+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+b+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var b="a[!href]";CKEDITOR.dialog.isTabEnabled(a,"link","advanced")&&(b=b.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type,download]{*}(*)"));CKEDITOR.dialog.isTabEnabled(a,"link","target")&&(b=b.replace("]",",target,onclick]"));a.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:b,requiredContent:"a[href]"}));a.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));a.addCommand("unlink",new CKEDITOR.unlinkCommand);a.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);a.setKeystroke(CKEDITOR.CTRL+76,"link");a.ui.addButton&&(a.ui.addButton("Link",{label:a.lang.link.toolbar,command:"link",toolbar:"links,10"}),a.ui.addButton("Unlink",{label:a.lang.link.unlink,command:"unlink",toolbar:"links,20"}),a.ui.addButton("Anchor",{label:a.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");a.on("doubleclick",function(b){var d=CKEDITOR.plugins.link.getSelectedLink(a)||b.data.element.getAscendant("a",1);d&&!d.isReadOnly()&&(d.is("a")?(b.data.dialog=!d.getAttribute("name")||d.getAttribute("href")&&d.getChildCount()?"link":"anchor",b.data.link=d):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,d)&&(b.data.dialog="anchor"))},null,null,0);a.on("doubleclick",function(b){b.data.dialog in{link:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,20);a.addMenuItems&&a.addMenuItems({anchor:{label:a.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:a.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.link.unlink,command:"unlink",group:"link",order:5}});a.contextMenu&&a.contextMenu.addListener(function(b){if(!b||b.isReadOnly())return null;b=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b);if(!b&&!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;var d={};b.getAttribute("href")&&b.getChildCount()&&(d={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});b&&b.hasAttribute("name")&&(d.anchor=d.removeAnchor=CKEDITOR.TRISTATE_OFF);return d});this.compiledProtectionFunction=f(a)},afterInit:function(a){a.dataProcessor.dataFilter.addRules({elements:{a:function(b){return b.attributes.name?b.children.length?null:a.createFakeParserElement(b,"cke_anchor","anchor"):null}}});var b=a._.elementsPath&&a._.elementsPath.filters;b&&b.push(function(b,d){if("a"==d&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,b)||b.getAttribute("name")&&(!b.getAttribute("href")||!b.getChildCount())))return"anchor"})}});var h=/^javascript:/,m=/^mailto:([^?]+)(?:\?(.+))?$/,l=/subject=([^;?:@&=$,\/]*)/i,k=/body=([^;?:@&=$,\/]*)/i,d=/^#(.*)$/,b=/^((?:http|https|ftp|news):\/\/)?(.*)$/,g=/^(_(?:self|top|parent|blank))$/,n=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,q=/^javascript:([^(]+)\(([^)]+)\)$/,p=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,w=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,u={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(a,b){var d=a.getSelection(),c=d.getSelectedElement(),e=d.getRanges(),f=[],g;if(!b&&c&&c.is("a"))return c;for(c=0;c<e.length;c++)if(g=d.getRanges()[c],g.shrink(CKEDITOR.SHRINK_TEXT,!1,{skipBogus:!0}),(g=a.elementPath(g.getCommonAncestor()).contains("a",1))&&b)f.push(g);else if(g)return g;return b?f:null},getEditorAnchors:function(a){for(var b=a.editable(),d=b.isInline()&&!a.plugins.divarea?a.document:b,b=d.getElementsByTag("a"),d=d.getElementsByTag("img"),c=[],e=0,f;f=b.getItem(e++);)(f.data("cke-saved-name")||f.hasAttribute("name"))&&c.push({name:f.data("cke-saved-name")||f.getAttribute("name"),id:f.getAttribute("id")});for(e=0;f=d.getItem(e++);)(f=this.tryRestoreFakeAnchor(a,f))&&c.push({name:f.getAttribute("name"),id:f.getAttribute("id")});return c},fakeAnchor:!0,tryRestoreFakeAnchor:function(a,b){if(b&&b.data("cke-real-element-type")&&"anchor"==b.data("cke-real-element-type")){var d=a.restoreRealElement(b);if(d.data("cke-saved-name"))return d}},parseLinkAttributes:function(a,c){var e=c&&(c.data("cke-saved-href")||c.getAttribute("href"))||"",f=a.plugins.link.compiledProtectionFunction,r=a.config.emailProtection,y,D={};e.match(h)&&("encode"==r?e=e.replace(n,function(a,b,d){d=d||"";return"mailto:"+String.fromCharCode.apply(String,b.split(","))+d.replace(/\\'/g,"'")}):r&&e.replace(q,function(a,b,d){if(b==f.name){D.type="email";a=D.email={};b=/(^')|('$)/g;d=d.match(/[^,\s]+/g);for(var c=d.length,e,g,h=0;h<c;h++)e=decodeURIComponent,g=d[h].replace(b,"").replace(/\\'/g,"'"),g=e(g),e=f.params[h].toLowerCase(),a[e]=g;a.address=[a.name,a.domain].join("@")}}));if(!D.type)if(r=e.match(d))D.type="anchor",D.anchor={},D.anchor.name=D.anchor.id=r[1];else if(r=e.match(m)){y=e.match(l);e=e.match(k);D.type="email";var B=D.email={};B.address=r[1];y&&(B.subject=decodeURIComponent(y[1]));e&&(B.body=decodeURIComponent(e[1]))}else e&&(y=e.match(b))&&(D.type="url",D.url={},D.url.protocol=y[1],D.url.url=y[2]);if(c){if(e=c.getAttribute("target"))D.target={type:e.match(g)?e:"frame",name:e};else if(e=(e=c.data("cke-pa-onclick")||c.getAttribute("onclick"))&&e.match(p))for(D.target={type:"popup",name:e[1]};r=w.exec(e[2]);)"yes"!=r[2]&&"1"!=r[2]||r[1]in{height:1,width:1,top:1,left:1}?isFinite(r[2])&&(D.target[r[1]]=r[2]):D.target[r[1]]=!0;null!==c.getAttribute("download")&&(D.download=!0);var e={},z;for(z in u)(r=c.getAttribute(z))&&(e[u[z]]=r);if(z=c.data("cke-saved-name")||e.advName)e.advName=z;CKEDITOR.tools.isEmpty(e)||(D.advanced=e)}return D},getLinkAttributes:function(b,d){var f=b.config.emailProtection||"",g={};switch(d.type){case"url":var f=d.url&&void 0!==d.url.protocol?d.url.protocol:"http://",h=d.url&&CKEDITOR.tools.trim(d.url.url)||"";g["data-cke-saved-href"]=0===h.indexOf("/")?h:f+h;break;case"anchor":f=d.anchor&&d.anchor.id;g["data-cke-saved-href"]="#"+(d.anchor&&d.anchor.name||f||"");break;case"email":var k=d.email,h=k.address;switch(f){case"":case"encode":var l=encodeURIComponent(k.subject||""),m=encodeURIComponent(k.body||""),k=[];l&&k.push("subject\x3d"+
l);m&&k.push("body\x3d"+m);k=k.length?"?"+k.join("\x26"):"";"encode"==f?(f=["javascript:void(location.href\x3d'mailto:'+",e(h)],k&&f.push("+'",a(k),"'"),f.push(")")):f=["mailto:",h,k];break;default:f=h.split("@",2),k.name=f[0],k.domain=f[1],f=["javascript:",c(b,k)]}g["data-cke-saved-href"]=f.join("")}if(d.target)if("popup"==d.target.type){for(var f=["window.open(this.href, '",d.target.name||"","', '"],n="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),h=n.length,l=function(a){d.target[a]&&n.push(a+"\x3d"+d.target[a])},k=0;k<h;k++)n[k]+=d.target[n[k]]?"\x3dyes":"\x3dno";l("width");l("left");l("height");l("top");f.push(n.join(","),"'); return false;");g["data-cke-pa-onclick"]=f.join("")}else"notSet"!=d.target.type&&d.target.name&&(g.target=d.target.name);d.download&&(g.download="");if(d.advanced){for(var q in u)(f=d.advanced[u[q]])&&(g[q]=f);g.name&&(g["data-cke-saved-name"]=g.name)}g["data-cke-saved-href"]&&(g.href=g["data-cke-saved-href"]);q={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1,download:1};d.advanced&&CKEDITOR.tools.extend(q,u);for(var w in g)delete q[w];return{set:g,removed:CKEDITOR.tools.objectKeys(q)}},showDisplayTextForElement:function(a,b){var d={img:1,table:1,tbody:1,thead:1,tfoot:1,input:1,select:1,textarea:1},c=b.getSelection();return b.widgets&&b.widgets.focused||c&&1<c.getRanges().length?!1:!a||!a.getName||!a.is(d)}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(a){if(CKEDITOR.env.ie){var b=a.getSelection().getRanges()[0],d=b.getPreviousEditableNode()&&b.getPreviousEditableNode().getAscendant("a",!0)||b.getNextEditableNode()&&b.getNextEditableNode().getAscendant("a",!0),c;b.collapsed&&d&&(c=b.createBookmark(),b.selectNodeContents(d),b.select())}d=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});a.removeStyle(d);c&&(b.moveToBookmark(c),b.select())},refresh:function(a,b){var d=b.lastElement&&b.lastElement.getAscendant("a",!0);d&&"a"==d.getName()&&d.getAttribute("href")&&d.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]",editorFocus:1};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(a){var b=a.getSelection(),d=b.createBookmarks(),c;if(b&&(c=b.getSelectedElement())&&(c.getChildCount()?c.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,c)))c.remove(1);else if(c=CKEDITOR.plugins.link.getSelectedLink(a))c.hasAttribute("href")?(c.removeAttributes({name:1,"data-cke-saved-name":1}),c.removeClass("cke_anchor")):c.remove(1);b.selectBookmarks(d)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function a(a,b,d){function c(d){if(!(!(l=k[d?"getFirst":"getLast"]())||l.is&&l.isBlockBoundary()||!(m=b.root[d?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||m.is&&m.isBlockBoundary({br:1})))a.document.createElement("br")[d?"insertBefore":"insertAfter"](l)}
for(var e=CKEDITOR.plugins.list.listToArray(b.root,d),f=[],g=0;g<b.contents.length;g++){var h=b.contents[g];(h=h.getAscendant("li",!0))&&!h.getCustomData("list_item_processed")&&(f.push(h),CKEDITOR.dom.element.setMarker(d,h,"list_item_processed",!0))}h=null;for(g=0;g<f.length;g++)h=f[g].getCustomData("listarray_index"),e[h].indent=-1;for(g=h+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){f=e[g-1].indent+1-e[g].indent;for(h=e[g].indent;e[g]&&e[g].indent>=h;)e[g].indent+=f,g++;g--}var k=CKEDITOR.plugins.list.arrayToList(e,d,null,a.config.enterMode,b.root.getAttribute("dir")).listNode,l,m;c(!0);c();k.replace(b.root);a.fire("contentDomInvalidated")}function e(a,b){this.name=a;this.context=this.type=b;this.allowedContent=b+" li";this.requiredContent=b}function c(a,b,d,c){for(var e,f;e=a[c?"getLast":"getFirst"](p);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),d?e[c?"insertBefore":"insertAfter"](d):b.append(e,c)}function f(a){function b(d){var e=a[d?"getPrevious":"getNext"](g);e&&e.type==CKEDITOR.NODE_ELEMENT&&e.is(a.getName())&&(c(a,e,null,!d),a.remove(),a=e)}b();b(1)}function h(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function m(a,b,d){a.fire("saveSnapshot");d.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var e=d.extractContents();b.trim(!1,!0);var h=b.createBookmark(),k=new CKEDITOR.dom.elementPath(b.startContainer),m=k.block,k=k.lastElement.getAscendant("li",1)||m,y=new CKEDITOR.dom.elementPath(d.startContainer),q=y.contains(CKEDITOR.dtd.$listItem),y=y.contains(CKEDITOR.dtd.$list);m?(m=m.getBogus())&&m.remove():y&&(m=y.getPrevious(g))&&n(m)&&m.remove();(m=e.getLast())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br")&&m.remove();(m=b.startContainer.getChild(b.startOffset))?e.insertBefore(m):b.startContainer.append(e);q&&(e=l(q))&&(k.contains(q)?(c(e,q.getParent(),q),e.remove()):k.append(e));for(;d.checkStartOfBlock()&&d.checkEndOfBlock();){y=d.startPath();e=y.block;if(!e)break;e.is("li")&&(k=e.getParent(),e.equals(k.getLast(g))&&e.equals(k.getFirst(g))&&(e=k));d.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START);e.remove()}d=d.clone();e=a.editable();d.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(d);d.evaluator=function(a){return g(a)&&!n(a)};(d=d.next())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in CKEDITOR.dtd.$list&&f(d);b.moveToBookmark(h);b.select();a.fire("saveSnapshot")}function l(a){return(a=a.getLast(g))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in k?a:null}var k={ol:1,ul:1},d=CKEDITOR.dom.walker.whitespaces(),b=CKEDITOR.dom.walker.bookmark(),g=function(a){return!(d(a)||b(a))},n=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,d,c,e){if(!k[a.getName()])return[];c||(c=0);d||(d=[]);for(var f=0,g=a.getChildCount();f<g;f++){var h=a.getChild(f);h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,b,d,c+1);if("li"==h.$.nodeName.toLowerCase()){var l={parent:a,indent:c,element:h,contents:[]};e?l.grandparent=e:(l.grandparent=a.getParent(),l.grandparent&&"li"==l.grandparent.$.nodeName.toLowerCase()&&(l.grandparent=l.grandparent.getParent()));b&&CKEDITOR.dom.element.setMarker(b,h,"listarray_index",d.length);d.push(l);for(var m=0,n=h.getChildCount(),q;m<n;m++)q=h.getChild(m),q.type==CKEDITOR.NODE_ELEMENT&&k[q.getName()]?CKEDITOR.plugins.list.listToArray(q,b,d,c+1,l.grandparent):l.contents.push(q)}}return d},arrayToList:function(a,d,c,e,f){c||(c=0);if(!a||a.length<c+1)return null;for(var h,l=a[c].parent.getDocument(),m=new CKEDITOR.dom.documentFragment(l),n=null,q=c,z=Math.max(a[c].indent,0),p=null,F,E,H=e==CKEDITOR.ENTER_P?"p":"div";;){var G=a[q];h=G.grandparent;F=G.element.getDirection(1);if(G.indent==z){n&&a[q].parent.getName()==n.getName()||(n=a[q].parent.clone(!1,1),f&&n.setAttribute("dir",f),m.append(n));p=n.append(G.element.clone(0,1));F!=n.getDirection(1)&&p.setAttribute("dir",F);for(h=0;h<G.contents.length;h++)p.append(G.contents[h].clone(1,1));q++}else if(G.indent==Math.max(z,0)+1)G=a[q-1].element.getDirection(1),q=CKEDITOR.plugins.list.arrayToList(a,null,q,e,G!=F?F:null),!p.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=l.$.documentMode&&p.append(l.createText("")),p.append(q.listNode),q=q.nextIndex;else if(-1==G.indent&&!c&&h){k[h.getName()]?(p=G.element.clone(!1,!0),F!=h.getDirection(1)&&p.setAttribute("dir",F)):p=new CKEDITOR.dom.documentFragment(l);var n=h.getDirection(1)!=F,O=G.element,P=O.getAttribute("class"),I=O.getAttribute("style"),T=p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(e!=CKEDITOR.ENTER_BR||n||I||P),Q,R=G.contents.length,M;for(h=0;h<R;h++)if(Q=G.contents[h],b(Q)&&1<R)T?M=Q.clone(1,1):p.append(Q.clone(1,1));else if(Q.type==CKEDITOR.NODE_ELEMENT&&Q.isBlockBoundary()){n&&!Q.getDirection()&&Q.setAttribute("dir",F);E=Q;var U=O.getAttribute("style");U&&E.setAttribute("style",U.replace(/([^;])$/,"$1;")+(E.getAttribute("style")||""));P&&Q.addClass(P);E=null;M&&(p.append(M),M=null);p.append(Q.clone(1,1))}else T?(E||(E=l.createElement(H),p.append(E),n&&E.setAttribute("dir",F)),I&&E.setAttribute("style",I),P&&E.setAttribute("class",P),M&&(E.append(M),M=null),E.append(Q.clone(1,1))):p.append(Q.clone(1,1));M&&((E||p).append(M),M=null);p.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&q!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(F=p.getLast())&&F.type==CKEDITOR.NODE_ELEMENT&&F.is("br")&&F.remove(),(F=p.getLast(g))&&F.type==CKEDITOR.NODE_ELEMENT&&F.is(CKEDITOR.dtd.$block)||p.append(l.createElement("br")));F=p.$.nodeName.toLowerCase();"div"!=F&&"p"!=F||p.appendBogus();m.append(p);n=null;q++}else return null;E=null;if(a.length<=q||Math.max(a[q].indent,0)<z)break}if(d)for(a=m.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(d,a),a.getName()in CKEDITOR.dtd.$listItem&&(c=a,l=f=e=void 0,e=c.getDirection()))){for(f=c.getParent();f&&!(l=f.getDirection());)f=f.getParent();e==l&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:m,nextIndex:q}}};var q=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);e.prototype={exec:function(b){this.refresh(b,b.elementPath());var d=b.config,c=b.getSelection(),e=c&&c.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var h=b.editable();if(h.getFirst(g)){var l=1==e.length&&e[0];(d=l&&l.getEnclosedNode())&&d.is&&this.type==d.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else d.enterMode==CKEDITOR.ENTER_BR?h.appendBogus():e[0].fixBlock(1,d.enterMode==CKEDITOR.ENTER_P?"p":"div"),c.selectRanges(e)}for(var d=c.createBookmarks(!0),h=[],m={},e=e.createIterator(),n=0;(l=e.getNextRange())&&++n;){var p=l.getBoundaryNodes(),B=p.startNode,z=p.endNode;B.type==CKEDITOR.NODE_ELEMENT&&"td"==B.getName()&&l.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START);z.type==CKEDITOR.NODE_ELEMENT&&"td"==z.getName()&&l.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END);l=l.createIterator();for(l.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=l.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(m,p,"list_block",1);for(var C=b.elementPath(p),B=C.elements,z=0,C=C.blockLimit,F,E=B.length-1;0<=E&&(F=B[E]);E--)if(k[F.getName()]&&C.contains(F)){C.removeCustomData("list_group_object_"+
n);(B=F.getCustomData("list_group_object"))?B.contents.push(p):(B={root:F,contents:[p]},h.push(B),CKEDITOR.dom.element.setMarker(m,F,"list_group_object",B));z=1;break}z||(z=C,z.getCustomData("list_group_object_"+n)?z.getCustomData("list_group_object_"+n).contents.push(p):(B={root:z,contents:[p]},CKEDITOR.dom.element.setMarker(m,z,"list_group_object_"+n,B),h.push(B)))}}for(F=[];0<h.length;)if(B=h.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(k[B.root.getName()]){e=b;n=B;B=m;l=F;z=CKEDITOR.plugins.list.listToArray(n.root,B);C=[];for(p=0;p<n.contents.length;p++)E=n.contents[p],(E=E.getAscendant("li",!0))&&!E.getCustomData("list_item_processed")&&(C.push(E),CKEDITOR.dom.element.setMarker(B,E,"list_item_processed",!0));for(var E=n.root.getDocument(),H=void 0,G=void 0,p=0;p<C.length;p++){var O=C[p].getCustomData("listarray_index"),H=z[O].parent;H.is(this.type)||(G=E.createElement(this.type),H.copyAttributes(G,{start:1,type:1}),G.removeStyle("list-style-type"),z[O].parent=G)}B=CKEDITOR.plugins.list.arrayToList(z,B,null,e.config.enterMode);z=void 0;C=B.listNode.getChildCount();for(p=0;p<C&&(z=B.listNode.getChild(p));p++)z.getName()==this.type&&l.push(z);B.listNode.replace(n.root);e.fire("contentDomInvalidated")}else{z=b;l=B;p=F;C=l.contents;e=l.root.getDocument();n=[];1==C.length&&C[0].equals(l.root)&&(B=e.createElement("div"),C[0].moveChildren&&C[0].moveChildren(B),C[0].append(B),C[0]=B);l=l.contents[0].getParent();for(E=0;E<C.length;E++)l=l.getCommonAncestor(C[E].getParent());H=z.config.useComputedState;z=B=void 0;H=void 0===H||H;for(E=0;E<C.length;E++)for(G=C[E];O=G.getParent();){if(O.equals(l)){n.push(G);!z&&G.getDirection()&&(z=1);G=G.getDirection(H);null!==B&&(B=B&&B!=G?null:G);break}G=O}if(!(1>n.length)){C=n[n.length-1].getNext();E=e.createElement(this.type);p.push(E);for(H=p=void 0;n.length;)p=n.shift(),H=e.createElement("li"),G=p,G.is("pre")||q.test(G.getName())||"false"==G.getAttribute("contenteditable")?p.appendTo(H):(p.copyAttributes(H),B&&p.getDirection()&&(H.removeStyle("direction"),H.removeAttribute("dir")),p.moveChildren(H),p.remove()),H.appendTo(E);B&&z&&E.setAttribute("dir",B);C?E.insertBefore(C):E.appendTo(l)}}else this.state==CKEDITOR.TRISTATE_ON&&k[B.root.getName()]&&a.call(this,b,B,m);for(E=0;E<F.length;E++)f(F[E]);CKEDITOR.dom.element.clearAllMarkers(m);c.selectBookmarks(d);b.focus()},refresh:function(a,b){var d=b.contains(k,1),c=b.blockLimit||b.root;d&&c.contains(d)?this.setState(d.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new e("numberedlist","ol")),a.addCommand("bulletedlist",new e("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(b){var d=b.data.domEvent.getKey(),c;if("wysiwyg"==a.mode&&d in{8:1,46:1}){var e=a.getSelection().getRanges()[0],f=e&&e.startPath();if(e&&e.collapsed){var r=8==d,q=a.editable(),p=new CKEDITOR.dom.walker(e.clone());p.evaluator=function(a){return g(a)&&!n(a)};p.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))};d=e.clone();if(r){var B;(B=f.contains(k))&&e.checkBoundaryOfElement(B,CKEDITOR.START)&&(B=B.getParent())&&B.is("li")&&(B=l(B))?(c=B,B=B.getPrevious(g),d.moveToPosition(B&&n(B)?B:c,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(q,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(e.startContainer,e.startOffset),(B=p.previous())&&B.type==CKEDITOR.NODE_ELEMENT&&(B.getName()in k||B.is("li"))&&(B.is("li")||(p.range.selectNodeContents(B),p.reset(),p.evaluator=h,B=p.previous()),c=B,d.moveToElementEditEnd(c),d.moveToPosition(d.endPath().block,CKEDITOR.POSITION_BEFORE_END)));if(c)m(a,d,e),b.cancel();else{var z=f.contains(k);z&&e.checkBoundaryOfElement(z,CKEDITOR.START)&&(c=z.getFirst(g),e.checkBoundaryOfElement(c,CKEDITOR.START)&&(B=z.getPrevious(g),l(c)?B&&(e.moveToElementEditEnd(B),e.select()):a.execCommand("outdent"),b.cancel()))}}else if(c=f.contains("li")){if(p.range.setEndAt(q,CKEDITOR.POSITION_BEFORE_END),r=(q=c.getLast(g))&&h(q)?q:c,f=0,(B=p.next())&&B.type==CKEDITOR.NODE_ELEMENT&&B.getName()in k&&B.equals(q)?(f=1,B=p.next()):e.checkBoundaryOfElement(r,CKEDITOR.END)&&(f=2),f&&B){e=e.clone();e.moveToElementEditStart(B);if(1==f&&(d.optimize(),!d.startContainer.equals(c))){for(c=d.startContainer;c.is(CKEDITOR.dtd.$inline);)z=c,c=c.getParent();z&&d.moveToPosition(z,CKEDITOR.POSITION_AFTER_END)}2==f&&(d.moveToPosition(d.endPath().block,CKEDITOR.POSITION_BEFORE_END),e.endPath().block&&e.moveToPosition(e.endPath().block,CKEDITOR.POSITION_AFTER_START));m(a,d,e);b.cancel()}}else p.range.setEndAt(q,CKEDITOR.POSITION_BEFORE_END),(B=p.next())&&B.type==CKEDITOR.NODE_ELEMENT&&B.is(k)&&(B=B.getFirst(g),f.block&&e.checkStartOfBlock()&&e.checkEndOfBlock()?(f.block.remove(),e.moveToElementEditStart(B),e.select()):l(B)?(e.moveToElementEditStart(B),e.select()):(e=e.clone(),e.moveToElementEditStart(B),m(a,d,e)),b.cancel());setTimeout(function(){a.selectionChange(1)})}}}))}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(a){if(!a.blockless){var e;e=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]; li{list-style-type}[value]",contentTransformations:[["ol: listTypeToStyle"]]});e=a.addCommand("numberedListStyle",e);a.addFeature(e);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");e=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}",contentTransformations:[["ul: listTypeToStyle"]]});e=a.addCommand("bulletedListStyle",e);a.addFeature(e);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");a.addMenuGroup("list",108);a.addMenuItems({numberedlist:{label:a.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:a.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});a.contextMenu.addListener(function(a){if(!a||a.isReadOnly())return null;for(;a;){var e=a.getName();if("ol"==e)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==e)return{bulletedlist:CKEDITOR.TRISTATE_OFF};a=a.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),"use strict",function(){function a(a,b,d){return n(b)&&n(d)&&d.equals(b.getNext(function(a){return!(ba(a)||ca(a)||q(a))}))}function e(a){this.upper=a[0];this.lower=a[1];this.set.apply(this,a.slice(2))}function c(a){var b=a.element;if(b&&n(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var d=l(b);if("true"==d.getAttribute("contenteditable"))return b;if(d.is(a.triggers))return d}return null}function f(a,b,d){r(a,b);r(a,d);a=b.size.bottom;d=d.size.top;return a&&d?0|(a+d)/2:a||d}function h(a,b,d){return b=b[d?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!ba(b)||n(b)&&!q(b)&&!g(a,b)})}function m(a,b,d){return a>b&&a<d}function l(a,b){if(a.data("cke-editable"))return null;for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function k(a){var b=a.doc,c=F('\x3cspan contenteditable\x3d"false" style\x3d"'+V+"position:absolute;border-top:1px dashed "+a.boxColor+'"\x3e\x3c/span\x3e',b),e=CKEDITOR.getUrl(this.path+"images/"+(E.hidpi?"hidpi/":"")+"icon"+(a.rtl?"-rtl":"")+".png");z(c,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(a.editable,!0);return this},lineChildren:[z(F('\x3cspan title\x3d"'+a.editor.lang.magicline.title+'" contenteditable\x3d"false"\x3e\x26#8629;\x3c/span\x3e',b),{base:V+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+e+") center no-repeat "+a.boxColor+";cursor:pointer;"+(E.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(E.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),z(F(aa,b),{base:S+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),z(F(aa,b),{base:S+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){r(a,this);var b=a.holdDistance,d=this.size;return d&&m(a.mouse.y,d.top-b,d.bottom+b)&&m(a.mouse.x,d.left-b,d.right+b)?!0:!1},place:function(){var b=a.view,d=a.editable,c=a.trigger,e=c.upper,f=c.lower,g=e||f,h=g.getParent(),k={};this.trigger=c;e&&r(a,e,!0);f&&r(a,f,!0);r(a,h,!0);a.inInlineMode&&y(a,!0);h.equals(d)?(k.left=b.scroll.x,k.right=-b.scroll.x,k.width=""):(k.left=g.size.left-g.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),k.width=g.size.outerWidth+g.size.margin.left+g.size.margin.right+b.scroll.x,k.right="");e&&f?k.top=e.size.margin.bottom===f.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<f.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-f.size.margin.top:e?f||(k.top=e.size.bottom+e.size.margin.bottom):k.top=f.size.top-f.size.margin.top;c.is(R)||m(k.top,b.scroll.y-15,b.scroll.y+5)?(k.top=a.inInlineMode?0:b.scroll.y,this.look(R)):c.is(M)||m(k.top,b.pane.bottom-5,b.pane.bottom+15)?(k.top=a.inInlineMode?b.editable.height+b.editable.padding.top+
b.editable.padding.bottom:b.pane.bottom-1,this.look(M)):(a.inInlineMode&&(k.top-=b.editable.top+b.editable.border.top),this.look(U));a.inInlineMode&&(k.top--,k.top+=b.editable.scroll.top,k.left+=b.editable.scroll.left);for(var l in k)k[l]=CKEDITOR.tools.cssLength(k[l]);this.setStyles(k)},look:function(a){if(this.oldLook!=a){for(var b=this.lineChildren.length,d;b--;)(d=this.lineChildren[b]).setAttribute("style",d.base+d.looks[0|a/2]);this.oldLook=a}},wrap:new C("span",a.doc)});for(b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(U);c.appendTo(c.wrap);c.unselectable();c.lineChildren[0].on("mouseup",function(b){c.detach();d(a,function(b){var d=a.line.trigger;b[d.is(P)?"insertBefore":"insertAfter"](d.is(P)?d.lower:d.upper)},!0);a.editor.focus();E.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();b.data.preventDefault(!0)});c.on("mousedown",function(a){a.data.preventDefault(!0)});a.line=c}function d(a,b,d){var c=new CKEDITOR.dom.range(a.doc),e=a.editor,f;E.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(W):(f=(f=l(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new C(O[f],a.doc),f.is("br")||a.doc.createText(W).appendTo(f));d&&e.fire("saveSnapshot");b(f);c.moveToPosition(f,CKEDITOR.POSITION_AFTER_START);e.getSelection().selectRanges([c]);a.hotNode=f;d&&e.fire("saveSnapshot")}function b(a,b){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function e(c){var f=E.ie&&9>E.version?" ":W,g=a.hotNode&&a.hotNode.getText()==f&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!b;d(a,function(d){g&&a.hotNode&&a.hotNode.remove();d[b?"insertAfter":"insertBefore"](c);d.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!b});a.lastCmdDirection=!!b});E.ie||a.enterMode==CKEDITOR.ENTER_BR||a.hotNode.scrollIntoView();a.line.detach()}return function(d){d=d.getSelection().getStartElement();var f;d=d.getAscendant(J,1);if(!u(a,d)&&d&&!d.equals(a.editable)&&!d.contains(a.editable)){(f=l(d))&&"false"==f.getAttribute("contenteditable")&&(d=f);a.element=d;f=h(a,d,!b);var g;n(f)&&f.is(a.triggers)&&f.is(N)&&(!h(a,f,!b)||(g=h(a,f,!b))&&n(g)&&g.is(a.triggers))?e(f):(g=c(a,d),n(g)&&(h(a,g,!b)?(d=h(a,g,!b))&&n(d)&&d.is(a.triggers)&&e(g):e(g)))}}}()}}function g(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var d=a.line;return d.wrap.equals(b)||d.wrap.contains(b)}function n(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$}function q(a){if(!n(a))return!1;var b;(b=p(a))||(n(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1);return b}function p(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function w(a,b){return n(b)?b.is(a.triggers):null}function u(a,b){if(!b)return!1;for(var d=b.getParents(1),c=d.length;c--;)for(var e=a.tabuList.length;e--;)if(d[c].hasAttribute(a.tabuList[e]))return!0;return!1}function t(a,b,d){b=b[d?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(X)});if(!b)return!1;r(a,b);return d?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y}function v(a){var b=a.editable,d=a.mouse,c=a.view,f=a.triggerOffset;y(a);var h=d.y>(a.inInlineMode?c.editable.top+c.editable.height/2:Math.min(c.editable.height,c.pane.height)/2),b=b[h?"getLast":"getFirst"](function(a){return!(ba(a)||ca(a))});if(!b)return null;g(a,b)&&(b=a.line.wrap[h?"getPrevious":"getNext"](function(a){return!(ba(a)||ca(a))}));if(!n(b)||q(b)||!w(a,b))return null;r(a,b);return!h&&0<=b.size.top&&m(d.y,0,b.size.top+f)?(a=a.inInlineMode||0===c.scroll.y?R:U,new e([null,b,P,Q,a])):h&&b.size.bottom<=c.pane.height&&m(d.y,b.size.bottom-f,c.pane.height)?(a=a.inInlineMode||m(b.size.bottom,c.pane.height-f,c.pane.height)?M:U,new e([b,null,I,Q,a])):null}function x(a){var b=a.mouse,d=a.view,f=a.triggerOffset,g=c(a);if(!g)return null;r(a,g);var f=Math.min(f,0|g.size.outerHeight/2),k=[],l,u;if(m(b.y,g.size.top-1,g.size.top+f))u=!1;else if(m(b.y,g.size.bottom-f,g.size.bottom+1))u=!0;else return null;if(q(g)||t(a,g,u)||g.getParent().is(L))return null;var J=h(a,g,!u);if(J){if(J&&J.type==CKEDITOR.NODE_TEXT)return null;if(n(J)){if(q(J)||!w(a,J)||J.getParent().is(L))return null;k=[J,g][u?"reverse":"concat"]().concat([T,Q])}}else g.equals(a.editable[u?"getLast":"getFirst"](a.isRelevant))?(y(a),u&&m(b.y,g.size.bottom-f,d.pane.height)&&m(g.size.bottom,d.pane.height-f,d.pane.height)?l=M:m(b.y,0,g.size.top+f)&&(l=R)):l=U,k=[null,g][u?"reverse":"concat"]().concat([u?I:P,Q,l,g.equals(a.editable[u?"getLast":"getFirst"](a.isRelevant))?u?M:R:U]);return 0 in k?new e(k):null}function A(a,b,d,c){for(var e=b.getDocumentPosition(),f={},g={},h={},k={},l=da.length;l--;)f[da[l]]=parseInt(b.getComputedStyle.call(b,"border-"+da[l]+"-width"),10)||0,h[da[l]]=parseInt(b.getComputedStyle.call(b,"padding-"+da[l]),10)||0,g[da[l]]=parseInt(b.getComputedStyle.call(b,"margin-"+da[l]),10)||0;d&&!c||D(a,c);k.top=e.y-(d?0:a.view.scroll.y);k.left=e.x-(d?0:a.view.scroll.x);k.outerWidth=b.$.offsetWidth;k.outerHeight=b.$.offsetHeight;k.height=k.outerHeight-(h.top+h.bottom+f.top+f.bottom);k.width=k.outerWidth-(h.left+h.right+f.left+f.right);k.bottom=k.top+k.outerHeight;k.right=k.left+k.outerWidth;a.inInlineMode&&(k.scroll={top:b.$.scrollTop,left:b.$.scrollLeft});return z({border:f,padding:h,margin:g,ignoreScroll:d},k,!0)}function r(a,b,d){if(!n(b))return b.size=null;if(!b.size)b.size={};else if(b.size.ignoreScroll==d&&b.size.date>new Date-K)return null;return z(b.size,A(a,b,d),{date:+new Date},!0)}function y(a,b){a.view.editable=A(a,a.editable,b,!0)}function D(a,b){a.view||(a.view={});var d=a.view;if(!(!b&&d&&d.date>new Date-K)){var c=a.win,d=c.getScrollPosition(),c=c.getViewPaneSize();z(a.view,{scroll:{x:d.x,y:d.y,width:a.doc.$.documentElement.scrollWidth-
c.width,height:a.doc.$.documentElement.scrollHeight-c.height},pane:{width:c.width,height:c.height,bottom:c.height+d.y},date:+new Date},!0)}}function B(a,b,d,c){for(var f=c,g=c,h=0,k=!1,l=!1,m=a.view.pane.height,r=a.mouse;r.y+h<m&&0<r.y-h;){k||(k=b(f,c));l||(l=b(g,c));!k&&0<r.y-h&&(f=d(a,{x:r.x,y:r.y-h}));!l&&r.y+h<m&&(g=d(a,{x:r.x,y:r.y+h}));if(k&&l)break;h+=2}return new e([f,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var f=a.config,l=f.magicline_triggerOffset||30,m={editor:a,enterMode:f.enterMode,triggerOffset:l,holdDistance:0|l*(f.magicline_holdDistance||.5),boxColor:f.magicline_color||"#ff0000",rtl:"rtl"==f.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(f.magicline_tabuList||[]),triggers:f.magicline_everywhere?J:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},r,t,K;m.isRelevant=function(a){return n(a)&&!g(m,a)&&!q(a)};a.on("contentDom",function(){var l=a.editable(),n=a.document,J=a.window;z(m,{editable:l,inInlineMode:l.isInline(),doc:n,win:J,hotNode:null},!0);m.boundary=m.inInlineMode?m.editable:m.doc.getDocumentElement();l.is(G.$inline)||(m.inInlineMode&&!p(l)&&l.setStyles({position:"relative",top:null,left:null}),k.call(this,m),D(m),l.attachListener(a,"beforeUndoImage",function(){m.line.detach()}),l.attachListener(a,"beforeGetData",function(){m.line.wrap.getParent()&&(m.line.detach(),a.once("getData",function(){m.line.attach()},null,null,1E3))},null,null,0),l.attachListener(m.inInlineMode?n:n.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(m.inInlineMode){var d=b.data.$.clientX;b=b.data.$.clientY;D(m);y(m,!0);var c=m.view.editable,e=m.view.scroll;d>c.left-e.x&&d<c.right-e.x&&b>c.top-e.y&&b<c.bottom-e.y||(clearTimeout(K),K=null,m.line.detach())}else clearTimeout(K),K=null,m.line.detach()}),l.attachListener(l,"keyup",function(){m.hiddenMode=0}),l.attachListener(l,"keydown",function(b){if("wysiwyg"==a.mode)switch(b.data.getKeystroke()){case 2228240:case 16:m.hiddenMode=1,m.line.detach()}}),l.attachListener(m.inInlineMode?l:n,"mousemove",function(b){t=!0;if("wysiwyg"==a.mode&&!a.readOnly&&!K){var d={x:b.data.$.clientX,y:b.data.$.clientY};K=setTimeout(function(){m.mouse=d;K=m.trigger=null;D(m);t&&!m.hiddenMode&&a.focusManager.hasFocus&&!m.line.mouseNear()&&(m.element=Y(m,!0))&&((m.trigger=v(m)||x(m)||Z(m))&&!u(m,m.trigger.upper||m.trigger.lower)?m.line.attach().place():(m.trigger=null,m.line.detach()),t=!1)},30)}}),l.attachListener(J,"scroll",function(){"wysiwyg"==a.mode&&(m.line.detach(),E.webkit&&(m.hiddenMode=1,clearTimeout(r),r=setTimeout(function(){m.mouseDown||(m.hiddenMode=0)},50)))}),l.attachListener(H?n:J,"mousedown",function(){"wysiwyg"==a.mode&&(m.line.detach(),m.hiddenMode=1,m.mouseDown=1)}),l.attachListener(H?n:J,"mouseup",function(){m.hiddenMode=0;m.mouseDown=0}),a.addCommand("accessPreviousSpace",b(m)),a.addCommand("accessNextSpace",b(m,!0)),a.setKeystroke([[f.magicline_keystrokePrevious,"accessPreviousSpace"],[f.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,d,c,e;for(e in{p:1,br:1,div:1})for(b=a.document.getElementsByTag(e),c=b.count();c--;)if((d=b.getItem(c)).data("cke-magicline-hot")){m.hotNode=d;m.lastCmdDirection="true"===d.data("cke-magicline-dir")?!0:!1;return}}),this.backdoor={accessFocusSpace:d,boxTrigger:e,isLine:g,getAscendantTrigger:c,getNonEmptyNeighbour:h,getSize:A,that:m,triggerEdge:x,triggerEditable:v,triggerExpand:Z})},this)}});var z=CKEDITOR.tools.extend,C=CKEDITOR.dom.element,F=C.createFromHtml,E=CKEDITOR.env,H=CKEDITOR.env.ie&&9>CKEDITOR.env.version,G=CKEDITOR.dtd,O={},P=128,I=64,T=32,Q=16,R=4,M=2,U=1,W="",L=G.$listItem,X=G.$tableContent,N=z({},G.$nonEditable,G.$empty),J=G.$block,K=100,V="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",S=V+"border-color:transparent;display:block;border-style:solid;",aa="\x3cspan\x3e"+W+"\x3c/span\x3e";O[CKEDITOR.ENTER_BR]="br";O[CKEDITOR.ENTER_P]="p";O[CKEDITOR.ENTER_DIV]="div";e.prototype={set:function(a,b,d){this.properties=a+b+(d||U);return this},is:function(a){return(this.properties&a)==a}};var Y=function(){function a(b,d){var c=b.$.elementFromPoint(d.x,d.y);return c&&c.nodeType?new CKEDITOR.dom.element(c):null}return function(b,d,c){if(!b.mouse)return null;var e=b.doc,f=b.line.wrap;c=c||b.mouse;var h=a(e,c);d&&g(b,h)&&(f.hide(),h=a(e,c),f.show());return!h||h.type!=CKEDITOR.NODE_ELEMENT||!h.$||E.ie&&9>E.version&&!b.boundary.equals(h)&&!b.boundary.contains(h)?null:h}}(),ba=CKEDITOR.dom.walker.whitespaces(),ca=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),Z=function(){function b(c){var e=c.element,g,h,k;if(!n(e)||e.contains(c.editable)||e.isReadOnly())return null;k=B(c,function(a,b){return!b.equals(a)},function(a,b){return Y(a,!0,b)},e);g=k.upper;h=k.lower;if(a(c,g,h))return k.set(T,8);if(g&&e.contains(g))for(;!g.getParent().equals(e);)g=g.getParent();else g=e.getFirst(function(a){return d(c,a)});if(h&&e.contains(h))for(;!h.getParent().equals(e);)h=h.getParent();else h=e.getLast(function(a){return d(c,a)});if(!g||!h)return null;r(c,g);r(c,h);if(!m(c.mouse.y,g.size.top,h.size.bottom))return null;for(var e=Number.MAX_VALUE,l,u,t,J;h&&!h.equals(g)&&(u=g.getNext(c.isRelevant));)l=Math.abs(f(c,g,u)-c.mouse.y),l<e&&(e=l,t=g,J=u),g=u,r(c,g);if(!t||!J||!m(c.mouse.y,t.size.top,J.size.bottom))return null;k.upper=t;k.lower=J;return k.set(T,8)}function d(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||ca(b)||q(b)||g(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))}return function(d){var c=b(d),e;if(e=c){e=c.upper;var f=c.lower;e=!e||!f||q(f)||q(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:w(d,e)&&w(d,f)&&a(d,e,f)?!0:!1}return e?c:null}}(),da=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function a(a){if(!a||a.type!=CKEDITOR.NODE_ELEMENT||"form"!=a.getName())return[];for(var c=[],e=["style","className"],d=0;d<e.length;d++){var b=a.$.elements.namedItem(e[d]);b&&(b=new CKEDITOR.dom.element(b),c.push([b,b.nextSibling]),b.remove())}return c}function e(a,c){if(a&&a.type==CKEDITOR.NODE_ELEMENT&&"form"==a.getName()&&0<c.length)for(var e=c.length-1;0<=e;e--){var d=c[e][0],b=c[e][1];b?d.insertBefore(b):d.appendTo(a)}}function c(c,f){var h=a(c),d={},b=c.$;f||(d["class"]=b.className||"",b.className="");d.inline=b.style.cssText||"";f||(b.style.cssText="position: static; overflow: visible");e(h);return d}function f(c,f){var h=a(c),d=c.$;"class"in f&&(d.className=f["class"]);"inline"in f&&(d.style.cssText=f.inline);e(h)}function h(a){if(!a.editable().isInline()){var c=CKEDITOR.instances,e;for(e in c){var d=c[e];"wysiwyg"!=d.mode||d.readOnly||(d=d.document.getBody(),d.setAttribute("contentEditable",!1),d.setAttribute("contentEditable",!0))}a.editable().hasFocus&&(a.toolbox.focus(),a.focus())}}CKEDITOR.plugins.add("maximize",{init:function(a){function e(){var d=b.getViewPaneSize();a.resize(d.width,d.height,null,!0)}if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var k=a.lang,d=CKEDITOR.document,b=d.getWindow(),g,n,q,p=CKEDITOR.TRISTATE_OFF;a.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var w=a.container.getFirst(function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_inner")}),u=a.ui.space("contents");if("wysiwyg"==a.mode){var t=a.getSelection();g=t&&t.getRanges();n=b.getScrollPosition()}else{var v=a.editable().$;g=!CKEDITOR.env.ie&&[v.selectionStart,v.selectionEnd];n=[v.scrollLeft,v.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){b.on("resize",e);q=b.getScrollPosition();for(t=a.container;t=t.getParent();)t.setCustomData("maximize_saved_styles",c(t)),t.setStyle("z-index",a.config.baseFloatZIndex-5);u.setCustomData("maximize_saved_styles",c(u,!0));w.setCustomData("maximize_saved_styles",c(w,!0));u={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};d.getDocumentElement().setStyles(u);!CKEDITOR.env.gecko&&d.getDocumentElement().setStyle("position","fixed");CKEDITOR.env.gecko&&CKEDITOR.env.quirks||d.getBody().setStyles(u);CKEDITOR.env.ie?setTimeout(function(){b.$.scrollTo(0,0)},0):b.$.scrollTo(0,0);w.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");w.$.offsetLeft;w.setStyles({"z-index":a.config.baseFloatZIndex-5,left:"0px",top:"0px"});w.addClass("cke_maximized");e();u=w.getDocumentPosition();w.setStyles({left:-1*u.x+"px",top:-1*u.y+"px"});CKEDITOR.env.gecko&&h(a)}else if(this.state==CKEDITOR.TRISTATE_ON){b.removeListener("resize",e);for(var t=[u,w],x=0;x<t.length;x++)f(t[x],t[x].getCustomData("maximize_saved_styles")),t[x].removeCustomData("maximize_saved_styles");for(t=a.container;t=t.getParent();)f(t,t.getCustomData("maximize_saved_styles")),t.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){b.$.scrollTo(q.x,q.y)},0):b.$.scrollTo(q.x,q.y);w.removeClass("cke_maximized");CKEDITOR.env.webkit&&(w.setStyle("display","inline"),setTimeout(function(){w.setStyle("display","block")},0));a.fire("resize",{outerHeight:a.container.$.offsetHeight,contentsHeight:u.$.offsetHeight,outerWidth:a.container.$.offsetWidth})}this.toggleState();if(t=this.uiItems[0])u=this.state==CKEDITOR.TRISTATE_OFF?k.maximize.maximize:k.maximize.minimize,t=CKEDITOR.document.getById(t._.id),t.getChild(1).setHtml(u),t.setAttribute("title",u),t.setAttribute("href",'javascript:void("'+u+'");');"wysiwyg"==a.mode?g?(CKEDITOR.env.gecko&&h(a),a.getSelection().selectRanges(g),(v=a.getSelection().getStartElement())&&v.scrollIntoView(!0)):b.$.scrollTo(n.x,n.y):(g&&(v.selectionStart=g[0],v.selectionEnd=g[1]),v.scrollLeft=n[0],v.scrollTop=n[1]);g=n=null;p=this.state;a.fire("maximize",this.state)},canUndo:!1});a.ui.addButton&&a.ui.addButton("Maximize",{label:k.maximize.maximize,command:"maximize",toolbar:"tools,10"});a.on("mode",function(){var b=a.getCommand("maximize");b.setState(b.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:p)},null,null,100)}}})}(),CKEDITOR.plugins.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(a){var c=this;a.setData(a.config.newpage_html||"",function(){a.focus();setTimeout(function(){a.fire("afterCommandExec",{name:"newpage",command:c});a.selectionChange()},200)})},async:!0});a.ui.addButton&&a.ui.addButton("NewPage",{label:a.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}}),"use strict",function(){function a(a){return{"aria-label":a,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:a}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var a=("background:url("+CKEDITOR.getUrl(this.path+
"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:7px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+a+"}")},init:function(a){a.blockless||(a.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),a.ui.addButton&&a.ui.addButton("PageBreak",{label:a.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&a.on("contentDom",function(){a.document.on("click",function(c){c=c.data.getTarget();c.is("div")&&c.hasClass("cke_pagebreak")&&a.getSelection().selectElement(c)})}))},afterInit:function(e){function c(c){CKEDITOR.tools.extend(c.attributes,a(e.lang.pagebreak.alt),!0);c.children.length=0}var f=e.dataProcessor,h=f&&f.dataFilter,f=f&&f.htmlFilter,m=/page-break-after\s*:\s*always/i,l=/display\s*:\s*none/i;f&&f.addRules({attributes:{"class":function(a,d){var b=a.replace("cke_pagebreak","");if(b!=a){var c=CKEDITOR.htmlParser.fragment.fromHtml('\x3cspan style\x3d"display: none;"\x3e\x26nbsp;\x3c/span\x3e').children[0];d.children.length=0;d.add(c);c=d.attributes;delete c["aria-label"];delete c.contenteditable;delete c.title}return b}}},{applyToAll:!0,priority:5});h&&h.addRules({elements:{div:function(a){if(a.attributes["data-cke-pagebreak"])c(a);else if(m.test(a.attributes.style)){var d=a.children[0];d&&"span"==d.name&&l.test(d.attributes.style)&&c(a)}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(e){var c=e.document.createElement("div",{attributes:a(e.lang.pagebreak.alt)});e.insertElement(c)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(a){return(a=a.parent)&&"div"==a.name&&a.styles&&a.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}}(),function(){function a(a,c,f){var h=CKEDITOR.cleanWord;h?f():(a=CKEDITOR.getUrl(a.config.pasteFromWordCleanupFile||c+"filter/default.js"),CKEDITOR.scriptLoader.load(a,f,null,!0));return!h}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(e){var c=0,f=this.path;e.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(a,e){c=1;a.execCommand("paste",{type:"html",notification:e&&"undefined"!==typeof e.notification?e.notification:!0})}});e.ui.addButton&&e.ui.addButton("PasteFromWord",{label:e.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});e.on("paste",function(h){var m=h.data,l=(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?m.dataTransfer.getData("text/html",!0):null)||m.dataValue,k={dataValue:l},d=/(class=\"?Mso|style=(?:\"|\')[^\"]*?\bmso\-|w:WordDocument|<o:\w+>|<\/font>)/,d=/<meta\s*name=(?:\"|\')?generator(?:\"|\')?\s*content=(?:\"|\')?microsoft/gi.test(l)||d.test(l);if(l&&(c||d)&&(!1!==e.fire("pasteFromWord",k)||c)){m.dontFilter=!0;var b=a(e,f,function(){if(b)e.fire("paste",m);else if(!e.config.pasteFromWordPromptCleanup||c||confirm(e.lang.pastefromword.confirmCleanup))k.dataValue=CKEDITOR.cleanWord(k.dataValue,e),e.fire("afterPasteFromWord",k),m.dataValue=k.dataValue;c=0});b&&h.cancel()}},null,null,3)}})}(),function(){var a={canUndo:!1,async:!0,exec:function(a,c){var f=a.lang,h=CKEDITOR.tools.keystrokeToString(f.common.keyboard,a.getCommandKeystroke(CKEDITOR.env.ie?a.commands.paste:this)),m=c&&"undefined"!==typeof c.notification?c.notification:!c||!c.from||"keystrokeHandler"===c.from&&CKEDITOR.env.ie,f=m&&"string"===typeof m?m:f.pastetext.pasteNotification.replace(/%1/,'\x3ckbd aria-label\x3d"'+h.aria+'"\x3e'+h.display+"\x3c/kbd\x3e");a.execCommand("paste",{type:"text",notification:m?f:!1})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){var c=CKEDITOR.env.safari?CKEDITOR.CTRL+CKEDITOR.ALT+CKEDITOR.SHIFT+86:CKEDITOR.CTRL+CKEDITOR.SHIFT+86;e.addCommand("pastetext",a);e.setKeystroke(c,"pastetext");e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(e.config.forcePasteAsPlainText)e.on("beforePaste",function(a){"html"!=a.data.type&&(a.data.type="text")});e.on("pasteState",function(a){e.getCommand("pastetext").setState(a.data)})}})}(),function(){var a,e={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(c){var e,h=c.config,m=h.baseHref?'\x3cbase href\x3d"'+h.baseHref+'"/\x3e':"";if(h.fullPage)e=c.getData().replace(/<head>/,"$\x26"+m).replace(/[^>]*(?=<\/title>)/,"$\x26 \x26mdash; "+c.lang.preview.preview);else{var h="\x3cbody ",l=c.document&&c.document.getBody();l&&(l.getAttribute("id")&&(h+='id\x3d"'+l.getAttribute("id")+'" '),l.getAttribute("class")&&(h+='class\x3d"'+l.getAttribute("class")+'" '));h+="\x3e";e=c.config.docType+'\x3chtml dir\x3d"'+c.config.contentsLangDirection+
'"\x3e\x3chead\x3e'+m+"\x3ctitle\x3e"+c.lang.preview.preview+"\x3c/title\x3e"+CKEDITOR.tools.buildStyleHtml(c.config.contentsCss)+"\x3c/head\x3e"+h+c.getData()+"\x3c/body\x3e\x3c/html\x3e"}m=640;h=420;l=80;try{var k=window.screen,m=Math.round(.8*k.width),h=Math.round(.7*k.height),l=Math.round(.1*k.width)}catch(d){}if(!1===c.fire("contentPreview",c={dataValue:e}))return!1;var k="",b;CKEDITOR.env.ie&&(window._cke_htmlToLoad=c.dataValue,b="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+
")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad \x3d null;})() )",k="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=c.dataValue,k=CKEDITOR.getUrl(a+"preview.html"));k=window.open(k,null,"toolbar\x3dyes,location\x3dno,status\x3dyes,menubar\x3dyes,scrollbars\x3dyes,resizable\x3dyes,width\x3d"+m+",height\x3d"+h+",left\x3d"+l);CKEDITOR.env.ie&&k&&(k.location=b);CKEDITOR.env.ie||CKEDITOR.env.gecko||(b=k.document,b.open(),b.write(c.dataValue),b.close());return!0}};CKEDITOR.plugins.add("preview",{init:function(c){c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a=this.path,c.addCommand("preview",e),c.ui.addButton&&c.ui.addButton("Preview",{label:c.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})}(),CKEDITOR.plugins.add("print",{init:function(a){a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a.addCommand("print",CKEDITOR.plugins.print),a.ui.addButton&&a.ui.addButton("Print",{label:a.lang.print.toolbar,command:"print",toolbar:"document,50"}))}}),CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}},CKEDITOR.plugins.add("removeformat",{init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton&&a.ui.addButton("RemoveFormat",{label:a.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var e=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),f=CKEDITOR.plugins.removeformat.filter,h=a.getSelection().getRanges(),m=h.createIterator(),l=function(a){return a.type==CKEDITOR.NODE_ELEMENT},k;k=m.getNextRange();){k.collapsed||k.enlarge(CKEDITOR.ENLARGE_ELEMENT);var d=k.createBookmark(),b=d.startNode,g=d.endNode,n=function(b){for(var d=a.elementPath(b),c=d.elements,g=1,h;(h=c[g])&&!h.equals(d.block)&&!h.equals(d.blockLimit);g++)e.test(h.getName())&&f(a,h)&&b.breakParent(h)};n(b);if(g)for(n(g),b=b.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);b&&!b.equals(g);)if(b.isReadOnly()){if(b.getPosition(g)&CKEDITOR.POSITION_CONTAINS)break;b=b.getNext(l)}else n=b.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==b.getName()&&b.data("cke-realelement")||!f(a,b)||(e.test(b.getName())?b.remove(1):(b.removeAttributes(c),a.fire("removeFormatCleanup",b))),b=n;k.moveToBookmark(d)}a.forceNextSelectionCheck();a.getSelection().selectRanges(h)}}},filter:function(a,e){for(var c=a._.removeFormatFilters||[],f=0;f<c.length;f++)if(!1===c[f](e))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(a)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",CKEDITOR.plugins.add("resize",{init:function(a){function e(c){var e=d.width,h=d.height,l=e+(c.data.$.screenX-k.x)*("rtl"==m?-1:1);c=h+(c.data.$.screenY-k.y);b&&(e=Math.max(f.resize_minWidth,Math.min(l,f.resize_maxWidth)));g&&(h=Math.max(f.resize_minHeight,Math.min(c,f.resize_maxHeight)));a.resize(b?e:null,h)}function c(){CKEDITOR.document.removeListener("mousemove",e);CKEDITOR.document.removeListener("mouseup",c);a.document&&(a.document.removeListener("mousemove",e),a.document.removeListener("mouseup",c))}var f=a.config,h=a.ui.spaceId("resizer"),m=a.element?a.element.getDirection(1):"ltr";!f.resize_dir&&(f.resize_dir="vertical");void 0===f.resize_maxWidth&&(f.resize_maxWidth=3E3);void 0===f.resize_maxHeight&&(f.resize_maxHeight=3E3);void 0===f.resize_minWidth&&(f.resize_minWidth=750);void 0===f.resize_minHeight&&(f.resize_minHeight=250);if(!1!==f.resize_enabled){var l=null,k,d,b=("both"==f.resize_dir||"horizontal"==f.resize_dir)&&f.resize_minWidth!=f.resize_maxWidth,g=("both"==f.resize_dir||"vertical"==f.resize_dir)&&f.resize_minHeight!=f.resize_maxHeight,n=CKEDITOR.tools.addFunction(function(b){l||(l=a.getResizable());d={width:l.$.offsetWidth||0,height:l.$.offsetHeight||0};k={x:b.screenX,y:b.screenY};f.resize_minWidth>d.width&&(f.resize_minWidth=d.width);f.resize_minHeight>d.height&&(f.resize_minHeight=d.height);CKEDITOR.document.on("mousemove",e);CKEDITOR.document.on("mouseup",c);a.document&&(a.document.on("mousemove",e),a.document.on("mouseup",c));b.preventDefault&&b.preventDefault()});a.on("destroy",function(){CKEDITOR.tools.removeFunction(n)});a.on("uiSpace",function(d){if("bottom"==d.data.space){var c="";b&&!g&&(c=" cke_resizer_horizontal");!b&&g&&(c=" cke_resizer_vertical");var e='\x3cspan id\x3d"'+h+'" class\x3d"cke_resizer'+c+" cke_resizer_"+m+'" title\x3d"'+CKEDITOR.tools.htmlEncode(a.lang.common.resize)+'" onmousedown\x3d"CKEDITOR.tools.callFunction('+n+', event)"\x3e'+("ltr"==m?"":"")+"\x3c/span\x3e";"ltr"==m&&"ltr"==c?d.data.html+=e:d.data.html=e+d.data.html}},a,null,100);a.on("maximize",function(b){a.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var a={readOnly:1,exec:function(a){if(a.fire("save")&&(a=a.element.$.form))try{a.submit()}catch(c){a.submit.click&&a.submit.click()}}};CKEDITOR.plugins.add("save",{init:function(e){e.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(e.addCommand("save",a).modes={wysiwyg:!!e.element.$.form},e.ui.addButton&&e.ui.addButton("Save",{label:e.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})}(),function(){CKEDITOR.plugins.add("selectall",{init:function(a){a.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(a){var c=a.editable();if(c.is("textarea"))a=c.$,CKEDITOR.env.ie?a.createTextRange().execCommand("SelectAll"):(a.selectionStart=0,a.selectionEnd=a.value.length),a.focus();else{if(c.is("body"))a.document.$.execCommand("SelectAll",!1,null);else{var f=a.createRange();f.selectNodeContents(c);f.select()}a.forceNextSelectionCheck();a.selectionChange()}},canUndo:!1});a.ui.addButton&&a.ui.addButton("SelectAll",{label:a.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})}(),function(){var a={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state!=CKEDITOR.TRISTATE_ON||a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&!a.focusManager.hasFocus?"removeClass":"attachClass";a.editable()[c]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var a="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),c,f,h,m,l=CKEDITOR.getUrl(this.path),k=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),d=k?":not([contenteditable\x3dfalse]):not(.cke_show_blocks_off)":"",b,g;for(c=f=h=m="";b=a.pop();)g=a.length?",":"",c+=".cke_show_blocks "+b+d+g,h+=".cke_show_blocks.cke_contents_ltr "+b+d+g,m+=".cke_show_blocks.cke_contents_rtl "+b+d+g,f+=".cke_show_blocks "+b+d+"{background-image:url("+CKEDITOR.getUrl(l+"images/block_"+b+".png")+")}";CKEDITOR.addCss((c+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(f,h+"{background-position:top left;padding-left:8px}",m+"{background-position:top right;padding-right:8px}"));k||CKEDITOR.addCss(".cke_show_blocks [contenteditable\x3dfalse],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable\x3dfalse],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(e){function c(){f.refresh(e)}if(!e.blockless){var f=e.addCommand("showblocks",a);f.canUndo=!1;e.config.startupOutlineBlocks&&f.setState(CKEDITOR.TRISTATE_ON);e.ui.addButton&&e.ui.addButton("ShowBlocks",{label:e.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});e.on("mode",function(){f.state!=CKEDITOR.TRISTATE_DISABLED&&f.refresh(e)});e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e.on("focus",c),e.on("blur",c));e.on("contentDom",function(){f.state!=CKEDITOR.TRISTATE_DISABLED&&f.refresh(e)})}}})}(),function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(a){this.toggleState();this.refresh(a)},refresh:function(a){if(a.document){var c=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";a.editable()[c]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 \x3e tr \x3e td, .%1 table.%2 \x3e tr \x3e th,;.%1 table.%2 \x3e tbody \x3e tr \x3e td, .%1 table.%2 \x3e tbody \x3e tr \x3e th,;.%1 table.%2 \x3e thead \x3e tr \x3e td, .%1 table.%2 \x3e thead \x3e tr \x3e th,;.%1 table.%2 \x3e tfoot \x3e tr \x3e td, .%1 table.%2 \x3e tfoot \x3e tr \x3e th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(a)},init:function(e){var c=e.addCommand("showborders",a);c.canUndo=!1;!1!==e.config.startupShowBorders&&c.setState(CKEDITOR.TRISTATE_ON);e.on("mode",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(e)},null,null,100);e.on("contentDom",function(){c.state!=CKEDITOR.TRISTATE_DISABLED&&c.refresh(e)});e.on("removeFormatCleanup",function(a){a=a.data;e.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&a.is("table")&&(!a.hasAttribute("border")||0>=parseInt(a.getAttribute("border"),10))&&a.addClass("cke_show_border")})},afterInit:function(a){var c=a.dataProcessor;a=c&&c.dataFilter;c=c&&c.htmlFilter;a&&a.addRules({elements:{table:function(a){a=a.attributes;var c=a["class"],e=parseInt(a.border,10);e&&!(0>=e)||c&&-1!=c.indexOf("cke_show_border")||(a["class"]=(c||"")+" cke_show_border")}}});c&&c.addRules({elements:{table:function(a){a=a.attributes;var c=a["class"];c&&(a["class"]=c.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(a){var c=a.data.name;if("table"==c||"tableProperties"==c)if(a=a.data.definition,c=a.getContents("info").get("txtBorder"),c.commit=CKEDITOR.tools.override(c.commit,function(a){return function(c,e){a.apply(this,arguments);var l=parseInt(this.getValue(),10);e[!l||0>=l?"addClass":"removeClass"]("cke_show_border")}}),a=(a=a.getContents("advanced"))&&a.get("advCSSClasses"))a.setup=CKEDITOR.tools.override(a.setup,function(a){return function(){a.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),a.commit=CKEDITOR.tools.override(a.commit,function(a){return function(c,e){a.apply(this,arguments);parseInt(e.getAttribute("border"),10)||e.addClass("cke_show_border")}})})}(),CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));a.ui.addButton&&a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" "),CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";"),function(){CKEDITOR.plugins.add("sourcearea",{init:function(e){function c(){var a=h&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();a&&this.focus()}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var f=CKEDITOR.plugins.sourcearea;e.addMode("source",function(f){var h=e.ui.space("contents").getDocument().createElement("textarea");h.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",e.config.sourceAreaTabSize||4)));h.setAttribute("dir","ltr");h.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu");e.ui.space("contents").append(h);h=e.editable(new a(e,h));h.setData(e.getData(1));CKEDITOR.env.ie&&(h.attachListener(e,"resize",c,h),h.attachListener(CKEDITOR.document.getWindow(),"resize",c,h),CKEDITOR.tools.setTimeout(c,0,h));e.fire("ariaWidget",this);f()});e.addCommand("source",f.commands.source);e.ui.addButton&&e.ui.addButton("Source",{label:e.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});e.on("mode",function(){e.getCommand("source").setState("source"==e.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var h=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(a){this.setValue(a);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(a){this[(a?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,az:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,"de-ch":1,el:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,oc:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(a){var e=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var c=a.langCode,c=e.availableLangs[c]?c:e.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialchar,e.langEntries[c]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});a.ui.addButton&&a.ui.addButton("SpecialChar",{label:a.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! \x26quot; # $ % \x26amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; \x26lt; \x3d \x26gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ \x26euro; \x26lsquo; \x26rsquo; \x26ldquo; \x26rdquo; \x26ndash; \x26mdash; \x26iexcl; \x26cent; \x26pound; \x26curren; \x26yen; \x26brvbar; \x26sect; \x26uml; \x26copy; \x26ordf; \x26laquo; \x26not; \x26reg; \x26macr; \x26deg; \x26sup2; \x26sup3; \x26acute; \x26micro; \x26para; \x26middot; \x26cedil; \x26sup1; \x26ordm; \x26raquo; \x26frac14; \x26frac12; \x26frac34; \x26iquest; \x26Agrave; \x26Aacute; \x26Acirc; \x26Atilde; \x26Auml; \x26Aring; \x26AElig; \x26Ccedil; \x26Egrave; \x26Eacute; \x26Ecirc; \x26Euml; \x26Igrave; \x26Iacute; \x26Icirc; \x26Iuml; \x26ETH; \x26Ntilde; \x26Ograve; \x26Oacute; \x26Ocirc; \x26Otilde; \x26Ouml; \x26times; \x26Oslash; \x26Ugrave; \x26Uacute; \x26Ucirc; \x26Uuml; \x26Yacute; \x26THORN; \x26szlig; \x26agrave; \x26aacute; \x26acirc; \x26atilde; \x26auml; \x26aring; \x26aelig; \x26ccedil; \x26egrave; \x26eacute; \x26ecirc; \x26euml; \x26igrave; \x26iacute; \x26icirc; \x26iuml; \x26eth; \x26ntilde; \x26ograve; \x26oacute; \x26ocirc; \x26otilde; \x26ouml; \x26divide; \x26oslash; \x26ugrave; \x26uacute; \x26ucirc; \x26uuml; \x26yacute; \x26thorn; \x26yuml; \x26OElig; \x26oelig; \x26#372; \x26#374 \x26#373 \x26#375; \x26sbquo; \x26#8219; \x26bdquo; \x26hellip; \x26trade; \x26#9658; \x26bull; \x26rarr; \x26rArr; \x26hArr; \x26diams; \x26asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var e=a.config,c=a.lang.stylescombo,f={},h=[],m=[];a.on("stylesSet",function(c){if(c=c.data.styles){for(var k,d,b,g=0,n=c.length;g<n;g++)(k=c[g],a.blockless&&k.element in CKEDITOR.dtd.$block||"string"==typeof k.type&&!CKEDITOR.style.customHandlers[k.type]||(d=k.name,k=new CKEDITOR.style(k),a.filter.customConfig&&!a.filter.check(k)))||(k._name=d,k._.enterMode=e.enterMode,k._.type=b=k.assignedTo||k.type,k._.weight=g+1E3*(b==CKEDITOR.STYLE_OBJECT?1:b==CKEDITOR.STYLE_BLOCK?2:3),f[d]=k,h.push(k),m.push(k));h.sort(function(a,b){return a._.weight-b._.weight})}});a.ui.addRichCombo("Styles",{label:c.label,title:c.panelTitle,toolbar:"styles,10",allowedContent:m,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!0,attributes:{"aria-label":c.panelTitle}},init:function(){var a,e,d,b,f,m;f=0;for(m=h.length;f<m;f++)a=h[f],e=a._name,b=a._.type,b!=d&&(this.startGroup(c["panelTitle"+String(b)]),d=b),this.add(e,a.type==CKEDITOR.STYLE_OBJECT?e:a.buildPreview(),e);this.commit()},onClick:function(c){a.focus();a.fire("saveSnapshot");c=f[c];var e=a.elementPath();if(c.group&&c.removeStylesFromSameGroup(a))a.applyStyle(c);else a[c.checkActive(e,a)?"removeStyle":"applyStyle"](c);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(c){var e=this.getValue();c=c.data.path.elements;for(var d=0,b=c.length,g;d<b;d++){g=c[d];for(var h in f)if(f[h].checkElementRemovable(g,!0,a)){h!=e&&this.setValue(h);return}}this.setValue("")},this)},onOpen:function(){var e=a.getSelection().getSelectedElement(),e=a.elementPath(e),h=[0,0,0,0];this.showAll();this.unmarkAll();for(var d in f){var b=f[d],g=b._.type;b.checkApplicable(e,a,a.activeFilter)?h[g]++:this.hideItem(d);b.checkActive(e,a)&&this.mark(d)}h[CKEDITOR.STYLE_BLOCK]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);h[CKEDITOR.STYLE_INLINE]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);h[CKEDITOR.STYLE_OBJECT]||this.hideGroup(c["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var c=a.elementPath();if(c){for(var e in f)if(f[e].checkApplicable(c,a,a.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){f={};h=[]}})}})}(),function(){function a(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(c){if(c.editable().hasFocus){var e=c.getSelection(),f;if(f=(new CKEDITOR.dom.elementPath(e.getCommonAncestor(),e.root)).contains({td:1,th:1},1)){var e=c.createRange(),d=CKEDITOR.tools.tryThese(function(){var b=f.getParent().$.cells[f.$.cellIndex+(a?-1:1)];b.parentNode.parentNode;return b},function(){var b=f.getParent(),b=b.getAscendant("table").$.rows[b.$.rowIndex+(a?-1:1)];return b.cells[a?b.cells.length-1:0]});if(d||a)if(d)d=new CKEDITOR.dom.element(d),e.moveToElementEditStart(d),e.checkStartOfBlock()&&e.checkEndOfBlock()||e.selectNodeContents(d);else return!0;else{for(var b=f.getAscendant("table").$,d=f.getParent().$.cells,b=new CKEDITOR.dom.element(b.insertRow(-1),c.document),g=0,n=d.length;g<n;g++)b.append((new CKEDITOR.dom.element(d[g],c.document)).clone(!1,!1)).appendBogus();e.moveToElementEditStart(b)}e.select(!0);return!0}}return!1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},f={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(h){for(var m=!1!==h.config.enableTabKeyTools,l=h.config.tabSpaces||0,k="";l--;)k+="";if(k)h.on("key",function(a){9==a.data.keyCode&&(h.insertText(k),a.cancel())});if(m)h.on("key",function(a){(9==a.data.keyCode&&h.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&h.execCommand("selectPreviousCell"))&&a.cancel()});h.addCommand("blur",CKEDITOR.tools.extend(c,e));h.addCommand("blurBack",CKEDITOR.tools.extend(f,e));h.addCommand("selectNextCell",a());h.addCommand("selectPreviousCell",a(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(a,e){var c=void 0===e?this.getTabIndex():e,f,h,m,l,k,d;if(0>=c)for(k=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);k;){if(k.isVisible()&&0===k.getTabIndex()){m=k;break}k=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(k=this.getDocument().getBody().getFirst();k=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!h&&k.equals(this)){if(h=!0,a){if(!(k=k.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else h&&!this.contains(k)&&(f=1);if(k.isVisible()&&!(0>(d=k.getTabIndex()))){if(f&&d==c){m=k;break}d>c&&(!m||!l||d<l)?(m=k,l=d):m||0!==d||(m=k,l=d)}}m&&m.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(a,e){for(var c=void 0===e?this.getTabIndex():e,f,h,m,l=0,k,d=this.getDocument().getBody().getLast();d=d.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!f)if(!h&&d.equals(this)){if(h=!0,a){if(!(d=d.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;f=1}}else h&&!this.contains(d)&&(f=1);if(d.isVisible()&&!(0>(k=d.getTabIndex())))if(0>=c){if(f&&0===k){m=d;break}k>l&&(m=d,l=k)}else{if(f&&k==c){m=d;break}k<c&&(!m||k>l)&&(m=d,l=k)}}m&&m.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(a){function e(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,c){this.setState(c.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!a.blockless){var c=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+
(a.plugins.dialogadvtab?"table"+a.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"],["td: splitBorderShorthand"],[{element:"table",right:function(a){a.styles&&(a.styles.border&&a.styles.border.match(/solid/)&&(a.attributes.border=1),"collapse"==a.styles["border-collapse"]&&(a.attributes.cellspacing=0))}}]]}));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",e()));a.addCommand("tableDelete",e({exec:function(a){var c=a.elementPath().contains("table",1);if(c){var e=c.getParent(),l=a.editable();1!=e.getChildCount()||e.is("td","th")||e.equals(l)||(c=e);a=a.createRange();a.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START);c.remove();a.select()}}}));a.ui.addButton&&a.ui.addButton("Table",{label:c.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:c.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:c.deleteTable,command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(a){a.data.element.is("table")&&(a.data.dialog="tableProperties")});a.contextMenu&&a.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function a(a,b){function d(a){return b?b.contains(a)&&a.getAscendant("table",!0).equals(b):!0}function c(a){0<f.length||a.type!=CKEDITOR.NODE_ELEMENT||!p.test(a.getName())||a.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(g,a,"selected_cell",!0),f.push(a))}if(a){for(var e=a.getRanges(),f=[],g={},h=0;h<e.length;h++){var k=e[h];if(k.collapsed)(k=k.getCommonAncestor().getAscendant({td:1,th:1},!0))&&d(k)&&f.push(k);else{var k=new CKEDITOR.dom.walker(k),l;for(k.guard=c;l=k.next();)l.type==CKEDITOR.NODE_ELEMENT&&l.is(CKEDITOR.dtd.table)||(l=l.getAscendant({td:1,th:1},!0))&&!l.getCustomData("selected_cell")&&d(l)&&(CKEDITOR.dom.element.setMarker(g,l,"selected_cell",!0),f.push(l))}}CKEDITOR.dom.element.clearAllMarkers(g);return f}}function e(b,d){for(var c=w(b)?b:a(b),e=c[0],f=e.getAscendant("table"),e=e.getDocument(),g=c[0].getParent(),h=g.$.rowIndex,c=c[c.length-1],k=c.getParent().$.rowIndex+c.$.rowSpan-1,c=new CKEDITOR.dom.element(f.$.rows[k]),h=d?h:k,g=d?g:c,c=CKEDITOR.tools.buildTableMap(f),f=c[h],h=d?c[h-1]:c[h+1],c=c[0].length,e=e.createElement("tr"),k=0;f[k]&&k<c;k++){var l;1<f[k].rowSpan&&h&&f[k]==h[k]?(l=f[k],l.rowSpan+=1):(l=(new CKEDITOR.dom.element(f[k])).clone(),l.removeAttribute("rowSpan"),l.appendBogus(),e.append(l),l=l.$);k+=l.colSpan-1}d?e.insertBefore(g):e.insertAfter(g)}function c(b){if(b instanceof CKEDITOR.dom.selection){var d=b.getRanges(),e=a(b),f=e[0].getAscendant("table"),g=CKEDITOR.tools.buildTableMap(f),h=e[0].getParent().$.rowIndex,e=e[e.length-1],k=e.getParent().$.rowIndex+e.$.rowSpan-1,e=[];b.reset();for(b=h;b<=k;b++){for(var l=g[b],m=new CKEDITOR.dom.element(f.$.rows[b]),n=0;n<l.length;n++){var q=new CKEDITOR.dom.element(l[n]),p=q.getParent().$.rowIndex;1==q.$.rowSpan?q.remove():(--q.$.rowSpan,p==b&&(p=g[b+1],p[n-1]?q.insertAfter(new CKEDITOR.dom.element(p[n-1])):(new CKEDITOR.dom.element(f.$.rows[b+1])).append(q,1)));n+=q.$.colSpan-1}e.push(m)}g=f.$.rows;d[0].moveToPosition(f,CKEDITOR.POSITION_BEFORE_START);h=new CKEDITOR.dom.element(g[k+1]||(0<h?g[h-1]:null)||f.$.parentNode);for(b=e.length;0<=b;b--)c(e[b]);return f.$.parentNode?h:(d[0].select(),null)}b instanceof CKEDITOR.dom.element&&(f=b.getAscendant("table"),1==f.$.rows.length?f.remove():b.remove());return null}function f(a,b){for(var d=a.getParent().$.cells,c=0,e=0;e<d.length;e++){var f=d[e],c=c+(b?1:f.colSpan);if(f==a.$)break}return c-1}function h(a,b){for(var d=b?Infinity:0,c=0;c<a.length;c++){var e=f(a[c],b);if(b?e<d:e>d)d=e}return d}function m(b,d){for(var c=w(b)?b:a(b),e=c[0].getAscendant("table"),f=h(c,1),c=h(c),g=d?f:c,k=CKEDITOR.tools.buildTableMap(e),e=[],f=[],c=k.length,l=0;l<c;l++)e.push(k[l][g]),f.push(d?k[l][g-1]:k[l][g+1]);for(l=0;l<c;l++)e[l]&&(1<e[l].colSpan&&f[l]==e[l]?(k=e[l],k.colSpan+=1):(g=new CKEDITOR.dom.element(e[l]),k=g.clone(),k.removeAttribute("colSpan"),k.appendBogus(),k[d?"insertBefore":"insertAfter"].call(k,g),k=k.$),l+=k.rowSpan-1)}function l(a,b){var d=a.getStartElement().getAscendant({td:1,th:1},!0);if(d){var c=d.clone();c.appendBogus();b?c.insertBefore(d):c.insertAfter(d)}}function k(b){if(b instanceof CKEDITOR.dom.selection){var c=b.getRanges(),e=a(b),f=e[0]&&e[0].getAscendant("table"),g;a:{var h=0;g=e.length-1;for(var l={},m,n;m=e[h++];)CKEDITOR.dom.element.setMarker(l,m,"delete_cell",!0);for(h=0;m=e[h++];)if((n=m.getPrevious())&&!n.getCustomData("delete_cell")||(n=m.getNext())&&!n.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(l);g=n;break a}CKEDITOR.dom.element.clearAllMarkers(l);h=e[0].getParent();(h=h.getPrevious())?g=h.getLast():(h=e[g].getParent(),g=(h=h.getNext())?h.getChild(0):null)}b.reset();for(b=e.length-1;0<=b;b--)k(e[b]);g?d(g,!0):f&&(c[0].moveToPosition(f,CKEDITOR.POSITION_BEFORE_START),c[0].select(),f.remove())}else b instanceof
CKEDITOR.dom.element&&(c=b.getParent(),1==c.getChildCount()?c.remove():b.remove())}function d(a,b){var d=a.getDocument(),c=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(c.focus(),d.focus());d=new CKEDITOR.dom.range(d);d["moveToElementEdit"+(b?"End":"Start")](a)||(d.selectNodeContents(a),d.collapse(b?!1:!0));d.select(!0)}function b(a,b,d){a=a[b];if("undefined"==typeof d)return a;for(b=0;a&&b<a.length;b++){if(d.is&&a[b]==d.$)return b;if(b==d)return new CKEDITOR.dom.element(a[b])}return d.is?-1:null}function g(d,c,e){var f=a(d),g;if((c?1!=f.length:2>f.length)||(g=d.getCommonAncestor())&&g.type==CKEDITOR.NODE_ELEMENT&&g.is("table"))return!1;var h;d=f[0];g=d.getAscendant("table");var k=CKEDITOR.tools.buildTableMap(g),l=k.length,m=k[0].length,n=d.getParent().$.rowIndex,q=b(k,n,d);if(c){var p;try{var w=parseInt(d.getAttribute("rowspan"),10)||1;h=parseInt(d.getAttribute("colspan"),10)||1;p=k["up"==c?n-w:"down"==c?n+w:n]["left"==c?q-h:"right"==c?q+h:q]}catch(H){return!1}if(!p||d.$==p)return!1;f["up"==c||"left"==c?"unshift":"push"](new CKEDITOR.dom.element(p))}c=d.getDocument();var G=n,w=p=0,O=!e&&new CKEDITOR.dom.documentFragment(c),P=0;for(c=0;c<f.length;c++){h=f[c];var I=h.getParent(),T=h.getFirst(),Q=h.$.colSpan,R=h.$.rowSpan,I=I.$.rowIndex,M=b(k,I,h),P=P+Q*R,w=Math.max(w,M-q+Q);p=Math.max(p,I-n+R);e||(Q=h,(R=Q.getBogus())&&R.remove(),Q.trim(),h.getChildren().count()&&(I==G||!T||T.isBlockBoundary&&T.isBlockBoundary({br:1})||(G=O.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!G||G.is&&G.is("br")||O.append("br")),h.moveChildren(O)),c?h.remove():h.setHtml(""));G=I}if(e)return p*w==P;O.moveChildren(d);d.appendBogus();w>=m?d.removeAttribute("rowSpan"):d.$.rowSpan=p;p>=l?d.removeAttribute("colSpan"):d.$.colSpan=w;e=new CKEDITOR.dom.nodeList(g.$.rows);f=e.count();for(c=f-1;0<=c;c--)g=e.getItem(c),g.$.cells.length||(g.remove(),f++);return d}function n(d,c){var e=a(d);if(1<e.length)return!1;if(c)return!0;var e=e[0],f=e.getParent(),g=f.getAscendant("table"),h=CKEDITOR.tools.buildTableMap(g),k=f.$.rowIndex,l=b(h,k,e),m=e.$.rowSpan,n;if(1<m){n=Math.ceil(m/2);for(var m=Math.floor(m/2),f=k+n,g=new CKEDITOR.dom.element(g.$.rows[f]),h=b(h,f),q,f=e.clone(),k=0;k<h.length;k++)if(q=h[k],q.parentNode==g.$&&k>l){f.insertBefore(new CKEDITOR.dom.element(q));break}else q=null;q||g.append(f)}else for(m=n=1,g=f.clone(),g.insertAfter(f),g.append(f=e.clone()),q=b(h,k),l=0;l<q.length;l++)q[l].rowSpan++;f.appendBogus();e.$.rowSpan=n;f.$.rowSpan=m;1==n&&e.removeAttribute("rowSpan");1==m&&f.removeAttribute("rowSpan");return f}function q(d,c){var e=a(d);if(1<e.length)return!1;if(c)return!0;var e=e[0],f=e.getParent(),g=f.getAscendant("table"),g=CKEDITOR.tools.buildTableMap(g),h=b(g,f.$.rowIndex,e),k=e.$.colSpan;if(1<k)f=Math.ceil(k/2),k=Math.floor(k/2);else{for(var k=f=1,l=[],m=0;m<g.length;m++){var n=g[m];l.push(n[h]);1<n[h].rowSpan&&(m+=n[h].rowSpan-1)}for(g=0;g<l.length;g++)l[g].colSpan++}g=e.clone();g.insertAfter(e);g.appendBogus();e.$.colSpan=f;g.$.colSpan=k;1==f&&e.removeAttribute("colSpan");1==k&&g.removeAttribute("colSpan");return g}var p=/^(?:td|th)$/,w=CKEDITOR.tools.isArray;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(b){function f(a){return CKEDITOR.tools.extend(a||{},{contextSensitive:1,refresh:function(a,b){this.setState(b.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function h(a,d){var c=b.addCommand(a,d);b.addFeature(c)}var p=b.lang.table,w=CKEDITOR.tools.style.parse;h("cellProperties",new CKEDITOR.dialogCommand("cellProperties",f({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table",contentTransformations:[[{element:"td",left:function(a){return a.styles.background&&w.background(a.styles.background).color},right:function(a){a.styles["background-color"]=w.background(a.styles.background).color}},{element:"td",check:"td{vertical-align}",left:function(a){return a.attributes&&a.attributes.valign},right:function(a){a.styles["vertical-align"]=a.attributes.valign;delete a.attributes.valign}}],[{element:"tr",check:"td{height}",left:function(a){return a.styles&&a.styles.height},right:function(a){CKEDITOR.tools.array.forEach(a.children,function(b){b.name in{td:1,th:1}&&(b.attributes["cke-row-height"]=a.styles.height)});delete a.styles.height}}],[{element:"td",check:"td{height}",left:function(a){return(a=a.attributes)&&a["cke-row-height"]},right:function(a){a.styles.height=a.attributes["cke-row-height"];delete a.attributes["cke-row-height"]}}]]})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");h("rowDelete",f({requiredContent:"table",exec:function(a){a=a.getSelection();(a=c(a))&&d(a)}}));h("rowInsertBefore",f({requiredContent:"table",exec:function(b){b=b.getSelection();b=a(b);e(b,!0)}}));h("rowInsertAfter",f({requiredContent:"table",exec:function(b){b=b.getSelection();b=a(b);e(b)}}));h("columnDelete",f({requiredContent:"table",exec:function(b){var c=b.getSelection();b=c.getRanges();var e=a(c),f=e[0],g=e[e.length-1],e=f.getAscendant("table"),h=CKEDITOR.tools.buildTableMap(e),k,l,m=[];c.reset();for(var n=0,c=h.length;n<c;n++)for(var u=0,q=h[n].length;u<q;u++)h[n][u]==f.$&&(k=u),h[n][u]==g.$&&(l=u);for(n=k;n<=l;n++)for(u=0;u<h.length;u++)g=h[u],f=new CKEDITOR.dom.element(e.$.rows[u]),g=new CKEDITOR.dom.element(g[n]),g.$&&(1==g.$.colSpan?g.remove():--g.$.colSpan,u+=g.$.rowSpan-1,f.$.cells.length||m.push(f));l=e.$.rows[0]&&e.$.rows[0].cells;k=new CKEDITOR.dom.element(l[k]||(k?l[k-1]:e.$.parentNode));m.length==c&&(b[0].moveToPosition(e,CKEDITOR.POSITION_AFTER_END),b[0].select(),e.remove());k&&d(k,!0)}}));h("columnInsertBefore",f({requiredContent:"table",exec:function(b){b=b.getSelection();b=a(b);m(b,!0)}}));h("columnInsertAfter",f({requiredContent:"table",exec:function(b){b=b.getSelection();b=a(b);m(b)}}));h("cellDelete",f({requiredContent:"table",exec:function(a){a=a.getSelection();k(a)}}));h("cellMerge",f({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(a,b){b.cell=g(a.getSelection());d(b.cell,!0)}}));h("cellMergeRight",f({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a,b){b.cell=g(a.getSelection(),"right");d(b.cell,!0)}}));h("cellMergeDown",f({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a,b){b.cell=g(a.getSelection(),"down");d(b.cell,!0)}}));h("cellVerticalSplit",f({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(a){d(q(a.getSelection()))}}));h("cellHorizontalSplit",f({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(a){d(n(a.getSelection()))}}));h("cellInsertBefore",f({requiredContent:"table",exec:function(a){a=a.getSelection();l(a,!0)}}));h("cellInsertAfter",f({requiredContent:"table",exec:function(a){a=a.getSelection();l(a)}}));b.addMenuItems&&b.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var d=b.getSelection(),c=a(d);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:g(d,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:g(d,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:g(d,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:q(d,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:n(d,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<c.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});b.contextMenu&&b.contextMenu.addListener(function(a,b,d){return(a=d.contains({td:1,th:1},1))&&!a.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getCellColIndex:f,insertRow:e,insertColumn:m,getSelectedCells:a};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(a,e,c,f,h){a=a.$.rows;c=c||0;f="number"===typeof f?f:a.length-1;h="number"===typeof h?h:-1;var m=-1,l=[];for(e=e||0;e<=f;e++){m++;!l[m]&&(l[m]=[]);for(var k=-1,d=c;d<=(-1===h?a[e].cells.length-1:h);d++){var b=a[e].cells[d];if(!b)break;for(k++;l[m][k];)k++;for(var g=isNaN(b.colSpan)?1:b.colSpan,b=isNaN(b.rowSpan)?1:b.rowSpan,n=0;n<b&&!(e+n>f);n++){l[m+
n]||(l[m+n]=[]);for(var q=0;q<g;q++)l[m+n][k+q]=a[e].cells[d]}k+=g-1;if(-1!==h&&k>=h)break}}return l},function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(a){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));a.addCommand("templates",new CKEDITOR.dialogCommand("templates"));a.ui.addButton&&a.ui.addButton("Templates",{label:a.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var a={},e={};CKEDITOR.addTemplates=function(c,e){a[c]=e};CKEDITOR.getTemplates=function(c){return a[c]};CKEDITOR.loadTemplates=function(a,f){for(var h=[],m=0,l=a.length;m<l;m++)e[a[m]]||(h.push(a[m]),e[a[m]]=1);h.length?CKEDITOR.scriptLoader.load(h,f):setTimeout(f,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,"use strict",function(){var a=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],e={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(e){function d(a){f.enabled&&!1!==a.data.command.canUndo&&f.save()}function b(){f.enabled=e.readOnly?!1:"wysiwyg"==e.mode;f.onChange()}var f=e.undoManager=new c(e),h=f.editingHandler=new m(f),l=e.addCommand("undo",{exec:function(){f.undo()&&(e.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),p=e.addCommand("redo",{exec:function(){f.redo()&&(e.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});e.setKeystroke([[a[0],"undo"],[a[1],"redo"],[a[2],"redo"]]);f.onChange=function(){l.setState(f.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);p.setState(f.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};e.on("beforeCommandExec",d);e.on("afterCommandExec",d);e.on("saveSnapshot",function(a){f.save(a.data&&a.data.contentOnly)});e.on("contentDom",h.attachListeners,h);e.on("instanceReady",function(){e.fire("saveSnapshot")});e.on("beforeModeUnload",function(){"wysiwyg"==e.mode&&f.save(!0)});e.on("mode",b);e.on("readOnly",b);e.ui.addButton&&(e.ui.addButton("Undo",{label:e.lang.undo.undo,command:"undo",toolbar:"undo,10"}),e.ui.addButton("Redo",{label:e.lang.undo.redo,command:"redo",toolbar:"undo,20"}));e.resetUndo=function(){f.reset();e.fire("saveSnapshot")};e.on("updateSnapshot",function(){f.currentImage&&f.update()});e.on("lockSnapshot",function(a){a=a.data;f.lock(a&&a.dontUpdate,a&&a.forceUpdate)});e.on("unlockSnapshot",f.unlock,f)}});CKEDITOR.plugins.undo={};var c=CKEDITOR.plugins.undo.UndoManager=function(a){this.strokesRecorded=[0,0];this.locked=null;this.previousKeyGroup=-1;this.limit=a.config.undoStackSize||20;this.strokesLimit=25;this.editor=a;this.reset()};c.prototype={type:function(a,d){var b=c.getKeyGroup(a),e=this.strokesRecorded[b]+1;d=d||e>=this.strokesLimit;this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange());d?(e=0,this.editor.fire("saveSnapshot")):this.editor.fire("change");this.strokesRecorded[b]=e;this.previousKeyGroup=b},keyGroupChanged:function(a){return c.getKeyGroup(a)!=this.previousKeyGroup},reset:function(){this.snapshots=[];this.index=-1;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.strokesRecorded=[0,0];this.typing=!1;this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(a,d,b){var c=this.editor;if(this.locked||"ready"!=c.status||"wysiwyg"!=c.mode)return!1;var e=c.editable();if(!e||"ready"!=e.status)return!1;e=this.snapshots;d||(d=new f(c));if(!1===d.contents)return!1;if(this.currentImage)if(d.equalsContent(this.currentImage)){if(a||d.equalsSelection(this.currentImage))return!1}else!1!==b&&c.fire("change");e.splice(this.index+1,e.length-this.index-1);e.length==this.limit&&e.shift();this.index=e.push(d)-1;this.currentImage=d;!1!==b&&this.refreshState();return!0},restoreImage:function(a){var d=this.editor,b;a.bookmarks&&(d.focus(),b=d.getSelection());this.locked={level:999};this.editor.loadSnapshot(a.contents);a.bookmarks?b.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(b=this.editor.document.getBody().$.createTextRange(),b.collapse(!0),b.select());this.locked=null;this.index=a.index;this.currentImage=this.snapshots[this.index];this.update();this.refreshState();d.fire("change")},getNextImage:function(a){var d=this.snapshots,b=this.currentImage,c;if(b)if(a)for(c=this.index-1;0<=c;c--){if(a=d[c],!b.equalsContent(a))return a.index=c,a}else for(c=this.index+1;c<d.length;c++)if(a=d[c],!b.equalsContent(a))return a.index=c,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new f(this.editor));for(var d=this.index,b=this.snapshots;0<d&&this.currentImage.equalsContent(b[d-1]);)--d;b.splice(d,this.index-
d+1,a);this.index=d;this.currentImage=a}},updateSelection:function(a){if(!this.snapshots.length)return!1;var d=this.snapshots,b=d[d.length-1];return b.equalsContent(a)&&!b.equalsSelection(a)?(this.currentImage=d[d.length-1]=a,!0):!1},lock:function(a,d){if(this.locked)this.locked.level++;else if(a)this.locked={level:1};else{var b=null;if(d)b=!0;else{var c=new f(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(c)&&(b=c)}this.locked={update:b,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update;this.locked=null;if(!0===a)this.update();else if(a){var d=new f(this.editor,!0);a.equalsContent(d)||this.update()}}}};c.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1};c.keyGroups={PRINTABLE:0,FUNCTIONAL:1};c.isNavigationKey=function(a){return!!c.navigationKeyCodes[a]};c.getKeyGroup=function(a){var d=c.keyGroups;return e[a]?d.FUNCTIONAL:d.PRINTABLE};c.getOppositeKeyGroup=function(a){var d=c.keyGroups;return a==d.FUNCTIONAL?d.PRINTABLE:d.FUNCTIONAL};c.ieFunctionalKeysBug=function(a){return CKEDITOR.env.ie&&c.getKeyGroup(a)==c.keyGroups.FUNCTIONAL};var f=CKEDITOR.plugins.undo.Image=function(a,d){this.editor=a;a.fire("beforeUndoImage");var b=a.getSnapshot();CKEDITOR.env.ie&&b&&(b=b.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=b;d||(this.bookmarks=(b=b&&a.getSelection())&&b.createBookmarks2(!0));a.fire("afterUndoImage")},h=/\b(?:href|src|name)="[^"]*?"/gi;f.prototype={equalsContent:function(a){var d=this.contents;a=a.contents;CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(d=d.replace(h,""),a=a.replace(h,""));return d!=a?!1:!0},equalsSelection:function(a){var d=this.bookmarks;a=a.bookmarks;if(d||a){if(!d||!a||d.length!=a.length)return!1;for(var b=0;b<d.length;b++){var c=d[b],e=a[b];if(c.startOffset!=e.startOffset||c.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(c.start,e.start)||!CKEDITOR.tools.arrayCompare(c.end,e.end))return!1}}return!0}};var m=CKEDITOR.plugins.undo.NativeEditingHandler=function(a){this.undoManager=a;this.ignoreInputEvent=!1;this.keyEventsStack=new l;this.lastKeydownImage=null};m.prototype={onKeydown:function(e){var d=e.data.getKey();if(229!==d)if(-1<CKEDITOR.tools.indexOf(a,e.data.getKeystroke()))e.data.preventDefault();else if(this.keyEventsStack.cleanUp(e),e=this.undoManager,this.keyEventsStack.getLast(d)||this.keyEventsStack.push(d),this.lastKeydownImage=new f(e.editor),c.isNavigationKey(d)||this.undoManager.keyGroupChanged(d))if(e.strokesRecorded[0]||e.strokesRecorded[1])e.save(!1,this.lastKeydownImage,!1),e.resetType()},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var a=this.keyEventsStack.getLast();a||(a=this.keyEventsStack.push(0));this.keyEventsStack.increment(a.keyCode);this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(a.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(a){var d=this.undoManager;a=a.data.getKey();var b=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(a);if(!(c.ieFunctionalKeysBug(a)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new f(d.editor,!0))))if(0<b)d.type(a);else if(c.isNavigationKey(a))this.onNavigationKey(!0)},onNavigationKey:function(a){var c=this.undoManager;!a&&c.save(!0,null,!1)||c.updateSelection(new f(c.editor));c.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var a=this.undoManager.editor,d=a.editable(),b=this;d.attachListener(d,"keydown",function(a){b.onKeydown(a);if(c.ieFunctionalKeysBug(a.data.getKey()))b.onInput()},null,null,999);d.attachListener(d,CKEDITOR.env.ie?"keypress":"input",b.onInput,b,null,999);d.attachListener(d,"keyup",b.onKeyup,b,null,999);d.attachListener(d,"paste",b.ignoreInputEventListener,b,null,999);d.attachListener(d,"drop",b.ignoreInputEventListener,b,null,999);d.attachListener(d.isInline()?d:a.document.getDocumentElement(),"click",function(){b.onNavigationKey()},null,null,999);d.attachListener(this.undoManager.editor,"blur",function(){b.keyEventsStack.remove(9)},null,null,999)}};var l=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};l.prototype={push:function(a){a=this.stack.push({keyCode:a,inputs:0});return this.stack[a-1]},getLastIndex:function(a){if("number"!=typeof a)return this.stack.length-1;for(var c=this.stack.length;c--;)if(this.stack[c].keyCode==a)return c;return-1},getLast:function(a){a=this.getLastIndex(a);return-1!=a?this.stack[a]:null},increment:function(a){this.getLast(a).inputs++},remove:function(a){a=this.getLastIndex(a);-1!=a&&this.stack.splice(a,1)},resetInputs:function(a){if("number"==typeof a)this.getLast(a).inputs=0;else for(a=this.stack.length;a--;)this.stack[a].inputs=0},getTotalInputs:function(){for(var a=this.stack.length,c=0;a--;)c+=this.stack[a].inputs;return c},cleanUp:function(a){a=a.data.$;a.ctrlKey||a.metaKey||this.remove(17);a.shiftKey||this.remove(16);a.altKey||this.remove(18)}}}(),function(){function a(a){function c(a){var b=!1;g.attachListener(g,"keydown",function(){var c=k.getBody().getElementsByTag(a);if(!b){for(var d=0;d<c.count();d++)c.getItem(d).setCustomData("retain",!0);b=!0}},null,null,1);g.attachListener(g,"keyup",function(){var c=k.getElementsByTag(a);b&&(1!=c.count()||c.getItem(0).getCustomData("retain")||c.getItem(0).hasAttribute("data-cke-temp")||c.getItem(0).remove(1),b=!1)})}var f=this.editor,k=a.document,d=k.body,b=k.getElementById("cke_actscrpt");b&&b.parentNode.removeChild(b);(b=k.getElementById("cke_shimscrpt"))&&b.parentNode.removeChild(b);(b=k.getElementById("cke_basetagscrpt"))&&b.parentNode.removeChild(b);d.contentEditable=!0;CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled"));delete this._.isLoadingData;this.$=d;k=new CKEDITOR.dom.document(k);this.setup();this.fixInitialSelection();var g=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&k.getDocumentElement().addClass(k.$.compatMode);CKEDITOR.env.ie&&!CKEDITOR.env.edge&&f.enterMode!=CKEDITOR.ENTER_P?c("p"):CKEDITOR.env.edge&&f.enterMode!=CKEDITOR.ENTER_DIV&&c("div");if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)k.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){f.editable().focus()})});e(f);try{f.document.$.execCommand("2D-position",!1,!0)}catch(n){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==f.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var b=a.data.getKeystroke();if(33==b||34==b)if(CKEDITOR.env.ie)setTimeout(function(){f.getSelection().scrollIntoView()},0);else if(f.window.$.innerHeight>this.$.offsetHeight){var c=f.createRange();c[33==b?"moveToElementEditStart":"moveToElementEditEnd"](this);c.select();a.data.preventDefault()}});CKEDITOR.env.ie&&this.attachListener(k,"blur",function(){try{k.$.selection.empty()}catch(a){}});CKEDITOR.env.iOS&&this.attachListener(k,"touchend",function(){a.focus()});d=f.document.getElementsByTag("title").getItem(0);d.data("cke-title",d.getText());CKEDITOR.env.ie&&(f.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){"unloaded"==this.status&&(this.status="ready");f.fire("contentDom");this._.isPendingFocus&&(f.focus(),this._.isPendingFocus=!1);setTimeout(function(){f.fire("dataReady")},0)},0,this)}function e(a){function c(){var b;a.editable().attachListener(a,"selectionChange",function(){var c=a.getSelection().getSelectedElement();c&&(b&&(b.detachEvent("onresizestart",e),b=null),c.$.attachEvent("onresizestart",e),b=c.$)})}function e(a){a.returnValue=!1}if(CKEDITOR.env.gecko)try{var f=a.document.$;f.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing);f.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch(d){}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&c(a)}function c(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable\x3dfalse]{min-height:0 !important}");var c=[],e;for(e in CKEDITOR.dtd.$removeEmpty)c.push("html.CSS1Compat "+e+"[contenteditable\x3dfalse]");a.push(c.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));a.push("html{cursor:text;*cursor:auto}");a.push("img,input,textarea{cursor:default}");return a.join("\n")}var f;CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});a.addMode("wysiwyg",function(c){function e(b){b&&b.removeListener();a.editable(new f(a,d.$.contentWindow.document.body));a.setData(a.getData(1),c)}var k="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+
")();":"")+"document.close();",k=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(k)+"}())":"",d=CKEDITOR.dom.element.createFromHtml('\x3ciframe src\x3d"'+k+'" frameBorder\x3d"0"\x3e\x3c/iframe\x3e');d.setStyles({width:"100%",height:"100%"});d.addClass("cke_wysiwyg_frame").addClass("cke_reset");k=a.ui.space("contents");k.append(d);var b=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;if(b)d.on("load",e);var g=a.title,n=a.fire("ariaEditorHelpLabel",{}).label;g&&(CKEDITOR.env.ie&&n&&(g+=", "+n),d.setAttribute("title",g));if(n){var g=CKEDITOR.tools.getNextId(),q=CKEDITOR.dom.element.createFromHtml('\x3cspan id\x3d"'+g+'" class\x3d"cke_voice_label"\x3e'+n+"\x3c/span\x3e");k.append(q,1);d.setAttribute("aria-describedby",g)}a.on("beforeModeUnload",function(a){a.removeListener();q&&q.remove()});d.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"});!b&&e();a.fire("ariaWidget",d)})}});CKEDITOR.editor.prototype.addContentsCss=function(a){var c=this.config,e=c.contentsCss;CKEDITOR.tools.isArray(e)||(c.contentsCss=e?[e]:[]);c.contentsCss.push(a)};f=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(c){CKEDITOR.tools.setTimeout(a,0,this,c)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,e){var f=this.editor;if(e)this.setHtml(a),this.fixInitialSelection(),f.fire("dataReady");else{this._.isLoadingData=!0;f._.dataStore={id:1};var k=f.config,d=k.fullPage,b=k.docType,g=CKEDITOR.tools.buildStyleHtml(c()).replace(/<style>/,'\x3cstyle data-cke-temp\x3d"1"\x3e');d||(g+=CKEDITOR.tools.buildStyleHtml(f.config.contentsCss));var n=k.baseHref?'\x3cbase href\x3d"'+k.baseHref+'" data-cke-temp\x3d"1" /\x3e':"";d&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){f.docType=b=a;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){f.xmlDeclaration=a;return""}));a=f.dataProcessor.toHtml(a);d?(/<body[\s|>]/.test(a)||(a="\x3cbody\x3e"+a),/<html[\s|>]/.test(a)||(a="\x3chtml\x3e"+a+"\x3c/html\x3e"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$\x26\x3ctitle\x3e\x3c/title\x3e")):a=a.replace(/<html[^>]*>/,"$\x26\x3chead\x3e\x3ctitle\x3e\x3c/title\x3e\x3c/head\x3e"),n&&(a=a.replace(/<head[^>]*?>/,"$\x26"+n)),a=a.replace(/<\/head\s*>/,g+"$\x26"),a=b+a):a=k.docType+'\x3chtml dir\x3d"'+k.contentsLangDirection+'" lang\x3d"'+(k.contentsLanguage||f.langCode)+'"\x3e\x3chead\x3e\x3ctitle\x3e'+
this._.docTitle+"\x3c/title\x3e"+n+g+"\x3c/head\x3e\x3cbody"+(k.bodyId?' id\x3d"'+k.bodyId+'"':"")+(k.bodyClass?' class\x3d"'+k.bodyClass+'"':"")+"\x3e"+a+"\x3c/body\x3e\x3c/html\x3e";CKEDITOR.env.gecko&&(a=a.replace(/<body/,'\x3cbody contenteditable\x3d"true" '),2E4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$\x26\x3c!-- cke-content-start --\x3e")));k='\x3cscript id\x3d"cke_actscrpt" type\x3d"text/javascript"'+(CKEDITOR.env.ie?' defer\x3d"defer" ':"")+"\x3evar wasLoaded\x3d0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+
this._.frameLoadedHandler+",window);wasLoaded\x3d1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script\x3e";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(k+='\x3cscript id\x3d"cke_shimscrpt"\x3ewindow.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script\x3e');n&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(k+='\x3cscript id\x3d"cke_basetagscrpt"\x3evar baseTag \x3d document.querySelector( "base" );baseTag.href \x3d baseTag.href;\x3c/script\x3e');a=a.replace(/(?=\s*<\/(:?head)>)/,k);this.clearCustomData();this.clearListeners();f.fire("contentDomUnload");var q=this.getDocument();try{q.write(a)}catch(p){setTimeout(function(){q.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var c=a.config,e=c.fullPage,f=e&&a.docType,d=e&&a.xmlDeclaration,b=this.getDocument(),e=e?b.getDocumentElement().getOuterHtml():b.getBody().getHtml();CKEDITOR.env.gecko&&c.enterMode!=CKEDITOR.ENTER_BR&&(e=e.replace(/<br>(?=\s*(:?$|<\/body>))/,""));e=a.dataProcessor.toDataFormat(e);d&&(e=d+"\n"+e);f&&(e=f+"\n"+e);return e},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:f.baseProto.focus.call(this)},detach:function(){var a=this.editor,c=a.document,e;try{e=a.window.getFrame()}catch(k){}f.baseProto.detach.call(this);this.clearCustomData();c.getDocumentElement().clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);e&&e.getParent()?(e.clearCustomData(),(a=e.removeCustomData("onResize"))&&a.removeListener(),e.remove()):CKEDITOR.warn("editor-destroy-iframe")}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,"use strict",function(){function a(a,b){CKEDITOR.tools.extend(this,{editor:a,editable:a.editable(),doc:a.document,win:a.window},b,!0);this.inline=this.editable.isInline();this.inline||(this.frame=this.win.getFrame());this.target=this[this.inline?"editable":"doc"]}function e(a,b){CKEDITOR.tools.extend(this,b,{editor:a},!0)}function c(a,b){var c=a.editable();CKEDITOR.tools.extend(this,{editor:a,editable:c,inline:c.isInline(),doc:a.document,win:a.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},b,!0);this.hidden={};this.visible={};this.inline||(this.frame=this.win.getFrame());this.queryViewport();var e=CKEDITOR.tools.bind(this.queryViewport,this),f=CKEDITOR.tools.bind(this.hideVisible,this),k=CKEDITOR.tools.bind(this.removeAll,this);c.attachListener(this.winTop,"resize",e);c.attachListener(this.winTop,"scroll",e);c.attachListener(this.winTop,"resize",f);c.attachListener(this.win,"scroll",f);c.attachListener(this.inline?c:this.frame,"mouseout",function(a){var b=a.data.$.clientX;a=a.data.$.clientY;this.queryViewport();(b<=this.rect.left||b>=this.rect.right||a<=this.rect.top||a>=this.rect.bottom)&&this.hideVisible();(0>=b||b>=this.winTopPane.width||0>=a||a>=this.winTopPane.height)&&this.hideVisible()},this);c.attachListener(a,"resize",e);c.attachListener(a,"mode",k);a.on("destroy",k);this.lineTpl=(new CKEDITOR.template('\x3cdiv data-cke-lineutils-line\x3d"1" class\x3d"cke_reset_all" style\x3d"{lineStyle}"\x3e\x3cspan style\x3d"{tipLeftStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3cspan style\x3d"{tipRightStyle}"\x3e\x26nbsp;\x3c/span\x3e\x3c/div\x3e')).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},m,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},h,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},h,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})}function f(a){var b;if(b=a&&a.type==CKEDITOR.NODE_ELEMENT)b=!(l[a.getComputedStyle("float")]||l[a.getAttribute("align")]);return b&&!k[a.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils");CKEDITOR.LINEUTILS_BEFORE=1;CKEDITOR.LINEUTILS_AFTER=2;CKEDITOR.LINEUTILS_INSIDE=4;a.prototype={start:function(a){var b=this,c=this.editor,e=this.doc,f,h,k,l,m=CKEDITOR.tools.eventsBuffer(50,function(){c.readOnly||"wysiwyg"!=c.mode||(b.relations={},(h=e.$.elementFromPoint(k,l))&&h.nodeType&&(f=new CKEDITOR.dom.element(h),b.traverseSearch(f),isNaN(k+l)||b.pixelSearch(f,k,l),a&&a(b.relations,k,l)))});this.listener=this.editable.attachListener(this.target,"mousemove",function(a){k=a.data.$.clientX;l=a.data.$.clientY;m.input()});this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){m.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var a={};a[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START;a[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END;a[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START;return function(b){var c=this.editor.createRange();c.moveToPosition(this.relations[b.uid].element,a[b.type]);return c}}(),store:function(){function a(b,c,d){var e=b.getUniqueId();e in d?d[e].type|=c:d[e]={element:b,type:c}}return function(b,c){var e;c&CKEDITOR.LINEUTILS_AFTER&&f(e=b.getNext())&&e.isVisible()&&(a(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),c^=CKEDITOR.LINEUTILS_AFTER);c&CKEDITOR.LINEUTILS_INSIDE&&f(e=b.getFirst())&&e.isVisible()&&(a(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),c^=CKEDITOR.LINEUTILS_INSIDE);a(b,c,this.relations)}}(),traverseSearch:function(a){var b,c,e;do if(e=a.$["data-cke-expando"],!(e&&e in this.relations)){if(a.equals(this.editable))break;if(f(a))for(b in this.lookups)(c=this.lookups[b](a))&&this.store(a,c)}while((!a||a.type!=CKEDITOR.NODE_ELEMENT||"true"!=a.getAttribute("contenteditable"))&&(a=a.getParent()))},pixelSearch:function(){function a(c,d,e,h,k){for(var l=0,m;k(e);){e+=h;if(25==++l)break;if(m=this.doc.$.elementFromPoint(d,e))if(m==c)l=0;else if(b(c,m)&&(l=0,f(m=new CKEDITOR.dom.element(m))))return m}}var b=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a,b){return a.contains(b)}:function(a,b){return!!(a.compareDocumentPosition(b)&16)};return function(b,c,e){var h=this.win.getViewPaneSize().height,k=a.call(this,b.$,c,e,-1,function(a){return 0<a});c=a.call(this,b.$,c,e,1,function(a){return a<h});if(k)for(this.traverseSearch(k);!k.getParent().equals(b);)k=k.getParent();if(c)for(this.traverseSearch(c);!c.getParent().equals(b);)c=c.getParent();for(;k||c;){k&&(k=k.getNext(f));if(!k||k.equals(c))break;this.traverseSearch(k);c&&(c=c.getPrevious(f));if(!c||c.equals(k))break;this.traverseSearch(c)}}}(),greedySearch:function(){this.relations={};for(var a=this.editable.getElementsByTag("*"),b=0,c,e,h;c=a.getItem(b++);)if(!c.equals(this.editable)&&c.type==CKEDITOR.NODE_ELEMENT&&(c.hasAttribute("contenteditable")||!c.isReadOnly())&&f(c)&&c.isVisible())for(h in this.lookups)(e=this.lookups[h](c))&&this.store(c,e);return this.relations}};e.prototype={locate:function(){function a(b,c){var d=b.element[c===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();return d&&f(d)?(b.siblingRect=d.getClientRect(),c==CKEDITOR.LINEUTILS_BEFORE?(b.siblingRect.bottom+b.elementRect.top)/2:(b.elementRect.bottom+b.siblingRect.top)/
2):c==CKEDITOR.LINEUTILS_BEFORE?b.elementRect.top:b.elementRect.bottom}return function(b){var c;this.locations={};for(var e in b)c=b[e],c.elementRect=c.element.getClientRect(),c.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(e,CKEDITOR.LINEUTILS_BEFORE,a(c,CKEDITOR.LINEUTILS_BEFORE)),c.type&CKEDITOR.LINEUTILS_AFTER&&this.store(e,CKEDITOR.LINEUTILS_AFTER,a(c,CKEDITOR.LINEUTILS_AFTER)),c.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(e,CKEDITOR.LINEUTILS_INSIDE,(c.elementRect.top+c.elementRect.bottom)/2);return this.locations}}(),sort:function(){var a,b,c,e;return function(f,h){a=this.locations;b=[];for(var k in a)for(var l in a[k])if(c=Math.abs(f-a[k][l]),b.length){for(e=0;e<b.length;e++)if(c<b[e].dist){b.splice(e,0,{uid:+k,type:l,dist:c});break}e==b.length&&b.push({uid:+k,type:l,dist:c})}else b.push({uid:+k,type:l,dist:c});return"undefined"!=typeof h?b.slice(0,h):b}}(),store:function(a,b,c){this.locations[a]||(this.locations[a]={});this.locations[a][b]=c}};var h={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},m={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999};c.prototype={removeAll:function(){for(var a in this.hidden)this.hidden[a].remove(),delete this.hidden[a];for(a in this.visible)this.visible[a].remove(),delete this.visible[a]},hideLine:function(a){var b=a.getUniqueId();a.hide();this.hidden[b]=a;delete this.visible[b]},showLine:function(a){var b=a.getUniqueId();a.show();this.visible[b]=a;delete this.hidden[b]},hideVisible:function(){for(var a in this.visible)this.hideLine(this.visible[a])},placeLine:function(a,b){var c,e,f;if(c=this.getStyle(a.uid,a.type)){for(f in this.visible)if(this.visible[f].getCustomData("hash")!==this.hash){e=this.visible[f];break}if(!e)for(f in this.hidden)if(this.hidden[f].getCustomData("hash")!==this.hash){this.showLine(e=this.hidden[f]);break}e||this.showLine(e=this.addLine());e.setCustomData("hash",this.hash);this.visible[e.getUniqueId()]=e;e.setStyles(c);b&&b(e)}},getStyle:function(a,b){var c=this.relations[a],e=this.locations[a][b],f={};f.width=c.siblingRect?Math.max(c.siblingRect.width,c.elementRect.width):c.elementRect.width;f.top=this.inline?e+this.winTopScroll.y-this.rect.relativeY:this.rect.top+this.winTopScroll.y+e;if(f.top-this.winTopScroll.y<this.rect.top||f.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?f.left=c.elementRect.left-this.rect.relativeX:(0<c.elementRect.left?f.left=this.rect.left+c.elementRect.left:(f.width+=c.elementRect.left,f.left=this.rect.left),0<(c=f.left+f.width-(this.rect.left+this.winPane.width))&&(f.width-=c));f.left+=this.winTopScroll.x;for(var h in f)f[h]=CKEDITOR.tools.cssLength(f[h]);return f},addLine:function(){var a=CKEDITOR.dom.element.createFromHtml(this.lineTpl);a.appendTo(this.container);return a},prepare:function(a,b){this.relations=a;this.locations=b;this.hash=Math.random()},cleanup:function(){var a,b;for(b in this.visible)a=this.visible[b],a.getCustomData("hash")!==this.hash&&this.hideLine(a)},queryViewport:function(){this.winPane=this.win.getViewPaneSize();this.winTopScroll=this.winTop.getScrollPosition();this.winTopPane=this.winTop.getViewPaneSize();this.rect=this.getClientRect(this.inline?this.editable:this.frame)},getClientRect:function(a){a=a.getClientRect();var b=this.container.getDocumentPosition(),c=this.container.getComputedStyle("position");a.relativeX=a.relativeY=0;"static"!=c&&(a.relativeY=b.y,a.relativeX=b.x,a.top-=a.relativeY,a.bottom-=a.relativeY,a.left-=a.relativeX,a.right-=a.relativeX);return a}};var l={left:1,right:1,center:1},k={absolute:1,fixed:1};CKEDITOR.plugins.lineutils={finder:a,locator:e,liner:c}}(),function(){function a(a){return a.getName&&!a.hasAttribute("data-cke-temp")}CKEDITOR.plugins.add("widgetselection",{init:function(a){if(CKEDITOR.env.webkit){var c=CKEDITOR.plugins.widgetselection;a.on("contentDom",function(a){a=a.editor;var e=a.document,m=a.editable();m.attachListener(e,"keydown",function(a){var e=a.data.$;65==a.data.getKey()&&(CKEDITOR.env.mac&&e.metaKey||!CKEDITOR.env.mac&&e.ctrlKey)&&CKEDITOR.tools.setTimeout(function(){c.addFillers(m)||c.removeFillers(m)},0)},null,null,-1);a.on("selectionCheck",function(a){c.removeFillers(a.editor.editable())});a.on("paste",function(a){a.data.dataValue=c.cleanPasteData(a.data.dataValue)});"selectall"in a.plugins&&c.addSelectAllIntegration(a)})}}});CKEDITOR.plugins.widgetselection={startFiller:null,endFiller:null,fillerAttribute:"data-cke-filler-webkit",fillerContent:"\x26nbsp;",fillerTagName:"div",addFillers:function(e){var c=e.editor;if(!this.isWholeContentSelected(e)&&0<e.getChildCount()){var f=e.getFirst(a),h=e.getLast(a);f&&f.type==CKEDITOR.NODE_ELEMENT&&!f.isEditable()&&(this.startFiller=this.createFiller(),e.append(this.startFiller,1));h&&h.type==CKEDITOR.NODE_ELEMENT&&!h.isEditable()&&(this.endFiller=this.createFiller(!0),e.append(this.endFiller,0));if(this.hasFiller(e))return c=c.createRange(),c.selectNodeContents(e),c.select(),!0}return!1},removeFillers:function(a){if(this.hasFiller(a)&&!this.isWholeContentSelected(a)){var c=a.findOne(this.fillerTagName+"["+this.fillerAttribute+"\x3dstart]"),f=a.findOne(this.fillerTagName+
"["+this.fillerAttribute+"\x3dend]");this.startFiller&&c&&this.startFiller.equals(c)?this.removeFiller(this.startFiller,a):this.startFiller=c;this.endFiller&&f&&this.endFiller.equals(f)?this.removeFiller(this.endFiller,a):this.endFiller=f}},cleanPasteData:function(a){a&&a.length&&(a=a.replace(this.createFillerRegex(),"").replace(this.createFillerRegex(!0),""));return a},isWholeContentSelected:function(a){var c=a.editor.getSelection().getRanges()[0];return!c||c&&c.collapsed?!1:(c=c.clone(),c.enlarge(CKEDITOR.ENLARGE_ELEMENT),!!(c&&a&&c.startContainer&&c.endContainer&&0===c.startOffset&&c.endOffset===a.getChildCount()&&c.startContainer.equals(a)&&c.endContainer.equals(a)))},hasFiller:function(a){return 0<a.find(this.fillerTagName+"["+this.fillerAttribute+"]").count()},createFiller:function(a){var c=new CKEDITOR.dom.element(this.fillerTagName);c.setHtml(this.fillerContent);c.setAttribute(this.fillerAttribute,a?"end":"start");c.setAttribute("data-cke-temp",1);c.setStyles({display:"block",width:0,height:0,padding:0,border:0,margin:0,position:"absolute",top:0,left:"-9999px",opacity:0,overflow:"hidden"});return c},removeFiller:function(a,c){if(a){var f=c.editor,h=c.editor.getSelection().getRanges()[0].startPath(),m=f.createRange(),l,k;h.contains(a)&&(l=a.getHtml(),k=!0);h="start"==a.getAttribute(this.fillerAttribute);a.remove();l&&0<l.length&&l!=this.fillerContent?(c.insertHtmlIntoRange(l,f.getSelection().getRanges()[0]),m.setStartAt(c.getChild(c.getChildCount()-1),CKEDITOR.POSITION_BEFORE_END),f.getSelection().selectRanges([m])):k&&(h?m.setStartAt(c.getFirst().getNext(),CKEDITOR.POSITION_AFTER_START):m.setEndAt(c.getLast().getPrevious(),CKEDITOR.POSITION_BEFORE_END),c.editor.getSelection().selectRanges([m]))}},createFillerRegex:function(a){var c=this.createFiller(a).getOuterHtml().replace(/style="[^"]*"/gi,'style\x3d"[^"]*"').replace(/>[^<]*</gi,"\x3e[^\x3c]*\x3c");return new RegExp((a?"":"^")+c+(a?"$":""))},addSelectAllIntegration:function(a){var c=this;a.editable().attachListener(a,"beforeCommandExec",function(f){var h=a.editable();"selectAll"==f.data.name&&h&&c.addFillers(h)},null,null,9999)}}}(),"use strict",function(){function a(a){this.editor=a;this.registered={};this.instances={};this.selected=[];this.widgetHoldingFocusedEditable=this.focused=null;this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}};D(this);y(this);this.on("checkWidgets",l);this.editor.on("contentDomInvalidated",this.checkWidgets,this);r(this);v(this);x(this);t(this);A(this)}function e(a,b,c,d,f){var g=a.editor;CKEDITOR.tools.extend(this,d,{editor:g,id:b,inline:"span"==c.getParent().getName(),element:c,data:CKEDITOR.tools.extend({},"function"==typeof d.defaults?d.defaults():d.defaults),dataReady:!1,inited:!1,ready:!1,edit:e.prototype.edit,focusedEditable:null,definition:d,repository:a,draggable:!1!==d.draggable,_:{downcastFn:d.downcast&&"string"==typeof d.downcast?d.downcasts[d.downcast]:d.downcast}},!0);a.fire("instanceCreated",this);U(this,d);this.init&&this.init();this.inited=!0;(a=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(decodeURIComponent(a)));f&&this.setData(f);this.data.classes||this.setData("classes",this.getClasses());this.dataReady=!0;L(this);this.fire("data",this.data);this.isInited()&&g.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))}function c(a,b,c){CKEDITOR.dom.element.call(this,b.$);this.editor=a;this._={};b=this.filter=c.filter;CKEDITOR.dtd[this.getName()].p?(this.enterMode=b?b.getAllowedEnterMode(a.enterMode):a.enterMode,this.shiftEnterMode=b?b.getAllowedEnterMode(a.shiftEnterMode,!0):a.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function f(a,b){a.addCommand(b.name,{exec:function(a,c){function d(){a.widgets.finalizeCreation(h)}var e=a.widgets.focused;if(e&&e.name==b.name)e.edit();else if(b.insert)b.insert();else if(b.template){var e="function"==typeof b.defaults?b.defaults():b.defaults,e=CKEDITOR.dom.element.createFromHtml(b.template.output(e)),f,g=a.widgets.wrapElement(e,b.name),h=new CKEDITOR.dom.documentFragment(g.getDocument());h.append(g);(f=a.widgets.initOn(e,b,c&&c.startupData))?(e=f.once("edit",function(b){if(b.data.dialog)f.once("dialog",function(b){b=b.data;var c,e;c=b.once("ok",d,null,null,20);e=b.once("cancel",function(b){b.data&&!1===b.data.hide||a.widgets.destroy(f,!0)});b.once("hide",function(){c.removeListener();e.removeListener()})});else d()},null,null,999),f.edit(),e.removeListener()):d()}},allowedContent:b.allowedContent,requiredContent:b.requiredContent,contentForms:b.contentForms,contentTransformations:b.contentTransformations})}function h(a,b){function c(b,d,e){var f=CKEDITOR.tools.getIndex(a._.upcasts,function(a){return a[2]>e});0>f&&(f=a._.upcasts.length);a._.upcasts.splice(f,0,[b,d,e])}var d=b.upcast,e=b.upcastPriority||10;if(d)if("string"==typeof d)for(d=d.split(",");d.length;)c(b.upcasts[d.pop()],b.name,e);else c(d,b.name,e)}function m(a,b){a.focused=null;if(b.isInited()){var c=b.editor.checkDirty();a.fire("widgetBlurred",{widget:b});b.setFocused(!1);!c&&b.editor.resetDirty()}}function l(a){a=a.data;if("wysiwyg"==this.editor.mode){var b=this.editor.editable(),c=this.instances,d,f,g,h;if(b){for(d in c)c[d].isReady()&&!b.contains(c[d].wrapper)&&this.destroy(c[d],!0);if(a&&a.initOnlyNew)c=this.initOnAll();else{var k=b.find(".cke_widget_wrapper"),c=[];d=0;for(f=k.count();d<f;d++){g=k.getItem(d);if(h=!this.getByElement(g,!0)){a:{h=q;for(var l=g;l=l.getParent();)if(h(l)){h=!0;break a}h=!1}h=!h}h&&b.contains(g)&&(g.addClass("cke_widget_new"),c.push(this.initOn(g.getFirst(e.isDomWidgetElement))))}}a&&a.focusInited&&1==c.length&&c[0].focus()}}}
function k(a,b,c){if(!c.allowedContent)return null;var d=this._.filters[a];d||(this._.filters[a]=d={});(a=d[b])||(d[b]=a=new CKEDITOR.filter(c.allowedContent));return a}function d(a){var b=[],c=a._.upcasts,d=a._.upcastCallbacks;return{toBeWrapped:b,iterator:function(a){var f,g,h,k,l;if("data-cke-widget-wrapper"in a.attributes)return(a=a.getFirst(e.isParserWidgetElement))&&b.push([a]),!1;if("data-widget"in a.attributes)return b.push([a]),!1;if(l=c.length){if(a.attributes["data-cke-widget-upcasted"])return!1;k=0;for(f=d.length;k<f;++k)if(!1===d[k](a))return;for(k=0;k<l;++k)if(f=c[k],h={},g=f[0](a,h))return g instanceof CKEDITOR.htmlParser.element&&(a=g),a.attributes["data-cke-widget-data"]=encodeURIComponent(JSON.stringify(h)),a.attributes["data-cke-widget-upcasted"]=1,b.push([a,f[1]]),!1}}}}function b(a,b){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(a?"inline":"block")+(b?" cke_widget_"+b:"")}}
function g(a,b,c){if(a.type==CKEDITOR.NODE_ELEMENT){var d=CKEDITOR.dtd[a.name];if(d&&!d[c.name]){var d=a.split(b),e=a.parent;b=d.getIndex();a.children.length||(--b,a.remove());d.children.length||d.remove();return g(e,b,c)}}a.add(c,b)}function n(a,b){return"boolean"==typeof a.inline?a.inline:!!CKEDITOR.dtd.$inline[b]}function q(a){return a.hasAttribute("data-cke-temp")}function p(a,b,c,d){var e=a.editor;e.fire("lockSnapshot");c?(d=c.data("cke-widget-editable"),d=b.editables[d],a.widgetHoldingFocusedEditable=b,b.focusedEditable=d,c.addClass("cke_widget_editable_focused"),d.filter&&e.setActiveFilter(d.filter),e.setActiveEnterMode(d.enterMode,d.shiftEnterMode)):(d||b.focusedEditable.removeClass("cke_widget_editable_focused"),b.focusedEditable=null,a.widgetHoldingFocusedEditable=null,e.setActiveFilter(null),e.setActiveEnterMode(null,null));e.fire("unlockSnapshot")}function w(a){a.contextMenu&&a.contextMenu.addListener(function(b){if(b=a.widgets.getByElement(b,!0))return b.fire("contextMenu",{})})}function u(a,b){return CKEDITOR.tools.trim(b)}function t(a){var b=a.editor,c=CKEDITOR.plugins.lineutils;b.on("dragstart",function(c){var d=c.data.target;e.isDomDragHandler(d)&&(d=a.getByElement(d),c.data.dataTransfer.setData("cke/widget-id",d.id),b.focus(),d.focus())});b.on("drop",function(c){var d=c.data.dataTransfer,e=d.getData("cke/widget-id"),f=d.getTransferType(b),d=b.createRange();""!==e&&f===CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?c.cancel():""!==e&&f==CKEDITOR.DATA_TRANSFER_INTERNAL&&(e=a.instances[e])&&(d.setStartBefore(e.wrapper),d.setEndAfter(e.wrapper),c.data.dragRange=d,delete CKEDITOR.plugins.clipboard.dragStartContainerChildCount,delete CKEDITOR.plugins.clipboard.dragEndContainerChildCount,c.data.dataTransfer.setData("text/html",b.editable().getHtmlFromRange(d).getHtml()),b.widgets.destroy(e,!0))});b.on("contentDom",function(){var d=b.editable();CKEDITOR.tools.extend(a,{finder:new c.finder(b,{lookups:{"default":function(b){if(!b.is(CKEDITOR.dtd.$listItem)&&b.is(CKEDITOR.dtd.$block)&&!e.isDomNestedEditable(b)&&!a._.draggedWidget.wrapper.contains(b)){var c=e.getNestedEditable(d,b);if(c){b=a._.draggedWidget;if(a.getByElement(c)==b)return;c=CKEDITOR.filter.instances[c.data("cke-filter")];b=b.requiredContent;if(c&&b&&!c.check(b))return}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER}}}}),locator:new c.locator(b),liner:new c.liner(b,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function v(a){var b=a.editor;b.on("contentDom",function(){var c=b.editable(),d=c.isInline()?c:b.document,f,g;c.attachListener(d,"mousedown",function(c){var d=c.data.getTarget();if(!d.type)return!1;f=a.getByElement(d);g=0;f&&(f.inline&&d.type==CKEDITOR.NODE_ELEMENT&&d.hasAttribute("data-cke-widget-drag-handler")?(g=1,a.focused!=f&&b.getSelection().removeAllRanges()):e.getNestedEditable(f.wrapper,d)?f=null:(c.data.preventDefault(),CKEDITOR.env.ie||f.focus()))});c.attachListener(d,"mouseup",function(){g&&f&&f.wrapper&&(g=0,f.focus())});CKEDITOR.env.ie&&c.attachListener(d,"mouseup",function(){setTimeout(function(){f&&f.wrapper&&c.contains(f.wrapper)&&(f.focus(),f=null)})})});b.on("doubleclick",function(b){var c=a.getByElement(b.data.element);if(c&&!e.getNestedEditable(c.wrapper,b.data.element))return c.fire("doubleclick",{element:b.data.element})},null,null,1)}function x(a){a.editor.on("key",function(b){var c=a.focused,d=a.widgetHoldingFocusedEditable,e;c?e=c.fire("key",{keyCode:b.data.keyCode}):d&&(c=b.data.keyCode,b=d.focusedEditable,c==CKEDITOR.CTRL+65?(c=b.getBogus(),d=d.editor.createRange(),d.selectNodeContents(b),c&&d.setEndAt(c,CKEDITOR.POSITION_BEFORE_START),d.select(),e=!1):8==c||46==c?(e=d.editor.getSelection().getRanges(),d=e[0],e=!(1==e.length&&d.collapsed&&d.checkBoundaryOfElement(b,CKEDITOR[8==c?"START":"END"]))):e=void 0);return e},null,null,1)}function A(a){function b(c){a.focused&&F(a.focused,"cut"==c.name)}var c=a.editor;c.on("contentDom",function(){var a=c.editable();a.attachListener(a,"copy",b);a.attachListener(a,"cut",b)})}function r(a){var b=a.editor;b.on("selectionCheck",function(){a.fire("checkSelection")});a.on("checkSelection",a.checkSelection,a);b.on("selectionChange",function(c){var d=(c=e.getNestedEditable(b.editable(),c.data.selection.getStartElement()))&&a.getByElement(c),f=a.widgetHoldingFocusedEditable;f?f===d&&f.focusedEditable.equals(c)||(p(a,f,null),d&&c&&p(a,d,c)):d&&c&&p(a,d,c)});b.on("dataReady",function(){B(a).commit()});b.on("blur",function(){var b;(b=a.focused)&&m(a,b);(b=a.widgetHoldingFocusedEditable)&&p(a,b,null)})}function y(a){var b=a.editor,c={};b.on("toDataFormat",function(b){var d=CKEDITOR.tools.getNextNumber(),f=[];b.data.downcastingSessionId=d;c[d]=f;b.data.dataValue.forEach(function(b){var c=b.attributes,d;if("data-cke-widget-id"in c){if(c=a.instances[c["data-cke-widget-id"]])d=b.getFirst(e.isParserWidgetElement),f.push({wrapper:b,element:d,widget:c,editables:{}}),"1"!=d.attributes["data-cke-widget-keep-attr"]&&delete d.attributes["data-widget"]}else if("data-cke-widget-editable"in
c)return f[f.length-1].editables[c["data-cke-widget-editable"]]=b,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8);b.on("toDataFormat",function(a){if(a.data.downcastingSessionId){a=c[a.data.downcastingSessionId];for(var b,d,e,f,g,h;b=a.shift();){d=b.widget;e=b.element;f=d._.downcastFn&&d._.downcastFn.call(d,e);for(h in b.editables)g=b.editables[h],delete g.attributes.contenteditable,g.setHtml(d.editables[h].getData());f||(f=e);b.wrapper.replaceWith(f)}}},null,null,13);b.on("contentDomUnload",function(){a.destroyAll(!0)})}
function D(a){var b=a.editor,c,f;b.on("toHtml",function(b){var f=d(a),g;for(b.data.dataValue.forEach(f.iterator,CKEDITOR.NODE_ELEMENT,!0);g=f.toBeWrapped.pop();){var h=g[0],k=h.parent;k.type==CKEDITOR.NODE_ELEMENT&&k.attributes["data-cke-widget-wrapper"]&&k.replaceWith(h);a.wrapElement(g[0],g[1])}c=b.data.protectedWhitespaces?3==b.data.dataValue.children.length&&e.isParserWidgetWrapper(b.data.dataValue.children[1]):1==b.data.dataValue.children.length&&e.isParserWidgetWrapper(b.data.dataValue.children[0])},null,null,8);b.on("dataReady",function(){if(f)for(var c=b.editable().find(".cke_widget_wrapper"),d,g,h=0,k=c.count();h<k;++h)d=c.getItem(h),g=d.getFirst(e.isDomWidgetElement),g.type==CKEDITOR.NODE_ELEMENT&&g.data("widget")?(g.replace(d),a.wrapElement(g)):d.remove();f=0;a.destroyAll(!0);a.initOnAll()});b.on("loadSnapshot",function(b){/data-cke-widget/.test(b.data)&&(f=1);a.destroyAll(!0)},null,null,9);b.on("paste",function(a){a=a.data;a.dataValue=a.dataValue.replace(X,u);a.range&&(a=e.getNestedEditable(b.editable(),a.range.startContainer))&&(a=CKEDITOR.filter.instances[a.data("cke-filter")])&&b.setActiveFilter(a)});b.on("afterInsertHtml",function(d){d.data.intoRange?a.checkWidgets({initOnlyNew:!0}):(b.fire("lockSnapshot"),a.checkWidgets({initOnlyNew:!0,focusInited:c}),b.fire("unlockSnapshot"))})}function B(a){var b=a.selected,c=[],d=b.slice(0),e=null;return{select:function(a){0>CKEDITOR.tools.indexOf(b,a)&&c.push(a);a=CKEDITOR.tools.indexOf(d,a);0<=a&&d.splice(a,1);return this},focus:function(a){e=a;return this},commit:function(){var f=a.focused!==e,g,h;a.editor.fire("lockSnapshot");for(f&&(g=a.focused)&&m(a,g);g=d.pop();)b.splice(CKEDITOR.tools.indexOf(b,g),1),g.isInited()&&(h=g.editor.checkDirty(),g.setSelected(!1),!h&&g.editor.resetDirty());f&&e&&(h=a.editor.checkDirty(),a.focused=e,a.fire("widgetFocused",{widget:e}),e.setFocused(!0),!h&&a.editor.resetDirty());for(;g=c.pop();)b.push(g),g.setSelected(!0);a.editor.fire("unlockSnapshot")}}}function z(a,b,c){var d=0;b=E(b);var e=a.data.classes||{},f;if(b){for(e=CKEDITOR.tools.clone(e);f=b.pop();)c?e[f]||(d=e[f]=1):e[f]&&(delete e[f],d=1);d&&a.setData("classes",e)}}function C(a){a.cancel()}function F(a,b){var c=a.editor,d=c.document;if(!d.getById("cke_copybin")){var e=c.blockless||CKEDITOR.env.ie?"span":"div",f=d.createElement(e),g=d.createElement(e),e=CKEDITOR.env.ie&&9>CKEDITOR.env.version;g.setAttributes({id:"cke_copybin","data-cke-temp":"1"});f.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"});f.setStyle("ltr"==c.config.contentsLangDirection?"left":"right","-5000px");var h=c.createRange();h.setStartBefore(a.wrapper);h.setEndAfter(a.wrapper);f.setHtml('\x3cspan data-cke-copybin-start\x3d"1"\x3e\x3c/span\x3e'+c.editable().getHtmlFromRange(h).getHtml()+'\x3cspan data-cke-copybin-end\x3d"1"\x3e\x3c/span\x3e');c.fire("saveSnapshot");c.fire("lockSnapshot");g.append(f);c.editable().append(g);var k=c.on("selectionChange",C,null,null,0),l=a.repository.on("checkSelection",C,null,null,0);if(e)var m=d.getDocumentElement().$,n=m.scrollTop;h=c.createRange();h.selectNodeContents(f);h.select();e&&(m.scrollTop=n);setTimeout(function(){b||a.focus();g.remove();k.removeListener();l.removeListener();c.fire("unlockSnapshot");b&&(a.repository.del(a),c.fire("saveSnapshot"))},100)}}function E(a){return(a=(a=a.getDefinition().attributes)&&a["class"])?a.split(/\s+/):null}function H(){var a=CKEDITOR.document.getActive(),b=this.editor,c=b.editable();(c.isInline()?c:b.document.getWindow().getFrame()).equals(a)&&b.focusManager.focus(c)}function G(){CKEDITOR.env.gecko&&this.editor.unlockSelection();CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))}function O(a){var b=null;a.on("data",function(){var a=this.data.classes,c;if(b!=a){for(c in b)a&&a[c]||this.removeClass(c);for(c in a)this.addClass(c);b=a}})}function P(a){a.on("data",function(){if(a.wrapper){var b=this.getLabel?this.getLabel():this.editor.lang.widget.label.replace(/%1/,this.pathName||this.element.getName());a.wrapper.setAttribute("role","region");a.wrapper.setAttribute("aria-label",b)}},null,null,9999)}function I(a){if(a.draggable){var b=a.editor,c=a.wrapper.getLast(e.isDomDragHandlerContainer),d;c?d=c.findOne("img"):(c=new CKEDITOR.dom.element("span",b.document),c.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+b.plugins.widget.path+"images/handle.png)"}),d=new CKEDITOR.dom.element("img",b.document),d.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:CKEDITOR.tools.transparentImageData,width:15,title:b.lang.widget.move,height:15,role:"presentation"}),a.inline&&d.setAttribute("draggable","true"),c.append(d),a.wrapper.append(c));a.wrapper.on("dragover",function(a){a.data.preventDefault()});a.wrapper.on("mouseenter",a.updateDragHandlerPosition,a);setTimeout(function(){a.on("data",a.updateDragHandlerPosition,a)},50);if(!a.inline&&(d.on("mousedown",T,a),CKEDITOR.env.ie&&9>CKEDITOR.env.version))d.on("dragstart",function(a){a.data.preventDefault(!0)});a.dragHandlerContainer=c}}function T(a){function b(){var c;for(u.reset();c=h.pop();)c.removeListener();var d=k;c=a.sender;var e=this.repository.finder,f=this.repository.liner,g=this.editor,l=this.editor.editable();CKEDITOR.tools.isEmpty(f.visible)||(d=e.getRange(d[0]),this.focus(),g.fire("drop",{dropRange:d,target:d.startContainer}));l.removeClass("cke_widget_dragging");f.hideVisible();g.fire("dragend",{target:c})}var c=this.repository.finder,d=this.repository.locator,e=this.repository.liner,f=this.editor,g=f.editable(),h=[],k=[],l,m;this.repository._.draggedWidget=this;var n=c.greedySearch(),u=CKEDITOR.tools.eventsBuffer(50,function(){l=d.locate(n);k=d.sort(m,1);k.length&&(e.prepare(n,l),e.placeLine(k[0]),e.cleanup())});g.addClass("cke_widget_dragging");h.push(g.on("mousemove",function(a){m=a.data.$.clientY;u.input()}));f.fire("dragstart",{target:a.sender});h.push(f.document.once("mouseup",b,this));g.isInline()||h.push(CKEDITOR.document.once("mouseup",b,this))}function Q(a){var b,c,d=a.editables;a.editables={};if(a.editables)for(b in d)c=d[b],a.initEditable(b,"string"==typeof c?{selector:c}:c)}function R(a){if(a.mask){var b=a.wrapper.findOne(".cke_widget_mask");b||(b=new CKEDITOR.dom.element("img",a.editor.document),b.setAttributes({src:CKEDITOR.tools.transparentImageData,"class":"cke_reset cke_widget_mask"}),a.wrapper.append(b));a.mask=b}}function M(a){if(a.parts){var b={},c,d;for(d in a.parts)c=a.wrapper.findOne(a.parts[d]),b[d]=c;a.parts=b}}function U(a,b){W(a);M(a);Q(a);R(a);I(a);O(a);P(a);if(CKEDITOR.env.ie&&9>CKEDITOR.env.version)a.wrapper.on("dragstart",function(b){var c=b.data.getTarget();e.getNestedEditable(a,c)||a.inline&&e.isDomDragHandler(c)||b.data.preventDefault()});a.wrapper.removeClass("cke_widget_new");a.element.addClass("cke_widget_element");a.on("key",function(b){b=b.data.keyCode;if(13==b)a.edit();else{if(b==CKEDITOR.CTRL+67||b==CKEDITOR.CTRL+88){F(a,b==CKEDITOR.CTRL+88);return}if(b in N||CKEDITOR.CTRL&b||CKEDITOR.ALT&b)return}return!1},null,null,999);a.on("doubleclick",function(b){a.edit()&&b.cancel()});if(b.data)a.on("data",b.data);if(b.edit)a.on("edit",b.edit)}function W(a){(a.wrapper=a.element.getParent()).setAttribute("data-cke-widget-id",a.id)}function L(a){a.element.data("cke-widget-data",encodeURIComponent(JSON.stringify(a.data)))}CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard,widgetselection",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover\x3e.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused\x3e.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:15px;height:0;display:none;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover\x3e.cke_widget_drag_handler_container{height:15px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:15px;height:15px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}")},beforeInit:function(b){b.widgets=new a(b)},afterInit:function(a){var b=a.widgets.registered,c,d,e;for(d in b)c=b[d],(e=c.button)&&a.ui.addButton&&a.ui.addButton(CKEDITOR.tools.capitalize(c.name,!0),{label:e,command:c.name,toolbar:"insert,10"});w(a)}});a.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(a,b){b=CKEDITOR.tools.prototypedCopy(b);b.name=a;b._=b._||{};this.editor.fire("widgetDefinition",b);b.template&&(b.template=new CKEDITOR.template(b.template));f(this.editor,b);h(this,b);return this.registered[a]=b},addUpcastCallback:function(a){this._.upcastCallbacks.push(a)},checkSelection:function(){var a=this.editor.getSelection(),b=a.getSelectedElement(),c=B(this),d;if(b&&(d=this.getByElement(b,!0)))return c.focus(d).select(d).commit();a=a.getRanges()[0];if(!a||a.collapsed)return c.commit();a=new CKEDITOR.dom.walker(a);for(a.evaluator=e.isDomWidgetWrapper;b=a.next();)c.select(this.getByElement(b));c.commit()},checkWidgets:function(a){this.fire("checkWidgets",CKEDITOR.tools.copy(a||{}))},del:function(a){if(this.focused===a){var b=a.editor,c=b.createRange(),d;(d=c.moveToClosestEditablePosition(a.wrapper,!0))||(d=c.moveToClosestEditablePosition(a.wrapper,!1));d&&b.getSelection().selectRanges([c])}a.wrapper.remove();this.destroy(a,!0)},destroy:function(a,b){this.widgetHoldingFocusedEditable===a&&p(this,a,null,b);a.destroy(b);delete this.instances[a.id];this.fire("instanceDestroyed",a)},destroyAll:function(a,b){var c,d,e=this.instances;if(b&&!a){d=b.find(".cke_widget_wrapper");for(var e=d.count(),f=0;f<e;++f)(c=this.getByElement(d.getItem(f),!0))&&this.destroy(c)}else for(d in e)c=e[d],this.destroy(c,a)},finalizeCreation:function(a){(a=a.getFirst())&&e.isDomWidgetWrapper(a)&&(this.editor.insertElement(a),a=this.getByElement(a),a.ready=!0,a.fire("ready"),a.focus())},getByElement:function(){function a(c){return c.is(b)&&c.data("cke-widget-id")}var b={div:1,span:1};return function(b,c){if(!b)return null;var d=a(b);if(!c&&!d){var e=this.editor.editable();do b=b.getParent();while(b&&!b.equals(e)&&!(d=a(b)))}return this.instances[d]||null}}(),initOn:function(a,b,c){b?"string"==typeof b&&(b=this.registered[b]):b=this.registered[a.data("widget")];if(!b)return null;var d=this.wrapElement(a,b.name);return d?d.hasClass("cke_widget_new")?(a=new e(this,this._.nextId++,a,b,c),a.isInited()?this.instances[a.id]=a:null):this.getByElement(a):null},initOnAll:function(a){a=(a||this.editor.editable()).find(".cke_widget_new");for(var b=[],c,d=a.count();d--;)(c=this.initOn(a.getItem(d).getFirst(e.isDomWidgetElement)))&&b.push(c);return b},onWidget:function(a){var b=Array.prototype.slice.call(arguments);b.shift();for(var c in this.instances){var d=this.instances[c];d.name==a&&d.on.apply(d,b)}this.on("instanceCreated",function(c){c=c.data;c.name==a&&c.on.apply(c,b)})},parseElementClasses:function(a){if(!a)return null;a=CKEDITOR.tools.trim(a).split(/\s+/);for(var b,c={},d=0;b=a.pop();)-1==b.indexOf("cke_")&&(c[b]=d=1);return d?c:null},wrapElement:function(a,c){var d=null,e,f;if(a instanceof CKEDITOR.dom.element){c=c||a.data("widget");e=this.registered[c];if(!e)return null;if((d=a.getParent())&&d.type==CKEDITOR.NODE_ELEMENT&&d.data("cke-widget-wrapper"))return d;a.hasAttribute("data-cke-widget-keep-attr")||a.data("cke-widget-keep-attr",a.data("widget")?1:0);a.data("widget",c);f=n(e,a.getName());d=new CKEDITOR.dom.element(f?"span":"div");d.setAttributes(b(f,c));d.data("cke-display-name",e.pathName?e.pathName:a.getName());a.getParent(!0)&&d.replace(a);a.appendTo(d)}else if(a instanceof CKEDITOR.htmlParser.element){c=c||a.attributes["data-widget"];e=this.registered[c];if(!e)return null;if((d=a.parent)&&d.type==CKEDITOR.NODE_ELEMENT&&d.attributes["data-cke-widget-wrapper"])return d;"data-cke-widget-keep-attr"in a.attributes||(a.attributes["data-cke-widget-keep-attr"]=a.attributes["data-widget"]?1:0);c&&(a.attributes["data-widget"]=c);f=n(e,a.name);d=new CKEDITOR.htmlParser.element(f?"span":"div",b(f,c));d.attributes["data-cke-display-name"]=e.pathName?e.pathName:a.name;e=a.parent;var h;e&&(h=a.getIndex(),a.remove());d.add(a);e&&g(e,h,d)}return d},_tests_createEditableFilter:k};CKEDITOR.event.implementOn(a.prototype);e.prototype={addClass:function(a){this.element.addClass(a);this.wrapper.addClass(e.WRAPPER_CLASS_PREFIX+a)},applyStyle:function(a){z(this,a,1)},checkStyleActive:function(a){a=E(a);var b;if(!a)return!1;for(;b=a.pop();)if(!this.hasClass(b))return!1;return!0},destroy:function(a){this.fire("destroy");if(this.editables)for(var b in this.editables)this.destroyEditable(b,a);a||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper));this.wrapper=null},destroyEditable:function(a,b){var c=this.editables[a];c.removeListener("focus",G);c.removeListener("blur",H);this.editor.focusManager.remove(c);b||(this.repository.destroyAll(!1,c),c.removeClass("cke_widget_editable"),c.removeClass("cke_widget_editable_focused"),c.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"]));delete this.editables[a]},edit:function(){var a={dialog:this.dialog},b=this;if(!1===this.fire("edit",a)||!a.dialog)return!1;this.editor.openDialog(a.dialog,function(a){var c,d;!1!==b.fire("dialog",a)&&(c=a.on("show",function(){a.setupContent(b)}),d=a.on("ok",function(){var c,d=b.on("data",function(a){c=1;a.cancel()},null,null,0);b.editor.fire("saveSnapshot");a.commitContent(b);d.removeListener();c&&(b.fire("data",b.data),b.editor.fire("saveSnapshot"))}),a.once("hide",function(){c.removeListener();d.removeListener()}))});return!0},getClasses:function(){return this.repository.parseElementClasses(this.element.getAttribute("class"))},hasClass:function(a){return this.element.hasClass(a)},initEditable:function(a,b){var d=this._findOneNotNested(b.selector);return d&&d.is(CKEDITOR.dtd.$editable)?(d=new c(this.editor,d,{filter:k.call(this.repository,this.name,a,b)}),this.editables[a]=d,d.setAttributes({contenteditable:"true","data-cke-widget-editable":a,"data-cke-enter-mode":d.enterMode}),d.filter&&d.data("cke-filter",d.filter.id),d.addClass("cke_widget_editable"),d.removeClass("cke_widget_editable_focused"),b.pathName&&d.data("cke-display-name",b.pathName),this.editor.focusManager.add(d),d.on("focus",G,this),CKEDITOR.env.ie&&d.on("blur",H,this),d._.initialSetData=!0,d.setData(d.getHtml()),!0):!1},_findOneNotNested:function(a){a=this.wrapper.find(a);for(var b,c,d=0;d<a.count();d++)if(b=a.getItem(d),c=b.getAscendant(e.isDomWidgetWrapper),this.wrapper.equals(c))return b;return null},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var a=this.editor.getSelection();if(a){var b=this.editor.checkDirty();a.fake(this.wrapper);!b&&this.editor.resetDirty()}this.editor.focus()},removeClass:function(a){this.element.removeClass(a);this.wrapper.removeClass(e.WRAPPER_CLASS_PREFIX+a)},removeStyle:function(a){z(this,a,0)},setData:function(a,b){var c=this.data,d=0;if("string"==typeof a)c[a]!==b&&(c[a]=b,d=1);else{var e=a;for(a in e)c[a]!==e[a]&&(d=1,c[a]=e[a])}d&&this.dataReady&&(L(this),this.fire("data",c));return this},setFocused:function(a){this.wrapper[a?"addClass":"removeClass"]("cke_widget_focused");this.fire(a?"focus":"blur");return this},setSelected:function(a){this.wrapper[a?"addClass":"removeClass"]("cke_widget_selected");this.fire(a?"select":"deselect");return this},updateDragHandlerPosition:function(){var a=this.editor,b=this.element.$,c=this._.dragHandlerOffset,b={x:b.offsetLeft,y:b.offsetTop-15};c&&b.x==c.x&&b.y==c.y||(c=a.checkDirty(),a.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px",display:"block"}),a.fire("unlockSnapshot"),!c&&a.resetDirty(),this._.dragHandlerOffset=b)}};CKEDITOR.event.implementOn(e.prototype);e.getNestedEditable=function(a,b){return!b||b.equals(a)?null:e.isDomNestedEditable(b)?b:e.getNestedEditable(a,b.getParent())};e.isDomDragHandler=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-drag-handler")};e.isDomDragHandlerContainer=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasClass("cke_widget_drag_handler_container")};e.isDomNestedEditable=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-editable")};e.isDomWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-widget")};e.isDomWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-wrapper")};e.isParserWidgetElement=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-widget"]};e.isParserWidgetWrapper=function(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-cke-widget-wrapper"]};e.WRAPPER_CLASS_PREFIX="cke_widget_wrapper_";c.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(a){this._.initialSetData||this.editor.widgets.destroyAll(!1,this);this._.initialSetData=!1;a=this.editor.dataProcessor.toHtml(a,{context:this.getName(),filter:this.filter,enterMode:this.enterMode});this.setHtml(a);this.editor.widgets.initOnAll(this)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})}});var X=/^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?<\/span>([\s\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?<\/span>(?:<\/(?:div|span)>)?(?:<\/(?:div|span)>)?$/i,N={37:1,38:1,39:1,40:1,8:1,46:1};(function(){function a(){}
function b(a,c,d){return d&&this.checkElement(a)?(a=d.widgets.getByElement(a,!0))&&a.checkStyleActive(this):!1}var c={};CKEDITOR.style.addCustomHandler({type:"widget",setup:function(a){this.widget=a.widget;if(this.group="string"==typeof a.group?[a.group]:a.group){a=this.widget;var b;c[a]||(c[a]={});for(var d=0,e=this.group.length;d<e;d++)b=this.group[d],c[a][b]||(c[a][b]=[]),c[a][b].push(this)}},apply:function(a){var b;a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&(b=a.widgets.focused,this.group&&this.removeStylesFromSameGroup(a),b.applyStyle(this))},remove:function(a){a instanceof CKEDITOR.editor&&this.checkApplicable(a.elementPath(),a)&&a.widgets.focused.removeStyle(this)},removeStylesFromSameGroup:function(a){var b,d,e=!1;if(!(a instanceof CKEDITOR.editor))return!1;d=a.elementPath();if(this.checkApplicable(d,a))for(var f=0,g=this.group.length;f<g;f++){b=c[this.widget][this.group[f]];for(var h=0;h<b.length;h++)b[h]!==this&&b[h].checkActive(d,a)&&(a.widgets.focused.removeStyle(b[h]),e=!0)}return e},checkActive:function(a,b){return this.checkElementMatch(a.lastElement,0,b)},checkApplicable:function(a,b){return b instanceof CKEDITOR.editor?this.checkElement(a.lastElement):!1},checkElementMatch:b,checkElementRemovable:b,checkElement:function(a){return e.isDomWidgetWrapper(a)?(a=a.getFirst(e.isDomWidgetElement))&&a.data("widget")==this.widget:!1},buildPreview:function(a){return a||this._.definition.name},toAllowedContentRules:function(a){if(!a)return null;a=a.widgets.registered[this.widget];var b,c={};if(!a)return null;if(a.styleableElements){b=this.getClassesArray();if(!b)return null;c[a.styleableElements]={classes:b,propertiesOnly:!0};return c}return a.styleToAllowedContentRules?a.styleToAllowedContentRules(this):null},getClassesArray:function(){var a=this._.definition.attributes&&this._.definition.attributes["class"];return a?CKEDITOR.tools.trim(a).split(/\s+/):null},applyToRange:a,removeFromRange:a,applyToObject:a})})();CKEDITOR.plugins.widget=e;e.repository=a;e.nestedEditable=c}(),"use strict",function(){function a(a){this.editor=a;this.loaders=[]}function e(a,e,f){var k=a.config.fileTools_defaultFileName;this.editor=a;this.lang=a.lang;"string"===typeof e?(this.data=e,this.file=c(this.data),this.loaded=this.total=this.file.size):(this.data=null,this.file=e,this.total=this.file.size,this.loaded=0);f?this.fileName=f:this.file.name?this.fileName=this.file.name:(a=this.file.type.split("/"),k&&(a[0]=k),this.fileName=a.join("."));this.uploaded=0;this.responseData=this.uploadTotal=null;this.status="created";this.abort=function(){this.changeStatus("abort")}}function c(a){var c=a.match(f)[1];a=a.replace(f,"");a=atob(a);var e=[],k,d,b,g;for(k=0;k<a.length;k+=512){d=a.slice(k,k+512);b=Array(d.length);for(g=0;g<d.length;g++)b[g]=d.charCodeAt(g);d=new Uint8Array(b);e.push(d)}return new Blob(e,{type:c})}CKEDITOR.plugins.add("filetools",{beforeInit:function(c){c.uploadRepository=new a(c);c.on("fileUploadRequest",function(a){var c=a.data.fileLoader;c.xhr.open("POST",c.uploadUrl,!0);a.data.requestData.upload={file:c.file,name:c.fileName}},null,null,5);c.on("fileUploadRequest",function(a){var c=a.data.fileLoader,e=new FormData;a=a.data.requestData;for(var d in a){var b=a[d];"object"===typeof b&&b.file?e.append(d,b.file,b.name):e.append(d,b)}e.append("ckCsrfToken",CKEDITOR.tools.getCsrfToken());c.xhr.send(e)},null,null,999);c.on("fileUploadResponse",function(a){var c=a.data.fileLoader,e=c.xhr,d=a.data;try{var b=JSON.parse(e.responseText);b.error&&b.error.message&&(d.message=b.error.message);if(b.uploaded)for(var f in b)d[f]=b[f];else a.cancel()}catch(h){d.message=c.lang.filetools.responseError,CKEDITOR.warn("filetools-response-error",{responseText:e.responseText}),a.cancel()}},null,null,999)}});a.prototype={create:function(a,c){var f=this.loaders.length,k=new e(this.editor,a,c);k.id=f;this.loaders[f]=k;this.fire("instanceCreated",k);return k},isFinished:function(){for(var a=0;a<this.loaders.length;++a)if(!this.loaders[a].isFinished())return!1;return!0}};e.prototype={loadAndUpload:function(a,c){var e=this;this.once("loaded",function(f){f.cancel();e.once("update",function(a){a.cancel()},null,null,0);e.upload(a,c)},null,null,0);this.load()},load:function(){var a=this,c=this.reader=new FileReader;a.changeStatus("loading");this.abort=function(){a.reader.abort()};c.onabort=function(){a.changeStatus("abort")};c.onerror=function(){a.message=a.lang.filetools.loadError;a.changeStatus("error")};c.onprogress=function(c){a.loaded=c.loaded;a.update()};c.onload=function(){a.loaded=a.total;a.data=c.result;a.changeStatus("loaded")};c.readAsDataURL(this.file)},upload:function(a,c){var e=c||{};a?(this.uploadUrl=a,this.xhr=new XMLHttpRequest,this.attachRequestListeners(),this.editor.fire("fileUploadRequest",{fileLoader:this,requestData:e})&&this.changeStatus("uploading")):(this.message=this.lang.filetools.noUrlError,this.changeStatus("error"))},attachRequestListeners:function(){function a(){"error"!=e.status&&(e.message=e.lang.filetools.networkError,e.changeStatus("error"))}function c(){"abort"!=e.status&&e.changeStatus("abort")}var e=this,f=this.xhr;e.abort=function(){f.abort();c()};f.onerror=a;f.onabort=c;f.upload?(f.upload.onprogress=function(a){a.lengthComputable&&(e.uploadTotal||(e.uploadTotal=a.total),e.uploaded=a.loaded,e.update())},f.upload.onerror=a,f.upload.onabort=c):(e.uploadTotal=e.total,e.update());f.onload=function(){e.update();if("abort"!=e.status)if(e.uploaded=e.uploadTotal,200>f.status||299<f.status)e.message=e.lang.filetools["httpError"+f.status],e.message||(e.message=e.lang.filetools.httpError.replace("%1",f.status)),e.changeStatus("error");else{for(var a={fileLoader:e},b=["message","fileName","url"],c=e.editor.fire("fileUploadResponse",a),h=0;h<b.length;h++){var m=b[h];"string"===typeof a[m]&&(e[m]=a[m])}e.responseData=a;delete e.responseData.fileLoader;!1===c?e.changeStatus("error"):e.changeStatus("uploaded")}}},changeStatus:function(a){this.status=a;if("error"==a||"abort"==a||"loaded"==a||"uploaded"==a)this.abort=function(){};this.fire(a);this.update()},update:function(){this.fire("update")},isFinished:function(){return!!this.status.match(/^(?:loaded|uploaded|error|abort)$/)}};CKEDITOR.event.implementOn(a.prototype);CKEDITOR.event.implementOn(e.prototype);var f=/^data:(\S*?);base64,/;CKEDITOR.fileTools||(CKEDITOR.fileTools={});CKEDITOR.tools.extend(CKEDITOR.fileTools,{uploadRepository:a,fileLoader:e,getUploadUrl:function(a,c){var e=CKEDITOR.tools.capitalize;return c&&a[c+"UploadUrl"]?a[c+"UploadUrl"]:a.uploadUrl?a.uploadUrl:c&&a["filebrowser"+e(c,1)+"UploadUrl"]?a["filebrowser"+e(c,1)+"UploadUrl"]+"\x26responseType\x3djson":a.filebrowserUploadUrl?a.filebrowserUploadUrl+
"\x26responseType\x3djson":null},isTypeSupported:function(a,c){return!!a.type.match(c)}})}(),function(){function a(a,e,h){this.editor=a;this.notification=null;this._message=new CKEDITOR.template(e);this._singularMessage=h?new CKEDITOR.template(h):null;this._tasks=[];this._doneTasks=this._doneWeights=this._totalWeights=0}function e(a){this._weight=a||1;this._doneWeight=0;this._isCanceled=!1}CKEDITOR.plugins.add("notificationaggregator",{requires:"notification"});a.prototype={createTask:function(a){a=a||{};var e=!this.notification,h;e&&(this.notification=this._createNotification());h=this._addTask(a);h.on("updated",this._onTaskUpdate,this);h.on("done",this._onTaskDone,this);h.on("canceled",function(){this._removeTask(h)},this);this.update();e&&this.notification.show();return h},update:function(){this._updateNotification();this.isFinished()&&this.fire("finished")},getPercentage:function(){return 0===this.getTaskCount()?1:this._doneWeights/this._totalWeights},isFinished:function(){return this.getDoneTaskCount()===this.getTaskCount()},getTaskCount:function(){return this._tasks.length},getDoneTaskCount:function(){return this._doneTasks},_updateNotification:function(){this.notification.update({message:this._getNotificationMessage(),progress:this.getPercentage()})},_getNotificationMessage:function(){var a=this.getTaskCount(),e={current:this.getDoneTaskCount(),max:a,percentage:Math.round(100*this.getPercentage())};return(1==a&&this._singularMessage?this._singularMessage:this._message).output(e)},_createNotification:function(){return new CKEDITOR.plugins.notification(this.editor,{type:"progress"})},_addTask:function(a){a=new e(a.weight);this._tasks.push(a);this._totalWeights+=a._weight;return a},_removeTask:function(a){var e=CKEDITOR.tools.indexOf(this._tasks,a);-1!==e&&(a._doneWeight&&(this._doneWeights-=a._doneWeight),this._totalWeights-=a._weight,this._tasks.splice(e,1),this.update())},_onTaskUpdate:function(a){this._doneWeights+=a.data;this.update()},_onTaskDone:function(){this._doneTasks+=1;this.update()}};CKEDITOR.event.implementOn(a.prototype);e.prototype={done:function(){this.update(this._weight)},update:function(a){if(!this.isDone()&&!this.isCanceled()){a=Math.min(this._weight,a);var e=a-this._doneWeight;this._doneWeight=a;this.fire("updated",e);this.isDone()&&this.fire("done")}},cancel:function(){this.isDone()||this.isCanceled()||(this._isCanceled=!0,this.fire("canceled"))},isDone:function(){return this._weight===this._doneWeight},isCanceled:function(){return this._isCanceled}};CKEDITOR.event.implementOn(e.prototype);CKEDITOR.plugins.notificationAggregator=a;CKEDITOR.plugins.notificationAggregator.task=e}(),"use strict",function(){CKEDITOR.plugins.add("uploadwidget",{requires:"widget,clipboard,filetools,notificationaggregator",init:function(a){a.filter.allow("*[!data-widget,!data-cke-upload-id]")}});CKEDITOR.fileTools||(CKEDITOR.fileTools={});CKEDITOR.tools.extend(CKEDITOR.fileTools,{addUploadWidget:function(a,e,c){var f=CKEDITOR.fileTools,h=a.uploadRepository,m=c.supportedTypes?10:20;if(c.fileToElement)a.on("paste",function(l){l=l.data;var k=l.dataTransfer,d=k.getFilesCount(),b=c.loadMethod||"loadAndUpload",g,m;if(!l.dataValue&&d)for(m=0;m<d;m++)if(g=k.getFile(m),!c.supportedTypes||f.isTypeSupported(g,c.supportedTypes)){var q=c.fileToElement(g);g=h.create(g);q&&(g[b](c.uploadUrl,c.additionalRequestParameters),CKEDITOR.fileTools.markElement(q,e,g.id),"loadAndUpload"!=b&&"upload"!=b||CKEDITOR.fileTools.bindNotifications(a,g),l.dataValue+=q.getOuterHtml())}},null,null,m);CKEDITOR.tools.extend(c,{downcast:function(){return new CKEDITOR.htmlParser.text("")},init:function(){var c=this,e=this.wrapper.findOne("[data-cke-upload-id]").data("cke-upload-id"),d=h.loaders[e],b=CKEDITOR.tools.capitalize,f,m;d.on("update",function(h){if(c.wrapper&&c.wrapper.getParent()){a.fire("lockSnapshot");h="on"+b(d.status);if("function"!==typeof c[h]||!1!==c[h](d))m="cke_upload_"+d.status,c.wrapper&&m!=f&&(f&&c.wrapper.removeClass(f),c.wrapper.addClass(m),f=m),"error"!=d.status&&"abort"!=d.status||a.widgets.del(c);a.fire("unlockSnapshot")}else a.editable().find('[data-cke-upload-id\x3d"'+e+'"]').count()||d.abort(),h.removeListener()});d.update()},replaceWith:function(c,e){if(""===c.trim())a.widgets.del(this);else{var d=this==a.widgets.focused,b=a.editable(),f=a.createRange(),h,m;d||(m=a.getSelection().createBookmarks());f.setStartBefore(this.wrapper);f.setEndAfter(this.wrapper);d&&(h=f.createBookmark());b.insertHtmlIntoRange(c,f,e);a.widgets.checkWidgets({initOnlyNew:!0});a.widgets.destroy(this,!0);d?(f.moveToBookmark(h),f.select()):a.getSelection().selectBookmarks(m)}}});a.widgets.add(e,c)},markElement:function(a,e,c){a.setAttributes({"data-cke-upload-id":c,"data-widget":e})},bindNotifications:function(a,e){function c(){f=a._.uploadWidgetNotificaionAggregator;if(!f||f.isFinished())f=a._.uploadWidgetNotificaionAggregator=new CKEDITOR.plugins.notificationAggregator(a,a.lang.uploadwidget.uploadMany,a.lang.uploadwidget.uploadOne),f.once("finished",function(){var c=f.getTaskCount();0===c?f.notification.hide():f.notification.update({message:1==c?a.lang.uploadwidget.doneOne:a.lang.uploadwidget.doneMany.replace("%1",c),type:"success",important:1})})}var f,h=null;e.on("update",function(){!h&&e.uploadTotal&&(c(),h=f.createTask({weight:e.uploadTotal}));h&&"uploading"==e.status&&h.update(e.uploaded)});e.on("uploaded",function(){h&&h.done()});e.on("error",function(){h&&h.cancel();a.showNotification(e.message,"warning")});e.on("abort",function(){h&&h.cancel();a.showNotification(a.lang.uploadwidget.abort,"info")})}})}(),"use strict",function(){CKEDITOR.plugins.add("uploadimage",{requires:"uploadwidget",onLoad:function(){CKEDITOR.addCss(".cke_upload_uploading img{opacity: 0.3}")},init:function(e){if(CKEDITOR.plugins.clipboard.isFileApiSupported){var c=CKEDITOR.fileTools,f=c.getUploadUrl(e.config,"image");f?(c.addUploadWidget(e,"uploadimage",{supportedTypes:/image\/(jpeg|png|gif|bmp)/,uploadUrl:f,fileToElement:function(){var c=new CKEDITOR.dom.element("img");c.setAttribute("src",a);return c},parts:{img:"img"},onUploading:function(a){this.parts.img.setAttribute("src",a.data)},onUploaded:function(a){var c=this.parts.img.$;this.replaceWith('\x3cimg src\x3d"'+a.url+'" width\x3d"'+
(a.responseData.width||c.naturalWidth)+'" height\x3d"'+(a.responseData.height||c.naturalHeight)+'"\x3e')}}),e.on("paste",function(a){if(a.data.dataValue.match(/<img[\s\S]+data:/i)){a=a.data;var m=document.implementation.createHTMLDocument(""),m=new CKEDITOR.dom.element(m.body),l,k,d;m.data("cke-editable",1);m.appendHtml(a.dataValue);l=m.find("img");for(d=0;d<l.count();d++){k=l.getItem(d);var b=k.getAttribute("src")&&"data:"==k.getAttribute("src").substring(0,5),g=null===k.data("cke-realelement");b&&g&&!k.data("cke-upload-id")&&!k.isReadOnly(1)&&(b=e.uploadRepository.create(k.getAttribute("src")),b.upload(f),c.markElement(k,"uploadimage",b.id),c.bindNotifications(e,b))}a.dataValue=m.getHtml()}})):CKEDITOR.error("uploadimage-config")}}});var a="data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs\x3d"}(),"use strict",function(){function a(a){function d(){this.deflated||(a.widgets.focused==this.widget&&(this.focused=!0),a.widgets.destroy(this.widget),this.deflated=!0)}function f(){var b=a.editable(),c=a.document;if(this.deflated)this.widget=a.widgets.initOn(this.element,"image",this.widget.data),this.widget.inline&&!(new CKEDITOR.dom.elementPath(this.widget.wrapper,b)).block&&(b=c.createElement(a.activeEnterMode==CKEDITOR.ENTER_P?"p":"div"),b.replace(this.widget.wrapper),this.widget.wrapper.move(b)),this.focused&&(this.widget.focus(),delete this.focused),delete this.deflated;else{var d=this.widget,b=h,c=d.wrapper,e=d.data.align,d=d.data.hasCaption;if(b){for(var g=3;g--;)c.removeClass(b[g]);"center"==e?d&&c.addClass(b[1]):"none"!=e&&c.addClass(b[p[e]])}else"center"==e?(d?c.setStyle("text-align","center"):c.removeStyle("text-align"),c.removeStyle("float")):("none"==e?c.removeStyle("float"):c.setStyle("float",e),c.removeStyle("text-align"))}}var h=a.config.image2_alignClasses,k=a.config.image2_captionedClass;return{allowedContent:b(a),requiredContent:"img[src,alt]",features:g(a),styleableElements:"img figure",contentTransformations:[["img[width]: sizeToAttribute"]],editables:{caption:{selector:"figcaption",allowedContent:"br em strong sub sup u s; a[!href,target]"}},parts:{image:"img",caption:"figcaption"},dialog:"image2",template:'\x3cimg alt\x3d"" src\x3d"" /\x3e',data:function(){var b=this.features;this.data.hasCaption&&!a.filter.checkFeature(b.caption)&&(this.data.hasCaption=!1);"none"==this.data.align||a.filter.checkFeature(b.align)||(this.data.align="none");this.shiftState({widget:this,element:this.element,oldData:this.oldData,newData:this.data,deflate:d,inflate:f});this.data.link?this.parts.link||(this.parts.link=this.parts.image.getParent()):this.parts.link&&delete this.parts.link;this.parts.image.setAttributes({src:this.data.src,"data-cke-saved-src":this.data.src,alt:this.data.alt});if(this.oldData&&!this.oldData.hasCaption&&this.data.hasCaption)for(var c in this.data.classes)this.parts.image.removeClass(c);if(a.filter.checkFeature(b.dimension)){b=this.data;b={width:b.width,height:b.height};c=this.parts.image;for(var e in b)b[e]?c.setAttribute(e,b[e]):c.removeAttribute(e)}this.oldData=CKEDITOR.tools.extend({},this.data)},init:function(){var b=CKEDITOR.plugins.image2,c=this.parts.image,d={hasCaption:!!this.parts.caption,src:c.getAttribute("src"),alt:c.getAttribute("alt")||"",width:c.getAttribute("width")||"",height:c.getAttribute("height")||"",lock:this.ready?b.checkHasNaturalRatio(c):!0},e=c.getAscendant("a");e&&this.wrapper.contains(e)&&(this.parts.link=e);d.align||(c=d.hasCaption?this.element:c,h?(c.hasClass(h[0])?d.align="left":c.hasClass(h[2])&&(d.align="right"),d.align?c.removeClass(h[p[d.align]]):d.align="none"):(d.align=c.getStyle("float")||"none",c.removeStyle("float")));a.plugins.link&&this.parts.link&&(d.link=b.getLinkAttributesParser()(a,this.parts.link),(c=d.link.advanced)&&c.advCSSClasses&&(c.advCSSClasses=CKEDITOR.tools.trim(c.advCSSClasses.replace(/cke_\S+/,""))));this.wrapper[(d.hasCaption?"remove":"add")+"Class"]("cke_image_nocaption");this.setData(d);a.filter.checkFeature(this.features.dimension)&&!0!==a.config.image2_disableResizer&&m(this);this.shiftState=b.stateShifter(this.editor);this.on("contextMenu",function(a){a.data.image=CKEDITOR.TRISTATE_OFF;if(this.parts.link||this.wrapper.getAscendant("a"))a.data.link=a.data.unlink=CKEDITOR.TRISTATE_OFF});this.on("dialog",function(a){a.data.widget=this},this)},addClass:function(a){n(this).addClass(a)},hasClass:function(a){return n(this).hasClass(a)},removeClass:function(a){n(this).removeClass(a)},getClasses:function(){var a=new RegExp("^("+[].concat(k,h).join("|")+")$");return function(){var b=this.repository.parseElementClasses(n(this).getAttribute("class")),c;for(c in b)a.test(c)&&delete b[c];return b}}(),upcast:e(a),downcast:c(a),getLabel:function(){return this.editor.lang.widget.label.replace(/%1/,(this.data.alt||"")+" "+this.pathName)}}}function e(a){var b=f(a),c=a.config.image2_captionedClass;return function(a,d){var e={width:1,height:1},f=a.name,g;if(!a.attributes["data-cke-realelement"]&&(b(a)?("div"==f&&(g=a.getFirst("figure"))&&(a.replaceWith(g),a=g),d.align="center",g=a.getFirst("img")||a.getFirst("a").getFirst("img")):"figure"==f&&a.hasClass(c)?g=a.getFirst("img")||a.getFirst("a").getFirst("img"):h(a)&&(g="a"==a.name?a.children[0]:a),g)){for(var k in e)(e=g.attributes[k])&&e.match(w)&&delete g.attributes[k];return a}}}function c(a){var b=a.config.image2_alignClasses;return function(a){var c="a"==a.name?a.getFirst():a,d=c.attributes,e=this.data.align;if(!this.inline){var f=a.getFirst("span");f&&f.replaceWith(f.getFirst({img:1,a:1}))}e&&"none"!=e&&(f=CKEDITOR.tools.parseCssText(d.style||""),"center"==e&&"figure"==a.name?a=a.wrapWith(new CKEDITOR.htmlParser.element("div",b?{"class":b[1]}:{style:"text-align:center"})):e in{left:1,right:1}&&(b?c.addClass(b[p[e]]):f["float"]=e),b||CKEDITOR.tools.isEmpty(f)||(d.style=CKEDITOR.tools.writeCssText(f)));return a}}function f(a){var b=a.config.image2_captionedClass,c=a.config.image2_alignClasses,d={figure:1,a:1,img:1};return function(e){if(!(e.name in{div:1,p:1}))return!1;var f=e.children;if(1!==f.length)return!1;f=f[0];if(!(f.name in d))return!1;if("p"==e.name){if(!h(f))return!1}else if("figure"==f.name){if(!f.hasClass(b))return!1}else if(a.enterMode==CKEDITOR.ENTER_P||!h(f))return!1;return(c?e.hasClass(c[1]):"center"==CKEDITOR.tools.parseCssText(e.attributes.style||"",!0)["text-align"])?!0:!1}}function h(a){return"img"==a.name?!0:"a"==a.name?1==a.children.length&&a.getFirst("img"):!1}function m(a){var b=a.editor,c=b.editable(),d=b.document,e=a.resizer=d.createElement("span");e.addClass("cke_image_resizer");e.setAttribute("title",b.lang.image2.resizer);e.append(new CKEDITOR.dom.text("",d));if(a.inline)a.wrapper.append(e);else{var f=a.parts.link||a.parts.image,g=f.getParent(),h=d.createElement("span");h.addClass("cke_image_resizer_wrapper");h.append(f);h.append(e);a.element.append(h,!0);g.is("span")&&g.remove()}e.on("mousedown",function(f){function g(a,b,c){var e=CKEDITOR.document,f=[];d.equals(e)||f.push(e.on(a,b));f.push(d.on(a,b));if(c)for(a=f.length;a--;)c.push(f.pop())}function h(){U=p+m*X;W=Math.round(U/w)}function k(){W=q-N;U=Math.round(W*w)}var l=a.parts.image,m="right"==a.data.align?-1:1,n=f.data.$.screenX,r=f.data.$.screenY,p=l.$.clientWidth,q=l.$.clientHeight,w=p/q,y=[],D="cke_image_s"+(~m?"e":"w"),M,U,W,L,X,N,J;b.fire("saveSnapshot");g("mousemove",function(a){M=a.data.$;X=M.screenX-n;N=r-M.screenY;J=Math.abs(X/N);1==m?0>=X?0>=N?h():J>=w?h():k():0>=N?J>=w?k():h():k():0>=X?0>=N?J>=w?k():h():k():0>=N?h():J>=w?h():k();15<=U&&15<=W?(l.setAttributes({width:U,height:W}),L=!0):L=!1},y);g("mouseup",function(){for(var d;d=y.pop();)d.removeListener();c.removeClass(D);e.removeClass("cke_image_resizing");L&&(a.setData({width:U,height:W}),b.fire("saveSnapshot"));L=!1},y);c.addClass(D);e.addClass("cke_image_resizing")});a.on("data",function(){e["right"==a.data.align?"addClass":"removeClass"]("cke_image_resizer_left")})}function l(a){var b=[],c;return function(e){var f=a.getCommand("justify"+e);if(f){b.push(function(){f.refresh(a,a.elementPath())});if(e in{right:1,left:1,center:1})f.on("exec",function(c){var f=d(a);if(f){f.setData("align",e);for(f=b.length;f--;)b[f]();c.cancel()}});f.on("refresh",function(b){var f=d(a),g={right:1,left:1,center:1};f&&(void 0===c&&(c=a.filter.checkFeature(a.widgets.registered.image.features.align)),c?this.setState(f.data.align==e?CKEDITOR.TRISTATE_ON:e in g?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED):this.setState(CKEDITOR.TRISTATE_DISABLED),b.cancel())})}}}function k(a){a.plugins.link&&(CKEDITOR.on("dialogDefinition",function(b){b=b.data;if("link"==b.name){b=b.definition;var c=b.onShow,e=b.onOk;b.onShow=function(){var b=d(a),e=this.getContentElement("info","linkDisplayText").getElement().getParent().getParent();b&&(b.inline?!b.wrapper.getAscendant("a"):1)?(this.setupContent(b.data.link||{}),e.hide()):(e.show(),c.apply(this,arguments))};b.onOk=function(){var b=d(a);if(b&&(b.inline?!b.wrapper.getAscendant("a"):1)){var c={};this.commitContent(c);b.setData("link",c)}else e.apply(this,arguments)}}}),a.getCommand("unlink").on("exec",function(b){var c=d(a);c&&c.parts.link&&(c.setData("link",null),this.refresh(a,a.elementPath()),b.cancel())}),a.getCommand("unlink").on("refresh",function(b){var c=d(a);c&&(this.setState(c.data.link||c.wrapper.getAscendant("a")?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),b.cancel())}))}function d(a){return(a=a.widgets.focused)&&"image"==a.name?a:null}function b(a){var b=a.config.image2_alignClasses;a={div:{match:f(a)},p:{match:f(a)},img:{attributes:"!src,alt,width,height"},figure:{classes:"!"+a.config.image2_captionedClass},figcaption:!0};b?(a.div.classes=b[1],a.p.classes=a.div.classes,a.img.classes=b[0]+","+b[2],a.figure.classes+=","+a.img.classes):(a.div.styles="text-align",a.p.styles="text-align",a.img.styles="float",a.figure.styles="float,display");return a}function g(a){a=a.config.image2_alignClasses;return{dimension:{requiredContent:"img[width,height]"},align:{requiredContent:"img"+(a?"("+a[0]+")":"{float}")},caption:{requiredContent:"figcaption"}}}function n(a){return a.data.hasCaption?a.element:a.parts.image}var q=new CKEDITOR.template('\x3cfigure class\x3d"{captionedClass}"\x3e\x3cimg alt\x3d"" src\x3d"" /\x3e\x3cfigcaption\x3e{captionPlaceholder}\x3c/figcaption\x3e\x3c/figure\x3e'),p={left:0,center:1,right:2},w=/^\s*(\d+\%)\s*$/i;CKEDITOR.plugins.add("image2",{requires:"widget,dialog",icons:"image",hidpi:!0,onLoad:function(){CKEDITOR.addCss(".cke_image_nocaption{line-height:0}.cke_editable.cke_image_sw, .cke_editable.cke_image_sw *{cursor:sw-resize !important}.cke_editable.cke_image_se, .cke_editable.cke_image_se *{cursor:se-resize !important}.cke_image_resizer{display:none;position:absolute;width:10px;height:10px;bottom:-5px;right:-5px;background:#000;outline:1px solid #fff;line-height:0;cursor:se-resize;}.cke_image_resizer_wrapper{position:relative;display:inline-block;line-height:0;}.cke_image_resizer.cke_image_resizer_left{right:auto;left:-5px;cursor:sw-resize;}.cke_widget_wrapper:hover .cke_image_resizer,.cke_image_resizer.cke_image_resizing{display:block}.cke_widget_wrapper\x3ea{display:inline-block}")},init:function(b){var c=b.config,d=b.lang.image2,e=a(b);c.filebrowserImage2BrowseUrl=c.filebrowserImageBrowseUrl;c.filebrowserImage2UploadUrl=c.filebrowserImageUploadUrl;e.pathName=d.pathName;e.editables.caption.pathName=d.pathNameCaption;b.widgets.add("image",e);b.ui.addButton&&b.ui.addButton("Image",{label:b.lang.common.image,command:"image",toolbar:"insert,10"});b.contextMenu&&(b.addMenuGroup("image",10),b.addMenuItem("image",{label:d.menu,command:"image",group:"image"}));CKEDITOR.dialog.add("image2",this.path+"dialogs/image2.js")},afterInit:function(a){var b={left:1,right:1,center:1,block:1},c=l(a),d;for(d in b)c(d);k(a)}});CKEDITOR.plugins.image2={stateShifter:function(a){function b(a,f){var g={};e?g.attributes={"class":e[1]}:g.styles={"text-align":"center"};g=d.createElement(a.activeEnterMode==CKEDITOR.ENTER_P?"p":"div",g);c(g,f);f.move(g);return g}function c(b,d){if(d.getParent()){var e=a.createRange();e.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START);d.remove();g.insertElementIntoRange(b,e)}else b.replace(d)}var d=a.document,e=a.config.image2_alignClasses,f=a.config.image2_captionedClass,g=a.editable(),h=["hasCaption","align","link"],k={align:function(c,d,f){var g=c.element;c.changed.align?c.newData.hasCaption||("center"==f&&(c.deflate(),c.element=b(a,g)),c.changed.hasCaption||"center"!=d||"center"==f||(c.deflate(),d=g.findOne("a,img"),d.replace(g),c.element=d)):"center"==f&&c.changed.hasCaption&&!c.newData.hasCaption&&(c.deflate(),c.element=b(a,g));!e&&g.is("figure")&&("center"==f?g.setStyle("display","inline-block"):g.removeStyle("display"))},hasCaption:function(b,e,g){b.changed.hasCaption&&(e=b.element.is({img:1,a:1})?b.element:b.element.findOne("a,img"),b.deflate(),g?(g=CKEDITOR.dom.element.createFromHtml(q.output({captionedClass:f,captionPlaceholder:a.lang.image2.captionPlaceholder}),d),c(g,b.element),e.replace(g.findOne("img")),b.element=g):(e.replace(b.element),b.element=e))},link:function(b,c,e){if(b.changed.link){var f=b.element.is("img")?b.element:b.element.findOne("img"),g=b.element.is("a")?b.element:b.element.findOne("a"),h=b.element.is("a")&&!e||b.element.is("img")&&e,k;h&&b.deflate();e?(c||(k=d.createElement("a",{attributes:{href:b.newData.link.url}}),k.replace(f),f.move(k)),e=CKEDITOR.plugins.image2.getLinkAttributesGetter()(a,e),CKEDITOR.tools.isEmpty(e.set)||(k||g).setAttributes(e.set),e.removed.length&&(k||g).removeAttributes(e.removed)):(e=g.findOne("img"),e.replace(g),k=e);h&&(b.element=k)}}};return function(a){var b,c;a.changed={};for(c=0;c<h.length;c++)b=h[c],a.changed[b]=a.oldData?a.oldData[b]!==a.newData[b]:!1;for(c=0;c<h.length;c++)b=h[c],k[b](a,a.oldData?a.oldData[b]:null,a.newData[b]);a.inflate()}},checkHasNaturalRatio:function(a){var b=a.$;a=this.getNatural(a);return Math.round(b.clientWidth/a.width*a.height)==b.clientHeight||Math.round(b.clientHeight/a.height*a.width)==b.clientWidth},getNatural:function(a){if(a.$.naturalWidth)a={width:a.$.naturalWidth,height:a.$.naturalHeight};else{var b=new Image;b.src=a.getAttribute("src");a={width:b.width,height:b.height}}return a},getLinkAttributesGetter:function(){return CKEDITOR.plugins.link.getLinkAttributes},getLinkAttributesParser:function(){return CKEDITOR.plugins.link.parseLinkAttributes}}}(),CKEDITOR.config.image2_captionedClass="image",CKEDITOR.config.plugins="dialogui,dialog,a11yhelp,about,basicstyles,bidi,blockquote,button,toolbar,notification,clipboard,panelbutton,panel,floatpanel,colorbutton,colordialog,copyformatting,menu,contextmenu,dialogadvtab,div,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,format,forms,horizontalrule,htmlwriter,iframe,indent,indentlist,indentblock,justify,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastefromword,pastetext,preview,print,removeformat,resize,save,selectall,showblocks,showborders,smiley,sourcearea,specialchar,stylescombo,tab,table,tabletools,templates,undo,wysiwygarea,lineutils,widgetselection,widget,filetools,notificationaggregator,uploadwidget,uploadimage,image2",CKEDITOR.config.skin="moono-lisa",function(){var a=function(a,c){var f=CKEDITOR.getUrl("plugins/"+c);a=a.split(",");for(var h=0;h<a.length;h++)CKEDITOR.skin.icons[a[h]]={path:f,offset:-a[++h],bgsize:a[++h]}};CKEDITOR.env.hidpi?a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,codesnippet,384,,bgcolor,408,,textcolor,432,,copyformatting,456,,creatediv,480,,docprops-rtl,504,,docprops,528,,embed,552,,embedsemantic,576,,find-rtl,600,,find,624,,replace,648,,flash,672,,button,696,,checkbox,720,,form,744,,hiddenfield,768,,imagebutton,792,,radio,816,,select-rtl,840,,select,864,,textarea-rtl,888,,textarea,912,,textfield-rtl,936,,textfield,960,,horizontalrule,984,,iframe,1008,,image,1032,,indent-rtl,1056,,indent,1080,,outdent-rtl,1104,,outdent,1128,,justifyblock,1152,,justifycenter,1176,,justifyleft,1200,,justifyright,1224,,language,1248,,anchor-rtl,1272,,anchor,1296,,link,1320,,unlink,1344,,bulletedlist-rtl,1368,,bulletedlist,1392,,numberedlist-rtl,1416,,numberedlist,1440,,mathjax,1464,,maximize,1488,,newpage-rtl,1512,,newpage,1536,,pagebreak-rtl,1560,,pagebreak,1584,,pastefromword-rtl,1608,,pastefromword,1632,,pastetext-rtl,1656,,pastetext,1680,,placeholder,1704,,preview-rtl,1728,,preview,1752,,print,1776,,removeformat,1800,,save,1824,,selectall,1848,,showblocks-rtl,1872,,showblocks,1896,,smiley,1920,,source-rtl,1944,,source,1968,,sourcedialog-rtl,1992,,sourcedialog,2016,,specialchar,2040,,table,2064,,templates-rtl,2088,,templates,2112,,uicolor,2136,,redo-rtl,2160,,redo,2184,,undo-rtl,2208,,undo,2232,,simplebox,4512,auto","icons_hidpi.png"):a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,codesnippet,384,auto,bgcolor,408,auto,textcolor,432,auto,copyformatting,456,auto,creatediv,480,auto,docprops-rtl,504,auto,docprops,528,auto,embed,552,auto,embedsemantic,576,auto,find-rtl,600,auto,find,624,auto,replace,648,auto,flash,672,auto,button,696,auto,checkbox,720,auto,form,744,auto,hiddenfield,768,auto,imagebutton,792,auto,radio,816,auto,select-rtl,840,auto,select,864,auto,textarea-rtl,888,auto,textarea,912,auto,textfield-rtl,936,auto,textfield,960,auto,horizontalrule,984,auto,iframe,1008,auto,image,1032,auto,indent-rtl,1056,auto,indent,1080,auto,outdent-rtl,1104,auto,outdent,1128,auto,justifyblock,1152,auto,justifycenter,1176,auto,justifyleft,1200,auto,justifyright,1224,auto,language,1248,auto,anchor-rtl,1272,auto,anchor,1296,auto,link,1320,auto,unlink,1344,auto,bulletedlist-rtl,1368,auto,bulletedlist,1392,auto,numberedlist-rtl,1416,auto,numberedlist,1440,auto,mathjax,1464,auto,maximize,1488,auto,newpage-rtl,1512,auto,newpage,1536,auto,pagebreak-rtl,1560,auto,pagebreak,1584,auto,pastefromword-rtl,1608,auto,pastefromword,1632,auto,pastetext-rtl,1656,auto,pastetext,1680,auto,placeholder,1704,auto,preview-rtl,1728,auto,preview,1752,auto,print,1776,auto,removeformat,1800,auto,save,1824,auto,selectall,1848,auto,showblocks-rtl,1872,auto,showblocks,1896,auto,smiley,1920,auto,source-rtl,1944,auto,source,1968,auto,sourcedialog-rtl,1992,auto,sourcedialog,2016,auto,specialchar,2040,auto,table,2064,auto,templates-rtl,2088,auto,templates,2112,auto,uicolor,2136,auto,redo-rtl,2160,auto,redo,2184,auto,undo-rtl,2208,auto,undo,2232,auto,simplebox,2256,auto","icons.png")}())})();
"use strict";var ITSM=ITSM||{};ITSM.Agent=ITSM.Agent||{};ITSM.Agent.ConfigItem=ITSM.Agent.ConfigItem||{};ITSM.Agent.ConfigItem.Search=(function(TargetNS){TargetNS.Init=function(){var ITSMConfigItemOpenSearchDialog=Core.Config.Get('ITSMConfigItemOpenSearchDialog');if(ITSMConfigItemOpenSearchDialog){ITSM.Agent.ConfigItem.Search.OpenSearchDialog(ITSMConfigItemOpenSearchDialog.Action,Core.App.EscapeSelector(ITSMConfigItemOpenSearchDialog.Profile),Core.App.EscapeSelector(ITSMConfigItemOpenSearchDialog.ClassID));}};TargetNS.AdditionalAttributeSelectionRebuild=function(){var $AttributeClone=$('#AttributeOrig option').clone(),$AttributeSelection=$('#Attribute').empty(),Value;$AttributeClone.each(function(){Value=Core.App.EscapeSelector($(this).attr('value'));if(!$('#SearchInsert label#Label'+Value).length){$AttributeSelection.append($(this));}});$AttributeSelection.trigger('redraw.InputField');return true;};TargetNS.SearchAttributeAdd=function(Attribute){Attribute=Core.App.EscapeSelector(Attribute);var $Label=$('#SearchAttributesHidden label#Label'+Attribute);if($Label.length){$Label.prev().clone().appendTo('#SearchInsert');$Label.clone().appendTo('#SearchInsert');$Label.next().clone().appendTo('#SearchInsert')
.find('.RemoveButton').on('click',function(){var $Element=$(this).parent();TargetNS.SearchAttributeRemove($Element);TargetNS.AdditionalAttributeSelectionRebuild();return false;});$('#SearchInsert').find('.ITSMCustomerSearch').each(function(){var InputID=$(this).attr('id')+'Autocomplete';$(this).removeClass('ITSMCustomerSearch');$(this).attr('id',InputID);$(this).prev().attr('id',InputID+'Selected');ITSM.Agent.CustomerSearch.Init($('#'+Core.App.EscapeSelector(InputID)));$('ul.ui-autocomplete').on('click',function(Event){Event.stopPropagation();return false;});});}
Core.UI.InputFields.Activate($('#SearchInsert'));return false;};TargetNS.SearchAttributeRemove=function($Element){$Element.prev().prev().remove();$Element.prev().remove();$Element.remove();};function SearchProfileDelete(Profile){var Data={Action:'AgentITSMConfigItemSearch',Subaction:'AJAXProfileDelete',Profile:Profile,ClassID:$('#SearchClassID').val()};Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(){});}
function ShowWaitingDialog(){var Content=Core.Template.Render('Agent/ITSMCore/LoadingDialog',{SpanTitle:Core.Config.Get('LoadingMsg')});Core.UI.Dialog.ShowContentDialog(Content,Core.Config.Get('LoadingMsg'),'10px','Center',true);}
TargetNS.SetSearchDialog=function(){$('#SearchProfileAddBlock').hide();$('#SaveProfile').parent().hide().prev().hide().prev().hide();if($('#SearchProfile').val()&&$('#SearchProfile').val()!=='last-search'){$('#SearchProfileDelete').show();$('#SearchProfileAsLink').show();$('#SaveProfile').parent().show().prev().show().prev().show();$('#SaveProfile').prop('checked',false);}
Core.UI.InputFields.Activate($('.Dialog:visible'));$('#Attribute').on('change',function(){var Attribute=$('#Attribute').val();TargetNS.SearchAttributeAdd(Attribute);TargetNS.AdditionalAttributeSelectionRebuild();$('.ShowTreeSelection').off('click').on('click',function(){Core.UI.TreeSelection.ShowTreeSelection($(this));return false;});return false;});$('#SearchForm').off('keypress.FilterInput').on('keypress.FilterInput',function(Event){if((Event.charCode||Event.keyCode)===13){if(!CheckForSearchedValues()){return false;}
else{$('#SearchFormSubmit').trigger('click');}
return false;}});$('#SearchFormSubmit').bind('click',function(){var ShownAttributes=[];if($('#SearchProfileAddAction, #SearchProfileAddName').is(':visible')&&$('#SearchProfileAddName').val()){$('#SearchProfileAddAction').trigger('click');}
$('#SearchInsert label').each(function(){if($(this).attr('id')){ShownAttributes.push($(this).attr('id'));}});$('#SearchForm #ShownAttributes').val(ShownAttributes.join(';'));if($('#SearchForm #ResultForm').val()==='Normal'){if(!CheckForSearchedValues()){return false;}
else{CheckSearchStringsForStopWords(function(){$('#SearchForm').submit();return false;});}}
else{$('#SearchForm').attr('target','SearchResultPage');if(!CheckForSearchedValues()){return false;}
else{CheckSearchStringsForStopWords(function(){$('#SearchForm').submit();$('#SearchForm').attr('target','');});}}
return false;});Core.Form.Validate.Init();Core.Form.Validate.SetSubmitFunction($('#SearchForm'),function(Form){Form.submit();if($('#SearchForm #ResultForm').val()==='Normal'){ShowWaitingDialog();}});$('#SearchProfile').bind('change',function(){var SearchProfile=$('#SearchProfile').val(),SearchProfileEmptySearch=$('#EmptySearch').val(),SearchProfileAction=$('#SearchAction').val();TargetNS.OpenSearchDialog(SearchProfileAction,SearchProfile,SearchProfileEmptySearch);return false;});$('#SearchProfileNew').on('click',function(Event){$('#SearchProfileAddBlock').toggle();$('#SearchProfileAddName').focus();Event.preventDefault();return false;});$('#SearchProfileAddAction').bind('click',function(){var ProfileName,$Element1;ProfileName=$('#SearchProfileAddName').val();if(!ProfileName.length||ProfileName.length<2){return;}
$Element1=$('#SearchProfile').children().first().clone();$Element1.text(ProfileName);$Element1.attr('value',ProfileName);$Element1.prop('selected',true);$('#SearchProfile').append($Element1).trigger('redraw.InputField');$('#SearchProfileAddName').val('');$('#SearchProfileAddBlock').hide();$('#SaveProfile').parent().hide().prev().hide().prev().hide();$('#SaveProfile').prop('checked',true);$('#SearchProfileDelete').show();$('#SearchProfileAsLink').show();});$('#SearchProfileAsLink').bind('click',function(){var SearchProfile=$('#SearchProfile').val(),SearchProfileAction=$('#SearchAction').val();ClassID=$('#ClassID').val();window.location.href=Core.Config.Get('Baselink')+'Action='+SearchProfileAction+
';Subaction=Search;TakeLastSearch=1;SaveProfile=1;Profile='+encodeURIComponent(SearchProfile)
+';ClassID='+ClassID;return false;});$('#SearchProfileDelete').on('click',function(Event){$('#SearchProfile').find('option:selected').each(function(){if($(this).attr('value')!=='last-search'){$('#SearchInsert').text('');SearchProfileDelete($(this).val());$(this).remove();TargetNS.SearchAttributeAdd('Fulltext');TargetNS.AdditionalAttributeSelectionRebuild();}});$('#SearchProfile').trigger('change');if($('#SearchProfile').val()&&$('#SearchProfile').val()==='last-search'){$('#SearchProfileDelete').hide();$('#SearchProfileAsLink').hide();}
Event.preventDefault();return false;});};TargetNS.LoadProfile=function(Profile){var BaseLink=Core.Config.Get('Baselink'),Action='Action=AgentITSMConfigItemSearch;',SubAction='Subaction=AJAXUpdate;',ClassID='ClassID='+$('#SearchClassID').val()+';',SearchProfile='Profile='+Profile,URL=BaseLink+Action+SubAction+ClassID+SearchProfile;$('#DivClassID').addClass('ui-autocomplete-loading');Core.AJAX.ContentUpdate($('#AJAXUpdate'),URL,function(){var ITSMSearchProfileAttributes=Core.Config.Get('ITSMSearchProfileAttributes')||[];$.each(ITSMSearchProfileAttributes,function(Idx,Attribute){ITSM.Agent.ConfigItem.Search.SearchAttributeAdd(Core.App.EscapeSelector(Attribute));ITSM.Agent.ConfigItem.Search.AdditionalAttributeSelectionRebuild();});TargetNS.SetSearchDialog('$Env{"Action"}');$('#ITSMSearchProfile').removeClass('Hidden');$('#ITSMSearchFields').removeClass('Hidden');$('.Dialog:visible #SearchFormSubmit').appendTo($('.Dialog:visible > .Content > .ContentFooter'));$('#SearchFormSubmit').removeClass('Hidden');$('#DivClassID').removeClass('ui-autocomplete-loading');Core.UI.InputFields.Activate($('#SearchForm'));});};function CheckForSearchedValues(){var SearchValueFlag=false;$('#SearchForm label').each(function(){var ElementName,$Element,$LabelElement=$(this),$FieldElement=$LabelElement.next('.Field');if($(this).attr('id')){ElementName=$(this).attr('id').substring(5);$Element=$('#SearchForm input[name='+Core.App.EscapeSelector(ElementName)+']');if(!$Element.length){$Element=$(this).next().find('select');}
if($FieldElement.find('input[name$="SearchType"]').val()==='TimeSlot'&&!$FieldElement.find('select').length){$Element=$FieldElement.find('input[type=text]').first();}
if($Element.length){if($Element.val()&&$Element.val()!==''){SearchValueFlag=true;}}}});if(!SearchValueFlag){alert(Core.Config.Get('EmptySearchMsg'));}
return SearchValueFlag;}
function CheckSearchStringsForStopWords(Callback){var SearchStrings={},SearchStringsFound=0,RelevantElementNames={'From':1,'To':1,'Cc':1,'Subject':1,'Body':1,'Fulltext':1};if(!Core.Config.Get('CheckSearchStringsForStopWords')){Callback();return;}
$('#SearchForm label').each(function(){var ElementName,$Element;if($(this).attr('id')){ElementName=$(this).attr('id').substring(5);if(!RelevantElementNames[ElementName]){return;}
$Element=$('#SearchForm input[name='+ElementName+']');if($Element.length){if($Element.val()&&$Element.val()!==''){SearchStrings[ElementName]=$Element.val();SearchStringsFound=1;}}}});if(!SearchStringsFound){Callback();return;}
AJAXStopWordCheck(SearchStrings,function(FoundStopWords){alert(Core.Config.Get('SearchStringsContainStopWordsMsg')+"\n"+FoundStopWords);},Callback);}
TargetNS.OpenSearchDialog=function(Action,Profile,Class){var Referrer=Core.Config.Get('Action'),Data;if(!Action){Action='AgentITSMConfigItemSearch';}
Data={Action:Action,Referrer:Referrer,Profile:Profile,Subaction:'AJAX',ClassID:Class};ShowWaitingDialog();Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(HTML){if(!$('.Dialog:visible').length){return;}
Core.UI.Dialog.ShowContentDialog(HTML,Core.Config.Get('SearchMsg'),'10px','Center',true,[],true);$('#SearchClassID').off('change.SearchProfile').on('change.SearchProfile',function(){if($('#SearchClassID').val()!==""){ITSM.Agent.ConfigItem.Search.LoadProfile($('#SearchProfile').val());}
else{$('#SearchProfile').attr("id","SearchProfileOld");}});var ClassSelected=$('#SearchClassID').val();if(ClassSelected){ITSM.Agent.ConfigItem.Search.LoadProfile($('#SearchProfile').val());}
TargetNS.SetSearchDialog();},'html');};Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(ITSM.Agent.ConfigItem.Search||{}));

"use strict";var ITSM=ITSM||{};ITSM.UI=ITSM.UI||{};ITSM.UI.ConfigItemActionRow=(function(TargetNS){if(!Core.Debug.CheckDependency('ITSM.UI.ConfigItemActionRow','Core.JSON','JSON API')){return;}
if(!Core.Debug.CheckDependency('ITSM.UI.ConfigItemActionRow','Core.Data','Data API')){return;}
var ConfigItemElementSelectors={'Small':'div.Overview table td input:checkbox[name=ConfigItemID]','Medium':'ul.Overview input:checkbox[name=ConfigItemID]','Large':'ul.Overview input:checkbox[name=ConfigItemID]'},ConfigItemView;function SerializeData(Data){var QueryString='';$.each(Data,function(Key,Value){QueryString+=';'+encodeURIComponent(Key)+'='+encodeURIComponent(Value);});return QueryString;}
TargetNS.AddActions=function($Element,JSONString){var Actions;if(isJQueryObject($Element)){if(typeof JSONString==='String'){Actions=Core.JSON.Parse(JSONString);}
else{Actions=JSONString;}
Core.Data.Set($Element,'Actions',Actions);}
else{Core.Debug.Log('Element does not exist or no valid data structure passed.');}};TargetNS.UpdateActionRow=function($ClickedElement,$Checkboxes,$ActionRow){var ConfigItemActionData,ActionRowElement;$Checkboxes=$Checkboxes.filter(':checked');if(!$Checkboxes.length){$ActionRow
.find('li').filter(':not(.Bulk)').remove()
.end().end()
.find('#ConfigItemBulkAction').addClass('Inactive')
.end()
.find('li.Last').removeClass('Last')
.end()
.find('li:last').addClass('Last');}
else if($Checkboxes.length===1&&!$('#SelectAllConfigItems').is(':checked')){$ActionRow.find('#ConfigItemBulkAction').removeClass('Inactive');ConfigItemActionData=Core.Data.Get($Checkboxes.closest('li, tr'),'Actions');if(typeof ConfigItemActionData!=='undefined'){$.each(ConfigItemActionData,function(Index,Value){if(Value.HTML){$(Value.HTML).attr('id',Value.ID).appendTo($ActionRow);ActionRowElement=$ActionRow.find('#'+Value.ID).find('a');if(typeof Value.Target==='undefined'||Value.Target===""){ActionRowElement.attr('href',Value.Link);}
if(Value.PopupType){ActionRowElement.on('click.Popup',function(){Core.UI.Popup.OpenPopup(Value.Link,Value.PopupType);return false;});}}});}
$ActionRow
.find('li.Last').removeClass('Last')
.end()
.find('li:last').addClass('Last');}
else{$ActionRow
.find('li').filter(':not(.Bulk)').remove()
.end().end()
.find('#ConfigItemBulkAction').removeClass('Inactive')
.end()
.find('li.Last').removeClass('Last')
.end()
.find('li:last').addClass('Last');}};TargetNS.Init=function(){if($('#ConfigItemOverviewMedium').length){ConfigItemView='Medium';}
else if($('#ConfigItemOverviewLarge').length){ConfigItemView='Large';}
else{ConfigItemView='Small';}
$('#SelectAllConfigItems').on('click',function(){var Status=$(this).prop('checked');$(ConfigItemElementSelectors[ConfigItemView]).prop('checked',Status).triggerHandler('click');});$(ConfigItemElementSelectors[ConfigItemView]).on('click',function(Event){Event.stopPropagation();ITSM.UI.ConfigItemActionRow.UpdateActionRow($(this),$(ConfigItemElementSelectors[ConfigItemView]),$('div.OverviewActions ul.Actions'));});$('#ConfigItemBulkAction a').on('click',function(){var $Element=$(this),$SelectedConfigItems,ConfigItemIDParameter="ConfigItemID=",ConfigItemIDs="",URL;if($Element.parent('li').hasClass('Inactive')){return false;}
else{$SelectedConfigItems=$(ConfigItemElementSelectors[ConfigItemView]+':checked');$SelectedConfigItems.each(function(){ConfigItemIDs+=ConfigItemIDParameter+$(this).val()+";";});URL=Core.Config.Get('Baselink')+"Action=AgentITSMConfigItemBulk;"+ConfigItemIDs;URL+=SerializeData(Core.App.GetSessionInformation());Core.UI.Popup.OpenPopup(URL,'ConfigItemAction');}
return false;});};return TargetNS;}(ITSM.UI.ConfigItemActionRow||{}));

"use strict";var ITSM=ITSM||{};ITSM.Agent=ITSM.Agent||{};ITSM.Agent.ConfigItem=ITSM.Agent.ConfigItem||{};ITSM.Agent.ConfigItem.Dashboard=(function(TargetNS){TargetNS.Init=function(){var DashletData=Core.Config.Get('ITSMConfigItemGeneric');if(typeof DashletData!=='undefined'){ITSMConfigItemGeneric(DashletData);Core.App.Subscribe('Event.AJAX.ContentUpdate.Callback',function($WidgetElement){if(typeof $WidgetElement!=='undefined'&&$WidgetElement.search(DashletData.Name)!==parseInt('-1',10)){ITSMConfigItemGeneric(DashletData);}});}};function ITSMConfigItemGeneric(DashletData){$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').find('.Tab.Actions li a').off('click').on('click',function(){var CustomerID,CustomerUserID,Filter;CustomerID=$('input[name=CustomerID]').val()||'';CustomerUserID=$('input[name=CustomerUserID]').val()||'';Filter=$(this).attr('data-filter');$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').addClass('Loading');Core.AJAX.ContentUpdate($('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)),Core.Config.Get('Baselink')+'Action='+Core.Config.Get('Action')+';Subaction=Element;Name='+DashletData.Name+';CustomerID='+encodeURIComponent(CustomerID)+';CustomerUserID='+encodeURIComponent(CustomerUserID)+';Filter='+Filter,function(){$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').removeClass('Loading');});return false;});$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').find('.DataTable th a').off('click').on('click',function(){var CustomerID,CustomerUserID,SortBy=$(this).attr('data-column'),OrderBy='',$OrderByObj=$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').find('th.SortDescendingLarge, th.SortAscendingLarge');CustomerID=$('input[name=CustomerID]').val()||'';CustomerUserID=$('input[name=CustomerUserID]').val()||'';if($OrderByObj&&$OrderByObj.hasClass('SortDescendingLarge')){OrderBy='Down';}
else if($OrderByObj&&$OrderByObj.hasClass('SortAscendingLarge')){OrderBy='Up';}
$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').addClass('Loading');Core.AJAX.ContentUpdate($('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)),Core.Config.Get('Baselink')+'Action='+Core.Config.Get('Action')+';Subaction=Element;Name='+DashletData.Name+';CustomerID='+encodeURIComponent(CustomerID)+';CustomerUserID='+encodeURIComponent(CustomerUserID)+';SortBy='+SortBy+';OrderBy='+OrderBy,function(){$('#Dashboard'+Core.App.EscapeSelector(DashletData.Name)+'-box').removeClass('Loading');});return false;});}
Core.Init.RegisterNamespace(TargetNS,'APP_MODULE');return TargetNS;}(ITSM.Agent.ConfigItem.Dashboard||{}));

var jscolor={dir:'',bindClass:'color',binding:true,preloading:true,install:function(){jscolor.addEvent(window,'load',jscolor.init);},init:function(){if(jscolor.binding){jscolor.bind();}
if(jscolor.preloading){jscolor.preload();}},getDir:function(){if(!jscolor.dir){var detected=jscolor.detectDir();jscolor.dir=detected!==false?detected:'jscolor/';}
return jscolor.dir;},detectDir:function(){var base=location.href;var e=document.getElementsByTagName('base');for(var i=0;i<e.length;i+=1){if(e[i].href){base=e[i].href;}}
var e=document.getElementsByTagName('script');for(var i=0;i<e.length;i+=1){if(e[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[i].src)){var src=new jscolor.URI(e[i].src);var srcAbs=src.toAbsolute(base);srcAbs.path=srcAbs.path.replace(/[^\/]+$/,'');srcAbs.query=null;srcAbs.fragment=null;return srcAbs.toString();}}
return false;},bind:function(){var matchClass=new RegExp('(^|\\s)('+jscolor.bindClass+')\\s*(\\{[^}]*\\})?','i');var e=document.getElementsByTagName('input');for(var i=0;i<e.length;i+=1){var m;if(!e[i].color&&e[i].className&&(m=e[i].className.match(matchClass))){var prop={};if(m[3]){try{prop=(new Function('return ('+m[3]+')'))();}catch(eInvalidProp){}}
e[i].color=new jscolor.color(e[i],prop);}}},preload:function(){for(var fn in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(fn)){jscolor.loadImage(fn);}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(filename){jscolor.imgRequire[filename]=true;},loadImage:function(filename){if(!jscolor.imgLoaded[filename]){jscolor.imgLoaded[filename]=new Image();jscolor.imgLoaded[filename].src=jscolor.getDir()+filename;}},fetchElement:function(mixed){return typeof mixed==='string'?document.getElementById(mixed):mixed;},addEvent:function(el,evnt,func){if(el.addEventListener){el.addEventListener(evnt,func,false);}else if(el.attachEvent){el.attachEvent('on'+evnt,func);}},fireEvent:function(el,evnt){if(!el){return;}
if(document.createEvent){var ev=document.createEvent('HTMLEvents');ev.initEvent(evnt,true,true);el.dispatchEvent(ev);}else if(document.createEventObject){var ev=document.createEventObject();el.fireEvent('on'+evnt,ev);}else if(el['on'+evnt]){el['on'+evnt]();}},getElementPos:function(e){var e1=e,e2=e;var x=0,y=0;if(e1.offsetParent){do{x+=e1.offsetLeft;y+=e1.offsetTop;}while(e1=e1.offsetParent);}
while((e2=e2.parentNode)&&e2.nodeName.toUpperCase()!=='BODY'){x-=e2.scrollLeft;y-=e2.scrollTop;}
return[x,y];},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight];},getRelMousePos:function(e){var x=0,y=0;if(!e){e=window.event;}
if(typeof e.offsetX==='number'){x=e.offsetX;y=e.offsetY;}else if(typeof e.layerX==='number'){x=e.layerX;y=e.layerY;}
return{x:x,y:y};},getViewPos:function(){if(typeof window.pageYOffset==='number'){return[window.pageXOffset,window.pageYOffset];}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop];}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop];}else{return[0,0];}},getViewSize:function(){if(typeof window.innerWidth==='number'){return[window.innerWidth,window.innerHeight];}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight];}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight];}else{return[0,0];}},URI:function(uri){this.scheme=null;this.authority=null;this.path='';this.query=null;this.fragment=null;this.parse=function(uri){var m=uri.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=m[3]?m[2]:null;this.authority=m[5]?m[6]:null;this.path=m[7];this.query=m[9]?m[10]:null;this.fragment=m[12]?m[13]:null;return this;};this.toString=function(){var result='';if(this.scheme!==null){result=result+this.scheme+':';}
if(this.authority!==null){result=result+'//'+this.authority;}
if(this.path!==null){result=result+this.path;}
if(this.query!==null){result=result+'?'+this.query;}
if(this.fragment!==null){result=result+'#'+this.fragment;}
return result;};this.toAbsolute=function(base){var base=new jscolor.URI(base);var r=this;var t=new jscolor.URI;if(base.scheme===null){return false;}
if(r.scheme!==null&&r.scheme.toLowerCase()===base.scheme.toLowerCase()){r.scheme=null;}
if(r.scheme!==null){t.scheme=r.scheme;t.authority=r.authority;t.path=removeDotSegments(r.path);t.query=r.query;}else{if(r.authority!==null){t.authority=r.authority;t.path=removeDotSegments(r.path);t.query=r.query;}else{if(r.path===''){t.path=base.path;if(r.query!==null){t.query=r.query;}else{t.query=base.query;}}else{if(r.path.substr(0,1)==='/'){t.path=removeDotSegments(r.path);}else{if(base.authority!==null&&base.path===''){t.path='/'+r.path;}else{t.path=base.path.replace(/[^\/]+$/,'')+r.path;}
t.path=removeDotSegments(t.path);}
t.query=r.query;}
t.authority=base.authority;}
t.scheme=base.scheme;}
t.fragment=r.fragment;return t;};function removeDotSegments(path){var out='';while(path){if(path.substr(0,3)==='../'||path.substr(0,2)==='./'){path=path.replace(/^\.+/,'').substr(1);}else if(path.substr(0,3)==='/./'||path==='/.'){path='/'+path.substr(3);}else if(path.substr(0,4)==='/../'||path==='/..'){path='/'+path.substr(4);out=out.replace(/\/?[^\/]*$/,'');}else if(path==='.'||path==='..'){path='';}else{var rm=path.match(/^\/?[^\/]*/)[0];path=path.substr(rm.length);out=out+rm;}}
return out;}
if(uri){this.parse(uri);}},color:function(target,prop){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=target;this.styleElement=target;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode='HSV';this.pickerPosition='bottom';this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText='Close';this.pickerButtonColor='ButtonText';this.pickerFace=10;this.pickerFaceColor='ThreeDFace';this.pickerBorder=1;this.pickerBorderColor='ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight';this.pickerInset=1;this.pickerInsetColor='ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow';this.pickerZIndex=10000;for(var p in prop){if(prop.hasOwnProperty(p)){this[p]=prop[p];}}
this.hidePicker=function(){if(isPickerOwner()){removePicker();}};this.showPicker=function(){if(!isPickerOwner()){var tp=jscolor.getElementPos(target);var ts=jscolor.getElementSize(target);var vp=jscolor.getViewPos();var vs=jscolor.getViewSize();var ps=getPickerDims(this);var a,b,c;switch(this.pickerPosition.toLowerCase()){case'left':a=1;b=0;c=-1;break;case'right':a=1;b=0;c=1;break;case'top':a=0;b=1;c=-1;break;default:a=0;b=1;c=1;break;}
var l=(ts[b]+ps[b])/2;if(!this.pickerSmartPosition){var pp=[tp[a],tp[b]+ts[b]-l+l*c];}else{var pp=[-vp[a]+tp[a]+ps[a]>vs[a]?(-vp[a]+tp[a]+ts[a]/2>vs[a]/2&&tp[a]+ts[a]-ps[a]>=0?tp[a]+ts[a]-ps[a]:tp[a]):tp[a],-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c>vs[b]?(-vp[b]+tp[b]+ts[b]/2>vs[b]/2&&tp[b]+ts[b]-l-l*c>=0?tp[b]+ts[b]-l-l*c:tp[b]+ts[b]-l+l*c):(tp[b]+ts[b]-l+l*c>=0?tp[b]+ts[b]-l+l*c:tp[b]+ts[b]-l-l*c)];}
drawPicker(pp[a],pp[b]);}};this.importColor=function(){if(!valueElement){this.exportColor();}else{if(!this.adjust){if(!this.fromString(valueElement.value,leaveValue)){styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage;styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;styleElement.style.color=styleElement.jscStyle.color;this.exportColor(leaveValue|leaveStyle);}}else if(!this.required&&/^\s*$/.test(valueElement.value)){valueElement.value='';styleElement.style.backgroundImage=styleElement.jscStyle.backgroundImage;styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor;styleElement.style.color=styleElement.jscStyle.color;this.exportColor(leaveValue|leaveStyle);}else if(this.fromString(valueElement.value)){}else{this.exportColor();}}};this.exportColor=function(flags){if(!(flags&leaveValue)&&valueElement){var value=this.toString();if(this.caps){value=value.toUpperCase();}
if(this.hash){value='#'+value;}
valueElement.value=value;}
if(!(flags&leaveStyle)&&styleElement){styleElement.style.backgroundImage="none";styleElement.style.backgroundColor='#'+this.toString();styleElement.style.color=0.213*this.rgb[0]+
0.715*this.rgb[1]+
0.072*this.rgb[2]<0.5?'#FFF':'#000';}
if(!(flags&leavePad)&&isPickerOwner()){redrawPad();}
if(!(flags&leaveSld)&&isPickerOwner()){redrawSld();}};this.fromHSV=function(h,s,v,flags){if(h!==null){h=Math.max(0.0,this.minH,Math.min(6.0,this.maxH,h));}
if(s!==null){s=Math.max(0.0,this.minS,Math.min(1.0,this.maxS,s));}
if(v!==null){v=Math.max(0.0,this.minV,Math.min(1.0,this.maxV,v));}
this.rgb=HSV_RGB(h===null?this.hsv[0]:(this.hsv[0]=h),s===null?this.hsv[1]:(this.hsv[1]=s),v===null?this.hsv[2]:(this.hsv[2]=v));this.exportColor(flags);};this.fromRGB=function(r,g,b,flags){if(r!==null){r=Math.max(0.0,Math.min(1.0,r));}
if(g!==null){g=Math.max(0.0,Math.min(1.0,g));}
if(b!==null){b=Math.max(0.0,Math.min(1.0,b));}
var hsv=RGB_HSV(r===null?this.rgb[0]:r,g===null?this.rgb[1]:g,b===null?this.rgb[2]:b);if(hsv[0]!==null){this.hsv[0]=Math.max(0.0,this.minH,Math.min(6.0,this.maxH,hsv[0]));}
if(hsv[2]!==0){this.hsv[1]=hsv[1]===null?null:Math.max(0.0,this.minS,Math.min(1.0,this.maxS,hsv[1]));}
this.hsv[2]=hsv[2]===null?null:Math.max(0.0,this.minV,Math.min(1.0,this.maxV,hsv[2]));var rgb=HSV_RGB(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=rgb[0];this.rgb[1]=rgb[1];this.rgb[2]=rgb[2];this.exportColor(flags);};this.fromString=function(hex,flags){var m=hex.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!m){return false;}else{if(m[1].length===6){this.fromRGB(parseInt(m[1].substr(0,2),16)/255,parseInt(m[1].substr(2,2),16)/255,parseInt(m[1].substr(4,2),16)/255,flags);}else{this.fromRGB(parseInt(m[1].charAt(0)+m[1].charAt(0),16)/255,parseInt(m[1].charAt(1)+m[1].charAt(1),16)/255,parseInt(m[1].charAt(2)+m[1].charAt(2),16)/255,flags);}
return true;}};this.toString=function(){return((0x100|Math.round(255*this.rgb[0])).toString(16).substr(1)+
(0x100|Math.round(255*this.rgb[1])).toString(16).substr(1)+
(0x100|Math.round(255*this.rgb[2])).toString(16).substr(1));};function RGB_HSV(r,g,b){var n=Math.min(Math.min(r,g),b);var v=Math.max(Math.max(r,g),b);var m=v-n;if(m===0){return[null,0,v];}
var h=r===n?3+(b-g)/m:(g===n?5+(r-b)/m:1+(g-r)/m);return[h===6?0:h,m/v,v];}
function HSV_RGB(h,s,v){if(h===null){return[v,v,v];}
var i=Math.floor(h);var f=i%2?h-i:1-(h-i);var m=v*(1-s);var n=v*(1-s*f);switch(i){case 6:case 0:return[v,n,m];case 1:return[n,v,m];case 2:return[m,v,n];case 3:return[m,n,v];case 4:return[n,m,v];case 5:return[v,m,n];}}
function removePicker(){delete jscolor.picker.owner;document.getElementsByTagName('body')[0].removeChild(jscolor.picker.boxB);}
function drawPicker(x,y){if(!jscolor.picker){jscolor.picker={box:document.createElement('div'),boxB:document.createElement('div'),pad:document.createElement('div'),padB:document.createElement('div'),padM:document.createElement('div'),sld:document.createElement('div'),sldB:document.createElement('div'),sldM:document.createElement('div'),btn:document.createElement('div'),btnS:document.createElement('span'),btnT:document.createTextNode(THIS.pickerCloseText)};for(var i=0,segSize=4;i<jscolor.images.sld[1];i+=segSize){var seg=document.createElement('div');seg.style.height=segSize+'px';seg.style.fontSize='1px';seg.style.lineHeight='0';jscolor.picker.sld.appendChild(seg);}
jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box);}
var p=jscolor.picker;p.box.onmouseup=p.box.onmouseout=function(){target.focus();};p.box.onmousedown=function(){abortBlur=true;};p.box.onmousemove=function(e){if(holdPad||holdSld){holdPad&&setPad(e);holdSld&&setSld(e);if(document.selection){document.selection.empty();}else if(window.getSelection){window.getSelection().removeAllRanges();}
dispatchImmediateChange();}};if('ontouchstart'in window){p.box.addEventListener('touchmove',function(e){var event={'offsetX':e.touches[0].pageX-touchOffset.X,'offsetY':e.touches[0].pageY-touchOffset.Y};if(holdPad||holdSld){holdPad&&setPad(event);holdSld&&setSld(event);dispatchImmediateChange();}
e.stopPropagation();e.preventDefault();},false);}
p.padM.onmouseup=p.padM.onmouseout=function(){if(holdPad){holdPad=false;jscolor.fireEvent(valueElement,'change');}};p.padM.onmousedown=function(e){switch(modeID){case 0:if(THIS.hsv[2]===0){THIS.fromHSV(null,null,1.0);};break;case 1:if(THIS.hsv[1]===0){THIS.fromHSV(null,1.0,null);};break;}
holdSld=false;holdPad=true;setPad(e);dispatchImmediateChange();};if('ontouchstart'in window){p.padM.addEventListener('touchstart',function(e){touchOffset={'X':e.target.offsetParent.offsetLeft,'Y':e.target.offsetParent.offsetTop};this.onmousedown({'offsetX':e.touches[0].pageX-touchOffset.X,'offsetY':e.touches[0].pageY-touchOffset.Y});});}
p.sldM.onmouseup=p.sldM.onmouseout=function(){if(holdSld){holdSld=false;jscolor.fireEvent(valueElement,'change');}};p.sldM.onmousedown=function(e){holdPad=false;holdSld=true;setSld(e);dispatchImmediateChange();};if('ontouchstart'in window){p.sldM.addEventListener('touchstart',function(e){touchOffset={'X':e.target.offsetParent.offsetLeft,'Y':e.target.offsetParent.offsetTop};this.onmousedown({'offsetX':e.touches[0].pageX-touchOffset.X,'offsetY':e.touches[0].pageY-touchOffset.Y});});}
var dims=getPickerDims(THIS);p.box.style.width=dims[0]+'px';p.box.style.height=dims[1]+'px';p.boxB.style.position='absolute';p.boxB.style.clear='both';p.boxB.style.left=x+'px';p.boxB.style.top=y+'px';p.boxB.style.zIndex=THIS.pickerZIndex;p.boxB.style.border=THIS.pickerBorder+'px solid';p.boxB.style.borderColor=THIS.pickerBorderColor;p.boxB.style.background=THIS.pickerFaceColor;p.pad.style.width=jscolor.images.pad[0]+'px';p.pad.style.height=jscolor.images.pad[1]+'px';p.padB.style.position='absolute';p.padB.style.left=THIS.pickerFace+'px';p.padB.style.top=THIS.pickerFace+'px';p.padB.style.border=THIS.pickerInset+'px solid';p.padB.style.borderColor=THIS.pickerInsetColor;p.padM.style.position='absolute';p.padM.style.left='0';p.padM.style.top='0';p.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+'px';p.padM.style.height=p.box.style.height;p.padM.style.cursor='crosshair';p.sld.style.overflow='hidden';p.sld.style.width=jscolor.images.sld[0]+'px';p.sld.style.height=jscolor.images.sld[1]+'px';p.sldB.style.display=THIS.slider?'block':'none';p.sldB.style.position='absolute';p.sldB.style.right=THIS.pickerFace+'px';p.sldB.style.top=THIS.pickerFace+'px';p.sldB.style.border=THIS.pickerInset+'px solid';p.sldB.style.borderColor=THIS.pickerInsetColor;p.sldM.style.display=THIS.slider?'block':'none';p.sldM.style.position='absolute';p.sldM.style.right='0';p.sldM.style.top='0';p.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+'px';p.sldM.style.height=p.box.style.height;try{p.sldM.style.cursor='pointer';}catch(eOldIE){p.sldM.style.cursor='hand';}
function setBtnBorder(){var insetColors=THIS.pickerInsetColor.split(/\s+/);var pickerOutsetColor=insetColors.length<2?insetColors[0]:insetColors[1]+' '+insetColors[0]+' '+insetColors[0]+' '+insetColors[1];p.btn.style.borderColor=pickerOutsetColor;}
p.btn.style.display=THIS.pickerClosable?'block':'none';p.btn.style.position='absolute';p.btn.style.left=THIS.pickerFace+'px';p.btn.style.bottom=THIS.pickerFace+'px';p.btn.style.padding='0 15px';p.btn.style.height='18px';p.btn.style.border=THIS.pickerInset+'px solid';setBtnBorder();p.btn.style.color=THIS.pickerButtonColor;p.btn.style.font='12px sans-serif';p.btn.style.textAlign='center';try{p.btn.style.cursor='pointer';}catch(eOldIE){p.btn.style.cursor='hand';}
p.btn.onmousedown=function(){THIS.hidePicker();};p.btnS.style.lineHeight=p.btn.style.height;switch(modeID){case 0:var padImg='hs.png';break;case 1:var padImg='hv.png';break;}
p.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";p.padM.style.backgroundRepeat="no-repeat";p.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";p.sldM.style.backgroundRepeat="no-repeat";p.pad.style.backgroundImage="url('"+jscolor.getDir()+padImg+"')";p.pad.style.backgroundRepeat="no-repeat";p.pad.style.backgroundPosition="0 0";redrawPad();redrawSld();jscolor.picker.owner=THIS;document.getElementsByTagName('body')[0].appendChild(p.boxB);}
function getPickerDims(o){var dims=[2*o.pickerInset+2*o.pickerFace+jscolor.images.pad[0]+
(o.slider?2*o.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),o.pickerClosable?4*o.pickerInset+3*o.pickerFace+jscolor.images.pad[1]+o.pickerButtonHeight:2*o.pickerInset+2*o.pickerFace+jscolor.images.pad[1]];return dims;}
function redrawPad(){switch(modeID){case 0:var yComponent=1;break;case 1:var yComponent=2;break;}
var x=Math.round((THIS.hsv[0]/6)*(jscolor.images.pad[0]-1));var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(THIS.pickerFace+THIS.pickerInset+x-Math.floor(jscolor.images.cross[0]/2))+'px '+
(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.cross[1]/2))+'px';var seg=jscolor.picker.sld.childNodes;switch(modeID){case 0:var rgb=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1);for(var i=0;i<seg.length;i+=1){seg[i].style.backgroundColor='rgb('+
(rgb[0]*(1-i/seg.length)*100)+'%,'+
(rgb[1]*(1-i/seg.length)*100)+'%,'+
(rgb[2]*(1-i/seg.length)*100)+'%)';}
break;case 1:var rgb,s,c=[THIS.hsv[2],0,0];var i=Math.floor(THIS.hsv[0]);var f=i%2?THIS.hsv[0]-i:1-(THIS.hsv[0]-i);switch(i){case 6:case 0:rgb=[0,1,2];break;case 1:rgb=[1,0,2];break;case 2:rgb=[2,0,1];break;case 3:rgb=[2,1,0];break;case 4:rgb=[1,2,0];break;case 5:rgb=[0,2,1];break;}
for(var i=0;i<seg.length;i+=1){s=1-1/(seg.length-1)*i;c[1]=c[0]*(1-s*f);c[2]=c[0]*(1-s);seg[i].style.backgroundColor='rgb('+
(c[rgb[0]]*100)+'%,'+
(c[rgb[1]]*100)+'%,'+
(c[rgb[2]]*100)+'%)';}
break;}}
function redrawSld(){switch(modeID){case 0:var yComponent=2;break;case 1:var yComponent=1;break;}
var y=Math.round((1-THIS.hsv[yComponent])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition='0 '+(THIS.pickerFace+THIS.pickerInset+y-Math.floor(jscolor.images.arrow[1]/2))+'px';}
function isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===THIS;}
function blurTarget(){if(valueElement===target){THIS.importColor();}
if(THIS.pickerOnfocus){THIS.hidePicker();}}
function blurValue(){if(valueElement!==target){THIS.importColor();}}
function setPad(e){var mpos=jscolor.getRelMousePos(e);var x=mpos.x-THIS.pickerFace-THIS.pickerInset;var y=mpos.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),1-y/(jscolor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(x*(6/(jscolor.images.pad[0]-1)),null,1-y/(jscolor.images.pad[1]-1),leaveSld);break;}}
function setSld(e){var mpos=jscolor.getRelMousePos(e);var y=mpos.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-y/(jscolor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-y/(jscolor.images.sld[1]-1),null,leavePad);break;}}
function dispatchImmediateChange(){if(THIS.onImmediateChange){var callback;if(typeof THIS.onImmediateChange==='string'){callback=new Function(THIS.onImmediateChange);}else{callback=THIS.onImmediateChange;}
callback.call(THIS);}}
var THIS=this;var modeID=this.pickerMode.toLowerCase()==='hvs'?1:0;var abortBlur=false;var
valueElement=jscolor.fetchElement(this.valueElement),styleElement=jscolor.fetchElement(this.styleElement);var
holdPad=false,holdSld=false,touchOffset={};var
leaveValue=1<<0,leaveStyle=1<<1,leavePad=1<<2,leaveSld=1<<3;jscolor.addEvent(target,'focus',function(){if(THIS.pickerOnfocus){THIS.showPicker();}});jscolor.addEvent(target,'blur',function(){if(!abortBlur){window.setTimeout(function(){abortBlur||blurTarget();abortBlur=false;},0);}else{abortBlur=false;}});if(valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue);dispatchImmediateChange();};jscolor.addEvent(valueElement,'keyup',updateField);jscolor.addEvent(valueElement,'input',updateField);jscolor.addEvent(valueElement,'blur',blurValue);valueElement.setAttribute('autocomplete','off');}
if(styleElement){styleElement.jscStyle={backgroundImage:styleElement.style.backgroundImage,backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color};}
switch(modeID){case 0:jscolor.requireImage('hs.png');break;case 1:jscolor.requireImage('hv.png');break;}
jscolor.requireImage('cross.gif');jscolor.requireImage('arrow.gif');this.importColor();}};
"use strict";var ITSM=ITSM||{};ITSM.Agent=ITSM.Agent||{};ITSM.Agent.CustomerSearch=(function(TargetNS){TargetNS.Init=function($Element){if(isJQueryObject($Element)){Core.UI.Autocomplete.Init($Element,function(Request,Response){var URL=Core.Config.Get('Baselink'),Data={Action:'AgentCustomerSearch',Term:Request.term,MaxResults:Core.UI.Autocomplete.GetConfig('MaxResultsDisplayed')};$Element.data('AutoCompleteXHR',Core.AJAX.FunctionCall(URL,Data,function(Result){var ValueData=[];$Element.removeData('AutoCompleteXHR');$.each(Result,function(){ValueData.push({label:this.Label+" ("+this.Value+")",value:this.Value,show:this.Label});});Response(ValueData);}));},function(Event,UI){$Element.val(UI.item.show);$('#'+Core.App.EscapeSelector($Element.attr('id'))+'Selected').val(UI.item.value);return false;},'CustomerSearch');}
$(window).on('beforeunload.CustomerSearch',function(){$('#'+Core.App.EscapeSelector($Element.attr('id'))+'Selected').val('');return;});};return TargetNS;}(ITSM.Agent.CustomerSearch||{}));

"use strict";var FAQ=FAQ||{};FAQ.Agent=FAQ.Agent||{};FAQ.Agent.TicketCompose=(function(TargetNS){TargetNS.InitFAQTicketCompose=function($Element){var InstanceName=$Element.attr('id'),EditorGotFocus=false;function GetCursorPosition(){var Element=$Element[0],Range,TextRange,TextRangeDuplicate,StartRange=0,EndRange=0;if(Element.selectionStart){StartRange=Element.selectionStart;EndRange=Element.selectionEnd;}
else if(document.selection){Range=document.selection.createRange().duplicate();TextRange=Element.createTextRange();TextRangeDuplicate=TextRange.duplicate();TextRange.moveToBookmark(Range.getBookmark());TextRangeDuplicate.setEndPoint('EndToStart',TextRange);StartRange=EndRange=TextRangeDuplicate.text.length;}
$Element.data('Cursor',{StartRange:StartRange,EndRange:EndRange});}
if(typeof CKEDITOR!=='undefined'&&CKEDITOR&&CKEDITOR.instances.RichText){CKEDITOR.instances[InstanceName].on('contentDom',function(){CKEDITOR.instances[InstanceName].document.on('click',function(){if(EditorGotFocus){$('#'+InstanceName).data('RTECursor',CKEDITOR.instances[InstanceName].getSelection().getRanges());}});CKEDITOR.instances[InstanceName].document.on('keyup',function(){if(EditorGotFocus){$('#'+InstanceName).data('RTECursor',CKEDITOR.instances[InstanceName].getSelection().getRanges());}});});CKEDITOR.instances[InstanceName].on('focus',function(){var RTECursorRange=$('#'+InstanceName).data('RTECursor'),Selection;EditorGotFocus=true;if(RTECursorRange){Selection=new CKEDITOR.dom.selection(CKEDITOR.instances[InstanceName].document);Selection.selectRanges(RTECursorRange);$('#'+InstanceName).data('RTECursor',undefined);}});}
else{$Element.unbind('click.FAQComposing').bind('click.FAQComposing',function(){GetCursorPosition();});$Element.unbind('keyup.FAQComposing').bind('keyup.FAQComposing',function(){GetCursorPosition();});}};function SetData(FAQTitle,FAQContent,FAQHTMLContent){var $ParentSubject=$('#Subject',parent.document),$ParentBody=$('#RichText',parent.document),ParentBody=$ParentBody[0],ParentBodyValue=$ParentBody.val(),Range,StartRange=0,EndRange=0,NewPosition=0;if($('#Subject',parent.document).length&&$('#RichText',parent.document).length){if(Core.Config.Get('TicketCompose.UpdateArticleSubject')==='1'&&$('#UpdateArticleSubjectOption').prop('checked')){if($ParentSubject.val()===''){$ParentSubject.val(FAQTitle);}
else{$ParentSubject.val($ParentSubject.val()+' - '+FAQTitle);}}
if(parent.CKEDITOR&&parent.CKEDITOR.instances.RichText){parent.CKEDITOR.instances.RichText.focus();window.setTimeout(function(){try{parent.CKEDITOR.instances.RichText.insertHtml(FAQHTMLContent);}
catch(Error){$.noop();}
window.setTimeout(function(){parent.Core.UI.Dialog.CloseDialog($('.Dialog',parent.document));},50);},100);return;}
else{if(parent.$('#RichText',parent.document).data('Cursor')){StartRange=parent.$('#RichText',parent.document).data('Cursor').StartRange;EndRange=parent.$('#RichText',parent.document).data('Cursor').EndRange;}
$ParentBody.val(ParentBodyValue.substr(0,StartRange)+FAQContent+ParentBodyValue.substr(EndRange,ParentBodyValue.length));NewPosition=StartRange+FAQContent.length;if(ParentBody.selectionStart){ParentBody.selectionStart=NewPosition;ParentBody.selectionEnd=NewPosition;}
else if(document.selection){Range=document.selection.createRange().duplicate();Range.moveStart('character',NewPosition);Range.select();}
parent.Core.UI.Dialog.CloseDialog($('.Dialog',parent.document));return;}}
else{alert('$JSText{"This window must be called from compose window"}');parent.Core.UI.Dialog.CloseDialog($('.Dialog',parent.document));return;}}
TargetNS.SetText=function(InsertText,InsertLink){var FAQTitle=$('#FAQTitle').val(),FAQContent='',FAQHTMLContent='',FAQLink;if(InsertText===1){FAQContent=$('#FAQBody').val();FAQHTMLContent=FAQContent;}
else{FAQContent='';FAQHTMLContent=FAQContent;}
if(InsertLink===1){FAQLink=$('#FAQPublicLink').val();FAQContent=FAQContent+'\n'+FAQLink;FAQHTMLContent=FAQHTMLContent+'<br/>'+'<a href="'+FAQLink+'">'+FAQTitle+'</a>';}
SetData(FAQTitle,FAQContent,FAQHTMLContent);};TargetNS.SetFullFAQ=function(InsertText,InsertLink){parent.Core.AJAX.FunctionCall(parent.Core.Config.Get('Baselink'),{Action:'AgentFAQRichText',ItemID:$('input[name=FAQID]').val(),FormID:parent.$('input[name=FormID]').val()},function(Response){var FAQTitle=Response.FAQTitle,FAQContent='',FAQHTMLContent='',FAQLink;if(InsertText===1){FAQContent=Response.FAQContent;FAQHTMLContent=Response.FAQHTMLContent;}
if(InsertLink===1){FAQLink=$('#FAQPublicLink').val();FAQContent=FAQContent+'\n'+FAQLink;FAQHTMLContent=FAQHTMLContent+'<br/><br/>'+'<a href="'+FAQLink+'">'+FAQTitle+'</a>';}
$('#FileUpload',parent.document).parent().siblings('li').remove();$(Response.TicketAttachments).each(function(){$('#FileUpload',parent.document).before('<li>'+this.Filename+' ('+this.Filesize+')<button type="submit" id="AttachmentDelete'+this.FileID+'" name="AttachmentDelete'+this.FileID+'" value="Delete" class="SpacingLeft">'+Response.Localization.Delete+'</button></li>');});SetData(FAQTitle,FAQContent,FAQHTMLContent);},'json');};return TargetNS;}(FAQ.Agent.TicketCompose||{}));

